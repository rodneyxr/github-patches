[
  {
    "name": "Null Pointer Ticking Entity when throwing Redstone Grenade",
    "url": "https://github.com/CyclopsMC/EvilCraft/issues/401",
    "description": "http://pastebin.com/K235TY5h\nEvilcraft 1.9.0.10.0\nCyclopsCore: 1.9-0.6.0\n\nJust threw it at the ground and server crashed.\n",
    "keywords": [
      "0"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/CyclopsMC/EvilCraft/commit/a8ede29214c6c277dfbd3694c40413e0dec2cfca",
      "files": [
        {
          "file_name": "build.properties",
          "patch": "@@ -2,7 +2,7 @@ mod_version\u003d0.10.1\n minecraft_version\u003d1.9.4\n forge_version\u003d12.17.0.1909-1.9.4\n mcp_mappings_version\u003dsnapshot_20160516\n-cyclopscore_version\u003d0.6.1-332\n+cyclopscore_version\u003d0.6.2-336\n release_type\u003drelease\n \n waila_version\u003d1.7.0-B3_1.9.4"
        },
        {
          "file_name": "gradle/wrapper/gradle-wrapper.properties",
          "patch": "@@ -3,4 +3,4 @@ distributionBase\u003dGRADLE_USER_HOME\n distributionPath\u003dwrapper/dists\n zipStoreBase\u003dGRADLE_USER_HOME\n zipStorePath\u003dwrapper/dists\n-distributionUrl\u003dhttp\\://services.gradle.org/distributions/gradle-2.12-all.zip\n+distributionUrl\u003dhttp\\://services.gradle.org/distributions/gradle-2.13-all.zip"
        },
        {
          "file_name": "src/main/java/org/cyclops/evilcraft/entity/item/EntityRedstoneGrenade.java",
          "patch": "@@ -56,7 +56,7 @@ public EntityRedstoneGrenade(World world, double x, double y, double z) {\n     protected void onImpact(RayTraceResult pos) {\n         BlockPos blockPos \u003d pos.getBlockPos();\n \n-        if (worldObj.isAirBlock(blockPos.add(pos.sideHit.getDirectionVec()))) {\n+        if (pos.sideHit !\u003d null \u0026\u0026 worldObj.isAirBlock(blockPos.add(pos.sideHit.getDirectionVec()))) {\n \t\t\tif(Configs.isEnabled(InvisibleRedstoneBlockConfig.class)) {\n \t            worldObj.setBlockState(blockPos.add(pos.sideHit.getDirectionVec()), InvisibleRedstoneBlock.getInstance().getDefaultState());\n \t\t\t}"
        }
      ]
    }
  },
  {
    "name": "sql explorer null pointers when you use a join condition",
    "url": "https://github.com/JumpMind/metl/issues/419",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/JumpMind/metl/commit/fa49285bae675e32b186bb0b2c3c1526ccada1a6",
      "files": [
        {
          "file_name": "metl-assemble/gradle.properties",
          "patch": "@@ -45,5 +45,4 @@ kxmlVersion\u003d2.3.0\n vaadinVersion\u003d7.6.6\n xmlunitVersion\u003d1.6\n activeMqVersion\u003d5.13.2\n-sqlExplorerVersion\u003d1.3.137\n-\n+sqlExplorerVersion\u003d1.3.138\n\\ No newline at end of file"
        }
      ]
    }
  },
  {
    "name": "Null pointer exception when compiling project heirarchy",
    "url": "https://github.com/google/closure-compiler/issues/652",
    "description": "Error:\n\n```\nError: Command failed: java.lang.NullPointerException\n    at com.google.javascript.jscomp.parsing.NewIRFactory.shouldAttachJSDocHere(NewIRFactory.java:625)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.handleJsDoc(NewIRFactory.java:618)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.transform(NewIRFactory.java:690)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.access$300(NewIRFactory.java:121)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processThrowStatement(NewIRFactory.java:1759)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processThrowStatement(NewIRFactory.java:909)\n    at com.google.javascript.jscomp.parsing.NewTypeSafeDispatcher.process(NewTypeSafeDispatcher.java:210)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.justTransform(NewIRFactory.java:906)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.transform(NewIRFactory.java:691)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.access$300(NewIRFactory.java:121)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processBlock(NewIRFactory.java:1039)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processBlock(NewIRFactory.java:909)\n    at com.google.javascript.jscomp.parsing.NewTypeSafeDispatcher.process(NewTypeSafeDispatcher.java:144)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.justTransform(NewIRFactory.java:906)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.transform(NewIRFactory.java:691)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.transformBlock(NewIRFactory.java:531)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.access$800(NewIRFactory.java:121)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processIfStatement(NewIRFactory.java:1303)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processIfStatement(NewIRFactory.java:909)\n    at com.google.javascript.jscomp.parsing.NewTypeSafeDispatcher.process(NewTypeSafeDispatcher.java:180)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.justTransform(NewIRFactory.java:906)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.transform(NewIRFactory.java:691)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.access$300(NewIRFactory.java:121)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processBlock(NewIRFactory.java:1039)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processBlock(NewIRFactory.java:909)\n    at com.google.javascript.jscomp.parsing.NewTypeSafeDispatcher.process(NewTypeSafeDispatcher.java:144)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.justTransform(NewIRFactory.java:906)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.transform(NewIRFactory.java:691)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.transformBlock(NewIRFactory.java:531)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.access$800(NewIRFactory.java:121)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processTryStatement(NewIRFactory.java:1765)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processTryStatement(NewIRFactory.java:909)\n    at com.google.javascript.jscomp.parsing.NewTypeSafeDispatcher.process(NewTypeSafeDispatcher.java:212)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.justTransform(NewIRFactory.java:906)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.transform(NewIRFactory.java:691)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.access$300(NewIRFactory.java:121)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processBlock(NewIRFactory.java:1039)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processBlock(NewIRFactory.java:909)\n    at com.google.javascript.jscomp.parsing.NewTypeSafeDispatcher.process(NewTypeSafeDispatcher.java:144)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.justTransform(NewIRFactory.java:906)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.transform(NewIRFactory.java:691)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.access$300(NewIRFactory.java:121)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processFunction(NewIRFactory.java:1235)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processFunction(NewIRFactory.java:909)\n    at com.google.javascript.jscomp.parsing.NewTypeSafeDispatcher.process(NewTypeSafeDispatcher.java:172)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.justTransform(NewIRFactory.java:906)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.transform(NewIRFactory.java:691)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.access$300(NewIRFactory.java:121)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processBinaryExpression(NewIRFactory.java:1312)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processBinaryExpression(NewIRFactory.java:909)\n    at com.google.javascript.jscomp.parsing.NewTypeSafeDispatcher.process(NewTypeSafeDispatcher.java:132)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.justTransform(NewIRFactory.java:906)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.transform(NewIRFactory.java:691)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.access$300(NewIRFactory.java:121)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processExpressionStatement(NewIRFactory.java:1103)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processExpressionStatement(NewIRFactory.java:909)\n    at com.google.javascript.jscomp.parsing.NewTypeSafeDispatcher.process(NewTypeSafeDispatcher.java:162)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.justTransform(NewIRFactory.java:906)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.transform(NewIRFactory.java:691)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.access$300(NewIRFactory.java:121)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processAstRoot(NewIRFactory.java:993)\n    at com.google.javascript.jscomp.parsing.NewIRFactory$TransformDispatcher.processAstRoot(NewIRFactory.java:909)\n    at com.google.javascript.jscomp.parsing.NewTypeSafeDispatcher.process(NewTypeSafeDispatcher.java:204)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.justTransform(NewIRFactory.java:906)\n    at com.google.javascript.jscomp.parsing.NewIRFactory.transformTree(NewIRFactory.java:291)\n    at com.google.javascript.jscomp.parsing.ParserRunner.parse(ParserRunner.java:106)\n    at com.google.javascript.jscomp.JsAst.parse(JsAst.java:84)\n    at com.google.javascript.jscomp.JsAst.getAstRoot(JsAst.java:50)\n    at com.google.javascript.jscomp.CompilerInput.getAstRoot(CompilerInput.java:118)\n    at com.google.javascript.jscomp.Compiler.hoistNoCompileFiles(Compiler.java:1496)\n    at com.google.javascript.jscomp.Compiler.parseInputs(Compiler.java:1400)\n    at com.google.javascript.jscomp.Compiler.parse(Compiler.java:771)\n    at com.google.javascript.jscomp.Compiler.compileInternal(Compiler.java:726)\n    at com.google.javascript.jscomp.Compiler.access$000(Compiler.java:92)\n    at com.google.javascript.jscomp.Compiler$3.call(Compiler.java:638)\n    at com.google.javascript.jscomp.Compiler$3.call(Compiler.java:635)\n    at com.google.javascript.jscomp.Compiler$4.call(Compiler.java:682)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:262)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:745)\n\n    at ChildProcess.exithandler (child_process.js:648:15)\n    at ChildProcess.emit (events.js:98:17)\n    at maybeClose (child_process.js:756:16)\n    at Process.ChildProcess._handle.onexit (child_process.js:823:5)\n```\n\nYou can pull the code which produces the error from here:\nhttps://github.com/kvanberendonck/firestorm.js/tree/715e57aeb878e58b87bc4eacb7c7f341b47161a1\n\nUsing closure compiler latest.\n",
    "keywords": [
      "com",
      "threadpoolexecutor",
      "newirfactory java:691",
      "newtypesafedispatcher process",
      "java util",
      "java:1039",
      "concurrent",
      "processblock",
      "run",
      "error",
      "parsing",
      "jscomp parsing",
      "newirfactory justtransform",
      "childprocess",
      "transform",
      "jsast",
      "java",
      "newirfactory",
      "newirfactory java:906",
      "javascript jscomp",
      "google javascript",
      "newirfactory java:909",
      "newirfactory$transformdispatcher processblock",
      "compiler",
      "java:121",
      "newtypesafedispatcher",
      "java:144",
      "java:906",
      "process",
      "access$300",
      "newirfactory java:121",
      "newirfactory java:1039",
      "google",
      "parse",
      "java:909",
      "newirfactory$transformdispatcher",
      "javascript",
      "java:691",
      "call",
      "newirfactory transform",
      "justtransform",
      "util",
      "newirfactory access$300",
      "com google",
      "newtypesafedispatcher java:144",
      "child_process",
      "jscomp"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/google/closure-compiler/commit/aac5d11480a0ed3f37919c23a5d3cc210e534bd5",
      "files": [
        {
          "file_name": "src/com/google/javascript/jscomp/parsing/parser/Parser.java",
          "patch": "@@ -1224,7 +1224,9 @@ private ParseTree parseThrowStatement() {\n     SourcePosition start \u003d getTreeStartLocation();\n     eat(TokenType.THROW);\n     ParseTree value \u003d null;\n-    if (!peekImplicitSemiColon()) {\n+    if (peekImplicitSemiColon()) {\n+      reportError(\"semicolon/newline not allowed after \u0027throw\u0027\");\n+    } else {\n       value \u003d parseExpression();\n     }\n     eatPossibleImplicitSemiColon();"
        },
        {
          "file_name": "test/com/google/javascript/jscomp/parsing/NewParserTest.java",
          "patch": "@@ -162,6 +162,14 @@ public void testReturn() {\n     parseError(\"return 1;\", UNEXPECTED_RETURN);\n   }\n \n+  public void testThrow() {\n+    parse(\"throw Error();\");\n+    parse(\"throw new Error();\");\n+    parse(\"throw \u0027\u0027;\");\n+    parseError(\"throw;\", \"semicolon/newline not allowed after \u0027throw\u0027\");\n+    parseError(\"throw\\nError();\", \"semicolon/newline not allowed after \u0027throw\u0027\");\n+  }\n+\n   public void testLabel1() {\n     parse(\"foo:bar\");\n   }"
        }
      ]
    }
  },
  {
    "name": "Null Pointer exception assertArrayEquals with no message.",
    "url": "https://github.com/junit-team/junit4/issues/1178",
    "description": "When assertArrayEquals (at least for Boolean[]) fails the assert, it throws a null pointer exception looking for a message.  This is, of course, when using the prototype that has no message.  You\u0027ll still get the line number for the failure, you\u0027ll still probably just debug focused test method, and be on your merry way, but just technically it\u0027s not quite the best/correct behavior.\n\nThanks!\n\nUpdate: this is for 4.12\n",
    "keywords": [
      "message"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/junit-team/junit4/commit/e6a20043db694056ac00456f6076091012ecba87",
      "files": [
        {
          "file_name": "src/main/java/org/junit/internal/ArrayComparisonFailure.java",
          "patch": "@@ -16,11 +16,12 @@\n \n     /*\n      * We have to use the f prefix until the next major release to ensure\n-     * serialization compatibility. \n+     * serialization compatibility.\n      * See https://github.com/junit-team/junit4/issues/976\n      */\n     private final List\u003cInteger\u003e fIndices \u003d new ArrayList\u003cInteger\u003e();\n     private final String fMessage;\n+    private final AssertionError fCause;\n \n     /**\n      * Construct a new \u003ccode\u003eArrayComparisonFailure\u003c/code\u003e with an error text and the array\u0027s\n@@ -32,7 +33,8 @@\n      */\n     public ArrayComparisonFailure(String message, AssertionError cause, int index) {\n         this.fMessage \u003d message;\n-        initCause(cause);\n+        this.fCause \u003d cause;\n+        initCause(fCause);\n         addDimension(index);\n     }\n \n@@ -41,6 +43,11 @@ public void addDimension(int index) {\n     }\n \n     @Override\n+    public synchronized Throwable getCause() {\n+        return super.getCause() \u003d\u003d null ? fCause : super.getCause();\n+    }\n+\n+    @Override\n     public String getMessage() {\n         StringBuilder sb \u003d new StringBuilder();\n         if (fMessage !\u003d null) {"
        },
        {
          "file_name": "src/test/java/org/junit/internal/AllInternalTests.java",
          "patch": "@@ -16,7 +16,8 @@\n         FailOnTimeoutTest.class,\n         MethodSorterTest.class,\n         StacktracePrintingMatcherTest.class,\n-        ThrowableCauseMatcherTest.class\n+        ThrowableCauseMatcherTest.class,\n+        ArrayComparisonFailureTest.class\n })\n public class AllInternalTests {\n }"
        },
        {
          "file_name": "src/test/java/org/junit/internal/ArrayComparisonFailureTest.java",
          "patch": "@@ -0,0 +1,68 @@\n+package org.junit.internal;\n+\n+import org.junit.Test;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.ObjectInputStream;\n+\n+import static org.junit.Assert.assertArrayEquals;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.fail;\n+\n+public class ArrayComparisonFailureTest {\n+\n+    private static final String ARRAY_COMPARISON_FAILURE_411 \u003d \"arrayComparisonFailure_411\";\n+    private static final String ARRAY_COMPARISON_FAILURE_412 \u003d \"arrayComparisonFailure_412\";\n+\n+    /*\n+        Test compatibility of older versions of ArrayComparisonFailure\n+        Setup:\n+        - checkout prior versions of the codebase (r4.11, r4.12 in this case)\n+        - catch the exception resulting from:\n+            assertArrayEquals(new int[]{0, 1}, new int[]{0, 5});\n+        - serialize the resulting exception to a file, moving into the test/resources path\n+            Ex., for v4.11\u0027s resulting exception {@link org/junit/internal/arrayComparisonFailure_411}\n+        Current unit test:\n+        - deserialize the above files casting it to the current version of the class\n+            (catches any forward incompatibility with missing fields)\n+        - assert the results from existing methods: getCause(), toString() -\u003e getMessage()\n+            (catches incompatible usages of fields)\n+\n+        This does not test if an instance of the current version of the class is able to deserialize to a previous ver.\n+     */\n+\n+    @Test\n+    public void classShouldAccept411Version() throws Exception {\n+        assertFailureSerializableFromOthers(ARRAY_COMPARISON_FAILURE_411);\n+    }\n+\n+    @Test\n+    public void classShouldAccept412Version() throws Exception {\n+        assertFailureSerializableFromOthers(ARRAY_COMPARISON_FAILURE_412);\n+    }\n+\n+    private void assertFailureSerializableFromOthers(String failureFileName) throws IOException,\n+            ClassNotFoundException {\n+        try {\n+            assertArrayEquals(new int[]{0, 1}, new int[]{0, 5});\n+            fail();\n+        } catch (ArrayComparisonFailure e) {\n+            ArrayComparisonFailure arrayComparisonFailureFromFile \u003d deserializeFailureFromFile(failureFileName);\n+            assertNotNull(\"ArrayComparisonFailure.getCause() should fallback to the deprecated fCause field\"\n+                            + \" for compatibility with older versions of junit4 that didn\u0027t use Throwable.initCause().\",\n+                    arrayComparisonFailureFromFile.getCause());\n+            assertEquals(e.getCause().toString(), arrayComparisonFailureFromFile.getCause().toString());\n+            assertEquals(e.toString(), arrayComparisonFailureFromFile.toString());\n+        }\n+    }\n+\n+    private ArrayComparisonFailure deserializeFailureFromFile(String fileName) throws IOException,\n+            ClassNotFoundException {\n+        InputStream resource \u003d getClass().getResourceAsStream(fileName);\n+        ObjectInputStream objectInputStream \u003d new ObjectInputStream(resource);\n+        return (ArrayComparisonFailure) objectInputStream.readObject();\n+    }\n+\n+}\n\\ No newline at end of file"
        },
        {
          "file_name": "src/test/resources/org/junit/internal/arrayComparisonFailure_411"
        },
        {
          "file_name": "src/test/resources/org/junit/internal/arrayComparisonFailure_412"
        }
      ]
    }
  },
  {
    "name": "Null Pointer App Crash",
    "url": "https://github.com/itachi1706/HypixelStatistics/issues/12",
    "description": "Logcat Log:\nD/Player  (22558): Found player corruptgamingmc\nD/Player  (22558): Found player blindedbyfailure\nD/Player  (22558): Found player potatotoes\nD/Player  (22558): Found player tristan1o1\nD/Player  (22558): Found player deathdude921\nD/Player  (22558): Found player brigboy565\nD/Player  (22558): Found player itspotato\nD/Player  (22558): Found player mr_nativ\nD/Player  (22558): Found player novacx\nD/Player  (22558): Found player philipk401\nD/Player  (22558): Found player virrex\nD/Player  (22558): Found player liamcarsoncoyb\nD/Player  (22558): Found player ra0ne\nD/Player  (22558): Found player gwn_sidney\nD/Player  (22558): Found player alonecr4ft\nD/Player  (22558): Found player naybelline\nD/Player  (22558): Found player itz_omg\nD/Player  (22558): Found player discoskyvenom\nD/Player  (22558): Found player corne_dj\nD/Player  (22558): Found player mckda\nD/Player  (22558): Found player bds0213\nD/Player  (22558): Found player sirvulture\nD/Player  (22558): Found player **extra**\nD/Player  (22558): Found player talbert21\nD/Player  (22558): Found player oscarofminecraft\nD/Player  (22558): Found player libert_games\nD/Player  (22558): Found player prometheus1221\nD/Player  (22558): Found player fivan2\nD/Player  (22558): Found player red1eye\nD/Player  (22558): Found player albert060889h\nD/Player  (22558): Found player gentster1\nD/Player  (22558): Found player rayray910\nD/Player  (22558): Found player razorspadee\nD/Player  (22558): Found player anderswill\nD/Player  (22558): Found player grantthegreat100\nD/Player  (22558): Found player megatrev13\nD/Player  (22558): Found player silvakevin54\nD/Player  (22558): Found player blammer122\nD/Player  (22558): Found player ma_ta_ta\nD/Player  (22558): Found player fafuni\nD/Player  (22558): Found player win4win\nD/Player  (22558): Found player thehipster15\nD/Player  (22558): Found player rezid_\nD/Player  (22558): Found player xxomega_cuberxx\nD/Player  (22558): Found player lbfelipelb\nD/Player  (22558): Found player aligoku\nD/Player  (22558): Found player yuichi1735\nD/Player  (22558): Found player mrjelenski\nD/Player  (22558): Found player mrbeto13\nD/Player  (22558): Found player glassen18\nD/Player  (22558): Found player amazingaggron\nD/Player  (22558): Found player gab871\nD/Player  (22558): Found player darkspy9\nD/Player  (22558): Found player galaxiace78\nD/Player  (22558): Found player skitty314\nD/Player  (22558): Found player avivtzur18\nD/Player  (22558): Found player taquillaz\nD/Player  (22558): Found player philz971\nD/Player  (22558): Found player cool_bob2\nD/Player  (22558): Found player fruffy92\nD/Player  (22558): Found player waffle_man_44\nD/Player  (22558): Found player perfectownage\nD/Player  (22558): Found player master_miner_aw\nD/Player  (22558): Found player kalinalove\nD/Player  (22558): Found player noamliga\nD/Player  (22558): Found player xpavelialienx\nD/Player  (22558): Found player ct168\nD/Player  (22558): Found player firestar52\nD/Player  (22558): Found player isaac_tam\nD/Player  (22558): Found player 3_mummy_lover\nD/Player  (22558): Found player thebaysix123\nD/Player  (22558): Found player avivtzur18\nD/Player  (22558): Found player qesellers\nD/Player  (22558): Found player dumb_hamster\nD/Player  (22558): Found player jusher1234\nD/Player  (22558): Found player barr0918\nD/Player  (22558): Found player danny7980\nD/Player  (22558): Found player sparkyvenom\nD/Player  (22558): Found player francis_7777\nD/Player  (22558): Found player timothyisbawss\nD/Player  (22558): Found player timothyisbawss\nD/Player  (22558): Found player algie13b\nD/Player  (22558): Found player thenightmare74\nD/Player  (22558): Found player jadawg0322\nD/Player  (22558): Found player jerrycannn\nD/Player  (22558): Found player likeabosspwns\nD/Player  (22558): Found player epicness1114\nD/Player  (22558): Found player comatose_llama\nD/Player  (22558): Found player alfred_gil\nD/Player  (22558): Found player kyle4hl\nD/Player  (22558): Found player drew9998\nD/Player  (22558): Found player maphia_ace\nD/Player  (22558): Found player origoldberg\nD/Player  (22558): Found player mboland1\nD/Player  (22558): Found player uziel5000\nD/Player  (22558): Found player seymore_craft\nD/Player  (22558): Found player lupare\nD/Player  (22558): Found player burflemerfle\nD/Player  (22558): Found player neco45\nD/Player  (22558): Found player ninjawarrior68\nD/Player  (22558): Found player _morten_99\nD/Player  (22558): Found player alexaz1\nD/Player  (22558): Found player hmb111\nD/Player  (22558): Found player s1gamer\nD/Player  (22558): Found player shadowmaker33\nD/Player  (22558): Found player kire197\nD/Player  (22558): Found player dean012\nD/Player  (22558): Found player fishnugget2\nD/Player  (22558): Found player maan1652\nD/Player  (22558): Found player riceequalslifee\nD/Player  (22558): Found player yoavlevy23\nD/Player  (22558): Found player 500legoman\nD/Player  (22558): Found player thescotti\nD/Player  (22558): Found player gondrapvp\nD/Player  (22558): Found player plancke\nD/Player  (22558): Found player sam123789\nD/Player  (22558): Found player mael6o\nD/Player  (22558): Found player draken988\nD/Player  (22558): Found player 12345jg7\nD/Player  (22558): Found player kit_katrr\nD/Player  (22558): Found player grahamclarkk\nD/Player  (22558): Found player tgameez14\nD/Player  (22558): Found player drupter\nD/Player  (22558): Found player sniperpanda12\nD/Player  (22558): Found player yepsicraft\nD/Player  (22558): Found player kylecraft021\nD/Player  (22558): Found player rejgee\nD/Player  (22558): Found player dewsand\nD/Player  (22558): Found player asflavacraft\nD/Player  (22558): Found player ashe_barrett\nD/Player  (22558): Found player zense_tek\nD/Player  (22558): Found player lego456\nD/Player  (22558): Found player cw247\nD/Player  (22558): Found player luca339\nD/Player  (22558): Found player theminecoder\nE/AndroidRuntime(22558): FATAL EXCEPTION: main\nE/AndroidRuntime(22558): Process: com.itachi1706.hypixelstatistics, PID: 22558\nE/AndroidRuntime(22558): java.lang.NullPointerException\nE/AndroidRuntime(22558):        at com.itachi1706.hypixelstatistics.util.Booster\nDescListAdapter.getView(BoosterDescListAdapter.java:70)\nE/AndroidRuntime(22558):        at android.widget.AbsListView.obtainView(AbsList\nView.java:2450)\nE/AndroidRuntime(22558):        at android.widget.ListView.measureHeightOfChildr\nen(ListView.java:1364)\nE/AndroidRuntime(22558):        at android.widget.ListView.onMeasure(ListView.ja\nva:1276)\nE/AndroidRuntime(22558):        at android.view.View.measure(View.java:16660)\nE/AndroidRuntime(22558):        at android.widget.RelativeLayout.measureChildHor\nizontal(RelativeLayout.java:719)\nE/AndroidRuntime(22558):        at android.widget.RelativeLayout.onMeasure(Relat\niveLayout.java:455)\nE/AndroidRuntime(22558):        at android.view.View.measure(View.java:16660)\nE/AndroidRuntime(22558):        at android.view.ViewGroup.measureChildWithMargin\ns(ViewGroup.java:5150)\nE/AndroidRuntime(22558):        at android.widget.FrameLayout.onMeasure(FrameLay\nout.java:310)\nE/AndroidRuntime(22558):        at android.view.View.measure(View.java:16660)\nE/AndroidRuntime(22558):        at android.view.ViewGroup.measureChildWithMargin\ns(ViewGroup.java:5150)\nE/AndroidRuntime(22558):        at android.support.v7.internal.widget.ActionBarO\nverlayLayout.onMeasure(ActionBarOverlayLayout.java:453)\nE/AndroidRuntime(22558):        at android.view.View.measure(View.java:16660)\nE/AndroidRuntime(22558):        at android.view.ViewGroup.measureChildWithMargin\ns(ViewGroup.java:5150)\nE/AndroidRuntime(22558):        at android.widget.FrameLayout.onMeasure(FrameLay\nout.java:310)\nE/AndroidRuntime(22558):        at android.view.View.measure(View.java:16660)\nE/AndroidRuntime(22558):        at android.view.ViewGroup.measureChildWithMargin\ns(ViewGroup.java:5150)\nE/AndroidRuntime(22558):        at android.widget.LinearLayout.measureChildBefor\neLayout(LinearLayout.java:1404)\nE/AndroidRuntime(22558):        at android.widget.LinearLayout.measureVertical(L\ninearLayout.java:695)\nE/AndroidRuntime(22558):        at android.widget.LinearLayout.onMeasure(LinearL\nayout.java:588)\nE/AndroidRuntime(22558):        at android.view.View.measure(View.java:16660)\nE/AndroidRuntime(22558):        at android.view.ViewGroup.measureChildWithMargin\ns(ViewGroup.java:5150)\nE/AndroidRuntime(22558):        at android.widget.FrameLayout.onMeasure(FrameLay\nout.java:310)\nE/AndroidRuntime(22558):        at com.android.internal.policy.impl.PhoneWindow$\nDecorView.onMeasure(PhoneWindow.java:2421)\nE/AndroidRuntime(22558):        at android.view.View.measure(View.java:16660)\nE/AndroidRuntime(22558):        at android.view.ViewRootImpl.performMeasure(View\nRootImpl.java:2058)\nE/AndroidRuntime(22558):        at android.view.ViewRootImpl.measureHierarchy(Vi\newRootImpl.java:1189)\nE/AndroidRuntime(22558):        at android.view.ViewRootImpl.performTraversals(V\niewRootImpl.java:1374)\nE/AndroidRuntime(22558):        at android.view.ViewRootImpl.doTraversal(ViewRoo\ntImpl.java:1076)\nE/AndroidRuntime(22558):        at android.view.ViewRootImpl$TraversalRunnable.r\nun(ViewRootImpl.java:5905)\nE/AndroidRuntime(22558):        at android.view.Choreographer$CallbackRecord.run\n(Choreographer.java:807)\nE/AndroidRuntime(22558):        at android.view.Choreographer.doCallbacks(Choreo\ngrapher.java:601)\nE/AndroidRuntime(22558):        at android.view.Choreographer.doFrame(Choreograp\nher.java:562)\nE/AndroidRuntime(22558):        at android.view.Choreographer$FrameDisplayEventR\neceiver.run(Choreographer.java:791)\nE/AndroidRuntime(22558):        at android.os.Handler.handleCallback(Handler.jav\na:733)\nE/AndroidRuntime(22558):        at android.os.Handler.dispatchMessage(Handler.ja\nva:95)\nE/AndroidRuntime(22558):        at android.os.Looper.loop(Looper.java:157)\nE/AndroidRuntime(22558):        at android.app.ActivityThread.main(ActivityThrea\nd.java:5633)\nE/AndroidRuntime(22558):        at java.lang.reflect.Method.invokeNative(Native\nMethod)\nE/AndroidRuntime(22558):        at java.lang.reflect.Method.invoke(Method.java:5\n15)\nE/AndroidRuntime(22558):        at com.android.internal.os.ZygoteInit$MethodAndA\nrgsCaller.run(ZygoteInit.java:896)\nE/AndroidRuntime(22558):        at com.android.internal.os.ZygoteInit.main(Zygot\neInit.java:712)\nE/AndroidRuntime(22558):        at dalvik.system.NativeStart.main(Native Method)\n\nE/ActivityManager(  920): App crashed! Process: com.itachi1706.hypixelstatistics\n\nW/ActivityManager(  920):   Force finishing activity com.itachi1706.hypixelstati\nstics/.MainActivity\nW/ActivityManager(  920): Activity pause timeout for ActivityRecord{43878058 u0\ncom.itachi1706.hypixelstatistics/.MainActivity t108 f}\n",
    "keywords": [
      "com",
      "22558",
      "handler",
      "internal",
      "widget",
      "onmeasure",
      "framelayout",
      "d/player 22558",
      "choreographer",
      "view view",
      "android",
      "listview",
      "run",
      "main",
      "e/androidruntime",
      "linearlayout",
      "view",
      "java",
      "found",
      "measure view",
      "relativelayout",
      "android widget",
      "s viewgroup",
      "d/player",
      "viewgroup",
      "java:5150",
      "e/androidruntime 22558",
      "android view",
      "lang",
      "java:16660 e/androidruntime",
      "player",
      "app",
      "22558 ",
      "method",
      "os",
      "framelay",
      "itachi1706",
      "view measure",
      "java:16660",
      "measure",
      "s",
      "viewgroup measurechildwithmargin",
      "java:5150 e/androidruntime",
      "view java:16660",
      "viewrootimpl",
      "920",
      "hypixelstatistics",
      "java:310",
      "measurechildwithmargin"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/itachi1706/HypixelStatistics/commit/f04bcaadc6acdc5f42e784d4e11256ace93e4dfd",
      "files": [
        {
          "file_name": "app/src/main/java/com/itachi1706/hypixelstatistics/util/BoosterDescListAdapter.java",
          "patch": "@@ -67,7 +67,12 @@ public View getView(int position, View convertView, ViewGroup parent){\n                 }\n             }\n             if (location !\u003d null) {\n-                location.setText(i.get_gameType().getName());\n+                try {\n+                    location.setText(i.get_gameType().getName());\n+                } catch (NullPointerException e){\n+                    Log.e(\"INVALID GAMETYPE\", \"Invalid New Gametype. Must add new game modes\");\n+                    location.setText(\"INVALID GAME MODE. Inform Dev\");\n+                }\n             }\n             if (time !\u003d null) {\n                 String timeStamp \u003d new SimpleDateFormat(\"dd-MMM-yyyy hh:mm a zz\").format(new Date(i.get_date()));"
        },
        {
          "file_name": "app/src/main/java/net/hypixel/api/util/GameType.java",
          "patch": "@@ -15,7 +15,8 @@\n     WALLS3(\"MegaWalls\", 13),\n     ARCADE(\"Arcade\", 14),\n     ARENA(\"Arena\", 17),\n-    MCGO(\"Cops and Crims\", 21);\n+    MCGO(\"Cops and Crims\", 21),\n+    UHC(\"UHC Champions\", 20);\n \n     private static GameType[] v \u003d values();\n     private final String name;"
        }
      ]
    }
  },
  {
    "name": "Null pointer exception",
    "url": "https://github.com/bocon13/moduleowner/issues/7",
    "description": "[2016-01-15 20:13:56,995] ERROR com.google.gerrit.httpd.restapi.RestApiServlet : Error in POST /changes/34/revisions/55c1b1a4862af60f67bb75efedfd4329145f4c23/review\njava.lang.NullPointerException\n    at com.google.common.base.Preconditions.checkNotNull(Preconditions.java:210)\n    at com.google.common.cache.LocalCache.get(LocalCache.java:3936)\n    at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:3941)\n    at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4824)\n    at com.google.gerrit.server.account.AccountCacheImpl.getByUsername(AccountCacheImpl.java:100)\n    at com.googlesource.gerrit.plugins.moduleowner.ModuleOwnerUtils.getAccountFromAttribute(ModuleOwnerUtils.java:99)\n    at com.googlesource.gerrit.plugins.moduleowner.ChangeEventListener.updateLabels(ChangeEventListener.java:158)\n    at com.googlesource.gerrit.plugins.moduleowner.ChangeEventListener.onEvent(ChangeEventListener.java:111)\n    at com.google.gerrit.common.ChangeHookRunner.fireEventForUnrestrictedListeners(ChangeHookRunner.java:706)\n    at com.google.gerrit.common.ChangeHookRunner.fireEvent(ChangeHookRunner.java:718)\n    at com.google.gerrit.common.ChangeHookRunner.doCommentAddedHook(ChangeHookRunner.java:429)\n    at com.google.gerrit.server.change.PostReview.fireCommentAddedHook(PostReview.java:577)\n    at com.google.gerrit.server.change.PostReview.apply(PostReview.java:203)\n    at com.google.gerrit.server.change.PostReview.apply(PostReview.java:136)\n    at com.google.gerrit.server.change.PostReview.apply(PostReview.java:78)\n    at com.google.gerrit.httpd.restapi.RestApiServlet.service(RestApiServlet.java:322)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)\n    at com.google.inject.servlet.ServletDefinition.doServiceImpl(ServletDefinition.java:287)\n    at com.google.inject.servlet.ServletDefinition.doService(ServletDefinition.java:277)\n    at com.google.inject.servlet.ServletDefinition.service(ServletDefinition.java:182)\n    at com.google.inject.servlet.ManagedServletPipeline.service(ManagedServletPipeline.java:91)\n    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:85)\n    at com.google.gerrit.httpd.GetUserFilter.doFilter(GetUserFilter.java:82)\n    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:82)\n    at com.google.gwtexpui.server.CacheControlFilter.doFilter(CacheControlFilter.java:73)\n    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:82)\n    at com.google.gerrit.httpd.RunAsFilter.doFilter(RunAsFilter.java:117)\n    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:82)\n    at com.google.gerrit.httpd.RequireSslFilter.doFilter(RequireSslFilter.java:68)\n    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:82)\n    at com.google.gerrit.httpd.AllRequestFilter$FilterProxy$1.doFilter(AllRequestFilter.java:64)\n    at com.google.gerrit.httpd.AllRequestFilter$FilterProxy.doFilter(AllRequestFilter.java:57)\n    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:82)\n    at com.google.gerrit.httpd.RequestContextFilter.doFilter(RequestContextFilter.java:75)\n    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:82)\n    at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:119)\n    at com.google.inject.servlet.GuiceFilter$1.call(GuiceFilter.java:133)\n    at com.google.inject.servlet.GuiceFilter$1.call(GuiceFilter.java:130)\n    at com.google.inject.servlet.GuiceFilter$Context.call(GuiceFilter.java:203)\n    at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:130)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)\n    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:585)\n    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:221)\n    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127)\n    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)\n    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)\n    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1061)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)\n    at org.eclipse.jetty.server.Server.handle(Server.java:497)\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:310)\n    at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:257)\n    at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555)\n    at java.lang.Thread.run(Thread.java:745)\n",
    "keywords": [
      "com",
      "handler",
      "google inject",
      "servlet",
      "plugins",
      "changeeventlistener",
      "servletdefinition",
      "run",
      "guicefilter",
      "jetty server",
      "dofilter",
      "localcache",
      "cache",
      "googlesource gerrit",
      "filterchaininvocation dofilter",
      "handle",
      "google",
      "filterchaininvocation java:82",
      "httpd",
      "eclipse",
      "change postreview",
      "plugins moduleowner",
      "dohandle",
      "filterchaininvocation",
      "queuedthreadpool",
      "sessionhandler",
      "server",
      "gerrit server",
      "eclipse jetty",
      "servlethandler",
      "gerrit",
      "common",
      "java:82",
      "contexthandler",
      "jetty",
      "apply postreview",
      "gerrit httpd",
      "changehookrunner",
      "apply",
      "org",
      "change",
      "google gerrit",
      "inject servlet",
      "thread",
      "moduleowner",
      "postreview",
      "call",
      "doscope",
      "com google",
      "service",
      "restapiservlet",
      "googlesource",
      "inject",
      "org eclipse"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/bocon13/moduleowner/commit/53e1b0b917b391e588a36370f82b1a4cc6a640b0",
      "files": [
        {
          "file_name": "src/main/java/com/googlesource/gerrit/plugins/moduleowner/ChangeEventListener.java",
          "patch": "@@ -156,6 +156,11 @@ private void updateLabels(CommentAddedEvent event) {\n         }\n \n         Account account \u003d getAccountFromAttribute(event.author, accountCache, accountResolver);\n+        if (account \u003d\u003d null \u0026\u0026 event.author !\u003d null) {\n+            log.warn(\"Could not find account for user: {} ({})\",\n+                     event.author.name, event.author.email);\n+            return;\n+        }\n \n         try (Repository repo \u003d repoManager.openRepository(projectName);\n              ReviewDb reviewDb \u003d schemaFactory.open()) {"
        },
        {
          "file_name": "src/main/java/com/googlesource/gerrit/plugins/moduleowner/ModuleOwnerUtils.java",
          "patch": "@@ -96,11 +96,16 @@ public static Account getAccountFromAttribute(AccountAttribute attribute,\n                                                   AccountCache cache,\n                                                   AccountResolver resolver) {\n         //TODO this could be greatly simplified by adding Account.Id to AccountAttribute\n-        Account account \u003d cache.getByUsername(attribute.username).getAccount();\n+        Account account \u003d null;\n+        if (attribute.username !\u003d null) {\n+            account \u003d cache.getByUsername(attribute.username).getAccount();\n+        }\n         if (account \u003d\u003d null) {\n             try {\n-                account \u003d resolver.findByNameOrEmail(attribute.email);\n-                if (account \u003d\u003d null) {\n+                if (attribute.email !\u003d null) {\n+                    account \u003d resolver.findByNameOrEmail(attribute.email);\n+                }\n+                if (account \u003d\u003d null \u0026\u0026 attribute.name !\u003d null) {\n                     account \u003d resolver.findByNameOrEmail(attribute.name);\n                 }\n             } catch (OrmException e) {"
        }
      ]
    }
  },
  {
    "name": "@DTOCascade throwing null pointer exception",
    "url": "https://github.com/jDTOBinder/jDTO-Binder/issues/26",
    "description": "When mapping two Lists... For example: \n\npublic class DTO {\n@DTOCascade\nprivate List\u0026lt;ADTO\u003e objects;\n....\n} \npublic class ObjectC {\nprivate List\u0026lt;A\u003e objects;\n}\n\nIf the source is null, I get NullPointerException. From what I could see... \norg.jdto.impl.SimpleBinderDelegate.convertValueToList does not take into account if the \"source\" field list is null and ends up throwing an NullPointerException.\n",
    "keywords": [
      "null"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/jDTOBinder/jDTO-Binder/commit/420d5971a0bd38e719474f4740e9063e38ed2f48",
      "files": [
        {
          "file_name": "jdto/src/main/java/org/jdto/impl/DTOBinderBean.java",
          "patch": "@@ -22,6 +22,7 @@\n import java.util.ArrayList;\n import java.util.HashMap;\n import java.util.List;\n+import org.apache.commons.lang.ArrayUtils;\n import org.jdto.PropertyValueMerger;\n import org.jdto.PropertyValueMergerInstanceManager;\n import org.slf4j.Logger;\n@@ -102,15 +103,19 @@ public DTOBinderBean(InputStream xmlFile, boolean eagerLoad) {\n \n         boolean shouldReleaseThreadLocal \u003d initBindingContextIfNecessary();\n         try {\n-\n+            \n             //this will apply repeatedly the conversion results to a list.\n             Object[] paramsBuffer \u003d new Object[businessObjectsLists.length];\n \n+            int refSize \u003d getSourceListsSize(businessObjectsLists);\n+            \n+            //all of the elements are null\n+            if (refSize \u003d\u003d -1) {\n+                return null;\n+            }\n+            \n+            \n             List\u003cT\u003e ret \u003d new ArrayList\u003cT\u003e();\n-\n-            //the reference size will be the first list size\n-            int refSize \u003d businessObjectsLists[0].size();\n-\n             //repeatedly run the simple binding.\n             for (int i \u003d 0; i \u003c refSize; i++) {\n                 for (int j \u003d 0; j \u003c businessObjectsLists.length; j++) {\n@@ -210,4 +215,16 @@ public PropertyValueMergerInstanceManager getMergerManager() {\n     public void setMergerManager(PropertyValueMergerInstanceManager manager) {\n         this.implementationDelegate.setMergerManager(manager);\n     }\n+    \n+    //get the size of the first not-null list\n+    private int getSourceListsSize(List[] businessObjectsLists) {\n+        \n+        for (List list : businessObjectsLists) {\n+            if (list !\u003d null) {\n+                return list.size();\n+            }\n+        }\n+        \n+        return -1;\n+    }\n }"
        },
        {
          "file_name": "jdto/src/main/java/org/jdto/impl/SimpleBinderDelegate.java",
          "patch": "@@ -209,7 +209,11 @@ private Object applyCascadeLogic(List\u003cObject\u003e sourceValues, FieldMetadata fieldM\n     }\n \n     private List convertValueToList(Object value) {\n-\n+        \n+        if (value \u003d\u003d null) {\n+            return null;\n+        }\n+        \n         if (value instanceof List) {\n             return (List) value;\n         }"
        },
        {
          "file_name": "jdto/src/test/java/org/jdto/TestCascadeBinding.java",
          "patch": "@@ -81,6 +81,18 @@ public void testCascadeList() {\n         assertNotNull(cldto.getFormatDtos());\n         assertTrue(cldto.getFormatDtos().size() \u003d\u003d 2);\n     }\n+    \n+    @Test\n+    public void testNullListCascade() {\n+        \n+        \n+        ComplexList list \u003d new ComplexList(null);\n+        \n+        ComplexListDTO cldto \u003d binder.bindFromBusinessObject(ComplexListDTO.class, list);\n+        \n+        assertNotNull(cldto);\n+        assertNull(\"Cascade a null object should result in null\", cldto.getFormatDtos());\n+    }\n \n     @Test\n     public void testCascadeListArray() {"
        },
        {
          "file_name": "jdto/src/test/java/org/jdto/mergers/TestMethodCallMerger.java",
          "patch": "@@ -57,7 +57,7 @@ public void testNulls() {\n         subject.mergeObjects(method, null);\n     }\n     \n-    @Test(expected\u003dIllegalArgumentException.class)\n+    @Test(expected\u003dRuntimeException.class)\n     public void testUnexistentMethod() {\n         \n         String[] method \u003d {\"nonSenseMethod\"};"
        }
      ]
    }
  },
  {
    "name": "Null Pointer Exception on Routine Screen",
    "url": "https://github.com/GrandViewTech/ProgrammablelogicController/issues/18",
    "description": "# Null Pointer Exception after clicking submit button on routine screen when routine folder is absent \r\n[log.txt](https://github.com/GrandViewTech/ProgrammablelogicController/files/870945/log.txt)\r\n",
    "keywords": [
      "routine"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/GrandViewTech/ProgrammablelogicController/commit/648e8d9e1c361e8aa54488b46959d06ee3c02ba2",
      "files": [
        {
          "file_name": "src/main/java/org/grandviewtech/constants/ApplicationConstant.java",
          "patch": "@@ -35,5 +35,5 @@\n \t\tpublic static int\t\t\tSECTION_HEIGHT\t\t\t\t\u003d 100;\r\n \t\tpublic static int\t\t\tMAX_CELL\t\t\t\t\t\u003d 10;\r\n \t\tpublic static int\t\t\tCUSTOM_BORDER_HEIGTH_OFFSET\t\u003d 2;\r\n-\t\tfinal public static String\tVERSION\t\t\t\t\t\t\u003d \"V 10.6\";\r\n+\t\tfinal public static String\tVERSION\t\t\t\t\t\t\u003d \"V 10.7\";\r\n \t}\r"
        },
        {
          "file_name": "src/main/java/org/grandviewtech/userinterface/listeners/ColumnScreenListener.java",
          "patch": "@@ -30,8 +30,6 @@\n import java.awt.event.MouseEvent;\n import java.awt.event.MouseListener;\n \n-import javax.swing.JLabel;\n-\n import org.grandviewtech.constants.CustomBorderList;\n import org.grandviewtech.entity.bo.ClipBoard;\n import org.grandviewtech.entity.bo.Screen;"
        },
        {
          "file_name": "src/main/java/org/grandviewtech/userinterface/listeners/RungActionListerner.java",
          "patch": "@@ -101,7 +101,7 @@ public void actionPerformed(ActionEvent event)\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\n+\t\t\t\t\t\t\t\n \t\t\t\t\t}\n \t\t\t\t\t\n \t\t\t}\n@@ -154,18 +154,18 @@ private void paste()\n \t\t\t\t\t\t\t\tColumnScreen copiedColumn \u003d copiedRow.getColumnScreens(columnIndex);\n \t\t\t\t\t\t\t\tif (copiedColumn.isBlank() \u003d\u003d false)\n \t\t\t\t\t\t\t\t\t{\n-\t\t\t\t\t\t\t\t\t\tpasteColumn.setCoilType(copiedColumn.getCoilType());\n-\t\t\t\t\t\t\t\t\t\tpasteColumn.setValue(copiedColumn.getValue());\n-\t\t\t\t\t\t\t\t\t\tpasteColumn.setTag(copiedColumn.getTag());\n-\t\t\t\t\t\t\t\t\t\tpasteColumn.requestFocus();\n-\t\t\t\t\t\t\t\t\t\tSearchEngine.index(pasteColumn);\n+\t\t\t\t\t\t\t\t\t\tpasteColumn.update(copiedColumn);\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\tif (ClipBoard.getClipboardAction() \u003d\u003d CLIPBOARD_ACTION.CUT)\n+\t\t\t\t\t\t\t\t\t{\n+\t\t\t\t\t\t\t\t\t\tcopiedColumn.reset();\n \t\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t\tcolumnIndex \u003d columnIndex + 1;\n \t\t\t\t\t\t\t\t\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\ti$ \u003d i$ + 1;\n \t\t\t\t\t}\n-\t\t\t\tif (ClipBoard.getClipboardAction() \u003d\u003d CLIPBOARD_ACTION.CUT)\n+\t\t\t\t/*if (ClipBoard.getClipboardAction() \u003d\u003d CLIPBOARD_ACTION.CUT)\n \t\t\t\t\t{\n \t\t\t\t\t\tSet\u003cInteger\u003e deletedRowNumbers \u003d new LinkedHashSet\u003cInteger\u003e();\n \t\t\t\t\t\tList\u003cRung\u003e copiedRungs \u003d ClipBoard.getCopiedRung();\n@@ -175,6 +175,6 @@ private void paste()\n \t\t\t\t\t\t\t\tdeletedRowNumbers.add(rung.getRowNumber());\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\tRowGenerator.deleteRows(deletedRowNumbers);\n-\t\t\t\t\t}\n+\t\t\t\t\t}*/\n \t\t\t}\n \t}"
        },
        {
          "file_name": "src/main/java/org/grandviewtech/userinterface/screen/ColumnConfigurationScreen.java",
          "patch": "@@ -67,16 +67,13 @@\n import org.grandviewtech.entity.enums.NoNc;\r\n import org.grandviewtech.entity.helper.Dimension;\r\n import org.grandviewtech.runner.Application;\r\n-import org.grandviewtech.service.runtime.user.useractivity.Activities;\r\n-import org.grandviewtech.service.searching.SearchEngine;\r\n import org.grandviewtech.service.system.PropertyReader;\r\n \r\n import com.thoughtworks.xstream.XStream;\r\n \r\n public class ColumnConfigurationScreen extends JFrame\r\n \t{\r\n \t\tprivate static org.apache.log4j.Logger\tlogger\t\t\t\t\u003d org.apache.log4j.Logger.getLogger(ColumnConfigurationScreen.class);\r\n-\t\tprivate static Activities\t\t\t\tactivities\t\t\t\u003d Activities.getInstance();\r\n \t\tfinal static Screen\t\t\t\t\t\tSCREEN\t\t\t\t\u003d Screen.getInstance();\r\n \t\tprivate static final long\t\t\t\tserialVersionUID\t\u003d 1L;\r\n \t\tprivate static NumberFormatter\t\t\tnumberFormatter\t\t\u003d null;\r\n@@ -214,6 +211,7 @@ private void routineList()\n \t\t\t\t\t\t\t\tdataList.add(routineName);\r\n \t\t\t\t\t\t\t}\r\n \t\t\t\t\t}\r\n+\t\t\t\t\r\n \t\t\t\tdataList.sort(new Comparator\u003cString\u003e()\r\n \t\t\t\t\t{\r\n \t\t\t\t\t\t@Override\r\n@@ -256,8 +254,13 @@ public void valueChanged(ListSelectionEvent event)\n \t\t\t\tpanel.add(scrollPane);\r\n \t\t\t\tJButton submit \u003d new JButton(\"Submit\");\r\n \t\t\t\tsubmit.setBounds(X1 + 180, 410, 150, 25);\r\n+\t\t\t\tif (dataList \u003d\u003d null || dataList.size() \u003d\u003d 0)\r\n+\t\t\t\t\t{\r\n+\t\t\t\t\t\tsubmit.setEnabled(false);\r\n+\t\t\t\t\t}\r\n \t\t\t\tsubmit.addActionListener(onSubmit -\u003e\r\n \t\t\t\t\t{\r\n+\t\t\t\t\t\t\r\n \t\t\t\t\t\tJOptionPane optionPane \u003d null;\r\n \t\t\t\t\t\tif (selectedRoutine !\u003d null)\r\n \t\t\t\t\t\t\t{\r\n@@ -267,23 +270,24 @@ public void valueChanged(ListSelectionEvent event)\n \t\t\t\t\t\t\t\t\t}\r\n \t\t\t\t\t\t\t\tcolumnScreen.setRoutine(selectedRoutine);\r\n \t\t\t\t\t\t\t\toptionPane \u003d new JOptionPane(\"Routine Selected Successfully\", JOptionPane.INFORMATION_MESSAGE);\r\n+\t\t\t\t\t\t\t\tJDialog dialog \u003d optionPane.createDialog(null, \"Select Routine\");\r\n+\t\t\t\t\t\t\t\tdialog.setModal(false);\r\n+\t\t\t\t\t\t\t\tdialog.setVisible(true);\r\n+\t\t\t\t\t\t\t\t// http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#stayup\r\n+\t\t\t\t\t\t\t\tTimer timer \u003d new Timer(600, timerEvent -\u003e\r\n+\t\t\t\t\t\t\t\t\t{\r\n+\t\t\t\t\t\t\t\t\t\tdialog.setVisible(false);\r\n+\t\t\t\t\t\t\t\t\t\tdialog.dispose();\r\n+\t\t\t\t\t\t\t\t\t\tcolumnScreen.apply();\r\n+\t\t\t\t\t\t\t\t\t});\r\n+\t\t\t\t\t\t\t\ttimer.start();\r\n+\t\t\t\t\t\t\t\tdispose();\r\n \t\t\t\t\t\t\t}\r\n \t\t\t\t\t\telse\r\n \t\t\t\t\t\t\t{\r\n \t\t\t\t\t\t\t\toptionPane \u003d new JOptionPane(\"Error While Selecting Routine\", JOptionPane.INFORMATION_MESSAGE);\r\n+\t\t\t\t\t\t\t\tdispose();\r\n \t\t\t\t\t\t\t}\r\n-\t\t\t\t\t\tJDialog dialog \u003d optionPane.createDialog(null, \"Select Routine\");\r\n-\t\t\t\t\t\tdialog.setModal(false);\r\n-\t\t\t\t\t\tdialog.setVisible(true);\r\n-\t\t\t\t\t\t// http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#stayup\r\n-\t\t\t\t\t\tTimer timer \u003d new Timer(600, timerEvent -\u003e\r\n-\t\t\t\t\t\t\t{\r\n-\t\t\t\t\t\t\t\tdialog.setVisible(false);\r\n-\t\t\t\t\t\t\t\tdialog.dispose();\r\n-\t\t\t\t\t\t\t\tcolumnScreen.apply();\r\n-\t\t\t\t\t\t\t});\r\n-\t\t\t\t\t\ttimer.start();\r\n-\t\t\t\t\t\tdispose();\r\n \t\t\t\t\t});\r\n \t\t\t\tJButton cancel \u003d new JButton(\"Canel\");\r\n \t\t\t\tcancel.setBounds(X1 + 350, 410, 150, 25);\r\n@@ -464,6 +468,7 @@ else if (columnScreen.getTemp().equals(CoilType.OUTPUT))\n \t\t\t\t\t\t// flag.setSelected(true);\r\n \t\t\t\t\t\tflag.setBounds(X2, Y * 2, RADIO_WIDTH, HEIGHT);\r\n \t\t\t\t\t\toutput.setBounds(X2 + (RADIO_WIDTH * 1), Y * 2, RADIO_WIDTH, HEIGHT);\r\n+\t\t\t\t\t\tsetDefaultInputOption();\r\n \t\t\t\t\t\t// separator.setBounds(X1, Y * 3 + (20),\r\n \t\t\t\t\t\t// CustomDimension.CONFIGURATION_SCREEN.width - (X1 *\r\n \t\t\t\t\t\t// 4), 10);\r\n@@ -666,7 +671,6 @@ else if (isLoadCoil() || coilType.equals(CoilType.OUTPUT))\n \t\t\t\t\t\t\t\t\t\tif (!isRoutine)\r\n \t\t\t\t\t\t\t\t\t\t\t{\r\n \t\t\t\t\t\t\t\t\t\t\t\tsetInputTagAndValue(columnScreen);\r\n-\t\t\t\t\t\t\t\t\t\t\t\tSearchEngine.index(columnScreen);\r\n \t\t\t\t\t\t\t\t\t\t\t}\r\n \t\t\t\t\t\t\t\t\t\tdispose();\r\n \t\t\t\t\t\t\t\t\t\tcolumnScreen.repaint();\r\n@@ -775,11 +779,12 @@ else if (NC.isSelected())\n \t\t\t\t\t{\r\n \t\t\t\t\t\tnonc \u003d NoNc.NC;\r\n \t\t\t\t\t}\r\n-\t\t\t\telse if (SET.isSelected())\r\n+\t\t\t\t\t\r\n+\t\t\t\tif (SET !\u003d null \u0026\u0026 SET.isSelected())\r\n \t\t\t\t\t{\r\n \t\t\t\t\t\tnonc \u003d NoNc.SET;\r\n \t\t\t\t\t}\r\n-\t\t\t\telse if (RESET.isSelected())\r\n+\t\t\t\telse if (RESET !\u003d null \u0026\u0026 RESET.isSelected())\r\n \t\t\t\t\t{\r\n \t\t\t\t\t\tnonc \u003d NoNc.RESET;\r\n \t\t\t\t\t}\r\n@@ -900,4 +905,5 @@ private boolean isLoadCoil()\n \t\t\t\tCoilType coilType \u003d columnScreen.getTemp();\r\n \t\t\t\treturn (coilType.equals(CoilType.LOAD) || coilType.equals(CoilType.PARALLEL) || coilType.equals(CoilType.LEFT_LINK) || coilType.equals(CoilType.RIGHT_LINK));\r\n \t\t\t}\r\n+\t\t\t\r\n \t}\n\\ No newline at end of file"
        },
        {
          "file_name": "src/main/java/org/grandviewtech/userinterface/screen/ColumnScreen.java",
          "patch": "@@ -31,6 +31,7 @@\n import org.grandviewtech.entity.enums.Edge;\n import org.grandviewtech.entity.enums.InputType;\n import org.grandviewtech.entity.enums.NoNc;\n+import org.grandviewtech.service.searching.SearchEngine;\n import org.grandviewtech.service.validation.RowValidation;\n import org.grandviewtech.service.validation.ValidateDragOption;\n import org.grandviewtech.userinterface.coils.PaintCoilsOnScreen;\n@@ -202,7 +203,8 @@ public void apply()\n \t\t\t\t\t}\n \t\t\t\tsetBlank(false);\n \t\t\t\tsetCoilType(temp);\n-\t\t\t\tRowValidation.validate(this);\n+\t\t\t\t//RowValidation.validate(this);\n+\t\t\t\tSearchEngine.index(this);\n \t\t\t\trepaint();\n \t\t\t}\n \t\t\t\n@@ -307,6 +309,10 @@ public void setInputType(InputType inputType)\n \t\t\t\n \t\tpublic NoNc getNonc()\n \t\t\t{\n+\t\t\t\tif (nonc \u003d\u003d null)\n+\t\t\t\t\t{\n+\t\t\t\t\t\tnonc \u003d NoNc.DEFAULT;\n+\t\t\t\t\t}\n \t\t\t\treturn nonc;\n \t\t\t}\n \t\t\t\n@@ -321,6 +327,10 @@ public void setNonc(NoNc nonc)\n \t\t\t\n \t\tpublic Edge getEdge()\n \t\t\t{\n+\t\t\t\tif (edge \u003d\u003d null)\n+\t\t\t\t\t{\n+\t\t\t\t\t\tedge \u003d Edge.DEFAULT;\n+\t\t\t\t\t}\n \t\t\t\treturn edge;\n \t\t\t}\n \t\t\t\n@@ -480,7 +490,7 @@ private void init()\n \t\t\t\taddMouseListener(columnScreenListener);\n \t\t\t\taddKeyListener(columnScreenListener);\n \t\t\t\taddFocusListener(columnScreenListener);\n-\t\t\t\tsetToolTipText(\"Row : \" + getRowNumber() + \" |  Column : \" + getColumnNumber());\n+\t\t\t\tsetToolTipText(\"Row : \" + this.getRowNumber() + \" |  Column : \" + this.getColumnNumber());\n \t\t\t\trepaint();\n \t\t\t\trevalidate();\n \t\t\t}\n@@ -660,4 +670,16 @@ public boolean equals(Object object)\n \t\t\t\t\t}\n \t\t\t\treturn false;\n \t\t\t}\n+\t\t\t\n+\t\tpublic void update(ColumnScreen screen)\n+\t\t\t{\n+\t\t\t\tsetCoilType(screen.getTemp());\n+\t\t\t\tsetCoilType(screen.getCoilType());\n+\t\t\t\tsetValue(screen.getValue());\n+\t\t\t\tsetTag(screen.getTag());\n+\t\t\t\tsetEdge(screen.getEdge());\n+\t\t\t\tsetNonc(screen.getNonc());\n+\t\t\t\tgetValueLabel().setText(screen.getValueLabel().getText());\n+\t\t\t\tapply();\n+\t\t\t}\n \t}"
        }
      ]
    }
  },
  {
    "name": "Null pointer fix at DefaultRouter",
    "url": "https://github.com/RestComm/jain-sip/pull/10",
    "description": "In case of b2b UA and/or pure proxy behaviour, the routes list may not be null but the only remaining entry might be removed via proxy in order to route the message to its final destination.\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/RestComm/jain-sip/commit/9738991bab6399bac008093591c40bb32e3c601d",
      "files": [
        {
          "file_name": "src/gov/nist/javax/sip/stack/DefaultRouter.java",
          "patch": "@@ -189,8 +189,12 @@ public Hop getNextHop(Request request) throws SipException {\n          *\n          * Subsequently, the request URI will be used as next hop target\n          */\n-\n-        if (routes !\u003d null) {\n+         \n+        // In case of b2b UA and/or pure proxy behaviour, the routes list may not be null\n+        // but the only remaining entry might be removed via proxy in order to route the message to\n+        // its final destination.\n+        // We should make null check in order to avoid null pointer at line 201\n+        if (routes !\u003d null \u0026\u0026 routes.getFirst () !\u003d null) {\n \n             // to send the request through a specified hop the application is\n             // supposed to prepend the appropriate Route header which."
        }
      ]
    }
  },
  {
    "name": "Unreal serializer isSubclass null pointer exception",
    "url": "https://github.com/acmi/L2unreal/issues/10",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/acmi/L2unreal/commit/197a8024cb679b641357e70a2e45c997162cc4a8",
      "files": [
        {
          "file_name": "src/main/java/acmi/l2/clientmod/unreal/UnrealSerializerFactory.java",
          "patch": "@@ -364,8 +364,8 @@ public boolean isSubclass(String parent, String child) {\n         String k \u003d parent + \"@\" + child;\n         if (!isSubclassCache.containsKey(k)) {\n             child \u003d getSuperClass(child);\n-\n-            isSubclassCache.put(k, child !\u003d null \u0026\u0026 isSubclass(parent, child));\n+            boolean val \u003d child !\u003d null \u0026\u0026 isSubclass(parent, child);\n+            isSubclassCache.put(k, val);\n         }\n         return isSubclassCache.get(k);\n     }"
        }
      ]
    }
  },
  {
    "name": "Making a new directory/file then pressing cancel causes null pointer",
    "url": "https://github.com/ecnivo/Flow/issues/53",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/ecnivo/Flow/commit/f3107bd2f8cc730dc0ff583ede068ec6963d93f3",
      "files": [
        {
          "file_name": "Flow-Client/src/editing/EditorDocTree.java",
          "patch": "@@ -315,7 +315,14 @@ public void actionPerformed(ActionEvent arg0) {\n \t\t\tJOptionPane.showConfirmDialog(null, \"Please select a directory to put your new directory in first\", \"No selected directory\", JOptionPane.DEFAULT_OPTION, JOptionPane.ERROR_MESSAGE);\n \t\t\treturn;\n \t\t    }\n-\t\t    String name \u003d JOptionPane.showInputDialog(null, \"What is the name of your new directory?\", \"Name\", JOptionPane.QUESTION_MESSAGE).trim();\n+\t\t    String name \u003d JOptionPane.showInputDialog(null, \"What is the name of your new directory?\", \"Name\", JOptionPane.QUESTION_MESSAGE);\n+\t\t    if (name \u003d\u003d null) {\n+\t\t\treturn;\n+\t\t    }\n+\t\t    name \u003d name.trim();\n+\t\t    if (name.length() \u003d\u003d 0) {\n+\t\t\treturn;\n+\t\t    }\n \t\t    while (CreateAccountPane.stringContains(name, CreateAccountPane.INVALID_CHARS) || name.length() \u003c 1) {\n \t\t\tname \u003d JOptionPane.showInputDialog(null, \"That name is invalid.\\nPlease enter an appropriate new name for this directory.\\nNo characters such as: \\\\ / ? % * : | \" + \"\\\" \u003c \u003e . # \u0026 { } $ @ \u003d ` + \", \"Invalid name\", JOptionPane.ERROR_MESSAGE).trim();\n \t\t    }\n@@ -352,10 +359,14 @@ private CreateFileOnFolderButton() {\n \t\t@Override\n \t\tpublic void actionPerformed(ActionEvent arg0) {\n \t\t    DirectoryNode selectedDir \u003d (DirectoryNode) getSelectionPath().getLastPathComponent();\n-\t\t    String name \u003d JOptionPane.showInputDialog(null, \"What is the name of your new  file?\\nInclude extensions such as .java\", \"Name\", JOptionPane.QUESTION_MESSAGE).trim();\n-\t\t    while (CreateAccountPane.stringContains(name, CreateAccountPane.INVALID_CHARS) || name.length() \u003c 1) {\n+\t\t    String name \u003d JOptionPane.showInputDialog(null, \"What is the name of your new  file?\\nInclude extensions such as .java\", \"Name\", JOptionPane.QUESTION_MESSAGE);\n+\t\t    if (name \u003d\u003d null){\n+\t\t\treturn;\n+\t\t    }\n+\t\t    while (CreateAccountPane.stringContains(name, CreateAccountPane.INVALID_CHARS) || name.trim().length() \u003c 1) {\n \t\t\tname \u003d JOptionPane.showInputDialog(null, \"That name is invalid.\\nPlease enter an appropriate new name for this directory.\\nNo characters such as: \\\\ / ? % * : | \" + \"\\\" \u003c \u003e . # \u0026 { } $ @ \u003d ` + \", \"Invalid name\", JOptionPane.ERROR_MESSAGE).trim();\n \t\t    }\n+\t\t    name \u003d name.trim();\n \t\t    Data createFileRequest \u003d new Data(\"new_text_file\");\n \t\t    UUID projectUUID \u003d ((ProjectNode) selectedDir.getPath()[1]).getProjectUUID();\n \t\t    createFileRequest.put(\"project_uuid\", projectUUID);"
        },
        {
          "file_name": "Flow-Server/data/FlowDatabse.db"
        }
      ]
    }
  },
  {
    "name": "Fix null pointer exception",
    "url": "https://github.com/robward-scisys/sldeditor/pull/235",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/robward-scisys/sldeditor/commit/fa8e645f4e82a06ae5f32389a1440e83abd4f09f",
      "files": [
        {
          "file_name": "modules/application/src/main/java/com/sldeditor/common/defaultsymbol/DefaultSymbols.java",
          "patch": "@@ -529,8 +529,12 @@ private static PointSymbolizer createArrow(FunctionName angleFunction,\n         // Arrow rotation\n         List\u003cExpression\u003e rotationArgumentList \u003d new ArrayList\u003cExpression\u003e();\n \n+        String geometryFieldName \u003d \"geom\";\n         DataSourceInterface dsInfo \u003d DataSourceFactory.getDataSource();\n-        String geometryFieldName \u003d dsInfo.getGeometryFieldName();\n+        if(dsInfo !\u003d null)\n+        {\n+            geometryFieldName \u003d dsInfo.getGeometryFieldName();\n+        }\n         rotationArgumentList.add(ff.property(geometryFieldName));\n \n         Expression rotation \u003d FunctionManager.getInstance().createExpression(angleFunction, rotationArgumentList);"
        }
      ]
    }
  },
  {
    "name": "Null Pointer Exception on Write Transfer",
    "url": "https://github.com/mattmaynes2/java-tftp/issues/117",
    "description": "java.lang.NullPointerException\n    at core.net.NodeSocket.send(NodeSocket.java:169)\n    at core.net.NodeSocket.send(NodeSocket.java:156)\n    at core.net.WriteTransfer.sendDataMessage(WriteTransfer.java:183)\n    at core.net.WriteTransfer.handleTimeout(WriteTransfer.java:169)\n    at core.net.NodeSocket.notifyTimeout(NodeSocket.java:248)\n    at core.net.NodeSocket.receive(NodeSocket.java:205)\n    at core.net.WriteTransfer.getAcknowledge(WriteTransfer.java:151)\n    at core.net.WriteTransfer.sendRequest(WriteTransfer.java:67)\n    at core.ctrl.TransferController.write(TransferController.java:167)\n    at core.ctrl.TransferController.handleCommand(TransferController.java:64)\n    at core.cli.CLI.notifyHandlers(CLI.java:82)\n    at core.cli.CLI.execute(CLI.java:61)\n    at core.util.Worker.run(Worker.java:63)\n    at java.lang.Thread.run(Thread.java:745)\n",
    "keywords": [
      "cli",
      "core",
      "core net",
      "nodesocket",
      "transfercontroller",
      "writetransfer",
      "net"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/mattmaynes2/java-tftp/commit/4e19bc7a3634ee50cabc2247a49d52a404fcb65a",
      "files": [
        {
          "file_name": "core/src/core/net/WriteTransfer.java",
          "patch": "@@ -164,12 +164,14 @@ public AckMessage getAcknowledge () throws\n      * @param remaining - Number of retry attempts remaining\n      */\n     public void handleTimeout (int remaining) {\n-        super.handleTimeout(remaining);\n-        try {\n-            this.sendDataMessage(this.currentMessage);\n-        } catch (IOException e){\n-            e.printStackTrace();\n-            System.exit(0);\n+        if(this.currentMessage !\u003d null) {\n+            super.handleTimeout(remaining);\n+            try {\n+                this.sendDataMessage(this.currentMessage);\n+            } catch (IOException e){\n+                e.printStackTrace();\n+                System.exit(0);\n+            }\n         }\n     }\n "
        }
      ]
    }
  },
  {
    "name": "Ghazban Ogre throwing Null Pointer Exception",
    "url": "https://github.com/magefree/mage/issues/1828",
    "description": "from bug report in forums:\n\nI have Ghazbn Ogre in play, my hp is 19, opponent\u0027s is 20, thus I should lose control of it when it gets to my upkeep. Instead we get the error below, and the game is locked at upkeep, whenever I try to pass priority we both just get the error again:\n\n```\nGame exception occurred: java.lang.NullPointerException\nServer version: 1.4.10v1\nmage.sets.fifthedition.GhazbanOgreEffect.apply(GhazbanOgre.java:103)\nmage.abilities.AbilityImpl.resolve(AbilityImpl.java:199)\nmage.abilities.TriggeredAbilityImpl.resolve(TriggeredAbilityImpl.java:98)\nmage.game.stack.StackAbility.resolve(StackAbility.java:107)\nmage.game.GameImpl.resolve(GameImpl.java:1355)\nmage.game.GameImpl.playPriority(GameImpl.java:1306)\nmage.game.turn.Step.priority(Step.java:87)\nmage.game.turn.Phase.playStep(Phase.java:210)\nmage.game.turn.Phase.play(Phase.java:115)\nmage.game.turn.Turn.play(Turn.java:152)\nmage.game.GameImpl.playTurn(GameImpl.java:836)\nmage.game.GameImpl.play(GameImpl.java:750)\nmage.game.GameImpl.start(GameImpl.java:717)\nmage.server.game.GameWorker.call(GameWorker.java:60)\njava.util.concurrent.FutureTask.run(FutureTask.java:266)\njava.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\njava.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\njava.lang.Thread.run(Thread.java:745)\n```\n",
    "keywords": [
      "threadpoolexecutor",
      "phase",
      "play",
      "mage",
      "game",
      "mage game",
      "resolve",
      "gameimpl",
      "game gameimpl",
      "concurrent",
      "run",
      "turn",
      "java",
      "util"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/magefree/mage/commit/278558c925d079f14470cb34d2a955415fcd72db",
      "files": [
        {
          "file_name": "Mage.Sets/src/mage/sets/fifthedition/GhazbanOgre.java",
          "patch": "@@ -31,19 +31,24 @@\n import mage.MageInt;\r\n import mage.abilities.Ability;\r\n import mage.abilities.common.BeginningOfUpkeepTriggeredAbility;\r\n+import mage.abilities.effects.ContinuousEffect;\r\n import mage.abilities.effects.OneShotEffect;\r\n+import mage.abilities.effects.common.continuous.GainControlTargetEffect;\r\n import mage.cards.CardImpl;\r\n import mage.constants.CardType;\r\n+import mage.constants.Duration;\r\n import mage.constants.Outcome;\r\n import mage.constants.Rarity;\r\n import mage.constants.TargetController;\r\n import mage.game.Game;\r\n-import mage.players.Player;\r\n import mage.game.permanent.Permanent;\r\n+import mage.players.Player;\r\n+import mage.target.targetpointer.FixedTarget;\r\n \r\n /**\r\n  *\r\n- * @author MarcoMarin, Watch out! This one I actually made from scratch!(1st time \\o/) Not even checked similars :) beware!\r\n+ * @author MarcoMarin, Watch out! This one I actually made from scratch!(1st\r\n+ * time \\o/) Not even checked similars :) beware!\r\n  */\r\n public class GhazbanOgre extends CardImpl {\r\n \r\n@@ -54,9 +59,9 @@ public GhazbanOgre(UUID ownerId) {\n         this.power \u003d new MageInt(2);\r\n         this.toughness \u003d new MageInt(2);\r\n \r\n-        // At the beginning of your upkeep, if a player has more life than each other player, the player with the most life gains control of Ghazb\u0026aacute;n Ogre.\r\n+        // At the beginning of your upkeep, if a player has more life than each other player, the player with the most life gains control of Ghazbn Ogre.\r\n         this.addAbility(new BeginningOfUpkeepTriggeredAbility(new GhazbanOgreEffect(), TargetController.YOU, false));\r\n-        \r\n+\r\n     }\r\n \r\n     public GhazbanOgre(final GhazbanOgre card) {\r\n@@ -68,42 +73,53 @@ public GhazbanOgre copy() {\n         return new GhazbanOgre(this);\r\n     }\r\n }\r\n+\r\n class GhazbanOgreEffect extends OneShotEffect {\r\n-    \r\n+\r\n     public GhazbanOgreEffect() {\r\n         super(Outcome.GainControl);\r\n-        this.staticText \u003d \"the player with the most life gains control of Ghazban Ogre\";\r\n+        this.staticText \u003d \"the player with the most life gains control of {this}\";\r\n     }\r\n-    \r\n+\r\n     public GhazbanOgreEffect(final GhazbanOgreEffect effect) {\r\n         super(effect);\r\n     }\r\n-    \r\n+\r\n     @Override\r\n     public GhazbanOgreEffect copy() {\r\n         return new GhazbanOgreEffect(this);\r\n     }\r\n-    \r\n+\r\n     @Override\r\n     public boolean apply(Game game, Ability source) {\r\n-        Player newOwner \u003d null;\r\n-        int lowLife \u003d Integer.MIN_VALUE;\r\n-        boolean tie \u003d false;\r\n-        for (UUID playerID : game.getPlayerList()){\r\n-            Player player \u003d game.getPlayer(playerID);        \r\n-            if (player.getLife() \u003e lowLife){\r\n-                lowLife \u003d player.getLife();\r\n-                newOwner \u003d player;\r\n-                tie \u003d false;\r\n-            }else if (player.getLife() \u003d\u003d lowLife){ \r\n-                tie \u003d true;\r\n-            }        \r\n-        }\r\n-        if (!tie){\r\n-           game.getPermanent(source.getId()).changeControllerId(newOwner.getId(), game);\r\n+        Player controller \u003d game.getPlayer(source.getControllerId());\r\n+        if (controller !\u003d null) {\r\n+            Permanent sourcePermanent \u003d game.getPermanent(source.getSourceId());\r\n+            if (sourcePermanent !\u003d null) {\r\n+                Player newController \u003d null;\r\n+                int lowLife \u003d Integer.MIN_VALUE;\r\n+                boolean tie \u003d false;\r\n+                for (UUID playerID : game.getState().getPlayersInRange(source.getControllerId(), game)) {\r\n+                    Player player \u003d game.getPlayer(playerID);\r\n+                    if (player !\u003d null) {\r\n+                        if (player.getLife() \u003e lowLife) {\r\n+                            lowLife \u003d player.getLife();\r\n+                            newController \u003d player;\r\n+                            tie \u003d false;\r\n+                        } else if (player.getLife() \u003d\u003d lowLife) {\r\n+                            tie \u003d true;\r\n+                        }\r\n+                    }\r\n+                }\r\n+                if (!controller.equals(newController) \u0026\u0026 !tie \u0026\u0026 newController !\u003d null) {\r\n+                    ContinuousEffect effect \u003d new GainControlTargetEffect(Duration.Custom, newController.getId());\r\n+                    effect.setTargetPointer(new FixedTarget(sourcePermanent, game));\r\n+                    game.addEffect(effect, source);\r\n+                }\r\n+            }\r\n+            return true;\r\n         }\r\n-        \r\n-        return true;\r\n-                        \r\n+        return false;\r\n+\r\n     }\r\n-}\n\\ No newline at end of file\n+}\r"
        }
      ]
    }
  },
  {
    "name": "If a file write fails to initialize completely, the true error can be masked by a null pointer in completed with error",
    "url": "https://github.com/JumpMind/metl/issues/693",
    "description": "If a file write fails to initialize completely, the true error can be masked by a null pointer in completed with error",
    "keywords": [
      "error"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/JumpMind/metl/commit/b3c1593c1d6719317397a97729f5ea822da5b57c",
      "files": [
        {
          "file_name": "comp-file/src/main/java/org/jumpmind/metl/core/runtime/component/AbstractFileReader.java",
          "patch": "@@ -78,8 +78,11 @@ public void flowCompletedWithErrors(Throwable myError) {\n         } else if (ACTION_DELETE.equals(actionOnError)) {\n             deleteFiles();\n         }\n-        directory.close(false);\n-        directory \u003d null;\n+        \n+        if (directory !\u003d null) {\n+            directory.close(false);\n+            directory \u003d null;\n+        }\n     }\n \n     @Override"
        }
      ]
    }
  },
  {
    "name": "#24 null pointer at month request",
    "url": "https://github.com/ORFAP/FAPCrawler/pull/25",
    "description": "Fixed Nullpointer. Replaced unnecessary array if always 12 fields with an ArrayList.\nBefore merge:\n- [ ] Work over classes in crawlerpipes package with @o4ier  \n\ntbd in another branch.\n\n---\n\ncloses #24 \n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/ORFAP/FAPCrawler/commit/49f0a4525b8e0bac9be736ca460ac6c5bd6e3066",
      "files": [
        {
          "file_name": "src/main/java/de/orfap/fap/crawler/controller/CrawlerController.java",
          "patch": "@@ -14,14 +14,14 @@\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.beans.factory.annotation.Value;\n import org.springframework.data.repository.query.Param;\n import org.springframework.web.bind.annotation.RequestMapping;\n import org.springframework.web.bind.annotation.RequestMethod;\n import org.springframework.web.bind.annotation.RestController;\n \n+import java.util.ArrayList;\n import java.util.List;\n-import java.util.concurrent.SynchronousQueue;\n-import java.util.zip.ZipFile;\n \n /**\n  * Created by Arne on 15.05.2016.\n@@ -34,6 +34,8 @@\n     @Autowired\n     Crawler crawler;\n     private final Logger LOG \u003d LoggerFactory.getLogger(CrawlerController.class);\n+    @Value(\"${fap.backend.basePath}\")\n+    private String basePath;\n \n     @RequestMapping(value \u003d \"/crawlIntoBackend\", method \u003d RequestMethod.GET)\n     public void crawlIntoBackend(@Param(\"year\") String year, @Param(\"month\") String month) throws Exception {\n@@ -67,37 +69,44 @@ public void crawlIntoBackend(@Param(\"year\") String year, @Param(\"month\") String\n         } catch (NumberFormatException nfe) {\n             throw new IllegalArgumentException(\"year/month must be a numerical value\");\n         }\n+\n+        //Airlines, Markets and Routes only get crawled if startmonth \u003d 1!\n         if (startMonth \u003d\u003d 1) {\n             crawler.getAirlines(\"http://transtats.bts.gov/Download_Lookup.asp?Lookup\u003dL_AIRLINE_ID\");\n             crawler.getMarkets(\"http://www.transtats.bts.gov/Download_Lookup.asp?Lookup\u003dL_CITY_MARKET_ID\");\n             crawler.getRoutes(\"http://transtats.bts.gov/DownLoad_Table.asp?Table_ID\u003d311\u0026Has_Group\u003d3\u0026Is_Zipped\u003d0\", usedYear);\n             crawler.sendDataToBackend();\n         }\n+\n         //FlightPipe:\n-        Pump\u003cString\u003e[] pumps \u003d new Pump[12];\n-        Sink\u003cList\u003cRoute\u003e\u003e[] sinks \u003d new Sink[12];\n+        ArrayList\u003cPump\u003cString\u003e\u003e pumps \u003d new ArrayList();\n+        ArrayList\u003cSink\u003cList\u003cRoute\u003e\u003e\u003e sinks \u003d new ArrayList();\n         for (int i \u003d startMonth; i \u003c\u003d endMonth; i++) {\n-            pumps[i - 1] \u003d new Pump\u003c\u003e();\n-            sinks[i - 1] \u003d new Sink\u003c\u003e();\n+            pumps.add(new Pump\u003c\u003e());\n+            sinks.add(new Sink\u003c\u003e());\n             String filename \u003d \"flights-\" + usedYear + \"-\" + i + \".zip\";\n             String downloadfileType \u003d \"zip\";\n-            Downloader\u003cZipFile\u003e flightDownloader \u003d new Downloader\u003c\u003e(\"http://transtats.bts.gov/DownLoad_Table.asp?Table_ID\u003d236\u0026Has_Group\u003d3\u0026Is_Zipped\u003d0\", usedYear, i, downloadfileType, filename);\n-            ResourceBuilder\u003cString, Route\u003e rbsf \u003d new ResourceBuilder\u003c\u003e(\"\", new Route(), true);\n-            pumps[i - 1].use(new Unzipper\u003c\u003e(downloadfileType, filename, \"\"))\n+            new Downloader\u003c\u003e(\"http://transtats.bts.gov/DownLoad_Table.asp?Table_ID\u003d236\u0026Has_Group\u003d3\u0026Is_Zipped\u003d0\", usedYear, i, downloadfileType, filename);\n+            ResourceBuilder\u003cString, Route\u003e rbsf \u003d new ResourceBuilder\u003c\u003e(\"\", new Route(), true, basePath);\n+            pumps.get(i - startMonth).use(new Unzipper\u003c\u003e(downloadfileType, filename, \"\"))\n                     .connect(new Pipe\u003c\u003e())\n                     .connect(rbsf)\n                     .connect(new SynchronizedQueue\u003c\u003e())\n                     .connect(new Collector\u003c\u003e())\n                     .connect(new Pipe\u003c\u003e())\n-                    .connect(sinks[i - 1].use(flightSender));\n-            pumps[i - 1].interrupt();\n-            sinks[i - 1].interrupt();\n+                    .connect(sinks.get(i - startMonth).use(flightSender));\n+            pumps.get(i - startMonth).interrupt();\n+            sinks.get(i - startMonth).interrupt();\n             LOG.info(\"Started FlightCrawlThread#\" + i);\n+            if ((i - startMonth) % 4 \u003d\u003d 0) {\n+                LOG.info(\"Waiting for FlightCrawlThread#\"+i);\n+                pumps.get(i - startMonth).join();\n+            }\n         }\n-        for (int i \u003d 0; i \u003c sinks.length; i++) {\n-            sinks[i].join();\n-            LOG.info(\"Sink \" + i + \" beendet\");\n+        for (int i \u003d 0; i \u003c sinks.size(); i++) {\n+            sinks.get(i).join();\n+            LOG.info(\"Sink \" + (i + 1) + \" von \" + sinks.size() + \" beendet\");\n         }\n-        LOG.info(\"Crawling of \" + year + \" done\");\n+        LOG.info(\"Crawling of \" + year + \", months \" + startMonth + \"-\" + endMonth + \" done\");\n     }\n }"
        },
        {
          "file_name": "src/main/java/de/orfap/fap/crawler/crawlerpipes/ResourceBuilder.java",
          "patch": "@@ -4,7 +4,6 @@\n import de.orfap.fap.crawler.domain.Market;\n import de.orfap.fap.crawler.domain.Route;\n import edu.hm.obreitwi.arch.lab08.BaseFilter;\n-import org.springframework.beans.factory.annotation.Value;\n \n import java.util.GregorianCalendar;\n \n@@ -15,13 +14,13 @@\n     private Object object;\n     private String s;\n     private boolean listable;\n-    @Value(\"${fap.backend.basePath}\")\n-    private String basepath;\n+    private String basePath;\n \n-    public ResourceBuilder(final String s, final Object object, boolean listable) {\n+    public ResourceBuilder(final String s, final Object object, boolean listable, final String basePath) {\n         this.s \u003d s;\n         this.object \u003d object;\n         this.listable\u003dlistable;\n+        this.basePath \u003d basePath;\n     }\n \n     @Override\n@@ -76,9 +75,9 @@ public U transform(T data) {\n                     output.setDestination(columns[4]);\n                 }\n                 else{\n-                    output.setAirline(basepath + \"airlines/\" + columns[2]);\n-                    output.setSource(basepath + \"markets/\" + columns[3]);\n-                    output.setDestination(basepath + \"markets/\" + columns[4]);\n+                    output.setAirline(basePath + \"airlines/\" + columns[2]);\n+                    output.setSource(basePath + \"markets/\" + columns[3]);\n+                    output.setDestination(basePath + \"markets/\" + columns[4]);\n                 }\n                 return (U) output;\n             }"
        },
        {
          "file_name": "src/main/java/de/orfap/fap/crawler/crawlerpipes/Sender.java",
          "patch": "@@ -50,6 +50,6 @@ public void accept(T data) {\n         } else if (data instanceof List){\n             routeClient.create((List)data);\n         }\n-        numberSendOperations++;\n+        numberSendOperations+\u003d((List)data).size();\n     }\n }"
        }
      ]
    }
  },
  {
    "name": "Null pointer exception fix on form crash ",
    "url": "https://github.com/dimagi/commcare-android/pull/267",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/dimagi/commcare-android/commit/decc7d3554bdfdea2f641ae192dd2d99dbe38ae0",
      "files": [
        {
          "file_name": "app/src/org/commcare/dalvik/activities/CommCareHomeActivity.java",
          "patch": "@@ -636,8 +636,9 @@ else if(resultCode \u003d\u003d RESULT_OK) {\n      * Triggers form submission cycle, cleans up some session state.\n      *\n      * @param resultCode exit code of form entry activity\n-     * @param intent The intent of the returning activity, with the\n-     * saved form provided as the intent URI data\n+     * @param intent     The intent of the returning activity, with the\n+     *                   saved form provided as the intent URI data. Null if\n+     *                   the form didn\u0027t exit cleanly\n      * @return Flag signifying that caller should fetch the next activity in\n      * the session to launch. If false then caller should exit or spawn home\n      * activity.\n@@ -662,7 +663,7 @@ private boolean processReturnFromFormEntry(int resultCode, Intent intent) {\n         }\n \n         // TODO: This should be the default unless we\u0027re in some \"Uninit\" or \"incomplete\" state\n-        if (intent.getBooleanExtra(FormEntryActivity.IS_ARCHIVED_FORM, false) ||\n+        if ((intent !\u003d null \u0026\u0026 intent.getBooleanExtra(FormEntryActivity.IS_ARCHIVED_FORM, false)) ||\n                 FormRecord.STATUS_COMPLETE.equals(current.getStatus()) ||\n                 FormRecord.STATUS_SAVED.equals(current.getStatus())) {\n             // Viewing an old form, so don\u0027t change the historical record"
        }
      ]
    }
  },
  {
    "name": "null pointer exception with token_count data type and indexing a null value",
    "url": "https://github.com/elastic/elasticsearch/issues/24928",
    "description": "**Elasticsearch version**: 5.4.0\r\n\r\n**Plugins installed**: X-Pack\r\n\r\n**JVM version** (`java -version`): \r\n```json\r\n        \"version\": \"1.8.0_131\",\r\n        \"vm_name\": \"OpenJDK 64-Bit Server VM\",\r\n        \"vm_version\": \"25.131-b11\",\r\n        \"vm_vendor\": \"Oracle Corporation\",\r\n```\r\n**OS version** (`uname -a` if on a Unix-like system):\r\n\r\n```json\r\n        \"name\": \"Linux\",\r\n        \"arch\": \"amd64\",\r\n        \"version\": \"4.10.17-200.fc25.x86_64\",\r\n```\r\nFedora 25\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nIt looks like there is an issue with the handling of null values for the `token_count` data type. Trying to index a document that has a multi-field with a `token_count` data type results in a null  pointer exception.  It seems like `token_count` should support null values?\r\n\r\n**Steps to reproduce**:\r\n\r\n1. Create a mapping using a `token_count` field:\r\n\r\n```json\r\nPUT /test\r\n{\r\n  \"mappings\": {\r\n    \"doc\": {\r\n      \"properties\": {\r\n        \"test\": {\r\n          \"type\": \"keyword\",\r\n          \"fields\": {\r\n            \"nr\": {\r\n              \"type\": \"token_count\",\r\n              \"analyzer\": \"default\"\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n2. Add a doc _without_ a null value works:\r\n\r\n```json\r\nPOST /test/doc\r\n{\r\n  \"test\": \"1234 5678\"\r\n}\r\n```\r\n\r\n3. Add a doc _with_ a null value throws an exception:\r\n\r\n```json\r\nPOST /test/doc\r\n{\r\n  \"test\": null\r\n} \r\n```\r\n\r\nResults in the following exception thrown back at the client:\r\n\r\n```json\r\n{\r\n  \"error\": {\r\n    \"root_cause\": [\r\n      {\r\n        \"type\": \"mapper_parsing_exception\",\r\n        \"reason\": \"failed to parse [test.nr]\"\r\n      }\r\n    ],\r\n    \"type\": \"mapper_parsing_exception\",\r\n    \"reason\": \"failed to parse [test.nr]\",\r\n    \"caused_by\": {\r\n      \"type\": \"null_pointer_exception\",\r\n      \"reason\": null\r\n    }\r\n  },\r\n  \"status\": 400\r\n}\r\n```\r\n\r\nAnd I see the following thrown at DEBUG level in the Elasticsearch logs:\r\n\r\n```\r\n[2017-05-29T04:18:55,042][DEBUG][r.suppressed             ] path: /test/doc, params: {index\u003dtest, type\u003ddoc}\r\norg.elasticsearch.index.mapper.MapperParsingException: failed to parse [test.nr]\r\n\tat org.elasticsearch.index.mapper.FieldMapper.parse(FieldMapper.java:298) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.index.mapper.FieldMapper$MultiFields.parse(FieldMapper.java:561) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.index.mapper.FieldMapper.parse(FieldMapper.java:300) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.index.mapper.DocumentParser.parseObjectOrField(DocumentParser.java:450) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.index.mapper.DocumentParser.parseNullValue(DocumentParser.java:595) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.index.mapper.DocumentParser.innerParseObject(DocumentParser.java:392) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.index.mapper.DocumentParser.parseObjectOrNested(DocumentParser.java:373) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.index.mapper.DocumentParser.internalParseDocument(DocumentParser.java:93) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.index.mapper.DocumentParser.parseDocument(DocumentParser.java:66) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:277) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.index.shard.IndexShard.prepareIndex(IndexShard.java:536) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.index.shard.IndexShard.prepareIndexOnPrimary(IndexShard.java:513) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.action.bulk.TransportShardBulkAction.prepareIndexOperationOnPrimary(TransportShardBulkAction.java:450) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.action.bulk.TransportShardBulkAction.executeIndexRequestOnPrimary(TransportShardBulkAction.java:458) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.action.bulk.TransportShardBulkAction.executeBulkItemRequest(TransportShardBulkAction.java:143) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:113) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:69) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryShardReference.perform(TransportReplicationAction.java:939) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryShardReference.perform(TransportReplicationAction.java:908) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.action.support.replication.ReplicationOperation.execute(ReplicationOperation.java:113) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.action.support.replication.TransportReplicationAction$AsyncPrimaryAction.onResponse(TransportReplicationAction.java:322) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.action.support.replication.TransportReplicationAction$AsyncPrimaryAction.onResponse(TransportReplicationAction.java:264) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.action.support.replication.TransportReplicationAction$1.onResponse(TransportReplicationAction.java:888) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.action.support.replication.TransportReplicationAction$1.onResponse(TransportReplicationAction.java:885) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.index.shard.IndexShardOperationsLock.acquire(IndexShardOperationsLock.java:147) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.index.shard.IndexShard.acquirePrimaryOperationLock(IndexShard.java:1658) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.action.support.replication.TransportReplicationAction.acquirePrimaryShardReference(TransportReplicationAction.java:897) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.action.support.replication.TransportReplicationAction.access$400(TransportReplicationAction.java:93) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.action.support.replication.TransportReplicationAction$AsyncPrimaryAction.doRun(TransportReplicationAction.java:281) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryOperationTransportHandler.messageReceived(TransportReplicationAction.java:260) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryOperationTransportHandler.messageReceived(TransportReplicationAction.java:252) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler$1.doRun(SecurityServerTransportInterceptor.java:245) ~[?:?]\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.common.util.concurrent.EsExecutors$1.execute(EsExecutors.java:110) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler.lambda$messageReceived$0(SecurityServerTransportInterceptor.java:294) ~[?:?]\r\n\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:59) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.xpack.security.transport.ServerTransportFilter$NodeProfile.lambda$authorizeAsync$4(ServerTransportFilter.java:180) ~[?:?]\r\n\tat org.elasticsearch.xpack.security.authz.AuthorizationUtils$AsyncAuthorizer.maybeRun(AuthorizationUtils.java:127) ~[?:?]\r\n\tat org.elasticsearch.xpack.security.authz.AuthorizationUtils$AsyncAuthorizer.setRunAsRoles(AuthorizationUtils.java:121) ~[?:?]\r\n\tat org.elasticsearch.xpack.security.authz.AuthorizationUtils$AsyncAuthorizer.authorize(AuthorizationUtils.java:109) ~[?:?]\r\n\tat org.elasticsearch.xpack.security.transport.ServerTransportFilter$NodeProfile.authorizeAsync(ServerTransportFilter.java:182) ~[?:?]\r\n\tat org.elasticsearch.xpack.security.transport.ServerTransportFilter$NodeProfile.lambda$inbound$3(ServerTransportFilter.java:170) ~[?:?]\r\n\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:59) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.xpack.security.authc.AuthenticationService$Authenticator.lambda$authenticateAsync$0(AuthenticationService.java:192) ~[?:?]\r\n\tat org.elasticsearch.xpack.security.authc.AuthenticationService$Authenticator.lambda$lookForExistingAuthentication$2(AuthenticationService.java:212) ~[?:?]\r\n\tat org.elasticsearch.xpack.security.authc.AuthenticationService$Authenticator.lookForExistingAuthentication(AuthenticationService.java:224) ~[?:?]\r\n\tat org.elasticsearch.xpack.security.authc.AuthenticationService$Authenticator.authenticateAsync(AuthenticationService.java:190) ~[?:?]\r\n\tat org.elasticsearch.xpack.security.authc.AuthenticationService$Authenticator.access$000(AuthenticationService.java:147) ~[?:?]\r\n\tat org.elasticsearch.xpack.security.authc.AuthenticationService.authenticate(AuthenticationService.java:118) ~[?:?]\r\n\tat org.elasticsearch.xpack.security.transport.ServerTransportFilter$NodeProfile.inbound(ServerTransportFilter.java:144) ~[?:?]\r\n\tat org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler.messageReceived(SecurityServerTransportInterceptor.java:301) ~[?:?]\r\n\tat org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:69) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.transport.TransportService$7.doRun(TransportService.java:627) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:638) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[?:1.8.0_131]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[?:1.8.0_131]\r\n\tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_131]\r\nCaused by: java.lang.NullPointerException\r\n\tat org.elasticsearch.index.mapper.TokenCountFieldMapper.parseCreateField(TokenCountFieldMapper.java:128) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\tat org.elasticsearch.index.mapper.FieldMapper.parse(FieldMapper.java:287) ~[elasticsearch-5.4.0.jar:5.4.0]\r\n\t... 58 more\r\n```",
    "keywords": [
      "exception",
      "reason",
      "transportreplicationaction",
      "4 0]",
      "fieldmapper",
      "data",
      "support replication",
      "run",
      "type",
      "fieldmapper parse",
      "security transport",
      "security authc",
      "elasticsearch index",
      "java",
      "elasticsearch",
      "transportreplicationaction$asyncprimaryaction",
      "dorun",
      "jar:5",
      "jar:5 4",
      "authenticationservice$authenticator",
      "nr]",
      "action",
      "util concurrent",
      "elasticsearch action",
      "~[",
      "~[ ",
      "test",
      "transportshardbulkaction",
      "0_131]",
      "index",
      "failed",
      "0]",
      "0",
      "xpack security",
      "null",
      "4",
      "util",
      "authc",
      ":1",
      "~[elasticsearch-5 4",
      "8",
      "doc",
      "version**",
      "java:37",
      "authorizationutils",
      "bulk",
      "support",
      "type ",
      "threadpoolexecutor",
      "servertransportfilter",
      "4 0",
      "org elasticsearch",
      "concurrent",
      "mapper",
      "/test/doc",
      "indexshard",
      "~[elasticsearch-5",
      "security",
      "common",
      "[test",
      "documentparser",
      "onresponse",
      "action bulk",
      "shard",
      "authenticationservice",
      "elasticsearch common",
      "value",
      "]",
      "xpack",
      "mapper documentparser",
      "authz",
      "abstractrunnable",
      "replication",
      "authorizationutils$asyncauthorizer",
      "org",
      "`token_count`",
      "```json",
      "transport",
      "parse",
      "0 jar:5",
      "securityservertransportinterceptor",
      "elasticsearch xpack",
      "messagereceived",
      "index mapper",
      "servertransportfilter$nodeprofile"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/elastic/elasticsearch/commit/dc5aa993e0cc5d32c683fa86793d103f60b40950",
      "files": [
        {
          "file_name": "core/src/main/java/org/elasticsearch/index/mapper/TokenCountFieldMapper.java",
          "patch": "@@ -134,6 +134,10 @@ protected void parseCreateField(ParseContext context, List\u003cIndexableField\u003e field\n             value \u003d context.parser().textOrNull();\n         }\n \n+        if (value \u003d\u003d null \u0026\u0026 fieldType().nullValue() \u003d\u003d null) {\n+            return;\n+        }\n+\n         final int tokenCount;\n         if (value \u003d\u003d null) {\n             tokenCount \u003d (Integer) fieldType().nullValue();"
        },
        {
          "file_name": "core/src/test/java/org/elasticsearch/index/mapper/TokenCountFieldMapperTests.java",
          "patch": "@@ -24,8 +24,10 @@\n import org.apache.lucene.analysis.MockTokenizer;\n import org.apache.lucene.analysis.Token;\n import org.apache.lucene.analysis.TokenStream;\n+import org.elasticsearch.common.bytes.BytesReference;\n import org.elasticsearch.common.compress.CompressedXContent;\n import org.elasticsearch.common.xcontent.XContentFactory;\n+import org.elasticsearch.common.xcontent.XContentType;\n import org.elasticsearch.index.IndexService;\n import org.elasticsearch.plugins.Plugin;\n import org.elasticsearch.test.ESSingleNodeTestCase;\n@@ -144,4 +146,55 @@ public void testEmptyName() throws IOException {\n         );\n         assertThat(e.getMessage(), containsString(\"name cannot be empty string\"));\n     }\n+\n+    public void testParseNullValue() throws Exception {\n+        DocumentMapper mapper \u003d createIndexWithTokenCountField();\n+        ParseContext.Document doc \u003d parseDocument(mapper, createDocument(null));\n+        assertNull(doc.getField(\"test.tc\"));\n+    }\n+\n+    public void testParseEmptyValue() throws Exception {\n+        DocumentMapper mapper \u003d createIndexWithTokenCountField();\n+        ParseContext.Document doc \u003d parseDocument(mapper, createDocument(\"\"));\n+        assertEquals(0, doc.getField(\"test.tc\").numericValue());\n+    }\n+\n+    public void testParseNotNullValue() throws Exception {\n+        DocumentMapper mapper \u003d createIndexWithTokenCountField();\n+        ParseContext.Document doc \u003d parseDocument(mapper, createDocument(\"three tokens string\"));\n+        assertEquals(3, doc.getField(\"test.tc\").numericValue());\n+    }\n+\n+    private DocumentMapper createIndexWithTokenCountField() throws IOException {\n+        final String content \u003d XContentFactory.jsonBuilder().startObject()\n+            .startObject(\"person\")\n+                .startObject(\"properties\")\n+                    .startObject(\"test\")\n+                        .field(\"type\", \"text\")\n+                        .startObject(\"fields\")\n+                            .startObject(\"tc\")\n+                                .field(\"type\", \"token_count\")\n+                                .field(\"analyzer\", \"standard\")\n+                            .endObject()\n+                        .endObject()\n+                    .endObject()\n+                .endObject()\n+            .endObject().endObject().string();\n+\n+        return createIndex(\"test\").mapperService().documentMapperParser().parse(\"person\", new CompressedXContent(content));\n+    }\n+\n+    private SourceToParse createDocument(String fieldValue) throws Exception {\n+        BytesReference request \u003d XContentFactory.jsonBuilder()\n+            .startObject()\n+                .field(\"test\", fieldValue)\n+            .endObject().bytes();\n+\n+        return SourceToParse.source(\"test\", \"person\", \"1\", request, XContentType.JSON);\n+    }\n+\n+    private ParseContext.Document parseDocument(DocumentMapper mapper, SourceToParse request) {\n+        return mapper.parse(request)\n+            .docs().stream().findFirst().orElseThrow(() -\u003e new IllegalStateException(\"Test object not parsed\"));\n+    }\n }"
        }
      ]
    }
  },
  {
    "name": "Null Pointer Exception",
    "url": "https://github.com/JPII/NavalBattle/issues/13",
    "description": "When executing, random null pointer exception\nThis is caused by swing threading on different, invisible threads... can be solved with invokeandwait()\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/JPII/NavalBattle/commit/1931d102144864241d93809bddef7f68de92fd86",
      "files": [
        {
          "file_name": "src/com/jpii/navalbattle/NavalBattle.java",
          "patch": "@@ -18,7 +18,7 @@\n package com.jpii.navalbattle;\n \n import com.jpii.roketgamer.RoketGamer;\n-import com.jpii.navalbattle.data.Constants;\n+import com.jpii.navalbattle.data.Commands;\n import com.jpii.navalbattle.data.GameState;\n import com.jpii.navalbattle.debug.CommandHandler;\n import com.jpii.navalbattle.debug.DebugWindow;\n@@ -33,11 +33,11 @@\n \t\n \tpublic static void main(String[] args) {\n \t\t\n-\t\t\n-\t\troketGamer \u003d new RoketGamer();\n \t\tdebugWindow \u003d new DebugWindow();\n \t\tgameState \u003d new GameState();\n-\t\tcommandHandler \u003d new CommandHandler(Constants.COMMANDS);\n+\t\troketGamer \u003d new RoketGamer();\n+\t\t\n+\t\tcommandHandler \u003d new CommandHandler(Commands.COMMANDS);\n \t\t\n \t\tdebugWindow.printInfo(\"NavalBattle initialized.\");\n \t\tnew LoginWindow();"
        },
        {
          "file_name": "src/com/jpii/navalbattle/data/Commands.java",
          "patch": "@@ -0,0 +1,122 @@\n+package com.jpii.navalbattle.data;\n+\n+import java.util.ArrayList;\n+\n+import com.jpii.navalbattle.NavalBattle;\n+import com.jpii.navalbattle.debug.Command;\n+import com.jpii.navalbattle.debug.CommandAction;\n+\n+public class Commands {\n+\t\n+\t/**\n+\t * Commands loaded on game start\n+\t */\n+\t@SuppressWarnings(\"serial\")\n+\tpublic static final ArrayList\u003cCommand\u003e COMMANDS \u003d new ArrayList\u003cCommand\u003e() {{\n+\t    add(new Command(\"help\", \"\", \"View all commands\", new CommandAction() { \n+\t    \tpublic void onRun(Command c, String enteredCommand) {\n+\t    \t\tNavalBattle.getDebugWindow().println(\"----------------- NavalBattle Debug Help -----------------\");\n+\t    \t\tfor(Command cmd : NavalBattle.getCommandHandler().getCommands()) {\n+\t    \t\t\tNavalBattle.getDebugWindow().println(cmd.getCommand() + cmd.getArgs() + \" - \" + cmd.getDescription());\n+\t    \t\t}\n+\t    \t}}\n+\t    ));\n+\t    \n+\t    add(new Command(\"quit\", \"\", \"Quit game\", new CommandAction() { \n+\t    \tpublic void onRun(Command c, String enteredCommand) {\n+\t    \t\tSystem.exit(0);\n+\t    \t}}\n+\t    ));\n+\t    \n+\t    add(new Command(\"version\", \"\", \"View version info\", new CommandAction() { \n+\t    \tpublic void onRun(Command c, String enteredCommand) {\n+\t    \t\tNavalBattle.getDebugWindow().println(Constants.NAVALBATTLE_VERSION_TITLE);\n+\t    \t}}\n+\t    ));\n+\t    \n+\t    add(new Command(\"echo\", \"\u003cmessage\u003e\", \"Print specified message\", new CommandAction() { \n+\t    \tpublic void onRun(Command c, String enteredCommand) {\n+\t    \t\tString[] s \u003d enteredCommand.split(\" \", 2);\n+\t    \t\tNavalBattle.getDebugWindow().println(s[1]);\n+\t    \t}}\n+\t    ));\n+\t    \n+\t    add(new Command(\"credits\", \"\", \"NavalBattle credits\", new CommandAction() { \n+\t    \tpublic void onRun(Command c, String enteredCommand) {\n+\t    \t\tNavalBattle.getDebugWindow().println(\"----------------- NavalBattle Credits -----------------\");\n+\t    \t\tNavalBattle.getDebugWindow().println(\"Anthony \\\"abauer\\\" Bauer - game design lead\");\n+\t    \t\tNavalBattle.getDebugWindow().println(\"Thomas \\\"TexasGamer\\\" Gaubert - SCM manager; RoketGamer lead\");\n+\t    \t\tNavalBattle.getDebugWindow().println(\"Max \\\"maximusvladimir\\\" Kirkby - TBD\");\n+\t    \t\tNavalBattle.getDebugWindow().println(\"JR \\\"DarkWarHero\\\" Vetus - TBD\");\n+\t    \t\tNavalBattle.getDebugWindow().println(\"Matt \\\"Matthis5point0\\\" Waller - TBD\");\n+\t    \t\tNavalBattle.getDebugWindow().println(\"Zach \\\"smeagle42\\\" Mathewson - TBD\");\n+\t    \t\tNavalBattle.getDebugWindow().println(\"\");\n+\t    \t\tNavalBattle.getDebugWindow().println(\"GitHub - source code hosting\");\n+\t    \t\tNavalBattle.getDebugWindow().println(\"RoketGamer - online social gaming\");\n+\t    \t}}\n+\t    ));\n+\t    \n+\t    add(new Command(\"setscore\", \"\u003cscore\u003e\", \"Set game score\", new CommandAction() { \n+\t    \tpublic void onRun(Command c, String enteredCommand) {\n+\t    \t\tString[] s \u003d enteredCommand.split(\" \", 2);\n+\t    \t\ttry {\n+\t    \t\t\tNavalBattle.getGameState().setScore(Integer.parseInt(s[1]));\n+\t\t    \t\tNavalBattle.getDebugWindow().printInfo(\"Game score set to \" + NavalBattle.getGameState().getScore());\n+\t    \t\t} catch (Exception ex) {\n+\t    \t\t\tNavalBattle.getDebugWindow().printError(\"Missing or invalid arg: score\");\n+\t    \t\t}\n+\t    \t}}\n+\t    ));\n+\t    \n+\t    add(new Command(\"addscore\", \"\u003cscore\u003e\", \"Add to game score\", new CommandAction() { \n+\t    \tpublic void onRun(Command c, String enteredCommand) {\n+\t    \t\tString[] s \u003d enteredCommand.split(\" \", 2);\n+\t    \t\ttry {\n+\t    \t\t\tNavalBattle.getGameState().addScore(Integer.parseInt(s[1]));\n+\t\t    \t\tNavalBattle.getDebugWindow().printInfo(\"Game score set to \" + NavalBattle.getGameState().getScore());\n+\t    \t\t} catch (Exception ex) {\n+\t    \t\t\tNavalBattle.getDebugWindow().printError(\"Missing or invalid arg: score\");\n+\t    \t\t}\n+\t    \t}}\n+\t    ));\n+\t    \n+\t    add(new Command(\"removescore\", \"\u003cscore\u003e\", \"Subtract from game score\", new CommandAction() { \n+\t    \tpublic void onRun(Command c, String enteredCommand) {\n+\t    \t\tString[] s \u003d enteredCommand.split(\" \", 2);\n+\t    \t\ttry {\n+\t    \t\t\tNavalBattle.getGameState().subtractScore(Integer.parseInt(s[1]));\n+\t\t    \t\tNavalBattle.getDebugWindow().printInfo(\"Game score set to \" + NavalBattle.getGameState().getScore());\n+\t    \t\t} catch (Exception ex) {\n+\t    \t\t\tNavalBattle.getDebugWindow().printError(\"Missing or invalid arg: score\");\n+\t    \t\t}\n+\t    \t}}\n+\t    ));\n+\t    \n+\t    add(new Command(\"getscore\", \"\", \"Get game score\", new CommandAction() { \n+\t    \tpublic void onRun(Command c, String enteredCommand) {\n+\t\t    \tNavalBattle.getDebugWindow().printInfo(\"Game score: \" + NavalBattle.getGameState().getScore());\n+\t    \t}}\n+\t    ));\n+\t    \n+\t    add(new Command(\"resetscore\", \"\", \"Set game score to 0\", new CommandAction() { \n+\t    \tpublic void onRun(Command c, String enteredCommand) {\n+\t    \t\tNavalBattle.getGameState().resetScore();\n+\t\t    \tNavalBattle.getDebugWindow().printInfo(\"Game score reset\");\n+\t    \t}}\n+\t    ));\n+\t    \n+\t    add(new Command(\"clear\", \"\", \"Clear debug window\", new CommandAction() { \n+\t    \tpublic void onRun(Command c, String enteredCommand) {\n+\t    \t\t\tNavalBattle.getDebugWindow().printNew(\"\");\n+\t    \t}}\n+\t    \n+\t    ));\n+\t    \n+\t    add(new Command(\"cls\", \"\", \"Clear debug window\", new CommandAction() { \n+\t    \tpublic void onRun(Command c, String enteredCommand) {\n+\t    \t\t\tNavalBattle.getDebugWindow().printNew(\"\");\n+\t    \t}}\n+\t    \n+\t    ));\n+\t}};\n+}"
        },
        {
          "file_name": "src/com/jpii/navalbattle/data/Constants.java",
          "patch": "@@ -17,12 +17,6 @@\n \n package com.jpii.navalbattle.data;\n \n-import java.util.ArrayList;\n-\n-import com.jpii.navalbattle.NavalBattle;\n-import com.jpii.navalbattle.debug.Command;\n-import com.jpii.navalbattle.debug.CommandAction;\n-\n public class Constants {\n \t\n \t/*\n@@ -31,127 +25,14 @@\n \tpublic static final String NAVALBATTLE_VERSION \u003d \"0.1a\";\n \tpublic static final String NAVALBATTLE_CODENAME \u003d \"Pioneer\";\n \tpublic static final String NAVALBATTLE_VERSION_TITLE \u003d \"NavalBattle \" + NAVALBATTLE_VERSION + \" (\" + NAVALBATTLE_CODENAME + \")\";\n-\tpublic static final String NEWSFEED_URL \u003d \"https://dl.dropbox.com/u/4847494/navalbattle/news.html\";\n \tpublic static final boolean DEBUG_MODE \u003d true;\n \t\n \t/*\n \t * RoketGamer\n \t */\n-\tpublic static final boolean ENABLE_ROKETGAMER \u003d true;\n+\tpublic static final boolean ENABLE_ROKETGAMER \u003d false;\n \tpublic static final boolean FORCE_LOGIN \u003d true;\n \tpublic static final String API_KEY \u003d \"API_KEY\";\n \tpublic static final String SERVER_LOCATION \u003d \"http://www.roketgamer.co.cc\";\n-\t\n-\t/*\n-\t * Commands\n-\t */\n-\t@SuppressWarnings(\"serial\")\n-\tpublic static final ArrayList\u003cCommand\u003e COMMANDS \u003d new ArrayList\u003cCommand\u003e() {{\n-\t    add(new Command(\"help\", \"\", \"View all commands\", new CommandAction() { \n-\t    \tpublic void onRun(Command c, String enteredCommand) {\n-\t    \t\tNavalBattle.getDebugWindow().println(\"----------------- NavalBattle Debug Help -----------------\");\n-\t    \t\tfor(Command cmd : NavalBattle.getCommandHandler().getCommands()) {\n-\t    \t\t\tNavalBattle.getDebugWindow().println(cmd.getCommand() + cmd.getArgs() + \" - \" + cmd.getDescription());\n-\t    \t\t}\n-\t    \t}}\n-\t    ));\n-\t    \n-\t    add(new Command(\"quit\", \"\", \"Quit game\", new CommandAction() { \n-\t    \tpublic void onRun(Command c, String enteredCommand) {\n-\t    \t\tSystem.exit(0);\n-\t    \t}}\n-\t    ));\n-\t    \n-\t    add(new Command(\"version\", \"\", \"View version info\", new CommandAction() { \n-\t    \tpublic void onRun(Command c, String enteredCommand) {\n-\t    \t\tNavalBattle.getDebugWindow().println(NAVALBATTLE_VERSION_TITLE + \" (\" + NAVALBATTLE_CODENAME + \")\");\n-\t    \t}}\n-\t    ));\n-\t    \n-\t    add(new Command(\"echo\", \"\u003cmessage\u003e\", \"Print specified message\", new CommandAction() { \n-\t    \tpublic void onRun(Command c, String enteredCommand) {\n-\t    \t\tString[] s \u003d enteredCommand.split(\" \", 2);\n-\t    \t\tNavalBattle.getDebugWindow().println(s[1]);\n-\t    \t}}\n-\t    ));\n-\t    \n-\t    add(new Command(\"credits\", \"\", \"NavalBattle credits\", new CommandAction() { \n-\t    \tpublic void onRun(Command c, String enteredCommand) {\n-\t    \t\tNavalBattle.getDebugWindow().println(\"----------------- NavalBattle Credits -----------------\");\n-\t    \t\tNavalBattle.getDebugWindow().println(\"Anthony \\\"abauer\\\" Bauer - game design lead\");\n-\t    \t\tNavalBattle.getDebugWindow().println(\"Thomas \\\"TexasGamer\\\" Gaubert - SCM manager; RoketGamer lead\");\n-\t    \t\tNavalBattle.getDebugWindow().println(\"Max \\\"maximusvladimir\\\" Kirkby - TBD\");\n-\t    \t\tNavalBattle.getDebugWindow().println(\"JR \\\"DarkWarHero\\\" Vetus - TBD\");\n-\t    \t\tNavalBattle.getDebugWindow().println(\"Matt \\\"Matthis5point0\\\" Waller - TBD\");\n-\t    \t\tNavalBattle.getDebugWindow().println(\"Zach \\\"smeagle42\\\" Mathewson - SCM manager; RoketGamer lead\");\n-\t    \t\tNavalBattle.getDebugWindow().println(\"\");\n-\t    \t\tNavalBattle.getDebugWindow().println(\"GitHub - source code hosting\");\n-\t    \t\tNavalBattle.getDebugWindow().println(\"RoketGamer - online social gaming\");\n-\t    \t}}\n-\t    ));\n-\t    \n-\t    add(new Command(\"setscore\", \"\u003cscore\u003e\", \"Set game score\", new CommandAction() { \n-\t    \tpublic void onRun(Command c, String enteredCommand) {\n-\t    \t\tString[] s \u003d enteredCommand.split(\" \", 2);\n-\t    \t\ttry {\n-\t    \t\t\tNavalBattle.getGameState().setScore(Integer.parseInt(s[1]));\n-\t\t    \t\tNavalBattle.getDebugWindow().printInfo(\"Game score set to \" + NavalBattle.getGameState().getScore());\n-\t    \t\t} catch (Exception ex) {\n-\t    \t\t\tNavalBattle.getDebugWindow().printError(\"Missing or invalid arg: score\");\n-\t    \t\t}\n-\t    \t}}\n-\t    ));\n-\t    \n-\t    add(new Command(\"addscore\", \"\u003cscore\u003e\", \"Add to game score\", new CommandAction() { \n-\t    \tpublic void onRun(Command c, String enteredCommand) {\n-\t    \t\tString[] s \u003d enteredCommand.split(\" \", 2);\n-\t    \t\ttry {\n-\t    \t\t\tNavalBattle.getGameState().addScore(Integer.parseInt(s[1]));\n-\t\t    \t\tNavalBattle.getDebugWindow().printInfo(\"Game score set to \" + NavalBattle.getGameState().getScore());\n-\t    \t\t} catch (Exception ex) {\n-\t    \t\t\tNavalBattle.getDebugWindow().printError(\"Missing or invalid arg: score\");\n-\t    \t\t}\n-\t    \t}}\n-\t    ));\n-\t    \n-\t    add(new Command(\"removescore\", \"\u003cscore\u003e\", \"Subtract from game score\", new CommandAction() { \n-\t    \tpublic void onRun(Command c, String enteredCommand) {\n-\t    \t\tString[] s \u003d enteredCommand.split(\" \", 2);\n-\t    \t\ttry {\n-\t    \t\t\tNavalBattle.getGameState().subtractScore(Integer.parseInt(s[1]));\n-\t\t    \t\tNavalBattle.getDebugWindow().printInfo(\"Game score set to \" + NavalBattle.getGameState().getScore());\n-\t    \t\t} catch (Exception ex) {\n-\t    \t\t\tNavalBattle.getDebugWindow().printError(\"Missing or invalid arg: score\");\n-\t    \t\t}\n-\t    \t}}\n-\t    ));\n-\t    \n-\t    add(new Command(\"getscore\", \"\", \"Get game score\", new CommandAction() { \n-\t    \tpublic void onRun(Command c, String enteredCommand) {\n-\t\t    \tNavalBattle.getDebugWindow().printInfo(\"Game score: \" + NavalBattle.getGameState().getScore());\n-\t    \t}}\n-\t    ));\n-\t    \n-\t    add(new Command(\"resetscore\", \"\", \"Set game score to 0\", new CommandAction() { \n-\t    \tpublic void onRun(Command c, String enteredCommand) {\n-\t    \t\tNavalBattle.getGameState().resetScore();\n-\t\t    \tNavalBattle.getDebugWindow().printInfo(\"Game score reset\");\n-\t    \t}}\n-\t    ));\n-\t    \n-\t    add(new Command(\"clear\", \"\", \"Clear debug window\", new CommandAction() { \n-\t    \tpublic void onRun(Command c, String enteredCommand) {\n-\t    \t\t\tNavalBattle.getDebugWindow().printNew(\"\");\n-\t    \t}}\n-\t    \n-\t    ));\n-\t    \n-\t    add(new Command(\"cls\", \"\", \"Clear debug window\", new CommandAction() { \n-\t    \tpublic void onRun(Command c, String enteredCommand) {\n-\t    \t\t\tNavalBattle.getDebugWindow().printNew(\"\");\n-\t    \t}}\n-\t    \n-\t    ));\n-\t}};\n-\t\n+\n }"
        },
        {
          "file_name": "src/com/jpii/navalbattle/gui/LoginWindow.java",
          "patch": "@@ -25,32 +25,19 @@ public LoginWindow() {\n \t\tf.getContentPane().setLayout(null);\n \t\tusernameLabel \u003d new JLabel();\n \t\tusernameLabel.setText(\"Username\");\n-\t\tusernameLabel.setBounds(311,285,100,20);\n+\t\tusernameLabel.setBounds(311,11,100,20);\n \t\tusernameField \u003d new JTextField(25);\n-\t\tusernameField.setBounds(365,285,100,20);\n+\t\tusernameField.setBounds(365,11,100,20);\n \t\tpasswordLabel \u003d new JLabel();\n \t\tpasswordLabel.setText(\"Password\");\n-\t\tpasswordLabel.setBounds(311,316,100,20);\n+\t\tpasswordLabel.setBounds(311,42,100,20);\n \t\tpasswordField \u003d new JPasswordField(25);\n-\t\tpasswordField.setBounds(365,316,100,20);\n+\t\tpasswordField.setBounds(365,42,100,20);\n \t\tloginButton\u003dnew JButton(\"Login\");\n-\t\tloginButton.setBounds(389,347,78,22);\n-\t\t\n-\t\tJTextPane txtpntest \u003d new JTextPane();\n-\t\tJScrollPane scrollableList \u003d new JScrollPane(txtpntest);\n-\t\tscrollableList.setLocation(10, 11);\n-\t\tscrollableList.setSize(455, 263);\n+\t\tloginButton.setBounds(389,73,78,22);\n \n \t\ttry {\n-\t\t\ttxtpntest.setPage(\"https://dl.dropbox.com/u/4847494/navalbattle/news.html\");\n \t\t} catch (Exception e) { NavalBattle.getDebugWindow().printError(\"Exception while loading news feed!\"); }\n-\n-\t\ttxtpntest.setEditable(false);\n-\t\ttxtpntest.setFocusable(false);\n-\t\ttxtpntest.setContentType(\"text/html\");\n-\t\ttxtpntest.setBounds(10, 11, 455, 263);\n-\n-\t\tf.getContentPane().add(scrollableList);\n \t\tf.getContentPane().add(usernameLabel);\n \t\tf.getContentPane().add(usernameField);\n \t\tf.getContentPane().add(passwordLabel);\n@@ -61,18 +48,18 @@ public LoginWindow() {\n \t\tusernameField.addKeyListener(new KeyboardListener(this));\t\t\n \t\t\n \t\tJLabel lblVersion \u003d new JLabel(Constants.NAVALBATTLE_VERSION_TITLE);\n-\t\tlblVersion.setBounds(10, 355, 164, 14);\n+\t\tlblVersion.setBounds(10, 81, 193, 14);\n \t\tf.getContentPane().add(lblVersion);\n \n \t\tJButton registerButton \u003d new JButton(\"Register\");\n-\t\tregisterButton.setBounds(301, 347, 78, 22);\n+\t\tregisterButton.setBounds(301, 73, 78, 22);\n \t\tf.getContentPane().add(registerButton);\n \t\t\n \t\tJButton btnOffline \u003d new JButton(\"Offline\");\n-\t\tbtnOffline.setBounds(213, 347, 78, 22);\n+\t\tbtnOffline.setBounds(213, 73, 78, 22);\n \t\tf.getContentPane().add(btnOffline);\n \n-\t\tf.setSize(491,418);\n+\t\tf.setSize(491,143);\n \t\tf.setVisible(true);\n \t\tf.setLocation(500,300);\n \n@@ -113,7 +100,7 @@ public void login() {\n \t\t}\n \t\t// Authenticate Login\n \t\telse if (false) {\n-\t\t\tNavalBattle.getDebugWindow().printWarning(\"User authenticated!\");\n+\t\t\tNavalBattle.getDebugWindow().printInfo(\"User authenticated!\");\n \t\t\tNavalBattle.getDebugWindow().printInfo(\"Disposing LoginWindow\");\n \t\t\tf.dispose();\n \t\t\tNavalBattle.getDebugWindow().printInfo(\"Opening MainMenuWindow\");"
        }
      ]
    }
  },
  {
    "name": "[TCPBinding] Prevent null pointer exception in UDPBinding",
    "url": "https://github.com/openhab/openhab1-addons/pull/5113",
    "description": "This is to prevent the null pointer exception reported in #5110 .\r\n\r\nAlso updated configuration updates to use Objects.toString() and fixed Eclipse formatting.\r\n\r\nFixes #5110.",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/openhab/openhab1-addons/commit/78c751d7d09ec944d1e875d03abf46e06324136a",
      "files": [
        {
          "file_name": "bundles/binding/org.openhab.binding.tcp/src/main/java/org/openhab/binding/tcp/protocol/internal/ProtocolGenericBindingProvider.java",
          "patch": "@@ -18,7 +18,6 @@\n import java.util.regex.Matcher;\n import java.util.regex.Pattern;\n \n-\n import org.apache.commons.lang.StringUtils;\n import org.openhab.binding.tcp.Direction;\n import org.openhab.binding.tcp.protocol.ProtocolBindingProvider;\n@@ -61,9 +60,9 @@\n     private static final Pattern ACTION_CONFIG_PATTERN \u003d Pattern\n             .compile(\"(\u003c|\u003e)\\\\[(.*?):(.*?):(.*?):(?:\u0027(.*)\u0027|(.*))\\\\]\");\n     private static final Pattern STATUS_CONFIG_PATTERN \u003d Pattern.compile(\"(\u003c|\u003e)\\\\[(.*?):(.*?):(?:\u0027(.*)\u0027|(.*))\\\\]\");\n-    \n+\n     private static final Command WILDCARD_COMMAND_KEY \u003d StringType.valueOf(\"*\");\n-    \n+\n     static int counter \u003d 0;\n \n     @Override\n@@ -273,7 +272,7 @@ public String getProtocolCommand(String itemName, Command command) {\n      * {@link ProtocolBindingConfigElement }. There will be map like\n      * \u003ccode\u003eON-\u003eProtocolBindingConfigElement\u003c/code\u003e\n      */\n-    static class ProtocolBindingConfig extends HashMap\u003cCommand, ProtocolBindingConfigElement\u003eimplements BindingConfig {\n+    static class ProtocolBindingConfig extends HashMap\u003cCommand, ProtocolBindingConfigElement\u003e implements BindingConfig {\n \n         private static final long serialVersionUID \u003d 6363085986521089771L;\n "
        },
        {
          "file_name": "bundles/binding/org.openhab.binding.tcp/src/main/java/org/openhab/binding/tcp/protocol/internal/UDPBinding.java",
          "patch": "@@ -1,5 +1,5 @@\n /**\n- * Copyright (c) 2010-2016 by the respective copyright holders.\n+ * Copyright (c) 2010-2017 by the respective copyright holders.\n  *\n  * All rights reserved. This program and the accompanying materials\n  * are made available under the terms of the Eclipse Public License v1.0\n@@ -15,6 +15,7 @@\n import java.nio.channels.DatagramChannel;\n import java.util.Dictionary;\n import java.util.List;\n+import java.util.Objects;\n import java.util.regex.Matcher;\n import java.util.regex.Pattern;\n \n@@ -33,15 +34,13 @@\n import org.slf4j.LoggerFactory;\n \n /**\n- * UDPBinding is most \"simple\" implementation of a UDP based ASCII protocol. It sends and received\n+ * UDPBinding is an implementation of a UDP based ASCII protocol. It sends and receives\n  * data as ASCII strings. Data sent out is padded with a CR/LF. This should be sufficient for a lot\n  * of home automation devices that take simple ASCII based control commands, or that send back\n- * text based status messages\n- *\n+ * text based status messages.\n  *\n  * @author Karel Goderis\n  * @since 1.1.0\n- *\n  */\n public class UDPBinding extends AbstractDatagramChannelBinding\u003cUDPBindingProvider\u003e implements ManagedService {\n \n@@ -69,69 +68,66 @@ protected boolean internalReceiveChanneledCommand(String itemName, Command comma\n \n         ProtocolBindingProvider provider \u003d findFirstMatchingBindingProvider(itemName);\n \n-        if (command !\u003d null) {\n+        if (command \u003d\u003d null) {\n+            return false;\n+        }\n \n-            String transformedMessage \u003d transformResponse(provider.getProtocolCommand(itemName, command),\n-                    commandAsString);\n-            String UDPCommandName \u003d preAmble + transformedMessage + postAmble;\n+        String transformedMessage \u003d transformResponse(provider.getProtocolCommand(itemName, command), commandAsString);\n+        String UDPCommandName \u003d preAmble + transformedMessage + postAmble;\n \n-            ByteBuffer outputBuffer \u003d null;\n-            try {\n-                outputBuffer \u003d ByteBuffer.allocate(UDPCommandName.getBytes(charset).length);\n-                outputBuffer.put(UDPCommandName.getBytes(charset));\n-            } catch (UnsupportedEncodingException e) {\n-                logger.warn(\"Exception while attempting an unsupported encoding scheme\");\n-            }\n+        ByteBuffer outputBuffer \u003d null;\n+        try {\n+            outputBuffer \u003d ByteBuffer.allocate(UDPCommandName.getBytes(charset).length);\n+            outputBuffer.put(UDPCommandName.getBytes(charset));\n+        } catch (UnsupportedEncodingException e) {\n+            logger.warn(\"Data for output buffer appears to be using an unsupported encoding\");\n+        }\n+\n+        // send the buffer in an asynchronous way\n+        ByteBuffer result \u003d null;\n+        try {\n+            result \u003d writeBuffer(outputBuffer, sChannel, blocking, timeOut);\n+        } catch (Exception e) {\n+            logger.warn(\"An exception occurred while writing a buffer to a channel\", e);\n+        }\n \n-            // send the buffer in an asynchronous way\n-            ByteBuffer result \u003d null;\n+        if (result !\u003d null \u0026\u0026 blocking) {\n+            String resultString \u003d \"\";\n             try {\n-                result \u003d writeBuffer(outputBuffer, sChannel, blocking, timeOut);\n-            } catch (Exception e) {\n-                logger.error(\"An exception occurred while writing a buffer to a channel: {}\", e.getMessage());\n+                resultString \u003d new String(result.array(), charset);\n+            } catch (UnsupportedEncodingException e) {\n+                logger.warn(\"Data received from write operation appears to be using an unsupported encoding\");\n             }\n \n-            if (result !\u003d null \u0026\u0026 blocking) {\n-                String resultString \u003d \"\";\n-                try {\n-                    resultString \u003d new String(result.array(), charset);\n-                } catch (UnsupportedEncodingException e) {\n-                    logger.warn(\"Exception while attempting an unsupported encoding scheme\");\n-                }\n-\n-                logger.info(\"Received {} from the remote end {}\", resultString, sChannel.toString());\n-                String transformedResponse \u003d transformResponse(provider.getProtocolCommand(itemName, command),\n-                        resultString);\n-\n-                // if the remote-end does not send a reply in response to the string we just sent, then the abstract\n-                // superclass will update\n-                // the openhab status of the item for us. If it does reply, then an additional update is done via\n-                // parseBuffer.\n-                // since this TCP binding does not know about the specific protocol, there might be two state updates\n-                // (the command, and if\n-                // the case, the reply from the remote-end)\n+            logger.info(\"Received {} from the remote end {}\", resultString, sChannel.toString());\n+            String transformedResponse \u003d transformResponse(provider.getProtocolCommand(itemName, command),\n+                    resultString);\n \n-                if (updateWithResponse) {\n+            // if the remote-end does not send a reply in response to the string we just sent, then the\n+            // abstract superclass will update the openhab status of the item for us. If it does reply,\n+            // then an additional update is done via parseBuffer.\n+            // since this binding does not know about the specific protocol, there might be two state\n+            // updates (the command, and if the case, the reply from the remote-end)\n \n-                    List\u003cClass\u003c? extends State\u003e\u003e stateTypeList \u003d provider.getAcceptedDataTypes(itemName, command);\n-                    State newState \u003d createStateFromString(stateTypeList, transformedResponse);\n+            if (updateWithResponse) {\n \n-                    if (newState !\u003d null) {\n-                        eventPublisher.postUpdate(itemName, newState);\n-                    } else {\n-                        logger.warn(\"Can not parse transformed input \" + transformedResponse\n-                                + \" to match command {} on item {}  \", command, itemName);\n-                    }\n+                List\u003cClass\u003c? extends State\u003e\u003e stateTypeList \u003d provider.getAcceptedDataTypes(itemName, command);\n+                State newState \u003d createStateFromString(stateTypeList, transformedResponse);\n \n-                    return false;\n+                if (newState !\u003d null) {\n+                    eventPublisher.postUpdate(itemName, newState);\n                 } else {\n-                    return true;\n+                    logger.warn(\"Cannot parse transformed input {} to match command {} on item {}\",\n+                            transformedResponse, command, itemName);\n                 }\n+\n+                return false;\n             } else {\n                 return true;\n             }\n+        } else {\n+            return true;\n         }\n-        return false;\n     }\n \n     /**\n@@ -147,11 +143,16 @@ protected void parseBuffer(String itemName, Command aCommand, Direction theDirec\n         String theUpdate \u003d \"\";\n         try {\n             theUpdate \u003d new String(byteBuffer.array(), charset);\n+            logger.debug(\"parseBuffer constructed update: \u0027{}\u0027\", theUpdate);\n         } catch (UnsupportedEncodingException e) {\n             logger.warn(\"Exception while attempting an unsupported encoding scheme\");\n         }\n \n         ProtocolBindingProvider provider \u003d findFirstMatchingBindingProvider(itemName);\n+        if (provider \u003d\u003d null) {\n+            logger.warn(\"No provider could be found for the item \u0027{}\u0027\", itemName);\n+            return;\n+        }\n \n         List\u003cClass\u003c? extends State\u003e\u003e stateTypeList \u003d provider.getAcceptedDataTypes(itemName, aCommand);\n \n@@ -161,7 +162,7 @@ protected void parseBuffer(String itemName, Command aCommand, Direction theDirec\n         if (newState !\u003d null) {\n             eventPublisher.postUpdate(itemName, newState);\n         } else {\n-            logger.warn(\"Can not parse input \" + theUpdate + \" to match command {} on item {}  \", aCommand, itemName);\n+            logger.warn(\"Cannot parse input {} to match command {} on item {}\", theUpdate, aCommand, itemName);\n         }\n     }\n \n@@ -179,63 +180,62 @@ public void updated(Dictionary config) throws ConfigurationException {\n \n         super.updated(config);\n \n-        if (config !\u003d null) {\n-\n-            String timeOutString \u003d (String) config.get(\"buffersize\");\n-            if (isNotBlank(timeOutString)) {\n-                timeOut \u003d Integer.parseInt((timeOutString));\n-            } else {\n-                logger.info(\"The maximum time out for blocking write operations will be set to the default value of {}\",\n-                        timeOut);\n-            }\n-\n-            String blockingString \u003d (String) config.get(\"retryinterval\");\n-            if (isNotBlank(blockingString)) {\n-                blocking \u003d Boolean.parseBoolean((blockingString));\n-            } else {\n-                logger.info(\"The blocking nature of read/write operations will be set to the default value of {}\",\n-                        blocking);\n-            }\n+        if (config \u003d\u003d null) {\n+            return;\n+        }\n \n-            String preambleString \u003d (String) config.get(\"preamble\");\n-            if (isNotBlank(preambleString)) {\n-                try {\n-                    preAmble \u003d preambleString.replaceAll(\"\\\\\\\\\", \"\\\\\");\n-                } catch (Exception e) {\n-                    preAmble \u003d preambleString;\n-                }\n-            } else {\n-                logger.info(\"The preamble for all write operations will be set to the default value of {}\", preAmble);\n-            }\n+        String timeOutString \u003d Objects.toString(config.get(\"buffersize\"), null);\n+        if (isNotBlank(timeOutString)) {\n+            timeOut \u003d Integer.parseInt(timeOutString);\n+        } else {\n+            logger.info(\"The maximum timeout for blocking write operations will be set to the default value of {}\",\n+                    timeOut);\n+        }\n \n-            String postambleString \u003d (String) config.get(\"postamble\");\n-            if (isNotBlank(postambleString)) {\n-                try {\n-                    postAmble \u003d postambleString.replaceAll(\"\\\\\\\\\", \"\\\\\");\n-                } catch (Exception e) {\n-                    postAmble \u003d postambleString;\n-                }\n-            } else {\n-                logger.info(\"The postamble for all write operations will be set to the default value of {}\", postAmble);\n-            }\n+        String blockingString \u003d Objects.toString(config.get(\"retryinterval\"), null);\n+        if (isNotBlank(blockingString)) {\n+            blocking \u003d Boolean.parseBoolean(blockingString);\n+        } else {\n+            logger.info(\"The blocking nature of read/write operations will be set to the default value of {}\",\n+                    blocking);\n+        }\n \n-            String updatewithresponseString \u003d (String) config.get(\"updatewithresponse\");\n-            if (isNotBlank(updatewithresponseString)) {\n-                updateWithResponse \u003d Boolean.parseBoolean((updatewithresponseString));\n-            } else {\n-                logger.info(\"Updating states with returned values will be set to the default value of {}\",\n-                        updateWithResponse);\n+        String preambleString \u003d Objects.toString(config.get(\"preamble\"), null);\n+        if (isNotBlank(preambleString)) {\n+            try {\n+                preAmble \u003d preambleString.replaceAll(\"\\\\\\\\\", \"\\\\\");\n+            } catch (Exception e) {\n+                preAmble \u003d preambleString;\n             }\n+        } else {\n+            logger.info(\"The preamble for all write operations will be set to the default value of {}\", preAmble);\n+        }\n \n-            String charsetString \u003d (String) config.get(\"charset\");\n-            if (isNotBlank(charsetString)) {\n-                charset \u003d charsetString;\n-            } else {\n-                logger.info(\"The characterset will be set to the default value of {}\", charset);\n+        String postambleString \u003d Objects.toString(config.get(\"postamble\"), null);\n+        if (isNotBlank(postambleString)) {\n+            try {\n+                postAmble \u003d postambleString.replaceAll(\"\\\\\\\\\", \"\\\\\");\n+            } catch (Exception e) {\n+                postAmble \u003d postambleString;\n             }\n+        } else {\n+            logger.info(\"The postamble for all write operations will be set to the default value of {}\", postAmble);\n+        }\n \n+        String updateWithResponseString \u003d Objects.toString(config.get(\"updatewithresponse\"), null);\n+        if (isNotBlank(updateWithResponseString)) {\n+            updateWithResponse \u003d Boolean.parseBoolean(updateWithResponseString);\n+        } else {\n+            logger.info(\"Updating states with returned values will be set to the default value of {}\",\n+                    updateWithResponse);\n         }\n \n+        String charsetString \u003d Objects.toString(config.get(\"charset\"), null);\n+        if (isNotBlank(charsetString)) {\n+            charset \u003d charsetString;\n+        } else {\n+            logger.info(\"The character set will be set to the default value of {}\", charset);\n+        }\n     }\n \n     @Override\n@@ -246,36 +246,36 @@ protected String transformResponse(String transformation, String response) {\n         String transformedResponse;\n \n         if (isEmpty(transformation) || transformation.equalsIgnoreCase(\"default\")) {\n-            transformedResponse \u003d response;\n-        } else {\n-            Matcher matcher \u003d EXTRACT_FUNCTION_PATTERN.matcher(transformation);\n-            if (matcher.matches()) {\n-                matcher.reset();\n-                matcher.find();\n-                String transformationServiceName \u003d matcher.group(1);\n-                String transformationServiceParam \u003d matcher.group(2);\n-                try {\n-                    TransformationService transformationService \u003d TransformationHelper\n-                            .getTransformationService(TCPActivator.getContext(), transformationServiceName);\n-                    if (transformationService !\u003d null) {\n-                        transformedResponse \u003d transformationService.transform(transformationServiceParam, response);\n-                    } else {\n-                        transformedResponse \u003d response;\n-                        logger.warn(\n-                                \"couldn\u0027t transform response because transformationService of type \u0027{}\u0027 is unavailable\",\n-                                transformationServiceName);\n-                    }\n-                } catch (Exception te) {\n-                    logger.error(\"transformation throws exception [transformation\u003d{}, response\u003d{}]\", transformation,\n-                            response, te);\n-\n-                    // in case of an error we return the response without any\n-                    // transformation\n+            logger.debug(\"transformed response is \u0027{}\u0027\", response);\n+            return response;\n+        }\n+\n+        Matcher matcher \u003d EXTRACT_FUNCTION_PATTERN.matcher(transformation);\n+        if (matcher.matches()) {\n+            matcher.reset();\n+            matcher.find();\n+            String transformationServiceName \u003d matcher.group(1);\n+            String transformationServiceParam \u003d matcher.group(2);\n+            try {\n+                TransformationService transformationService \u003d TransformationHelper\n+                        .getTransformationService(TCPActivator.getContext(), transformationServiceName);\n+                if (transformationService !\u003d null) {\n+                    transformedResponse \u003d transformationService.transform(transformationServiceParam, response);\n+                } else {\n                     transformedResponse \u003d response;\n+                    logger.warn(\"couldn\u0027t transform response because transformationService of type \u0027{}\u0027 is unavailable\",\n+                            transformationServiceName);\n                 }\n-            } else {\n-                transformedResponse \u003d transformation;\n+            } catch (Exception te) {\n+                logger.warn(\"Transformation threw an exception. [transformation\u003d{}, response\u003d{}]\", transformation,\n+                        response, te);\n+\n+                // in case of an error we return the response without any\n+                // transformation\n+                transformedResponse \u003d response;\n             }\n+        } else {\n+            transformedResponse \u003d transformation;\n         }\n \n         logger.debug(\"transformed response is \u0027{}\u0027\", transformedResponse);\n@@ -290,5 +290,4 @@ protected String transformResponse(String transformation, String response) {\n     protected String getName() {\n         return \"UDP Refresh Service\";\n     }\n-\n }"
        }
      ]
    }
  },
  {
    "name": "null pointer fout borrelt op uit cache",
    "url": "https://github.com/MinELenI/CBSviewer/issues/41",
    "description": "Af en to borrelt er een NullPointerException op uit de cache, na een page reload komt dat weer goed, maar de RIA zou hier sowieso geen last van hoeven hebben.\n\ndit is niet Jetty of Tomcat specifiek.\n\nstacktrace:\n\n```\njava.lang.NullPointerException at nl.mineleni.cbsviewer.servlet.wms.WMSClientServlet.getForeGroundMap(WMSClientServlet.java:38) at \nnl.mineleni.cbsviewer.servlet.wms.WMSClientServlet.service(WMSClientServlet.java:690) at javax.servlet.http.HttpServlet.service(HttpServlet.java:848) at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:648) at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137) at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:577) at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231) at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072) at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382) at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193) at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135) at org.eclipse.jetty.server.Dispatcher.include(Dispatcher.java:183) at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:1015) at org.apache.jsp.index_jsp._jspService(index_jsp.java:91) at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111) at javax.servlet.http.HttpServlet.service(HttpServlet.java:848) at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:400) at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:492) at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:378) at javax.servlet.http.HttpServlet.service(HttpServlet.java:848) at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:648) at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137) at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:577) at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231) at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072) at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382) at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193) at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135) at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:276) at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:103) at org.eclipse.jetty.servlet.DefaultServlet.doGet(DefaultServlet.java:566) at javax.servlet.http.HttpServlet.service(HttpServlet.java:735) at javax.servlet.http.HttpServlet.service(HttpServlet.java:848) at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:648) at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137) at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:559) at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231) at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072) at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382) at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193) at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135) at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255) at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) at org.eclipse.jetty.server.Server.handle(Server.java:365) at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:485) at org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:53) at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:926) at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:988) at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:635) at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235) at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72) at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264) at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608) at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543) at java.lang.Thread.run(Thread.java:722)\n```\n",
    "keywords": [
      "handler",
      "jetty servlet",
      "org apache",
      "servlet",
      "java:1072",
      "run",
      "http httpservlet",
      "jetty server",
      "apache",
      "javax",
      "abstracthttpconnection",
      "dispatcher",
      "scopedhandler",
      "java:848",
      "java:648",
      "java:1006",
      "wmsclientservlet",
      "handle",
      "securityhandler",
      "scopedhandler handle",
      "eclipse",
      "dohandle",
      "http",
      "java:455",
      "java:137",
      "java:135",
      "queuedthreadpool",
      "sessionhandler",
      "server",
      "servletholder",
      "httpservlet",
      "session",
      "eclipse jetty",
      "session sessionhandler",
      "servlethandler",
      "service httpservlet",
      "server handler",
      "security",
      "java:382",
      "contexthandler",
      "jetty",
      "httpparser",
      "org",
      "thread",
      "handler contexthandler",
      "jasper",
      "jspservlet",
      "doscope",
      "java:193",
      "blockinghttpconnection",
      "service",
      "javax servlet",
      "server session",
      "java:231",
      "org eclipse"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/MinELenI/CBSviewer/commit/a52befb98ce6e8f953fe7ba341437bc50975ca87",
      "files": [
        {
          "file_name": "src/main/java/nl/mineleni/cbsviewer/servlet/wms/WMSClientServlet.java",
          "patch": "@@ -64,652 +64,659 @@\n  */\n public class WMSClientServlet extends AbstractWxSServlet {\n \n-    /** maximum aantal elementen per cache. {@value} */\n-    private static final int NUMBER_CACHE_ELEMENTS \u003d 1000;\n-\n-    /** logger. */\n-    private static final Logger LOGGER \u003d LoggerFactory\n-            .getLogger(WMSClientServlet.class);\n-\n-    /**\n-     * vaste afmeting van de kaart (hoogte en breedte). {@value}\n-     * \n-     * @see #MAP_DIMENSION_MIDDLE\n-     */\n-    private static final int MAP_DIMENSION \u003d 440;\n-\n-    /**\n-     * helft van de afmeting van de kaart (hoogte en breedte). {@value}\n-     * \n-     * @see #MAP_DIMENSION\n-     */\n-    private static final int MAP_DIMENSION_MIDDLE \u003d MAP_DIMENSION / 2;\n-\n-    /** time-to-live voor cache elementen. {@value} */\n-    private static final long SECONDS_TO_CACHE_ELEMENTS \u003d 60 * 60/* 1 uur */;\n-\n-    /** time-to-live voor cache elementen. {@value} */\n-    private static final long MILLISECONDS_TO_CACHE_ELEMENTS \u003d SECONDS_TO_CACHE_ELEMENTS * 1000;\n-\n-    /** serialVersionUID. */\n-    private static final long serialVersionUID \u003d 4958212343847516071L;\n-\n-    /** De achtergrond kaart WMS. */\n-    private transient WebMapServer bgWMS \u003d null;\n-\n-    /** cache voor legenda afbeeldingen. */\n-    private transient Cache\u003cString, CacheImage, BufferedImage\u003e legendCache \u003d null;\n-\n-    /** cache voor voorgrond WMS afbeeldingen. */\n-    private transient Cache\u003cBboxLayerCacheKey, CacheImage, BufferedImage\u003e fgWMSCache \u003d null;\n-\n-    /** cache voor feature info. */\n-    private transient Cache\u003cBboxLayerCacheKey, CachableString, String\u003e featInfoCache \u003d null;\n-\n-    /** verzameling lagen voor de achtergrondkaart. */\n-    private String[] bgWMSlayers \u003d null;\n-\n-    /**\n-     * voorgrond wms request.\n-     * \n-     * @todo refactor naar lokale variabele\n-     */\n-    private transient GetMapRequest getMapRequest \u003d null;\n-\n-    /** layers bean. */\n-    private final transient AvailableLayersBean layers \u003d new AvailableLayersBean();\n-\n-    /** cache voor achtergrond kaartjes. */\n-    private transient WMSCache bgWMSCache \u003d null;\n-    /** De achtergrond luchtfoto WMS. */\n-    private transient WebMapServer lufoWMS \u003d null;\n-\n-    /** cache voor achtergrond kaartjes. */\n-    private transient WMSCache bgWMSLuFoCache \u003d null;\n-    /** verzameling lagen voor de achtergrondkaart. */\n-    private String[] lufoWMSlayers \u003d null;\n-\n-    /**\n-     * de verzameling met (voorgrond) WMSsen die we benaderen. Het opstarten van\n-     * een WMS duurt lang vanwege de capabilities uitvraag en versie\n-     * onderhandeling.\n-     */\n-    private transient Map\u003cString, WebMapServer\u003e wmsServersCache \u003d null;\n-\n-    /*\n-     * (non-Javadoc)\n-     * \n-     * @see javax.servlet.GenericServlet#destroy()\n-     */\n-    @Override\n-    public void destroy() {\n-        this.bgWMSCache.clear();\n-        this.bgWMS \u003d null;\n-        this.bgWMSLuFoCache.clear();\n-        this.lufoWMS \u003d null;\n-        this.wmsServersCache.clear();\n-        this.legendCache.clear();\n-        this.legendCache \u003d null;\n-        this.fgWMSCache.clear();\n-        this.fgWMSCache \u003d null;\n-        this.featInfoCache.clear();\n-        this.featInfoCache \u003d null;\n-        this.getMapRequest \u003d null;\n-        super.destroy();\n-    }\n-\n-    /**\n-     * Achtergrondkaart ophalen en opslaan in de cache.\n-     * \n-     * @param bbox\n-     *            the bbox\n-     * @param type\n-     *            the type\n-     * @return background/basemap image\n-     * @throws ServletException\n-     *             Geeft aan dat er een fout is opgetreden bij het benaderen van\n-     *             de achtergrondgrond WMS service\n-     */\n-    private BufferedImage getBackGroundMap(final BoundingBox bbox,\n-            final BasemapType type) throws ServletException {\n-\n-        GetMapRequest map;\n-        switch (type) {\n-        case luchtfoto:\n-            if (this.bgWMSLuFoCache.containsKey(bbox)) {\n-                // ophalen uit cache\n-                LOGGER.debug(\"Achtergrond \" + type\n-                        + \" afbeelding uit de cache serveren.\");\n-                return this.bgWMSLuFoCache.getImage(bbox);\n-            }\n-            map \u003d this.lufoWMS.createGetMapRequest();\n-            if (this.lufoWMSlayers !\u003d null) {\n-                for (final String lyr : this.lufoWMSlayers) {\n-                    // per laag toevoegen met de default style\n-                    map.addLayer(lyr, \"\");\n-                }\n-            } else {\n-                // alle lagen toevoegen\n-                for (final Layer layer : WMSUtils.getNamedLayers(this.lufoWMS\n-                        .getCapabilities())) {\n-                    map.addLayer(layer);\n-                }\n-            }\n-            break;\n-        case topografie:\n-            // implicit fall thru naar default\n-        default:\n-            if (this.bgWMSCache.containsKey(bbox)) {\n-                // ophalen uit cache\n-                LOGGER.debug(\"Achtergrond \" + type\n-                        + \" afbeelding uit de cache serveren.\");\n-                return this.bgWMSCache.getImage(bbox);\n-            }\n-            map \u003d this.bgWMS.createGetMapRequest();\n-            if (this.bgWMSlayers !\u003d null) {\n-                for (final String lyr : this.bgWMSlayers) {\n-                    // per laag toevoegen met de default style\n-                    map.addLayer(lyr, \"\");\n-                }\n-            } else {\n-                // alle lagen toevoegen\n-                for (final Layer layer : WMSUtils.getNamedLayers(this.bgWMS\n-                        .getCapabilities())) {\n-                    map.addLayer(layer);\n-                }\n-            }\n-        }\n-\n-        map.setFormat(\"image/png\");\n-        map.setDimensions(MAP_DIMENSION, MAP_DIMENSION);\n-        map.setTransparent(true);\n-        map.setBGColour(\"0xffffff\");\n-        map.setExceptions(\"application/vnd.ogc.se_inimage\");\n-        map.setSRS(\"EPSG:28992\");\n-        map.setBBox(bbox);\n-\n-        LOGGER.debug(\"Achtergrond WMS url is: \" + map.getFinalURL());\n-\n-        try {\n-            final GetMapResponse response \u003d this.bgWMS.issueRequest(map);\n-            final BufferedImage image \u003d ImageIO.read(response.getInputStream());\n-            switch (type) {\n-            case luchtfoto:\n-                this.bgWMSLuFoCache.put(bbox, image, SECONDS_TO_CACHE_ELEMENTS);\n-\n-                break;\n-            case topografie:\n-            default:\n-                this.bgWMSCache.put(bbox, image, SECONDS_TO_CACHE_ELEMENTS);\n-                break;\n-            }\n-\n-            if (LOGGER.isDebugEnabled()) {\n-                // achtergrond plaatje bewaren in debug modus\n-                final File temp \u003d File.createTempFile(\n-                        \"bgwms\",\n-                        \".png\",\n-                        new File(this.getServletContext().getRealPath(\n-                                MAP_CACHE_DIR.code)));\n-                temp.deleteOnExit();\n-                ImageIO.write(image, \"png\", temp);\n-            }\n-\n-            return image;\n-        } catch (ServiceException | IOException e) {\n-            LOGGER.error(\n-                    \"Er is een fout opgetreden bij het benaderen van de achtergrond WMS service.\",\n-                    e);\n-            throw new ServletException(e);\n-        }\n-\n-    }\n-\n-    /**\n-     * zoekt of maakt de gevraagde WebMapServer.\n-     * \n-     * @param lyrDesc\n-     *            de layerdescriptor met de WMS informatie\n-     * @return the cached wms\n-     * @throws ServiceException\n-     *             the service exception\n-     * @throws IOException\n-     *             Signals that an I/O exception has occurred.\n-     */\n-    private WebMapServer getCachedWMS(final LayerDescriptor lyrDesc)\n-            throws ServiceException, IOException {\n-        if (this.wmsServersCache.containsKey(lyrDesc.getUrl())) {\n-            LOGGER.debug(\"WMS gevonden in cache.\");\n-            return this.wmsServersCache.get(lyrDesc.getUrl());\n-        } else {\n-            LOGGER.debug(\"Aanmaken van nieuwe WMS (inclusief versie onderhandeling).\");\n-            final WebMapServer fgWMS \u003d new WebMapServer(new URL(\n-                    lyrDesc.getUrl()));\n-            this.wmsServersCache.put(lyrDesc.getUrl(), fgWMS);\n-            return fgWMS;\n-        }\n-    }\n-\n-    /**\n-     * Haalt de feature info op.\n-     * \n-     * @param bbox\n-     *            the bbox\n-     * @param lyrDesc\n-     *            de layerdescriptor met de WMS informatie\n-     * @return Een string met feature info\n-     * @throws ServiceException\n-     *             Geeft aan dat er een fout is opgetreden tijden het benaderen\n-     *             van de WMS\n-     * @throws IOException\n-     *             Signals that an I/O exception has occurred.\n-     */\n-    private String getFeatureInfo(final BoundingBox bbox,\n-            final LayerDescriptor lyrDesc) throws ServiceException, IOException {\n-        final BboxLayerCacheKey key \u003d new BboxLayerCacheKey(bbox, lyrDesc);\n-        if (this.featInfoCache.containsKey(key)) {\n-            LOGGER.debug(\"FeatureInfo uit de cache serveren.\");\n-            // ophalen uit cache\n-            return this.featInfoCache.get(key).getItem();\n-        }\n-\n-        try {\n-            final GetFeatureInfoRequest getFeatureInfoRequest \u003d this\n-                    .getCachedWMS(lyrDesc).createGetFeatureInfoRequest(\n-                            this.getMapRequest);\n-\n-            final String[] layerNames \u003d lyrDesc.getLayers().split(\",\\\\s*\");\n-            final Set\u003cLayer\u003e queryLayers \u003d new HashSet\u003cLayer\u003e();\n-            final WMSCapabilities caps \u003d this.getCachedWMS(lyrDesc)\n-                    .getCapabilities();\n-\n-            for (final Layer wmsLyr : caps.getLayerList()) {\n-                if ((wmsLyr.getName() !\u003d null)\n-                        \u0026\u0026 (wmsLyr.getName().length() !\u003d 0)) {\n-                    for (final String layerName : layerNames) {\n-                        if (wmsLyr.getName().equalsIgnoreCase(layerName)) {\n-                            queryLayers.add(wmsLyr);\n-                        }\n-                    }\n-                }\n-            }\n-            getFeatureInfoRequest.setQueryLayers(queryLayers);\n-            getFeatureInfoRequest.setInfoFormat(\"application/vnd.ogc.gml\");\n-            getFeatureInfoRequest.setFeatureCount(10);\n-            getFeatureInfoRequest.setQueryPoint(MAP_DIMENSION_MIDDLE,\n-                    MAP_DIMENSION_MIDDLE);\n-            LOGGER.debug(\"WMS feature info request url is: \"\n-                    + getFeatureInfoRequest.getFinalURL());\n-            final GetFeatureInfoResponse response \u003d this.getCachedWMS(lyrDesc)\n-                    .issueRequest(getFeatureInfoRequest);\n-\n-            final String html \u003d FeatureInfoResponseConverter\n-                    .convertToHTMLTable(response.getInputStream(),\n-                            FeatureInfoResponseConverter.Type.GMLTYPE, lyrDesc\n-                                    .getAttributes().split(\",\\\\s*\"));\n-            this.featInfoCache.put(key,\n-                    new CachableString(html, System.currentTimeMillis()\n-                            + MILLISECONDS_TO_CACHE_ELEMENTS));\n-            return html;\n-\n-        } catch (final UnsupportedOperationException u) {\n-            LOGGER.warn(\"De WMS server (\"\n-                    + this.getCachedWMS(lyrDesc).getInfo().getTitle()\n-                    + \") ondersteund geen GetFeatureInfoRequest.\", u);\n-            return \"\";\n-        }\n-    }\n-\n-    /**\n-     * voorgrondkaart ophalen.\n-     * \n-     * @param bbox\n-     *            the bbox\n-     * @param lyrDesc\n-     *            de layerdescriptor met de WMS informatie\n-     * @return voorgrond afbeelding\n-     * @throws ServletException\n-     *             Geeft aan dat er een fout is opgetreden bij het benaderen van\n-     *             de voorgrond WMS service\n-     */\n-    private BufferedImage getForeGroundMap(final BoundingBox bbox,\n-            final LayerDescriptor lyrDesc) throws ServletException {\n-\n-        final BboxLayerCacheKey key \u003d new BboxLayerCacheKey(bbox, lyrDesc);\n-        if (this.fgWMSCache.containsKey(key)) {\n-            // ophalen uit cache\n-            LOGGER.debug(\"Voorgrond afbeelding uit de cache serveren.\");\n-            return this.fgWMSCache.get(key).getImage();\n-        }\n-\n-        // wms request doen\n-        try {\n-            this.getMapRequest \u003d this.getCachedWMS(lyrDesc)\n-                    .createGetMapRequest();\n-            final String[] layerNames \u003d lyrDesc.getLayers().split(\",\\\\s*\");\n-            final String[] styleNames \u003d lyrDesc.getStyles().split(\",\\\\s*\");\n-\n-            for (int l \u003d 0; l \u003c layerNames.length; l++) {\n-                this.getMapRequest.addLayer(layerNames[l], styleNames[l]);\n-            }\n-            this.getMapRequest.setFormat(\"image/png\");\n-            this.getMapRequest.setDimensions(MAP_DIMENSION, MAP_DIMENSION);\n-            this.getMapRequest.setTransparent(true);\n-            this.getMapRequest.setSRS(\"EPSG:28992\");\n-            this.getMapRequest.setBBox(bbox);\n-            this.getMapRequest.setExceptions(\"application/vnd.ogc.se_inimage\");\n-            this.getMapRequest.setBGColour(\"0xffffff\");\n-            LOGGER.debug(\"Voorgrond WMS url is: \"\n-                    + this.getMapRequest.getFinalURL());\n-\n-            // thema/voorgrond ophalen\n-            final GetMapResponse response \u003d this.getCachedWMS(lyrDesc)\n-                    .issueRequest(this.getMapRequest);\n-            final BufferedImage image \u003d ImageIO.read(response.getInputStream());\n-\n-            this.fgWMSCache.put(key, new CacheImage(image,\n-                    SECONDS_TO_CACHE_ELEMENTS));\n-\n-            if (LOGGER.isDebugEnabled()) {\n-                // voorgrond plaatje bewaren in debug modus\n-                final File temp \u003d File.createTempFile(\n-                        \"fgwms\",\n-                        \".png\",\n-                        new File(this.getServletContext().getRealPath(\n-                                MAP_CACHE_DIR.code)));\n-                temp.deleteOnExit();\n-                ImageIO.write(image, \"png\", temp);\n-            }\n-            return image;\n-        } catch (ServiceException | IOException e) {\n-            LOGGER.error(\n-                    \"Er is een fout opgetreden bij het benaderen van de achtergrond WMS service.\",\n-                    e);\n-            throw new ServletException(e);\n-        }\n-    }\n-\n-    /**\n-     * Haalt de legenda op voor de thema laag.\n-     * \n-     * @param lyrDesc\n-     *            de layerdescriptor met de WMS informatie\n-     * @return een array met legenda afbeeldings bestanden\n-     * @throws ServiceException\n-     *             Geeft aan dat er een fout is opgetreden tijden het benaderen\n-     *             van de WMS\n-     * @throws IOException\n-     *             Signals that an I/O exception has occurred.\n-     */\n-    private File[] getLegends(final LayerDescriptor lyrDesc)\n-            throws ServiceException, IOException {\n-\n-        final String[] layerNames \u003d lyrDesc.getLayers().split(\",\\\\s*\");\n-        final String[] styleNames \u003d lyrDesc.getStyles().split(\",\\\\s*\");\n-\n-        final File[] legends \u003d new File[layerNames.length];\n-        try {\n-            final GetLegendGraphicRequest legend \u003d this.getCachedWMS(lyrDesc)\n-                    .createGetLegendGraphicRequest();\n-            BufferedImage image;\n-            for (int l \u003d 0; l \u003c layerNames.length; l++) {\n-                final String key \u003d layerNames[l] + \"::\" + styleNames[l];\n-                if (this.legendCache.containsKey(key)) {\n-                    // in de cache kijken of we deze legenda afbeelding al\n-                    // hebben\n-                    legends[l] \u003d new File(this.legendCache.get(key).getName());\n-                    if (!legends[l].exists()) {\n-                        // (mogelijk) is het bestand gewist..\n-                        ImageIO.write(this.legendCache.get(key).getImage(),\n-                                \"png\", legends[l]);\n-                    }\n-                    LOGGER.debug(\"Legenda bestand uit cache: \"\n-                            + legends[l].getAbsolutePath());\n-                } else {\n-                    // legenda opvragen\n-                    legend.setLayer(layerNames[l]);\n-                    legend.setStyle(styleNames[l]);\n-                    legend.setFormat(\"image/png\");\n-                    legend.setExceptions(\"application/vnd.ogc.se_inimage\");\n-\n-                    LOGGER.debug(\"Voorgrond WMS legenda url is: \"\n-                            + legend.getFinalURL());\n-                    final GetLegendGraphicResponse response \u003d this\n-                            .getCachedWMS(lyrDesc).issueRequest(legend);\n-                    image \u003d ImageIO.read(response.getInputStream());\n-                    legends[l] \u003d File.createTempFile(\n-                            \"legenda\",\n-                            \".png\",\n-                            new File(this.getServletContext().getRealPath(\n-                                    MAP_CACHE_DIR.code)));\n-                    legends[l].deleteOnExit();\n-                    this.legendCache\n-                            .put(key,\n-                                    new CacheImage(\n-                                            image,\n-                                            legends[l].getAbsolutePath(),\n-                                            System.currentTimeMillis()\n-                                                    + (MILLISECONDS_TO_CACHE_ELEMENTS * 24)));\n-                    LOGGER.debug(\"Legenda bestand: \"\n-                            + legends[l].getAbsolutePath());\n-                    ImageIO.write(image, \"png\", legends[l]);\n-                }\n-            }\n-        } catch (final UnsupportedOperationException u) {\n-            LOGGER.warn(\"De WMS server (\"\n-                    + this.getCachedWMS(lyrDesc).getInfo().getTitle()\n-                    + \") ondersteund geen GetLegendGraphicRequest.\", u);\n-            return null;\n-        }\n-        return legends;\n-    }\n-\n-    /**\n-     * kaart maken op basis van de opgehaalde afbeeldingen.\n-     * \n-     * @param imageVoorgrond\n-     *            de voorgrondkaart\n-     * @param imageAchtergrond\n-     *            de achtergrondgrondkaart\n-     * @return de file met de afbeelding\n-     * @throws IOException\n-     *             Signals that an I/O exception has occurred.\n-     */\n-    private File getMap(final BufferedImage imageVoorgrond,\n-            final BufferedImage imageAchtergrond) throws IOException {\n-\n-        final BufferedImage composite \u003d new BufferedImage(MAP_DIMENSION,\n-                MAP_DIMENSION, BufferedImage.TYPE_INT_ARGB);\n-        final Graphics2D g \u003d composite.createGraphics();\n-\n-        g.drawImage(imageAchtergrond, 0, 0, null);\n-        if (imageVoorgrond !\u003d null) {\n-            final float[] scales \u003d { 1f, 1f, 1f, 0.8f };\n-            final RescaleOp rop \u003d new RescaleOp(scales, new float[4], null);\n-            g.drawImage(imageVoorgrond, rop, 0, 0);\n-            // zoeklocatie intekenen met plaatje\n-            final BufferedImage infoImage \u003d ImageIO.read(new File(this\n-                    .getClass().getClassLoader().getResource(\"info.png\")\n-                    .getFile()));\n-            // CHECKSTYLE.OFF: MagicNumber - dit zijn midden en hoogte van het\n-            // plaatje \"info.png\"\n-            g.drawImage(infoImage, MAP_DIMENSION_MIDDLE - 16,\n-                    MAP_DIMENSION_MIDDLE - 37, null);\n-            // CHECKSTYLE.ON: MagicNumber\n-        }\n-        // opslaan van plaatje zodat de browser het op kan halen\n-        final File kaartAfbeelding \u003d File.createTempFile(\n-                \"wmscombined\",\n-                \".png\",\n-                new File(this.getServletContext().getRealPath(\n-                        MAP_CACHE_DIR.code)));\n-        kaartAfbeelding.deleteOnExit();\n-        ImageIO.write(composite, \"png\", kaartAfbeelding);\n-        g.dispose();\n-        return kaartAfbeelding;\n-    }\n-\n-    /*\n-     * (non-Javadoc)\n-     * \n-     * @see\n-     * nl.mineleni.cbsviewer.servlet.AbstractBaseServlet#init(javax.servlet.\n-     * ServletConfig)\n-     */\n-    @Override\n-    public void init(final ServletConfig config) throws ServletException {\n-        super.init(config);\n-        try {\n-            this.bgWMSCache \u003d new WMSCache(this.getServletContext()\n-                    .getRealPath(MAP_CACHE_DIR.code), NUMBER_CACHE_ELEMENTS);\n-        } catch (final IOException e) {\n-            LOGGER.error(\n-                    \"Inititalisatie fout voor de achtergrond topografie cache.\",\n-                    e);\n-        }\n-\n-        try {\n-            this.bgWMSLuFoCache \u003d new WMSCache(this.getServletContext()\n-                    .getRealPath(MAP_CACHE_DIR.code), NUMBER_CACHE_ELEMENTS);\n-        } catch (final IOException e) {\n-            LOGGER.error(\n-                    \"Inititalisatie fout voor de achtergrond luchtfoto cache.\",\n-                    e);\n-        }\n-\n-        this.legendCache \u003d new Cache\u003cString, CacheImage, BufferedImage\u003e(\n-                NUMBER_CACHE_ELEMENTS);\n-\n-        this.featInfoCache \u003d new Cache\u003cBboxLayerCacheKey, CachableString, String\u003e(\n-                NUMBER_CACHE_ELEMENTS);\n-\n-        this.fgWMSCache \u003d new Cache\u003cBboxLayerCacheKey, CacheImage, BufferedImage\u003e(\n-                NUMBER_CACHE_ELEMENTS);\n-\n-        // achtergrond kaart\n-        final String bgCapabilitiesURL \u003d config\n-                .getInitParameter(\"bgCapabilitiesURL\");\n-        LOGGER.debug(\"WMS capabilities url van achtergrond kaart: \"\n-                + bgCapabilitiesURL);\n-        try {\n-            this.bgWMS \u003d new WebMapServer(new URL(bgCapabilitiesURL));\n-        } catch (final MalformedURLException e) {\n-            LOGGER.error(\n-                    \"Een url die gebruikt wordt voor de topografie WMS capabilities is misvormd\",\n-                    e);\n-            throw new ServletException(e);\n-        } catch (final ServiceException e) {\n-            LOGGER.error(\n-                    \"Er is een service exception (WMS server fout) opgetreden bij het ophalen van de topografie WMS capabilities\",\n-                    e);\n-            throw new ServletException(e);\n-        } catch (final IOException e) {\n-            LOGGER.error(\n-                    \"Er is een I/O fout opgetreden bij benaderen van de topografie WMS services\",\n-                    e);\n-            throw new ServletException(e);\n-        }\n-        final String bgWMSlyrs \u003d config.getInitParameter(\"bgWMSlayers\");\n-        LOGGER.debug(\"Achtergrond kaartlagen topografie: \" + bgWMSlyrs);\n-        if ((bgWMSlyrs !\u003d null) \u0026\u0026 (bgWMSlyrs.length() \u003e 0)) {\n-            this.bgWMSlayers \u003d bgWMSlyrs.split(\"[,]\\\\s*\");\n-        }\n-\n-        // achtergrond luchtfoto\n-        final String lufoCapabilitiesURL \u003d config\n-                .getInitParameter(\"lufoCapabilitiesURL\");\n-        LOGGER.debug(\"WMS capabilities url van achtergrond luchtfoto: \"\n-                + lufoCapabilitiesURL);\n-        try {\n-            this.lufoWMS \u003d new WebMapServer(new URL(lufoCapabilitiesURL));\n-        } catch (final MalformedURLException e) {\n-            LOGGER.error(\n-                    \"De url die gebruikt wordt voor de luchtfoto WMS capabilities is misvormd\",\n-                    e);\n-            throw new ServletException(e);\n-        } catch (final ServiceException e) {\n-            LOGGER.error(\n-                    \"Er is een service exception (WMS server fout) opgetreden bij het ophalen van de luchtfoto WMS capabilities\",\n-                    e);\n-            throw new ServletException(e);\n-        } catch (final IOException e) {\n-            LOGGER.error(\n-                    \"Er is een I/O fout opgetreden bij benaderen van de luchtfoto WMS services\",\n-                    e);\n-            throw new ServletException(e);\n-        }\n-        final String lufoWMSlyrs \u003d config.getInitParameter(\"lufoWMSlayers\");\n-        LOGGER.debug(\"Achtergrond kaartlagen luchtfoto: \" + lufoWMSlyrs);\n-        if ((lufoWMSlyrs !\u003d null) \u0026\u0026 (lufoWMSlyrs.length() \u003e 0)) {\n-            this.lufoWMSlayers \u003d lufoWMSlyrs.split(\"[,]\\\\s*\");\n-        }\n-\n-        // init servers cache\n-        this.wmsServersCache \u003d new ConcurrentHashMap\u003cString, WebMapServer\u003e();\n-    }\n-\n-    /*\n-     * (non-Javadoc)\n-     * \n-     * @see javax.servlet.http.HttpServlet#service(javax.servlet.ServletRequest,\n-     * javax.servlet.ServletResponse)\n-     */\n-    @Override\n-    protected void service(final HttpServletRequest request,\n-            final HttpServletResponse response) throws ServletException,\n-            IOException {\n-\n-        final int[] dXcoordYCoordStraal \u003d this.parseLocation(request);\n-        final int xcoord \u003d dXcoordYCoordStraal[0];\n-        final int ycoord \u003d dXcoordYCoordStraal[1];\n-        final int straal \u003d dXcoordYCoordStraal[2];\n-        final BoundingBox bbox \u003d SpatialUtil.calcRDBBOX(xcoord, ycoord, straal);\n-\n-        BasemapType basemaptype \u003d BasemapType.topografie;\n-        final String mType \u003d request.getParameter(REQ_PARAM_BGMAP.code);\n-        if (this.isNotNullNotEmptyNotWhiteSpaceOnly(mType)) {\n-            try {\n-                basemaptype \u003d BasemapType.valueOf(mType);\n-            } catch (final IllegalArgumentException e) {\n-                LOGGER.debug(\"Ongeldige waarde gebruikt voor basemap type, de default wordt gebruikt.\");\n-            }\n-        }\n-        final BufferedImage bg \u003d this.getBackGroundMap(bbox, basemaptype);\n-\n-        BufferedImage fg \u003d null;\n-        final String mapId \u003d request.getParameter(REQ_PARAM_MAPID.code);\n-        if (this.isNotNullNotEmptyNotWhiteSpaceOnly(mapId)) {\n-            final LayerDescriptor layer \u003d this.layers.getLayerByID(mapId);\n-            request.setAttribute(\"mapname\", layer.getName());\n-            LOGGER.debug(\"LayerDescriptor::Name is: \" + layer.getName());\n-\n-            final String fgCapabilitiesURL \u003d layer.getUrl();\n-            LOGGER.debug(\"WMS capabilities url van voorgrond kaart: \"\n-                    + fgCapabilitiesURL);\n-            try {\n-                fg \u003d this.getForeGroundMap(bbox, layer);\n-                final File[] legendas \u003d this.getLegends(layer);\n-                final String fInfo \u003d this.getFeatureInfo(bbox, layer);\n-                request.setAttribute(REQ_PARAM_MAPID.code, mapId);\n-                request.setAttribute(REQ_PARAM_LEGENDAS.code, legendas);\n-                request.setAttribute(REQ_PARAM_FEATUREINFO.code, fInfo);\n-            } catch (final ServiceException e) {\n-                LOGGER.error(\n-                        \"Er is een service exception opgetreden bij benaderen van de voorgrond WMS\",\n-                        e);\n-                throw new ServletException(e);\n-            } catch (final MalformedURLException e) {\n-                LOGGER.error(\n-                        \"De url die gebruikt wordt voor de WMS capabilities is misvormd.\",\n-                        e);\n-                throw new ServletException(e);\n-            }\n-        }\n-\n-        final File kaart \u003d this.getMap(fg, bg);\n-\n-        request.setAttribute(REQ_PARAM_CACHEDIR.code, MAP_CACHE_DIR.code);\n-        request.setAttribute(REQ_PARAM_KAART.code, kaart);\n-        request.setAttribute(REQ_PARAM_BGMAP.code, basemaptype);\n-    }\n+\t/** maximum aantal elementen per cache. {@value} */\n+\tprivate static final int NUMBER_CACHE_ELEMENTS \u003d 1000;\n+\n+\t/** logger. */\n+\tprivate static final Logger LOGGER \u003d LoggerFactory\n+\t\t\t.getLogger(WMSClientServlet.class);\n+\n+\t/**\n+\t * vaste afmeting van de kaart (hoogte en breedte). {@value}\n+\t * \n+\t * @see #MAP_DIMENSION_MIDDLE\n+\t */\n+\tprivate static final int MAP_DIMENSION \u003d 440;\n+\n+\t/**\n+\t * helft van de afmeting van de kaart (hoogte en breedte). {@value}\n+\t * \n+\t * @see #MAP_DIMENSION\n+\t */\n+\tprivate static final int MAP_DIMENSION_MIDDLE \u003d MAP_DIMENSION / 2;\n+\n+\t/** time-to-live voor cache elementen. {@value} */\n+\tprivate static final long SECONDS_TO_CACHE_ELEMENTS \u003d 60 * 60/* 1 uur */;\n+\n+\t/** time-to-live voor cache elementen. {@value} */\n+\tprivate static final long MILLISECONDS_TO_CACHE_ELEMENTS \u003d SECONDS_TO_CACHE_ELEMENTS * 1000;\n+\n+\t/** serialVersionUID. */\n+\tprivate static final long serialVersionUID \u003d 4958212343847516071L;\n+\n+\t/** De achtergrond kaart WMS. */\n+\tprivate transient WebMapServer bgWMS \u003d null;\n+\n+\t/** cache voor legenda afbeeldingen. */\n+\tprivate transient Cache\u003cString, CacheImage, BufferedImage\u003e legendCache \u003d null;\n+\n+\t/** cache voor voorgrond WMS afbeeldingen. */\n+\tprivate transient Cache\u003cBboxLayerCacheKey, CacheImage, BufferedImage\u003e fgWMSCache \u003d null;\n+\n+\t/** cache voor feature info. */\n+\tprivate transient Cache\u003cBboxLayerCacheKey, CachableString, String\u003e featInfoCache \u003d null;\n+\n+\t/** verzameling lagen voor de achtergrondkaart. */\n+\tprivate String[] bgWMSlayers \u003d null;\n+\n+\t/**\n+\t * voorgrond wms request.\n+\t * \n+\t * @todo refactor naar lokale variabele\n+\t */\n+\tprivate transient GetMapRequest getMapRequest \u003d null;\n+\n+\t/** layers bean. */\n+\tprivate final transient AvailableLayersBean layers \u003d new AvailableLayersBean();\n+\n+\t/** cache voor achtergrond kaartjes. */\n+\tprivate transient WMSCache bgWMSCache \u003d null;\n+\t/** De achtergrond luchtfoto WMS. */\n+\tprivate transient WebMapServer lufoWMS \u003d null;\n+\n+\t/** cache voor achtergrond kaartjes. */\n+\tprivate transient WMSCache bgWMSLuFoCache \u003d null;\n+\t/** verzameling lagen voor de achtergrondkaart. */\n+\tprivate String[] lufoWMSlayers \u003d null;\n+\n+\t/**\n+\t * de verzameling met (voorgrond) WMSsen die we benaderen. Het opstarten van\n+\t * een WMS duurt lang vanwege de capabilities uitvraag en versie\n+\t * onderhandeling.\n+\t */\n+\tprivate transient Map\u003cString, WebMapServer\u003e wmsServersCache \u003d null;\n+\n+\t/*\n+\t * (non-Javadoc)\n+\t * \n+\t * @see javax.servlet.GenericServlet#destroy()\n+\t */\n+\t@Override\n+\tpublic void destroy() {\n+\t\tthis.bgWMSCache.clear();\n+\t\tthis.bgWMS \u003d null;\n+\t\tthis.bgWMSLuFoCache.clear();\n+\t\tthis.lufoWMS \u003d null;\n+\t\tthis.wmsServersCache.clear();\n+\t\tthis.legendCache.clear();\n+\t\tthis.legendCache \u003d null;\n+\t\tthis.fgWMSCache.clear();\n+\t\tthis.fgWMSCache \u003d null;\n+\t\tthis.featInfoCache.clear();\n+\t\tthis.featInfoCache \u003d null;\n+\t\tthis.getMapRequest \u003d null;\n+\t\tsuper.destroy();\n+\t}\n+\n+\t/**\n+\t * Achtergrondkaart ophalen en opslaan in de cache.\n+\t * \n+\t * @param bbox\n+\t *            the bbox\n+\t * @param type\n+\t *            the type\n+\t * @return background/basemap image\n+\t * @throws ServletException\n+\t *             Geeft aan dat er een fout is opgetreden bij het benaderen van\n+\t *             de achtergrondgrond WMS service\n+\t */\n+\tprivate BufferedImage getBackGroundMap(final BoundingBox bbox,\n+\t\t\tfinal BasemapType type) throws ServletException {\n+\n+\t\tGetMapRequest map;\n+\t\tswitch (type) {\n+\t\tcase luchtfoto:\n+\t\t\tif (this.bgWMSLuFoCache.containsKey(bbox)) {\n+\t\t\t\t// ophalen uit cache\n+\t\t\t\tLOGGER.debug(\"Achtergrond \" + type\n+\t\t\t\t\t\t+ \" afbeelding uit de cache serveren.\");\n+\t\t\t\treturn this.bgWMSLuFoCache.getImage(bbox);\n+\t\t\t}\n+\t\t\tmap \u003d this.lufoWMS.createGetMapRequest();\n+\t\t\tif (this.lufoWMSlayers !\u003d null) {\n+\t\t\t\tfor (final String lyr : this.lufoWMSlayers) {\n+\t\t\t\t\t// per laag toevoegen met de default style\n+\t\t\t\t\tmap.addLayer(lyr, \"\");\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\t// alle lagen toevoegen\n+\t\t\t\tfor (final Layer layer : WMSUtils.getNamedLayers(this.lufoWMS\n+\t\t\t\t\t\t.getCapabilities())) {\n+\t\t\t\t\tmap.addLayer(layer);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\tbreak;\n+\t\tcase topografie:\n+\t\t\t// implicit fall thru naar default\n+\t\tdefault:\n+\t\t\tif (this.bgWMSCache.containsKey(bbox)) {\n+\t\t\t\t// ophalen uit cache\n+\t\t\t\tLOGGER.debug(\"Achtergrond \" + type\n+\t\t\t\t\t\t+ \" afbeelding uit de cache serveren.\");\n+\t\t\t\treturn this.bgWMSCache.getImage(bbox);\n+\t\t\t}\n+\t\t\tmap \u003d this.bgWMS.createGetMapRequest();\n+\t\t\tif (this.bgWMSlayers !\u003d null) {\n+\t\t\t\tfor (final String lyr : this.bgWMSlayers) {\n+\t\t\t\t\t// per laag toevoegen met de default style\n+\t\t\t\t\tmap.addLayer(lyr, \"\");\n+\t\t\t\t}\n+\t\t\t} else {\n+\t\t\t\t// alle lagen toevoegen\n+\t\t\t\tfor (final Layer layer : WMSUtils.getNamedLayers(this.bgWMS\n+\t\t\t\t\t\t.getCapabilities())) {\n+\t\t\t\t\tmap.addLayer(layer);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\n+\t\tmap.setFormat(\"image/png\");\n+\t\tmap.setDimensions(MAP_DIMENSION, MAP_DIMENSION);\n+\t\tmap.setTransparent(true);\n+\t\tmap.setBGColour(\"0xffffff\");\n+\t\tmap.setExceptions(\"application/vnd.ogc.se_inimage\");\n+\t\tmap.setSRS(\"EPSG:28992\");\n+\t\tmap.setBBox(bbox);\n+\n+\t\tLOGGER.debug(\"Achtergrond WMS url is: \" + map.getFinalURL());\n+\n+\t\ttry {\n+\t\t\tfinal GetMapResponse response \u003d this.bgWMS.issueRequest(map);\n+\t\t\tfinal BufferedImage image \u003d ImageIO.read(response.getInputStream());\n+\t\t\tswitch (type) {\n+\t\t\tcase luchtfoto:\n+\t\t\t\tthis.bgWMSLuFoCache.put(bbox, image, SECONDS_TO_CACHE_ELEMENTS);\n+\n+\t\t\t\tbreak;\n+\t\t\tcase topografie:\n+\t\t\tdefault:\n+\t\t\t\tthis.bgWMSCache.put(bbox, image, SECONDS_TO_CACHE_ELEMENTS);\n+\t\t\t\tbreak;\n+\t\t\t}\n+\n+\t\t\tif (LOGGER.isDebugEnabled()) {\n+\t\t\t\t// achtergrond plaatje bewaren in debug modus\n+\t\t\t\tfinal File temp \u003d File.createTempFile(\n+\t\t\t\t\t\t\"bgwms\",\n+\t\t\t\t\t\t\".png\",\n+\t\t\t\t\t\tnew File(this.getServletContext().getRealPath(\n+\t\t\t\t\t\t\t\tMAP_CACHE_DIR.code)));\n+\t\t\t\ttemp.deleteOnExit();\n+\t\t\t\tImageIO.write(image, \"png\", temp);\n+\t\t\t}\n+\n+\t\t\treturn image;\n+\t\t} catch (ServiceException | IOException e) {\n+\t\t\tLOGGER.error(\n+\t\t\t\t\t\"Er is een fout opgetreden bij het benaderen van de achtergrond WMS service.\",\n+\t\t\t\t\te);\n+\t\t\tthrow new ServletException(e);\n+\t\t}\n+\n+\t}\n+\n+\t/**\n+\t * zoekt of maakt de gevraagde WebMapServer.\n+\t * \n+\t * @param lyrDesc\n+\t *            de layerdescriptor met de WMS informatie\n+\t * @return the cached wms\n+\t * @throws ServiceException\n+\t *             the service exception\n+\t * @throws IOException\n+\t *             Signals that an I/O exception has occurred.\n+\t */\n+\tprivate WebMapServer getCachedWMS(final LayerDescriptor lyrDesc)\n+\t\t\tthrows ServiceException, IOException {\n+\t\tif (this.wmsServersCache.containsKey(lyrDesc.getUrl())) {\n+\t\t\tLOGGER.debug(\"WMS gevonden in cache.\");\n+\t\t\treturn this.wmsServersCache.get(lyrDesc.getUrl());\n+\t\t} else {\n+\t\t\tLOGGER.debug(\"Aanmaken van nieuwe WMS (inclusief versie onderhandeling).\");\n+\t\t\tfinal WebMapServer fgWMS \u003d new WebMapServer(new URL(\n+\t\t\t\t\tlyrDesc.getUrl()));\n+\t\t\tthis.wmsServersCache.put(lyrDesc.getUrl(), fgWMS);\n+\t\t\treturn fgWMS;\n+\t\t}\n+\t}\n+\n+\t/**\n+\t * Haalt de feature info op.\n+\t * \n+\t * @param bbox\n+\t *            the bbox\n+\t * @param lyrDesc\n+\t *            de layerdescriptor met de WMS informatie\n+\t * @return Een string met feature info\n+\t * @throws ServiceException\n+\t *             Geeft aan dat er een fout is opgetreden tijden het benaderen\n+\t *             van de WMS\n+\t * @throws IOException\n+\t *             Signals that an I/O exception has occurred.\n+\t */\n+\tprivate String getFeatureInfo(final BoundingBox bbox,\n+\t\t\tfinal LayerDescriptor lyrDesc) throws ServiceException, IOException {\n+\t\tfinal BboxLayerCacheKey key \u003d new BboxLayerCacheKey(bbox, lyrDesc);\n+\t\tif (this.featInfoCache.containsKey(key)) {\n+\t\t\t// ophalen uit cache\n+\t\t\tfinal String fInfo \u003d this.featInfoCache.get(key).getItem();\n+\t\t\tif (null !\u003d fInfo) {\n+\t\t\t\t// dit kan null zijn in het geval het item verlopen is\n+\t\t\t\tLOGGER.debug(\"FeatureInfo uit de cache serveren.\");\n+\t\t\t\treturn fInfo;\n+\t\t\t}\n+\t\t}\n+\n+\t\ttry {\n+\t\t\tfinal GetFeatureInfoRequest getFeatureInfoRequest \u003d this\n+\t\t\t\t\t.getCachedWMS(lyrDesc).createGetFeatureInfoRequest(\n+\t\t\t\t\t\t\tthis.getMapRequest);\n+\n+\t\t\tfinal String[] layerNames \u003d lyrDesc.getLayers().split(\",\\\\s*\");\n+\t\t\tfinal Set\u003cLayer\u003e queryLayers \u003d new HashSet\u003cLayer\u003e();\n+\t\t\tfinal WMSCapabilities caps \u003d this.getCachedWMS(lyrDesc)\n+\t\t\t\t\t.getCapabilities();\n+\n+\t\t\tfor (final Layer wmsLyr : caps.getLayerList()) {\n+\t\t\t\tif ((wmsLyr.getName() !\u003d null)\n+\t\t\t\t\t\t\u0026\u0026 (wmsLyr.getName().length() !\u003d 0)) {\n+\t\t\t\t\tfor (final String layerName : layerNames) {\n+\t\t\t\t\t\tif (wmsLyr.getName().equalsIgnoreCase(layerName)) {\n+\t\t\t\t\t\t\tqueryLayers.add(wmsLyr);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t\tgetFeatureInfoRequest.setQueryLayers(queryLayers);\n+\t\t\tgetFeatureInfoRequest.setInfoFormat(\"application/vnd.ogc.gml\");\n+\t\t\tgetFeatureInfoRequest.setFeatureCount(10);\n+\t\t\tgetFeatureInfoRequest.setQueryPoint(MAP_DIMENSION_MIDDLE,\n+\t\t\t\t\tMAP_DIMENSION_MIDDLE);\n+\t\t\tLOGGER.debug(\"WMS feature info request url is: \"\n+\t\t\t\t\t+ getFeatureInfoRequest.getFinalURL());\n+\t\t\tfinal GetFeatureInfoResponse response \u003d this.getCachedWMS(lyrDesc)\n+\t\t\t\t\t.issueRequest(getFeatureInfoRequest);\n+\n+\t\t\tfinal String html \u003d FeatureInfoResponseConverter\n+\t\t\t\t\t.convertToHTMLTable(response.getInputStream(),\n+\t\t\t\t\t\t\tFeatureInfoResponseConverter.Type.GMLTYPE, lyrDesc\n+\t\t\t\t\t\t\t\t\t.getAttributes().split(\",\\\\s*\"));\n+\t\t\tthis.featInfoCache.put(key,\n+\t\t\t\t\tnew CachableString(html, System.currentTimeMillis()\n+\t\t\t\t\t\t\t+ MILLISECONDS_TO_CACHE_ELEMENTS));\n+\t\t\treturn html;\n+\n+\t\t} catch (final UnsupportedOperationException u) {\n+\t\t\tLOGGER.warn(\"De WMS server (\"\n+\t\t\t\t\t+ this.getCachedWMS(lyrDesc).getInfo().getTitle()\n+\t\t\t\t\t+ \") ondersteund geen GetFeatureInfoRequest.\", u);\n+\t\t\treturn \"\";\n+\t\t}\n+\t}\n+\n+\t/**\n+\t * voorgrondkaart ophalen.\n+\t * \n+\t * @param bbox\n+\t *            the bbox\n+\t * @param lyrDesc\n+\t *            de layerdescriptor met de WMS informatie\n+\t * @return voorgrond afbeelding\n+\t * @throws ServletException\n+\t *             Geeft aan dat er een fout is opgetreden bij het benaderen van\n+\t *             de voorgrond WMS service\n+\t */\n+\tprivate BufferedImage getForeGroundMap(final BoundingBox bbox,\n+\t\t\tfinal LayerDescriptor lyrDesc) throws ServletException {\n+\n+\t\tfinal BboxLayerCacheKey key \u003d new BboxLayerCacheKey(bbox, lyrDesc);\n+\t\tif (this.fgWMSCache.containsKey(key)) {\n+\t\t\t// ophalen uit cache\n+\t\t\tfinal BufferedImage image \u003d this.fgWMSCache.get(key).getImage();\n+\t\t\tif (null !\u003d image) {\n+\t\t\t\tLOGGER.debug(\"Voorgrond afbeelding uit de cache serveren.\");\n+\t\t\t\treturn image;\n+\t\t\t}\n+\t\t}\n+\n+\t\t// wms request doen\n+\t\ttry {\n+\t\t\tthis.getMapRequest \u003d this.getCachedWMS(lyrDesc)\n+\t\t\t\t\t.createGetMapRequest();\n+\t\t\tfinal String[] layerNames \u003d lyrDesc.getLayers().split(\",\\\\s*\");\n+\t\t\tfinal String[] styleNames \u003d lyrDesc.getStyles().split(\",\\\\s*\");\n+\n+\t\t\tfor (int l \u003d 0; l \u003c layerNames.length; l++) {\n+\t\t\t\tthis.getMapRequest.addLayer(layerNames[l], styleNames[l]);\n+\t\t\t}\n+\t\t\tthis.getMapRequest.setFormat(\"image/png\");\n+\t\t\tthis.getMapRequest.setDimensions(MAP_DIMENSION, MAP_DIMENSION);\n+\t\t\tthis.getMapRequest.setTransparent(true);\n+\t\t\tthis.getMapRequest.setSRS(\"EPSG:28992\");\n+\t\t\tthis.getMapRequest.setBBox(bbox);\n+\t\t\tthis.getMapRequest.setExceptions(\"application/vnd.ogc.se_inimage\");\n+\t\t\tthis.getMapRequest.setBGColour(\"0xffffff\");\n+\t\t\tLOGGER.debug(\"Voorgrond WMS url is: \"\n+\t\t\t\t\t+ this.getMapRequest.getFinalURL());\n+\n+\t\t\t// thema/voorgrond ophalen\n+\t\t\tfinal GetMapResponse response \u003d this.getCachedWMS(lyrDesc)\n+\t\t\t\t\t.issueRequest(this.getMapRequest);\n+\t\t\tfinal BufferedImage image \u003d ImageIO.read(response.getInputStream());\n+\n+\t\t\tthis.fgWMSCache.put(key, new CacheImage(image,\n+\t\t\t\t\tSECONDS_TO_CACHE_ELEMENTS));\n+\n+\t\t\tif (LOGGER.isDebugEnabled()) {\n+\t\t\t\t// voorgrond plaatje bewaren in debug modus\n+\t\t\t\tfinal File temp \u003d File.createTempFile(\n+\t\t\t\t\t\t\"fgwms\",\n+\t\t\t\t\t\t\".png\",\n+\t\t\t\t\t\tnew File(this.getServletContext().getRealPath(\n+\t\t\t\t\t\t\t\tMAP_CACHE_DIR.code)));\n+\t\t\t\ttemp.deleteOnExit();\n+\t\t\t\tImageIO.write(image, \"png\", temp);\n+\t\t\t}\n+\t\t\treturn image;\n+\t\t} catch (ServiceException | IOException e) {\n+\t\t\tLOGGER.error(\n+\t\t\t\t\t\"Er is een fout opgetreden bij het benaderen van de achtergrond WMS service.\",\n+\t\t\t\t\te);\n+\t\t\tthrow new ServletException(e);\n+\t\t}\n+\t}\n+\n+\t/**\n+\t * Haalt de legenda op voor de thema laag.\n+\t * \n+\t * @param lyrDesc\n+\t *            de layerdescriptor met de WMS informatie\n+\t * @return een array met legenda afbeeldings bestanden\n+\t * @throws ServiceException\n+\t *             Geeft aan dat er een fout is opgetreden tijden het benaderen\n+\t *             van de WMS\n+\t * @throws IOException\n+\t *             Signals that an I/O exception has occurred.\n+\t */\n+\tprivate File[] getLegends(final LayerDescriptor lyrDesc)\n+\t\t\tthrows ServiceException, IOException {\n+\n+\t\tfinal String[] layerNames \u003d lyrDesc.getLayers().split(\",\\\\s*\");\n+\t\tfinal String[] styleNames \u003d lyrDesc.getStyles().split(\",\\\\s*\");\n+\n+\t\tfinal File[] legends \u003d new File[layerNames.length];\n+\t\ttry {\n+\t\t\tfinal GetLegendGraphicRequest legend \u003d this.getCachedWMS(lyrDesc)\n+\t\t\t\t\t.createGetLegendGraphicRequest();\n+\t\t\tBufferedImage image;\n+\t\t\tfor (int l \u003d 0; l \u003c layerNames.length; l++) {\n+\t\t\t\tfinal String key \u003d layerNames[l] + \"::\" + styleNames[l];\n+\t\t\t\tif (this.legendCache.containsKey(key)) {\n+\t\t\t\t\t// in de cache kijken of we deze legenda afbeelding al\n+\t\t\t\t\t// hebben\n+\t\t\t\t\tlegends[l] \u003d new File(this.legendCache.get(key).getName());\n+\t\t\t\t\tif (!legends[l].exists()) {\n+\t\t\t\t\t\t// (mogelijk) is het bestand gewist..\n+\t\t\t\t\t\tImageIO.write(this.legendCache.get(key).getImage(),\n+\t\t\t\t\t\t\t\t\"png\", legends[l]);\n+\t\t\t\t\t}\n+\t\t\t\t\tLOGGER.debug(\"Legenda bestand uit cache: \"\n+\t\t\t\t\t\t\t+ legends[l].getAbsolutePath());\n+\t\t\t\t} else {\n+\t\t\t\t\t// legenda opvragen\n+\t\t\t\t\tlegend.setLayer(layerNames[l]);\n+\t\t\t\t\tlegend.setStyle(styleNames[l]);\n+\t\t\t\t\tlegend.setFormat(\"image/png\");\n+\t\t\t\t\tlegend.setExceptions(\"application/vnd.ogc.se_inimage\");\n+\n+\t\t\t\t\tLOGGER.debug(\"Voorgrond WMS legenda url is: \"\n+\t\t\t\t\t\t\t+ legend.getFinalURL());\n+\t\t\t\t\tfinal GetLegendGraphicResponse response \u003d this\n+\t\t\t\t\t\t\t.getCachedWMS(lyrDesc).issueRequest(legend);\n+\t\t\t\t\timage \u003d ImageIO.read(response.getInputStream());\n+\t\t\t\t\tlegends[l] \u003d File.createTempFile(\n+\t\t\t\t\t\t\t\"legenda\",\n+\t\t\t\t\t\t\t\".png\",\n+\t\t\t\t\t\t\tnew File(this.getServletContext().getRealPath(\n+\t\t\t\t\t\t\t\t\tMAP_CACHE_DIR.code)));\n+\t\t\t\t\tlegends[l].deleteOnExit();\n+\t\t\t\t\tthis.legendCache\n+\t\t\t\t\t\t\t.put(key,\n+\t\t\t\t\t\t\t\t\tnew CacheImage(\n+\t\t\t\t\t\t\t\t\t\t\timage,\n+\t\t\t\t\t\t\t\t\t\t\tlegends[l].getAbsolutePath(),\n+\t\t\t\t\t\t\t\t\t\t\tSystem.currentTimeMillis()\n+\t\t\t\t\t\t\t\t\t\t\t\t\t+ (MILLISECONDS_TO_CACHE_ELEMENTS * 24)));\n+\t\t\t\t\tLOGGER.debug(\"Legenda bestand: \"\n+\t\t\t\t\t\t\t+ legends[l].getAbsolutePath());\n+\t\t\t\t\tImageIO.write(image, \"png\", legends[l]);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t} catch (final UnsupportedOperationException u) {\n+\t\t\tLOGGER.warn(\"De WMS server (\"\n+\t\t\t\t\t+ this.getCachedWMS(lyrDesc).getInfo().getTitle()\n+\t\t\t\t\t+ \") ondersteund geen GetLegendGraphicRequest.\", u);\n+\t\t\treturn null;\n+\t\t}\n+\t\treturn legends;\n+\t}\n+\n+\t/**\n+\t * kaart maken op basis van de opgehaalde afbeeldingen.\n+\t * \n+\t * @param imageVoorgrond\n+\t *            de voorgrondkaart\n+\t * @param imageAchtergrond\n+\t *            de achtergrondgrondkaart\n+\t * @return de file met de afbeelding\n+\t * @throws IOException\n+\t *             Signals that an I/O exception has occurred.\n+\t */\n+\tprivate File getMap(final BufferedImage imageVoorgrond,\n+\t\t\tfinal BufferedImage imageAchtergrond) throws IOException {\n+\n+\t\tfinal BufferedImage composite \u003d new BufferedImage(MAP_DIMENSION,\n+\t\t\t\tMAP_DIMENSION, BufferedImage.TYPE_INT_ARGB);\n+\t\tfinal Graphics2D g \u003d composite.createGraphics();\n+\n+\t\tg.drawImage(imageAchtergrond, 0, 0, null);\n+\t\tif (imageVoorgrond !\u003d null) {\n+\t\t\tfinal float[] scales \u003d { 1f, 1f, 1f, 0.8f };\n+\t\t\tfinal RescaleOp rop \u003d new RescaleOp(scales, new float[4], null);\n+\t\t\tg.drawImage(imageVoorgrond, rop, 0, 0);\n+\t\t\t// zoeklocatie intekenen met plaatje\n+\t\t\tfinal BufferedImage infoImage \u003d ImageIO.read(new File(this\n+\t\t\t\t\t.getClass().getClassLoader().getResource(\"info.png\")\n+\t\t\t\t\t.getFile()));\n+\t\t\t// CHECKSTYLE.OFF: MagicNumber - dit zijn midden en hoogte van het\n+\t\t\t// plaatje \"info.png\"\n+\t\t\tg.drawImage(infoImage, MAP_DIMENSION_MIDDLE - 16,\n+\t\t\t\t\tMAP_DIMENSION_MIDDLE - 37, null);\n+\t\t\t// CHECKSTYLE.ON: MagicNumber\n+\t\t}\n+\t\t// opslaan van plaatje zodat de browser het op kan halen\n+\t\tfinal File kaartAfbeelding \u003d File.createTempFile(\n+\t\t\t\t\"wmscombined\",\n+\t\t\t\t\".png\",\n+\t\t\t\tnew File(this.getServletContext().getRealPath(\n+\t\t\t\t\t\tMAP_CACHE_DIR.code)));\n+\t\tkaartAfbeelding.deleteOnExit();\n+\t\tImageIO.write(composite, \"png\", kaartAfbeelding);\n+\t\tg.dispose();\n+\t\treturn kaartAfbeelding;\n+\t}\n+\n+\t/*\n+\t * (non-Javadoc)\n+\t * \n+\t * @see\n+\t * nl.mineleni.cbsviewer.servlet.AbstractBaseServlet#init(javax.servlet.\n+\t * ServletConfig)\n+\t */\n+\t@Override\n+\tpublic void init(final ServletConfig config) throws ServletException {\n+\t\tsuper.init(config);\n+\t\ttry {\n+\t\t\tthis.bgWMSCache \u003d new WMSCache(this.getServletContext()\n+\t\t\t\t\t.getRealPath(MAP_CACHE_DIR.code), NUMBER_CACHE_ELEMENTS);\n+\t\t} catch (final IOException e) {\n+\t\t\tLOGGER.error(\n+\t\t\t\t\t\"Inititalisatie fout voor de achtergrond topografie cache.\",\n+\t\t\t\t\te);\n+\t\t}\n+\n+\t\ttry {\n+\t\t\tthis.bgWMSLuFoCache \u003d new WMSCache(this.getServletContext()\n+\t\t\t\t\t.getRealPath(MAP_CACHE_DIR.code), NUMBER_CACHE_ELEMENTS);\n+\t\t} catch (final IOException e) {\n+\t\t\tLOGGER.error(\n+\t\t\t\t\t\"Inititalisatie fout voor de achtergrond luchtfoto cache.\",\n+\t\t\t\t\te);\n+\t\t}\n+\n+\t\tthis.legendCache \u003d new Cache\u003cString, CacheImage, BufferedImage\u003e(\n+\t\t\t\tNUMBER_CACHE_ELEMENTS);\n+\n+\t\tthis.featInfoCache \u003d new Cache\u003cBboxLayerCacheKey, CachableString, String\u003e(\n+\t\t\t\tNUMBER_CACHE_ELEMENTS);\n+\n+\t\tthis.fgWMSCache \u003d new Cache\u003cBboxLayerCacheKey, CacheImage, BufferedImage\u003e(\n+\t\t\t\tNUMBER_CACHE_ELEMENTS);\n+\n+\t\t// achtergrond kaart\n+\t\tfinal String bgCapabilitiesURL \u003d config\n+\t\t\t\t.getInitParameter(\"bgCapabilitiesURL\");\n+\t\tLOGGER.debug(\"WMS capabilities url van achtergrond kaart: \"\n+\t\t\t\t+ bgCapabilitiesURL);\n+\t\ttry {\n+\t\t\tthis.bgWMS \u003d new WebMapServer(new URL(bgCapabilitiesURL));\n+\t\t} catch (final MalformedURLException e) {\n+\t\t\tLOGGER.error(\n+\t\t\t\t\t\"Een url die gebruikt wordt voor de topografie WMS capabilities is misvormd\",\n+\t\t\t\t\te);\n+\t\t\tthrow new ServletException(e);\n+\t\t} catch (final ServiceException e) {\n+\t\t\tLOGGER.error(\n+\t\t\t\t\t\"Er is een service exception (WMS server fout) opgetreden bij het ophalen van de topografie WMS capabilities\",\n+\t\t\t\t\te);\n+\t\t\tthrow new ServletException(e);\n+\t\t} catch (final IOException e) {\n+\t\t\tLOGGER.error(\n+\t\t\t\t\t\"Er is een I/O fout opgetreden bij benaderen van de topografie WMS services\",\n+\t\t\t\t\te);\n+\t\t\tthrow new ServletException(e);\n+\t\t}\n+\t\tfinal String bgWMSlyrs \u003d config.getInitParameter(\"bgWMSlayers\");\n+\t\tLOGGER.debug(\"Achtergrond kaartlagen topografie: \" + bgWMSlyrs);\n+\t\tif ((bgWMSlyrs !\u003d null) \u0026\u0026 (bgWMSlyrs.length() \u003e 0)) {\n+\t\t\tthis.bgWMSlayers \u003d bgWMSlyrs.split(\"[,]\\\\s*\");\n+\t\t}\n+\n+\t\t// achtergrond luchtfoto\n+\t\tfinal String lufoCapabilitiesURL \u003d config\n+\t\t\t\t.getInitParameter(\"lufoCapabilitiesURL\");\n+\t\tLOGGER.debug(\"WMS capabilities url van achtergrond luchtfoto: \"\n+\t\t\t\t+ lufoCapabilitiesURL);\n+\t\ttry {\n+\t\t\tthis.lufoWMS \u003d new WebMapServer(new URL(lufoCapabilitiesURL));\n+\t\t} catch (final MalformedURLException e) {\n+\t\t\tLOGGER.error(\n+\t\t\t\t\t\"De url die gebruikt wordt voor de luchtfoto WMS capabilities is misvormd\",\n+\t\t\t\t\te);\n+\t\t\tthrow new ServletException(e);\n+\t\t} catch (final ServiceException e) {\n+\t\t\tLOGGER.error(\n+\t\t\t\t\t\"Er is een service exception (WMS server fout) opgetreden bij het ophalen van de luchtfoto WMS capabilities\",\n+\t\t\t\t\te);\n+\t\t\tthrow new ServletException(e);\n+\t\t} catch (final IOException e) {\n+\t\t\tLOGGER.error(\n+\t\t\t\t\t\"Er is een I/O fout opgetreden bij benaderen van de luchtfoto WMS services\",\n+\t\t\t\t\te);\n+\t\t\tthrow new ServletException(e);\n+\t\t}\n+\t\tfinal String lufoWMSlyrs \u003d config.getInitParameter(\"lufoWMSlayers\");\n+\t\tLOGGER.debug(\"Achtergrond kaartlagen luchtfoto: \" + lufoWMSlyrs);\n+\t\tif ((lufoWMSlyrs !\u003d null) \u0026\u0026 (lufoWMSlyrs.length() \u003e 0)) {\n+\t\t\tthis.lufoWMSlayers \u003d lufoWMSlyrs.split(\"[,]\\\\s*\");\n+\t\t}\n+\n+\t\t// init servers cache\n+\t\tthis.wmsServersCache \u003d new ConcurrentHashMap\u003cString, WebMapServer\u003e();\n+\t}\n+\n+\t/*\n+\t * (non-Javadoc)\n+\t * \n+\t * @see javax.servlet.http.HttpServlet#service(javax.servlet.ServletRequest,\n+\t * javax.servlet.ServletResponse)\n+\t */\n+\t@Override\n+\tprotected void service(final HttpServletRequest request,\n+\t\t\tfinal HttpServletResponse response) throws ServletException,\n+\t\t\tIOException {\n+\n+\t\tfinal int[] dXcoordYCoordStraal \u003d this.parseLocation(request);\n+\t\tfinal int xcoord \u003d dXcoordYCoordStraal[0];\n+\t\tfinal int ycoord \u003d dXcoordYCoordStraal[1];\n+\t\tfinal int straal \u003d dXcoordYCoordStraal[2];\n+\t\tfinal BoundingBox bbox \u003d SpatialUtil.calcRDBBOX(xcoord, ycoord, straal);\n+\n+\t\tBasemapType basemaptype \u003d BasemapType.topografie;\n+\t\tfinal String mType \u003d request.getParameter(REQ_PARAM_BGMAP.code);\n+\t\tif (this.isNotNullNotEmptyNotWhiteSpaceOnly(mType)) {\n+\t\t\ttry {\n+\t\t\t\tbasemaptype \u003d BasemapType.valueOf(mType);\n+\t\t\t} catch (final IllegalArgumentException e) {\n+\t\t\t\tLOGGER.debug(\"Ongeldige waarde gebruikt voor basemap type, de default wordt gebruikt.\");\n+\t\t\t}\n+\t\t}\n+\t\tfinal BufferedImage bg \u003d this.getBackGroundMap(bbox, basemaptype);\n+\n+\t\tBufferedImage fg \u003d null;\n+\t\tfinal String mapId \u003d request.getParameter(REQ_PARAM_MAPID.code);\n+\t\tif (this.isNotNullNotEmptyNotWhiteSpaceOnly(mapId)) {\n+\t\t\tfinal LayerDescriptor layer \u003d this.layers.getLayerByID(mapId);\n+\t\t\trequest.setAttribute(\"mapname\", layer.getName());\n+\t\t\tLOGGER.debug(\"LayerDescriptor::Name is: \" + layer.getName());\n+\n+\t\t\tfinal String fgCapabilitiesURL \u003d layer.getUrl();\n+\t\t\tLOGGER.debug(\"WMS capabilities url van voorgrond kaart: \"\n+\t\t\t\t\t+ fgCapabilitiesURL);\n+\t\t\ttry {\n+\t\t\t\tfg \u003d this.getForeGroundMap(bbox, layer);\n+\t\t\t\tfinal File[] legendas \u003d this.getLegends(layer);\n+\t\t\t\tfinal String fInfo \u003d this.getFeatureInfo(bbox, layer);\n+\t\t\t\trequest.setAttribute(REQ_PARAM_MAPID.code, mapId);\n+\t\t\t\trequest.setAttribute(REQ_PARAM_LEGENDAS.code, legendas);\n+\t\t\t\trequest.setAttribute(REQ_PARAM_FEATUREINFO.code, fInfo);\n+\t\t\t} catch (final ServiceException e) {\n+\t\t\t\tLOGGER.error(\n+\t\t\t\t\t\t\"Er is een service exception opgetreden bij benaderen van de voorgrond WMS\",\n+\t\t\t\t\t\te);\n+\t\t\t\tthrow new ServletException(e);\n+\t\t\t} catch (final MalformedURLException e) {\n+\t\t\t\tLOGGER.error(\n+\t\t\t\t\t\t\"De url die gebruikt wordt voor de WMS capabilities is misvormd.\",\n+\t\t\t\t\t\te);\n+\t\t\t\tthrow new ServletException(e);\n+\t\t\t}\n+\t\t}\n+\n+\t\tfinal File kaart \u003d this.getMap(fg, bg);\n+\n+\t\trequest.setAttribute(REQ_PARAM_CACHEDIR.code, MAP_CACHE_DIR.code);\n+\t\trequest.setAttribute(REQ_PARAM_KAART.code, kaart);\n+\t\trequest.setAttribute(REQ_PARAM_BGMAP.code, basemaptype);\n+\t}\n }"
        },
        {
          "file_name": "src/main/java/nl/mineleni/cbsviewer/servlet/wms/cache/Cache.java",
          "patch": "@@ -20,14 +20,15 @@\n import org.slf4j.LoggerFactory;\n \n /**\n- * De Class Cache.\n+ * De klasse Cache. Een generieke implementatie van {@linkplain Caching} met\n+ * {@linkplain Cachable} elementen.\n  * \n  * @param \u003cK\u003e\n  *            het key type\n  * @param \u003cV\u003e\n- *            het value type\n+ *            het decorating type, {@link Cachable}\n  * @param \u003cT\u003e\n- *            het generic type\n+ *            het cacheble object\n  * @author prinsmc\n  */\n public class Cache\u003cK, V extends Cachable\u003cT\u003e, T\u003e implements Caching\u003cK, V, T\u003e {\n@@ -112,6 +113,8 @@ public V get(final K key) {\n \n \t\tfinal long timestamp \u003d entry.getExpireBy();\n \t\tif ((timestamp !\u003d -1) \u0026\u0026 (System.currentTimeMillis() \u003e timestamp)) {\n+\t\t\tLOGGER.debug(\"Verwijderen element met sleutel \" + key\n+\t\t\t\t\t+ \" uit de cache, deze is verlopen.\");\n \t\t\tthis.remove(key);\n \t\t\treturn null;\n \t\t}\n@@ -166,6 +169,7 @@ public void put(final K key, final V cacheValue) {\n \t\t\t\tthis.remove(this.queue.poll());\n \t\t\t}\n \t\t}\n+\t\tLOGGER.debug(\"Opslaan van element met sleutel \" + key + \" in de cache.\");\n \t\tthis.cache.put(key, cacheValue);\n \t\tthis.queue.add(key);\n \t}\n@@ -189,6 +193,8 @@ public int queueSize() {\n \tpublic void remove(final K key) {\n \t\tfinal V entry \u003d this.cache.get(key);\n \t\tif (entry !\u003d null) {\n+\t\t\tLOGGER.debug(\"Verwijderen element met sleutel \" + key\n+\t\t\t\t\t+ \" uit de cache.\");\n \t\t\tthis.cacheSize.decrementAndGet();\n \t\t\tthis.cache.remove(key);\n \t\t}"
        },
        {
          "file_name": "src/main/java/nl/mineleni/cbsviewer/servlet/wms/cache/Caching.java",
          "patch": "@@ -49,7 +49,10 @@\n \t * \n \t * @param bbox\n \t *            de sleutel\n-\t * @return de waarde, of {@code null}\n+\t * @return de waarde, of {@code null} als het object niet aanwezig is in de\n+\t *         cache. Indien het object verlopen, maar aanwezig is wordt dat ook\n+\t *         beschouwd als niet aanwezig en wordt er {@code null}\n+\t *         teruggegeven.\n \t */\n \tV get(K bbox);\n "
        }
      ]
    }
  },
  {
    "name": "null pointer on timeout when writing to server on network",
    "url": "https://github.com/mattmaynes2/java-tftp/issues/116",
    "description": "java.lang.NullPointerException\n    at Client.handleSendMessage(Client.java:53)\n    at core.net.Transfer.notifySendMessage(Transfer.java:259)\n    at core.net.WriteTransfer.sendDataMessage(WriteTransfer.java:182)\n    at core.net.WriteTransfer.handleTimeout(WriteTransfer.java:169)\n    at core.net.NodeSocket.notifyTimeout(NodeSocket.java:248)\n    at core.net.NodeSocket.receive(NodeSocket.java:205)\n    at core.net.WriteTransfer.getAcknowledge(WriteTransfer.java:151)\n    at core.net.WriteTransfer.sendRequest(WriteTransfer.java:67)\n    at core.ctrl.TransferController.write(TransferController.java:168)\n    at core.ctrl.TransferController.handleCommand(TransferController.java:64)\n    at core.cli.CLI.notifyHandlers(CLI.java:82)\n    at core.cli.CLI.execute(CLI.java:61)\n    at core.util.Worker.run(Worker.java:63)\n    at java.lang.Thread.run(Thread.java:745)\n",
    "keywords": [
      "cli",
      "core",
      "core net",
      "nodesocket",
      "transfercontroller",
      "writetransfer",
      "net"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/mattmaynes2/java-tftp/commit/2194762576e46c23625fde44064a1302baf17306",
      "files": [
        {
          "file_name": "core/src/core/ctrl/TransferController.java",
          "patch": "@@ -95,9 +95,9 @@ else if (dir.exists() \u0026\u0026 !dir.canWrite()) {\n         // sufficient privileges to write\n         try {\n             runner \u003d new ReadTransfer(this.getAddress(), filename, path);\n-            runner.addTransferListener(this);\n \n             if (runner.sendRequest()){\n+                runner.addTransferListener(this);\n                 performTransfer(runner);\n             }\n         } catch (Exception e){\n@@ -137,9 +137,9 @@ else if (!file.canRead()) {\n         try {\n             runner \u003d new WriteTransfer(this.getAddress(), appendPrefix(filename), filename);\n             System.out.println(\"Client Filename: \" + appendPrefix(filename));\n-            runner.addTransferListener(this);\n \n             if (runner.sendRequest()){\n+                runner.addTransferListener(this);\n                 performTransfer(runner);\n             }\n         } catch (Exception e){"
        },
        {
          "file_name": "core/src/core/net/NodeSocket.java",
          "patch": "@@ -30,7 +30,7 @@\n     /**\n \t * Timeout time for the socket in ms\n \t */\n-    private static final int TIMEOUT_TIME \u003d 2400;\n+    private static final int TIMEOUT_TIME \u003d 5000;\n \n     /**\n      * Default number of attempts to retry sending and receiving after timeouts"
        }
      ]
    }
  },
  {
    "name": "Fix null pointer crash that also caused dropwizard from properly parsing the scheduler\u0027s configuration",
    "url": "https://github.com/verizonlabs/dcos-cassandra-service/pull/16",
    "description": "@sandyjuventus please feel free to merge your changes back into development that you had reverted early. I apologize again for quickly assuming that it was from your changes :)",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/verizonlabs/dcos-cassandra-service/commit/b0b3f0a763d7a197803d4c6718bd97d3d97301d7",
      "files": [
        {
          "file_name": "cassandra-commons/src/main/java/com/mesosphere/dcos/cassandra/common/config/ExecutorConfig.java",
          "patch": "@@ -108,6 +108,10 @@ public static ExecutorConfig create(\n             @JsonProperty(\"container_path\") String containerPath)\n             throws URISyntaxException, UnsupportedEncodingException {\n \n+        if (dvdcli \u003d\u003d null) {\n+            dvdcli \u003d \"\";\n+        }\n+\n         ExecutorConfig config \u003d create(\n                 command,\n                 arguments,\n@@ -121,7 +125,7 @@ public static ExecutorConfig create(\n                 URI.create(jreLocation),\n                 URI.create(executorLocation),\n                 URI.create(cassandraLocation),\n-                URI.create(dvdcli),\n+                URI.create(dvdcli), // Null pointer exception when scheduler config is parsed unless we make sure it\u0027s never null.\n                 volumeDriver,\n                 volumeName,\n                 hostPath,\n@@ -283,6 +287,10 @@ public String getCassandraLocationString() {\n \n     @JsonProperty(\"dvdcli\")\n     public String getDvdcliString() {\n+        if (dvdcli \u003d\u003d null) {\n+            return \"\";\n+        }\n+\n         return dvdcli.toString();\n     }\n "
        }
      ]
    }
  },
  {
    "name": "Null Pointer Dereference: Player.java",
    "url": "https://github.com/modernmaster/katas/issues/17",
    "description": "L24\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/modernmaster/katas/commit/2deb3b3fd6848c5de9dc17faeb697d1420071b14",
      "files": [
        {
          "file_name": "rock-paper-scissors/src/main/java/uk/co/jamesmcguigan/rockpaperscissors/models/Player.java",
          "patch": "@@ -22,6 +22,9 @@ public void setGesture(final Gesture gesture) {\n \n     @Override\n     public boolean equals(final Object obj) {\n+        if(obj\u003d\u003dnull || !obj.getClass().equals(Player.class)) {\n+            return false;\n+        }\n         Player player \u003d (Player) obj;\n         return player.getIsHuman() \u003d\u003d getIsHuman()\n                 \u0026\u0026 player.getGesture().getName().equals(getGesture().getName());"
        }
      ]
    }
  },
  {
    "name": "An empty repository throws a null-pointer",
    "url": "https://github.com/dmusican/Elegit/issues/128",
    "description": "Clone/create a repository with no files inside (so it will only contain the .git folder). Elegit will crash with repeated null-pointer exceptions.\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/dmusican/Elegit/commit/11be73328fece10d56bf98b2c88037a5e81594a0",
      "files": [
        {
          "file_name": "src/main/java/elegit/AllFilesPanelView.java",
          "patch": "@@ -78,53 +78,55 @@ protected void addTreeItemsToRoot(List\u003cRepoFile\u003e repoFiles, TreeItem\u003cRepoFile\u003e r\n         // Loop through files at each depth\n         for(int i \u003d 0; i \u003c maxDepth + 1; i++) {\n             List\u003cRepoFile\u003e filesAtDepth \u003d filesAtDepthMap.get(i);\n-            for (RepoFile repoFile : filesAtDepth) {\n-                Path pathToFile \u003d repoFile.getFilePath();\n-\n-                // Check if there is already a record of this file\n-                if (itemMap.containsKey(pathToFile)) {\n-                    TreeItem\u003cRepoFile\u003e oldItem \u003d itemMap.get(pathToFile);\n-\n-                    if (oldItem.getValue().equals(repoFile)) {\n-                        // The given file is already present, no additional processing needed\n-                        itemsToRemove.remove(oldItem);\n+            if(filesAtDepth !\u003d null) {\n+                for (RepoFile repoFile : filesAtDepth) {\n+                    Path pathToFile \u003d repoFile.getFilePath();\n+\n+                    // Check if there is already a record of this file\n+                    if (itemMap.containsKey(pathToFile)) {\n+                        TreeItem\u003cRepoFile\u003e oldItem \u003d itemMap.get(pathToFile);\n+\n+                        if (oldItem.getValue().equals(repoFile)) {\n+                            // The given file is already present, no additional processing needed\n+                            itemsToRemove.remove(oldItem);\n+                        } else {\n+                            // The file is displayed, but needs its status updated. Replace the old with the new\n+                            TreeItem\u003cRepoFile\u003e newItem \u003d new TreeItem\u003c\u003e(repoFile, repoFile.diffButton);\n+\n+                            TreeItem\u003cRepoFile\u003e parent \u003d oldItem.getParent();\n+\n+                            Platform.runLater(() -\u003e {\n+                                newItem.setExpanded(oldItem.isExpanded());\n+                                newItem.getChildren().setAll(oldItem.getChildren());\n+                                parent.getChildren().set(parent.getChildren().indexOf(oldItem), newItem);\n+                            });\n+\n+                            itemsToRemove.remove(oldItem);\n+                            itemMap.put(pathToFile, newItem);\n+                        }\n                     } else {\n-                        // The file is displayed, but needs its status updated. Replace the old with the new\n+                        // The given file wasn\u0027t present, so need to add it\n                         TreeItem\u003cRepoFile\u003e newItem \u003d new TreeItem\u003c\u003e(repoFile, repoFile.diffButton);\n \n-                        TreeItem\u003cRepoFile\u003e parent \u003d oldItem.getParent();\n-\n-                        Platform.runLater(() -\u003e {\n-                            newItem.setExpanded(oldItem.isExpanded());\n-                            newItem.getChildren().setAll(oldItem.getChildren());\n-                            parent.getChildren().set(parent.getChildren().indexOf(oldItem), newItem);\n-                        });\n-\n-                        itemsToRemove.remove(oldItem);\n-                        itemMap.put(pathToFile, newItem);\n-                    }\n-                } else {\n-                    // The given file wasn\u0027t present, so need to add it\n-                    TreeItem\u003cRepoFile\u003e newItem \u003d new TreeItem\u003c\u003e(repoFile, repoFile.diffButton);\n-\n-                    Path pathToParent \u003d pathToFile.getParent();\n-                    boolean foundParent \u003d false;\n-                    // Make sure this new item is properly inserted as a child to its parent\n-                    while (pathToParent !\u003d null \u0026\u0026 !root.getValue().getFilePath().equals(pathToParent)) {\n-                        if (itemMap.containsKey(pathToParent)) {\n-                            TreeItem\u003cRepoFile\u003e parent \u003d itemMap.get(pathToParent);\n-                            Platform.runLater(() -\u003e parent.getChildren().add(newItem));\n-                            foundParent \u003d true;\n-                            break;\n+                        Path pathToParent \u003d pathToFile.getParent();\n+                        boolean foundParent \u003d false;\n+                        // Make sure this new item is properly inserted as a child to its parent\n+                        while (pathToParent !\u003d null \u0026\u0026 !root.getValue().getFilePath().equals(pathToParent)) {\n+                            if (itemMap.containsKey(pathToParent)) {\n+                                TreeItem\u003cRepoFile\u003e parent \u003d itemMap.get(pathToParent);\n+                                Platform.runLater(() -\u003e parent.getChildren().add(newItem));\n+                                foundParent \u003d true;\n+                                break;\n+                            }\n+                            pathToParent \u003d pathToParent.getParent();\n                         }\n-                        pathToParent \u003d pathToParent.getParent();\n-                    }\n-                    // If no parent is found, we can assume it belongs to the root\n-                    if (!foundParent){\n-                        Platform.runLater(() -\u003e root.getChildren().add(newItem));\n+                        // If no parent is found, we can assume it belongs to the root\n+                        if (!foundParent) {\n+                            Platform.runLater(() -\u003e root.getChildren().add(newItem));\n+                        }\n+                        itemMap.put(pathToFile, newItem);\n+                        itemsToRemove.remove(newItem);\n                     }\n-                    itemMap.put(pathToFile, newItem);\n-                    itemsToRemove.remove(newItem);\n                 }\n             }\n         }"
        }
      ]
    }
  },
  {
    "name": "prevent null pointer exception if getCurrentWidget() returns null",
    "url": "https://github.com/dimagi/commcare-android/pull/722",
    "description": "Copying https://github.com/dimagi/commcare-odk/pull/721 over to 2.24\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/dimagi/commcare-android/commit/3363867bccbccc0a7fdbfdfc703a656dc4f5904b",
      "files": [
        {
          "file_name": "app/src/org/odk/collect/android/activities/FormEntryActivity.java",
          "patch": "@@ -542,13 +542,17 @@ private void processChooserResponse(Intent intent) {\n     public QuestionWidget getPendingWidget() {\n         FormIndex pendingIndex \u003d mFormController.getPendingCalloutFormIndex();\n         if (pendingIndex \u003d\u003d null) {\n+            Logger.log(AndroidLogger.SOFT_ASSERT,\n+                    \"getPendingWidget called when pending callout form index was null\");\n             return null;\n         }\n         for (QuestionWidget q : ((ODKView)mCurrentView).getWidgets()) {\n             if (q.getFormId().equals(pendingIndex)) {\n                 return q;\n             }\n         }\n+        Logger.log(AndroidLogger.SOFT_ASSERT,\n+                \"getPendingWidget couldn\u0027t find question widget with a form index that matches the pending callout.\");\n         return null;\n     }\n "
        },
        {
          "file_name": "app/src/org/odk/collect/android/activities/components/ImageCaptureProcessing.java",
          "patch": "@@ -8,6 +8,7 @@\n import java.io.IOException;\n \n public class ImageCaptureProcessing {\n+\n     /**\n      * Performs any necessary relocating and scaling of an image coming from either a\n      * SignatureWidget or ImageWidget (capture or choose)\n@@ -29,9 +30,11 @@ public static File moveAndScaleImage(File originalImage, boolean shouldScale,\n         // TODO PLM: this scale flag should be decoupled such that getPendingWidget doesn\u0027t need to be called\n         if (shouldScale) {\n             ImageWidget currentWidget \u003d (ImageWidget)formEntryActivity.getPendingWidget();\n-            int maxDimen \u003d currentWidget.getMaxDimen();\n-            if (maxDimen !\u003d -1) {\n-                savedScaledImage \u003d FileUtils.scaleAndSaveImage(originalImage, finalFilePath, maxDimen);\n+            if (currentWidget !\u003d null) {\n+                int maxDimen \u003d currentWidget.getMaxDimen();\n+                if (maxDimen !\u003d -1) {\n+                    savedScaledImage \u003d FileUtils.scaleAndSaveImage(originalImage, finalFilePath, maxDimen);\n+                }\n             }\n         }\n "
        }
      ]
    }
  },
  {
    "name": "fix domain null pointer exception",
    "url": "https://github.com/ContainX/openstack4j/pull/947",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/ContainX/openstack4j/commit/c3ef45ec52d0b7619849a24bff94bb472a039fc5",
      "files": [
        {
          "file_name": "core/src/main/java/org/openstack4j/openstack/identity/v3/domain/KeystoneProject.java",
          "patch": "@@ -206,7 +206,7 @@ public String toString() {\n      */\n     @Override\n     public int hashCode() {\n-        return Objects.hashCode(id, domain.getId(), description, name, links, parentId, subtree, parents);\n+        return Objects.hashCode(id, domain !\u003d null ? domain.getId() : domainId, description, name, links, parentId, subtree, parents);\n     }\n \n     /**"
        }
      ]
    }
  },
  {
    "name": "City Info Null Pointer on exit with selected space stack",
    "url": "https://github.com/joulupunikki/Phoenix/issues/105",
    "description": "```\r\njava.lang.NullPointerException\r\nat util.Util.drawStackDisplay(Util.java:846)\r\nat gui.SpaceWindow.renderSpaceWindow(SpaceWindow.java:250)\r\n```\r\n\r\nFixed by noting that saved coordinates are already in space, so conversion must not be done in CIW::restoreCurrentSelectedStack(). After this, if the city is switched while in in CIW, on exit we may get\r\n\r\n```\r\nThread[AWT-EventQueue-0,6,main]\r\njava.lang.IndexOutOfBoundsException: Index: 0, Size: 0\r\n\tat java.util.LinkedList.checkElementIndex(LinkedList.java:555)\r\n\tat java.util.LinkedList.get(LinkedList.java:476)\r\n\tat util.Util.drawStackDisplay(Util.java:850)\r\n\tat gui.SpaceWindow.renderSpaceWindow(SpaceWindow.java:250)\r\n\tat gui.SpaceWindow.paintComponent(SpaceWindow.java:239)\r\n```\r\n\r\nwhich is fixed by copying the relevant Point-objects instead of the references in CIW::saveCurrentSelectedStack()",
    "keywords": [
      "linkedlist",
      "java",
      "util",
      "spacewindow",
      "gui"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/joulupunikki/Phoenix/commit/edbd514139d8dc0654f03e9036e689aab4a66beb",
      "files": [
        {
          "file_name": "src/gui/CityInfoWindow.java",
          "patch": "@@ -283,7 +283,8 @@ public void mousePressed(MouseEvent e) {\n \n     private void saveCurrentSelectedStack() {\n         current_planet_ptr \u003d game.getCurrentPlanetNr();\n-        selected_point_ptr \u003d new Point(game.getSelectedPoint()); // fix #105\n+        Point tmp \u003d game.getSelectedPoint(); // fix #105, again\n+        selected_point_ptr \u003d tmp \u003d\u003d null ? null : new Point(tmp); // fix #105\n         selected_faction_ptr \u003d new Point(game.getSelectedFaction());\n     }\n "
        }
      ]
    }
  },
  {
    "name": "Null Pointer Exception When No Matrix  exists.",
    "url": "https://github.com/rhsu/Board/issues/221",
    "description": "See Title.\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/rhsu/Board/commit/4d047202db6ffcc4488a2f09e29b039f58315ea0",
      "files": [
        {
          "file_name": "src/rhsu/board2/CompositeBoardImpl.java",
          "patch": "@@ -4,8 +4,6 @@\n import java.util.Objects;\n import rhsu.board.Direction;\n import rhsu.board.io.BoardIO;\n-import rhsu.board2.BoardPiece2;\n-import rhsu.board2.BoardPieceImpl;\n \n public class CompositeBoardImpl\u003cT\u003e implements CompositeBoard\u003cT\u003e\n {"
        },
        {
          "file_name": "src/rhsu/compositeBoard/implementations/BigDecimalBoard2Composite.java",
          "patch": "@@ -14,6 +14,8 @@\n \t\tBigDecimal defaultValue)\n \t{\t\n \t\treturn new BoardBuilder()\n+\t\t\t.setHorizontalSize(horizontalSize)\n+\t\t\t.setVerticalSize(verticalSize)\n \t\t\t.setDefaulValue(defaultValue)\n \t\t\t.createBoard();\n \t}"
        },
        {
          "file_name": "src/rhsu/compositeBoard/implementations/BigIntegerBoard2Composite.java",
          "patch": "@@ -13,6 +13,8 @@\n \t\tBigInteger defaultValue)\n \t{\n \t\treturn new BoardBuilder()\n+\t\t\t.setVerticalSize(verticalSize)\n+\t\t\t.setHorizontalSize(horizontalSize)\n \t\t\t.setDefaulValue(defaultValue)\n \t\t\t.createBoard();\n \t}"
        },
        {
          "file_name": "src/rhsu/compositeBoard/implementations/BooleanBoard2Composite.java",
          "patch": "@@ -12,6 +12,8 @@\n \t\tBoolean defaultValue)\n \t{\n \t\treturn new BoardBuilder()\n+\t\t\t.setHorizontalSize(horizontalSize)\n+\t\t\t.setVerticalSize(verticalSize)\n \t\t\t.setDefaulValue(DEFAULT_VALUE)\n \t\t\t.createBoard();\n \t}"
        },
        {
          "file_name": "src/rhsu/compositeBoard/implementations/DoubleBoard2Composite.java",
          "patch": "@@ -12,6 +12,8 @@\n \t\tDouble defaultValue)\n \t{\n \t\treturn new BoardBuilder()\n+\t\t\t.setVerticalSize(verticalSize)\n+\t\t\t.setHorizontalSize(horizontalSize)\n \t\t\t.setDefaulValue(defaultValue)\n \t\t\t.createBoard();\n \t}"
        },
        {
          "file_name": "src/rhsu/compositeBoard/implementations/IntegerBoard2Composite.java",
          "patch": "@@ -12,6 +12,8 @@\n \t\tInteger defaultValue)\n \t{\n \t\treturn new BoardBuilder()\n+\t\t\t.setVerticalSize(verticalSize)\n+\t\t\t.setHorizontalSize(horizontalSize)\n \t\t\t.setDefaulValue(defaultValue)\n \t\t\t.createBoard();\n \t}"
        },
        {
          "file_name": "src/rhsu/compositeBoard/implementations/StringBoard2Composite.java",
          "patch": "@@ -12,6 +12,8 @@\n \t\tString defaultValue)\n \t{\n \t\treturn new BoardBuilder()\n+\t\t\t.setVerticalSize(verticalSize)\n+\t\t\t.setHorizontalSize(horizontalSize)\n \t\t\t.setDefaulValue(defaultValue)\n \t\t\t.createBoard();\n \t}"
        }
      ]
    }
  },
  {
    "name": "[1.11.2] zero size item stack in grid caused Null pointer in .GridStackItem.getTooltip(GridStackItem.java:79)",
    "url": "https://github.com/raoulvdberge/refinedstorage/issues/1126",
    "description": "#### Issue description:\r\nHave a working system with a grid and disk drive\r\n\r\n#### What happens:\r\nAdded and removed some mods, then noticed an empty slot with a \u0027zero\u0027 on it, so looked like a blank space but with number 0 size.  Clicking on it caused crash\r\n\r\n#### What you expected to happen:\r\ni expect not to see any item stacks of size zero.\r\n\r\n#### Steps to reproduce:\r\n1.Have a working system with a grid and disk drive\r\n2., then noticed an empty slot with a \u0027zero\u0027 on it, \r\n3..  Clicking on it caused crash\r\n...\r\n\r\n#### Version (Make sure you are on the latest version before reporting):\r\n\r\n- Minecraft: 1.11.2\r\n- Forge: 13.20.0.2259\r\n- Refined Storage: 1.4.2\r\n\r\nDoes this issue occur on a server? [yes/no] no\r\n\r\n#### If a (crash)log is relevant for this issue, link it here:\r\n\r\nhttps://pastebin.com/CSwgrKZz\r\n",
    "keywords": [
      "####",
      "1",
      "2",
      "issue",
      "size",
      "grid",
      "caused",
      "crash"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/raoulvdberge/refinedstorage/commit/82b59fdfcd0842c76be7916e31c679b51e52105f",
      "files": [
        {
          "file_name": "CHANGELOG.md",
          "patch": "@@ -2,6 +2,7 @@\n \n ### 1.4.4\n - Fixed Disk Manipulator crashing due to empty stack (raoulvdberge)\n+- Fixed issue where empty stacks show up in the system (raoulvdberge)\n \n ### 1.4.3\n - Updated Forge to 2282 (raoulvdberge)"
        },
        {
          "file_name": "src/main/java/com/raoulvdberge/refinedstorage/apiimpl/network/node/externalstorage/StorageItemExternal.java",
          "patch": "@@ -34,7 +34,7 @@ public void detectChanges(INetworkMaster network) {\n \n             // If we exceed the cache size, than that means this items is added\n             if (i \u003e\u003d cache.size()) {\n-                if (actual !\u003d null) {\n+                if (!actual.isEmpty()) {\n                     network.getItemStorageCache().add(actual, actual.getCount(), false);\n                 }\n "
        }
      ]
    }
  },
  {
    "name": "Null pointer exception when add/updating an entity containing Auto IDs without proper permissions",
    "url": "https://github.com/molgenis/molgenis/issues/5664",
    "description": "### How to Reproduce\r\n- As admin import [test_AutoId.xlsx](https://github.com/molgenis/molgenis/files/621710/test_AutoId.xlsx)\r\n- Give permissions to a User on importwizard and sys_ImportRun\r\n- as User import [test_AutoId.xlsx](https://github.com/molgenis/molgenis/files/621710/test_AutoId.xlsx) and add/update \r\n\r\n### Expected behavior\r\nMessage saying I do not have permission to edit or update this entity\r\n\r\n### Observed behavior\r\n```\r\n12:57:39.760 [pool-2-thread-26] INFO  org.molgenis.data.importer.ImportJob - Import started\r\n12:57:39.783 [pool-2-thread-26] INFO  org.molgenis.data.importer.ImportJob - Import failed.\r\njava.lang.NullPointerException: null\r\n\tat org.molgenis.data.importer.ImportRunService.finishImportRun(ImportRunService.java:74) ~[molgenis-data-import-2.0.0-SNAPSHOT.jar:2.0.0-SNAPSHOT]\r\n\tat org.molgenis.data.importer.ImportRunService$$FastClassBySpringCGLIB$$810a1a5b.invoke(\u003cgenerated\u003e) ~[spring-core-4.1.8.RELEASE.jar:2.0.0-SNAPSHOT]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204) ~[spring-core-4.1.8.RELEASE.jar:4.1.8.RELEASE]\r\n```",
    "keywords": [
      "0",
      "importer",
      "1",
      "###",
      "data",
      "import",
      "org",
      "8",
      "1 8",
      "molgenis",
      "data importer",
      "org molgenis"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/molgenis/molgenis/commit/e5ff26e8c3ff439fde878ce470ff89e44a3ede4f",
      "files": [
        {
          "file_name": "molgenis-data-import/src/main/java/org/molgenis/data/importer/emx/ImportWriter.java",
          "patch": "@@ -1,6 +1,7 @@\n package org.molgenis.data.importer.emx;\n \n import com.google.common.collect.ImmutableCollection;\n+import com.google.common.collect.ImmutableList;\n import com.google.common.collect.Iterables;\n import org.apache.commons.io.IOUtils;\n import org.apache.commons.lang3.StringUtils;\n@@ -14,6 +15,7 @@\n import org.molgenis.data.meta.model.*;\n import org.molgenis.data.meta.model.Package;\n import org.molgenis.data.support.QueryImpl;\n+import org.molgenis.data.validation.ConstraintViolation;\n import org.molgenis.data.validation.MolgenisValidationException;\n import org.molgenis.security.core.MolgenisPermissionService;\n import org.molgenis.security.core.Permission;\n@@ -28,11 +30,12 @@\n import java.util.*;\n import java.util.function.Function;\n \n+import static com.google.common.collect.Iterables.concat;\n import static com.google.common.collect.Lists.newArrayList;\n import static java.lang.String.format;\n import static java.util.Collections.emptyList;\n import static java.util.Objects.requireNonNull;\n-import static java.util.stream.Collectors.toMap;\n+import static java.util.stream.Collectors.*;\n import static java.util.stream.StreamSupport.stream;\n import static org.molgenis.data.EntityManager.CreationMode.POPULATE;\n import static org.molgenis.data.i18n.model.I18nStringMetaData.I18N_STRING;\n@@ -81,16 +84,90 @@ public EntityImportReport doImport(EmxImportJob job)\n \t\t{\n \t\t\timportTags(job.parsedMetaData);\n \t\t\timportPackages(job.parsedMetaData);\n-\t\t\taddEntityType(job.parsedMetaData, job.report);\n \t\t});\n-\t\taddEntityPermissions(job.metaDataChanges);\n+\t\timportEntityTypes(job.parsedMetaData.getEntities(), job.report);\n+\n \t\tList\u003cEntityType\u003e resolvedEntityTypes \u003d entityTypeDependencyResolver.resolve(job.parsedMetaData.getEntities());\n \t\timportData(job.report, resolvedEntityTypes, job.source, job.dbAction, job.defaultPackage);\n \t\timportI18nStrings(job.report, job.parsedMetaData.getI18nStrings(), job.dbAction);\n \n \t\treturn job.report;\n \t}\n \n+\tprivate void importEntityTypes(ImmutableCollection\u003cEntityType\u003e entityTypes, EntityImportReport importReport)\n+\t{\n+\t\tGroupedEntityTypes groupedEntityTypes \u003d groupEntityTypes(entityTypes);\n+\t\tif (!SecurityUtils.currentUserIsSu())\n+\t\t{\n+\t\t\tvalidateEntityTypePermissions(groupedEntityTypes.getUpdatedEntityTypes());\n+\t\t\tcreateEntityTypePermissions(groupedEntityTypes.getNewEntityTypes());\n+\t\t}\n+\t\tupsertEntityTypes(groupedEntityTypes);\n+\n+\t\tgroupedEntityTypes.getNewEntityTypes().stream().map(EntityType::getName).forEach(importReport::addNewEntity);\n+\t}\n+\n+\tprivate void validateEntityTypePermissions(ImmutableCollection\u003cEntityType\u003e entityTypes)\n+\t{\n+\t\tentityTypes.forEach(this::validateEntityTypePermission);\n+\t}\n+\n+\tprivate void validateEntityTypePermission(EntityType entityType)\n+\t{\n+\t\tString entityTypeName \u003d entityType.getName();\n+\t\tif (!molgenisPermissionService.hasPermissionOnEntity(entityTypeName, Permission.READ))\n+\t\t{\n+\t\t\tthrow new MolgenisValidationException(\n+\t\t\t\t\tnew ConstraintViolation(format(\"Permission denied on existing entity type [%s]\", entityTypeName)));\n+\t\t}\n+\t}\n+\n+\tprivate void createEntityTypePermissions(ImmutableCollection\u003cEntityType\u003e entityTypes)\n+\t{\n+\t\tList\u003cString\u003e entityTypeNames \u003d entityTypes.stream().map(EntityType::getName).collect(toList());\n+\t\tpermissionSystemService.giveUserEntityPermissions(SecurityContextHolder.getContext(), entityTypeNames);\n+\t}\n+\n+\tprivate GroupedEntityTypes groupEntityTypes(ImmutableCollection\u003cEntityType\u003e entities)\n+\t{\n+\t\treturn runAsSystem(() -\u003e\n+\t\t{\n+\t\t\tImmutableCollection\u003cEntityType\u003e newEntityTypes \u003d entities.stream()\n+\t\t\t\t\t.filter(entityType -\u003e !dataService.hasRepository(entityType.getName()))\n+\t\t\t\t\t.collect(collectingAndThen(toList(), ImmutableList::copyOf));\n+\n+\t\t\tImmutableCollection\u003cEntityType\u003e existingEntityTypes \u003d entities.stream()\n+\t\t\t\t\t.filter(entityType -\u003e dataService.hasRepository(entityType.getName()))\n+\t\t\t\t\t.collect(collectingAndThen(toList(), ImmutableList::copyOf));\n+\n+\t\t\treturn new GroupedEntityTypes(newEntityTypes, existingEntityTypes);\n+\t\t});\n+\t}\n+\n+\tprivate static class GroupedEntityTypes\n+\t{\n+\t\tprivate final ImmutableCollection\u003cEntityType\u003e newEntityTypes;\n+\t\tprivate final ImmutableCollection\u003cEntityType\u003e updatedEntityTypes;\n+\n+\t\tpublic GroupedEntityTypes(ImmutableCollection\u003cEntityType\u003e newEntityTypes,\n+\t\t\t\tImmutableCollection\u003cEntityType\u003e updatedEntityTypes)\n+\t\t{\n+\n+\t\t\tthis.newEntityTypes \u003d requireNonNull(newEntityTypes);\n+\t\t\tthis.updatedEntityTypes \u003d requireNonNull(updatedEntityTypes);\n+\t\t}\n+\n+\t\tpublic ImmutableCollection\u003cEntityType\u003e getNewEntityTypes()\n+\t\t{\n+\t\t\treturn newEntityTypes;\n+\t\t}\n+\n+\t\tpublic ImmutableCollection\u003cEntityType\u003e getUpdatedEntityTypes()\n+\t\t{\n+\t\t\treturn updatedEntityTypes;\n+\t\t}\n+\t}\n+\n \tprivate void importLanguages(EntityImportReport report, Map\u003cString, Language\u003e languages, DatabaseAction dbAction,\n \t\t\tMetaDataChanges metaDataChanges)\n \t{\n@@ -280,66 +357,40 @@ private Entity toEntity(EntityType entityType, Entity emxEntity)\n \t\treturn entity;\n \t}\n \n-\t/**\n-\t * Gives the user permission to see and edit his imported entities, unless the user is admin since admins can do\n-\t * that anyways.\n-\t */\n-\tprivate void addEntityPermissions(MetaDataChanges metaDataChanges)\n-\t{\n-\t\tif (!SecurityUtils.currentUserIsSu())\n-\t\t{\n-\t\t\tpermissionSystemService\n-\t\t\t\t\t.giveUserEntityPermissions(SecurityContextHolder.getContext(), metaDataChanges.getAddedEntities());\n-\t\t}\n-\t}\n-\n-\t/**\n-\t * Adds the parsed {@link ParsedMetaData}, creating new repositories where necessary.\n-\t *\n-\t * @param parsedMetaData meta data from import source\n-\t * @param report         import report\n-\t */\n-\tprivate void addEntityType(ParsedMetaData parsedMetaData, EntityImportReport report)\n+\tprivate void upsertEntityTypes(GroupedEntityTypes groupedEntityTypes)\n \t{\n-\t\tCollection\u003cEntityType\u003e entityTypes \u003d parsedMetaData.getEntities();\n-\n \t\t// retrieve existing entity types\n-\t\tFetch entityTypeFetch \u003d new Fetch().field(EntityTypeMetadata.FULL_NAME).field(EntityTypeMetadata.ATTRIBUTES,\n-\t\t\t\tnew Fetch().field(AttributeMetadata.ID).field(AttributeMetadata.NAME));\n+\t\tFetch entityTypeFetch \u003d createEntityTypeWithAttributesFetch();\n+\n+\t\tImmutableCollection\u003cEntityType\u003e updatedEntityTypes \u003d groupedEntityTypes.getUpdatedEntityTypes();\n \n \t\tMap\u003cString, EntityType\u003e existingEntityTypeMap \u003d dataService\n-\t\t\t\t.findAll(ENTITY_TYPE_META_DATA, entityTypes.stream().map(EntityType::getName), entityTypeFetch,\n+\t\t\t\t.findAll(ENTITY_TYPE_META_DATA, updatedEntityTypes.stream().map(EntityType::getName), entityTypeFetch,\n \t\t\t\t\t\tEntityType.class).collect(toMap(EntityType::getName, Function.identity()));\n \n \t\t// inject attribute identifiers in entity types to import\n-\t\tentityTypes.forEach(entityType -\u003e\n+\t\tupdatedEntityTypes.forEach(entityType -\u003e\n \t\t{\n \t\t\tEntityType existingEntityType \u003d existingEntityTypeMap.get(entityType.getName());\n-\t\t\tif (existingEntityType !\u003d null)\n+\t\t\tentityType.getOwnAllAttributes().forEach(ownAttr -\u003e\n \t\t\t{\n-\t\t\t\tentityType.getOwnAllAttributes().forEach(ownAttr -\u003e\n+\t\t\t\tAttribute existingAttr \u003d existingEntityType.getAttribute(ownAttr.getName());\n+\t\t\t\tif (existingAttr !\u003d null)\n \t\t\t\t{\n-\t\t\t\t\tAttribute existingAttr \u003d existingEntityType.getAttribute(ownAttr.getName());\n-\t\t\t\t\tif (existingAttr !\u003d null)\n-\t\t\t\t\t{\n-\t\t\t\t\t\townAttr.setIdentifier(existingAttr.getIdentifier());\n-\t\t\t\t\t}\n-\t\t\t\t});\n-\t\t\t}\n+\t\t\t\t\townAttr.setIdentifier(existingAttr.getIdentifier());\n+\t\t\t\t}\n+\t\t\t});\n \t\t});\n \n \t\t// add or update entity types\n-\t\tdataService.getMeta().upsertEntityTypes(entityTypes);\n+\t\tList\u003cEntityType\u003e entityTypes \u003d newArrayList(concat(updatedEntityTypes, groupedEntityTypes.getNewEntityTypes()));\n+\t\trunAsSystem(() -\u003e dataService.getMeta().upsertEntityTypes(entityTypes));\n+\t}\n \n-\t\t// add new entities to import report\n-\t\tentityTypes.forEach(entityType -\u003e\n-\t\t{\n-\t\t\tString entityTypeName \u003d entityType.getName();\n-\t\t\tif (!existingEntityTypeMap.containsKey(entityTypeName))\n-\t\t\t{\n-\t\t\t\treport.addNewEntity(entityTypeName);\n-\t\t\t}\n-\t\t});\n+\tprivate static Fetch createEntityTypeWithAttributesFetch()\n+\t{\n+\t\treturn new Fetch().field(EntityTypeMetadata.FULL_NAME).field(EntityTypeMetadata.ATTRIBUTES,\n+\t\t\t\tnew Fetch().field(AttributeMetadata.ID).field(AttributeMetadata.NAME));\n \t}\n \n \t/**"
        }
      ]
    }
  },
  {
    "name": "Developer Console: Null Pointer In RecordingPlayerActivity.onCreate (RecordingPlayerActivity.java:50)",
    "url": "https://github.com/MythTV-Clients/MythtvPlayerForAndroid/issues/47",
    "description": "I deleted/disabled VLC/Player and tried to duplicate this on my\nNexus 7 running: 5.0.2. Android picked some other player although\nit took a long time to start and couldn\u0027t play the video.\n\n``` java\njava.lang.RuntimeException: Unable to start activity ComponentInfo{org.mythtv.android/org.mythtv.android.player.app.player.RecordingPlayerActivity}: java.lang.NullPointerException: Attempt to invoke virtual method \u0027java.lang.String java.lang.String.substring(int)\u0027 on a null object reference\nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2325)\nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2387)\nat android.app.ActivityThread.access$800(ActivityThread.java:151)\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:1303)\nat android.os.Handler.dispatchMessage(Handler.java:102)\nat android.os.Looper.loop(Looper.java:135)\nat android.app.ActivityThread.main(ActivityThread.java:5254)\nat java.lang.reflect.Method.invoke(Native Method)\nat java.lang.reflect.Method.invoke(Method.java:372)\nat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698)\nCaused by: java.lang.NullPointerException: Attempt to invoke virtual method \u0027java.lang.String java.lang.String.substring(int)\u0027 on a null object reference\nat org.mythtv.android.player.app.player.RecordingPlayerActivity.onCreate(RecordingPlayerActivity.java:50)\nat android.app.Activity.performCreate(Activity.java:5990)\nat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1106)\nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2278)\n```\n",
    "keywords": [
      "app",
      "os",
      "string",
      "activity",
      "method",
      "app activitythread",
      "android",
      "invoke",
      "java lang",
      "activitythread",
      "java",
      "null",
      "android app",
      "lang",
      "mythtv",
      "player",
      "zygoteinit",
      "recordingplayeractivity"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/MythTV-Clients/MythtvPlayerForAndroid/commit/de162e586248dbfe3621f2387ccb2ebad34e71f6",
      "files": [
        {
          "file_name": "app/build.gradle",
          "patch": "@@ -9,8 +9,8 @@ android {\n         applicationId \"org.mythtv.android\"\n         minSdkVersion 14\n         targetSdkVersion 22\n-        versionCode 12\n-        versionName \"1.1.9\"\n+        versionCode 13\n+        versionName \"1.1.10\"\n         archivesBaseName \u003d applicationId + \"-\" + versionName\n     }\n "
        },
        {
          "file_name": "app/src/main/java/org/mythtv/android/player/app/player/RecordingPlayerActivity.java",
          "patch": "@@ -58,11 +58,11 @@ protected void onCreate( Bundle savedInstanceState ) {\n             URL url \u003d new URL( MainApplication.getInstance().getMasterBackendUrl() + mFileUrl.substring( 1 ) );\n             URI uri \u003d new URI( url.getProtocol(), url.getUserInfo(), url.getHost(), url.getPort(), url.getPath(), url.getQuery(), url.getRef() );\n             fileUri \u003d Uri.parse( uri.toString() );\n+            Log.v( TAG, \"onCreate : fileUrl\u003d\" + fileUri.toString() );\n \n-        } catch( MalformedURLException | URISyntaxException e ) {\n-            Log.v( TAG, \"onCreate : error parsing mFileUrl\u003d\" + mFileUrl );\n+        } catch( MalformedURLException | URISyntaxException | NullPointerException e ) {\n+            Log.v( TAG, \"onCreate : error parsing mFileUrl\u003d\" + mFileUrl, e );\n         }\n-        Log.v( TAG, \"onCreate : fileUrl\u003d\" + fileUri.toString() );\n \n         mVideoView \u003d  (VideoView) findViewById( R.id.videoView );\n         mVideoView.setVideoURI(fileUri);"
        },
        {
          "file_name": "app/src/main/java/org/mythtv/android/player/app/player/VideoPlayerActivity.java",
          "patch": "@@ -50,14 +50,14 @@ protected void onCreate( Bundle savedInstanceState ) {\n             URL url \u003d new URL( MainApplication.getInstance().getMasterBackendUrl() + mFileUrl.substring( 1 ) );\n             URI uri \u003d new URI( url.getProtocol(), url.getUserInfo(), url.getHost(), url.getPort(), url.getPath(), url.getQuery(), url.getRef() );\n             fileUri \u003d Uri.parse(uri.toString());\n+            Log.v( TAG, \"onCreate : fileUrl\u003d\" + fileUri.toString() );\n \n-        } catch( MalformedURLException | URISyntaxException e ) {\n+        } catch( MalformedURLException | URISyntaxException | NullPointerException e ) {\n             Log.v( TAG, \"onCreate : error parsing mFileUrl\u003d\" + mFileUrl );\n         }\n-        Log.v( TAG, \"onCreate : fileUrl\u003d\" + fileUri.toString() );\n \n         mVideoView \u003d  (VideoView) findViewById( R.id.videoView );\n-        mVideoView.setVideoURI(fileUri);\n+        mVideoView.setVideoURI( fileUri );\n \n         MediaController mMediaController \u003d new MediaController( this );\n         mMediaController.setAnchorView( mVideoView );"
        },
        {
          "file_name": "app/src/main/java/org/mythtv/android/player/tv/player/RecordingPlayerActivity.java",
          "patch": "@@ -111,13 +111,13 @@ private void startVideoPlayerHls() {\n                 URL url \u003d new URL( MainApplication.getInstance().getMasterBackendUrl() + mFileUrl.substring( 1 ) );\n                 URI uri \u003d new URI( url.getProtocol(), url.getUserInfo(), url.getHost(), url.getPort(), url.getPath(), url.getQuery(), url.getRef() );\n                 fileUri \u003d Uri.parse( uri.toString() );\n+                Log.v(TAG, \"startVideoPlayerHls : fileUrl\u003d\" + fileUri.toString());\n \n-            } catch( MalformedURLException | URISyntaxException e ) {\n-                Log.v( TAG, \"onCreate : error parsing mFileUrl\u003d\" + mFileUrl );\n+            } catch( MalformedURLException | URISyntaxException | NullPointerException e ) {\n+                Log.v( TAG, \"onCreate : error parsing mFileUrl\u003d\" + mFileUrl, e );\n             }\n-            Log.v(TAG, \"startVideoPlayerHls : fileUrl\u003d\" + fileUri.toString());\n \n-            mVideoView.setVideoURI( fileUri );\n+            mVideoView.setVideoURI(fileUri);\n \n             if (mShouldStartPlayback) {\n                 mPlaybackState \u003d PlaybackState.PLAYING;"
        },
        {
          "file_name": "app/src/main/java/org/mythtv/android/player/tv/player/VideoPlayerActivity.java",
          "patch": "@@ -112,11 +112,11 @@ private void startVideoPlayerHls() {\n                 URL url \u003d new URL( MainApplication.getInstance().getMasterBackendUrl() + mFileUrl.substring( 1 ) );\n                 URI uri \u003d new URI( url.getProtocol(), url.getUserInfo(), url.getHost(), url.getPort(), url.getPath(), url.getQuery(), url.getRef() );\n                 fileUri \u003d Uri.parse( uri.toString() );\n+                Log.v( TAG, \"startVideoPlayerHls : fileUrl\u003d\" + fileUri.toString() );\n \n-            } catch( MalformedURLException | URISyntaxException e ) {\n-                Log.v( TAG, \"onCreate : error parsing mFileUrl\u003d\" + mFileUrl );\n+            } catch( MalformedURLException | URISyntaxException | NullPointerException e ) {\n+                Log.v( TAG, \"onCreate : error parsing mFileUrl\u003d\" + mFileUrl, e );\n             }\n-            Log.v(TAG, \"startVideoPlayerHls : fileUrl\u003d\" + fileUri.toString());\n \n             mVideoView.setVideoURI( fileUri );\n "
        }
      ]
    }
  },
  {
    "name": "NPE Manager.java upgradeOldDatabaseFiles.  Occasional Null Pointer.",
    "url": "https://github.com/couchbase/couchbase-lite-java-core/issues/1469",
    "description": "CBL 1.3.1. \nI am getting an NPE from the Manager.java class. It seems to happen when no files to upgrade are found, causing the Files[] array null access.\nI have enclosed a screenshot of the debugging session with arrows drawn to the relevant error.\nI do not know why I didn\u0027t get this error until now, also on empty folders.\nHere is the screenshot:\n![npe_manager java](https://cloud.githubusercontent.com/assets/8798507/19223447/30e543ba-8e3e-11e6-975c-b9c873cef317.png)\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/couchbase/couchbase-lite-java-core/commit/c21309d07e96aed22a9a26f7cc61c782dd32087f",
      "files": [
        {
          "file_name": "src/main/java/com/couchbase/lite/Manager.java",
          "patch": "@@ -783,14 +783,26 @@ private static boolean containsOnlyLegalCharacters(String databaseName) {\n      * @exclude\n      */\n     @InterfaceAudience.Private\n-    private void upgradeOldDatabaseFiles(File directory) {\n+    private void upgradeOldDatabaseFiles(File directory) throws IOException {\n+        if (directory \u003d\u003d null ||\n+                !directory.exists() ||\n+                !directory.isDirectory() ||\n+                !directory.canWrite())\n+            throw new IllegalArgumentException(\"directory argument is invalid.\");\n+\n         File[] files \u003d directory.listFiles(new FilenameFilter() {\n             @Override\n             public boolean accept(File file, String name) {\n                 return name.endsWith(kV1DBExtension);\n             }\n         });\n \n+        // https://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles(java.io.FilenameFilter)\n+        // returns: Returns null if this abstract pathname does not denote a directory, or if an I/O error occurs.\n+        if (files \u003d\u003d null)\n+            throw new IOException(String.format(Locale.ENGLISH,\n+                    \"Error in File.listFiles(): directory\u003d[%s]\", directory.toString()));\n+\n         for (File file : files) {\n             String filename \u003d file.getName();\n             String name \u003d nameOfDatabaseAtPath(filename);"
        }
      ]
    }
  },
  {
    "name": "Fix possible null pointer deref in bulk request creation",
    "url": "https://github.com/lightblue-platform/lightblue-client/pull/302",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/lightblue-platform/lightblue-client/commit/e05cf5f371a9391b104ed19d4136c1f53b53b0bb",
      "files": [
        {
          "file_name": "core/src/main/java/com/redhat/lightblue/client/request/DataBulkRequest.java",
          "patch": "@@ -27,7 +27,9 @@ public JsonNode getBodyJson() {\n                 continue;\n             ObjectNode seqNode \u003d JsonNodeFactory.instance.objectNode();\n             seqNode.set(\"seq\", JsonNodeFactory.instance.numberNode(reqs.size()));\n-            seqNode.set(\"op\", JsonNodeFactory.instance.textNode(req.getOperation().name().toLowerCase()));\n+            if (req.getOperation() !\u003d null) {\n+                seqNode.set(\"op\", JsonNodeFactory.instance.textNode(req.getOperation().name().toLowerCase()));\n+            }\n             ObjectNode request \u003d (ObjectNode) req.getBodyJson();\n             if (request !\u003d null) {\n                 request.set(\"entity\", JsonNodeFactory.instance.textNode(req.getEntityName()));"
        }
      ]
    }
  },
  {
    "name": "Should prevent Null Pointer Exceptions",
    "url": "https://github.com/mafagafogigante/dungeon/pull/378",
    "description": "These were all reported by Coverity scan.\r\n\r\nClosed #377",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/mafagafogigante/dungeon/commit/e4070efd585e77ffae76b3967745ab5d6edc8f95",
      "files": [
        {
          "file_name": "src/main/java/org/mafagafogigante/dungeon/gui/GameWindow.java",
          "patch": "@@ -179,8 +179,11 @@ public void actionPerformed(ActionEvent event) {\n       public void actionPerformed(ActionEvent event) {\n         if (acceptingNextCommand) {\n           int caretPosition \u003d textField.getCaretPosition();\n-          textField.setText(textField.getText().substring(caretPosition));\n-          textField.setCaretPosition(0);\n+          String text \u003d textField.getText();\n+          if (text !\u003d null) {\n+            textField.setText(text.substring(caretPosition));\n+            textField.setCaretPosition(0);\n+          }\n         }\n       }\n     });\n@@ -191,7 +194,10 @@ public void actionPerformed(ActionEvent event) {\n       public void actionPerformed(ActionEvent event) {\n         if (acceptingNextCommand) {\n           int caretPosition \u003d textField.getCaretPosition();\n-          textField.setText(textField.getText().substring(0, caretPosition));\n+          String text \u003d textField.getText();\n+          if (text !\u003d null) {\n+            textField.setText(text.substring(0, caretPosition));\n+          }\n         }\n       }\n     });\n@@ -202,6 +208,9 @@ public void actionPerformed(ActionEvent event) {\n       public void actionPerformed(ActionEvent event) {\n         if (acceptingNextCommand) {\n           String text \u003d textField.getText();\n+          if (text \u003d\u003d null) {\n+            return;\n+          }\n           boolean gotToken \u003d false;\n           int caretPosition \u003d textField.getCaretPosition();\n           for (int i \u003d caretPosition - 1; i \u003e\u003d 0; i--) {"
        },
        {
          "file_name": "src/main/java/org/mafagafogigante/dungeon/schema/rules/EnumJsonRule.java",
          "patch": "@@ -1,6 +1,7 @@\n package org.mafagafogigante.dungeon.schema.rules;\n \n import com.eclipsesource.json.JsonValue;\n+import org.jetbrains.annotations.NotNull;\n \n import java.util.HashSet;\n import java.util.Set;\n@@ -9,8 +10,15 @@\n \n   private final Set\u003cString\u003e enumValues \u003d new HashSet\u003c\u003e();\n \n-  EnumJsonRule(Class\u003cT\u003e enumClass) {\n-    for (Enum\u003cT\u003e enumConstant : enumClass.getEnumConstants()) {\n+  EnumJsonRule(@NotNull Class\u003cT\u003e enumClass) {\n+    if (!enumClass.isEnum()) {\n+      throw new IllegalArgumentException();\n+    }\n+    T[] enumConstants \u003d enumClass.getEnumConstants();\n+    if (enumConstants \u003d\u003d null) {\n+      throw new IllegalArgumentException();\n+    }\n+    for (Enum\u003cT\u003e enumConstant : enumConstants) {\n       enumValues.add(enumConstant.toString());\n     }\n   }"
        }
      ]
    }
  },
  {
    "name": "Null pointer exception",
    "url": "https://github.com/coddo/TeamSubb/issues/29",
    "description": "When performing an action: job find, job accept, job cancel, job push, which requires to write data into files, pause all threads before performing these actions and restart all of them after the action is completed.\n\nWhen starting a thread, also verify if it is paused (not only active) in order to avoid multiple thread starts.\n",
    "keywords": [
      "job"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/coddo/TeamSubb/commit/97d46219debc475e0240afdc3833d6d240149c9a",
      "files": [
        {
          "file_name": "src/com/coddotech/teamsubb/jobs/gui/CreateJobController.java",
          "patch": "@@ -90,15 +90,17 @@ public void widgetDefaultSelected(SelectionEvent arg0) {\n \n \t\t@Override\n \t\tpublic void widgetSelected(SelectionEvent arg0) {\n-\t\t\tbrowseFonts.open();\n+\t\t\tString result \u003d browseFonts.open();\n \n-\t\t\tString[] files \u003d browseFonts.getFileNames();\n+\t\t\tif (result !\u003d null) {\n+\t\t\t\tString[] files \u003d browseFonts.getFileNames();\n \n-\t\t\tfor (int i \u003d 0; i \u003c files.length; i++) {\n-\t\t\t\tfiles[i] \u003d browseFonts.getFilterPath() + File.separator + files[i];\n-\t\t\t}\n+\t\t\t\tfor (int i \u003d 0; i \u003c files.length; i++) {\n+\t\t\t\t\tfiles[i] \u003d browseFonts.getFilterPath() + File.separator + files[i];\n+\t\t\t\t}\n \n-\t\t\tview.appendFonts(files);\n+\t\t\t\tview.appendFonts(files);\n+\t\t\t}\n \n \t\t}\n \n@@ -121,6 +123,9 @@ public void keyPressed(KeyEvent e) {\n \t\t\tif (e.keyCode \u003d\u003d SWT.DEL)\n \t\t\t\tview.deleteSelectedFonts();\n \n+\t\t\tif (((e.stateMask \u0026 SWT.CTRL) \u003d\u003d SWT.CTRL) \u0026\u0026 (e.keyCode \u003d\u003d \u0027a\u0027))\n+\t\t\t\tview.selectEntireFontList();\n+\n \t\t}\n \n \t\t@Override"
        },
        {
          "file_name": "src/com/coddotech/teamsubb/jobs/gui/CreateJobWindow.java",
          "patch": "@@ -213,6 +213,13 @@ else if (!new File(this.sub.getText()).exists()) {\n \t}\n \n \t/**\n+\t * Select all the items of the font list\n+\t */\n+\tpublic void selectEntireFontList() {\n+\t\tthis.fonts.selectAll();\n+\t}\n+\n+\t/**\n \t * Deletes all the fonts that are selected in the list\n \t */\n \tpublic void deleteSelectedFonts() {\n@@ -240,6 +247,7 @@ public void run() {\n \n \t\t\t\t\t\tclose();\n \t\t\t\t\t}\n+\n \t\t\t\t\telse {\n \t\t\t\t\t\tmessage \u003d new MessageBox(getShell(), SWT.ICON_ERROR);\n \t\t\t\t\t\tmessage.setText(\"Error\");"
        },
        {
          "file_name": "src/com/coddotech/teamsubb/jobs/model/JobManager.java",
          "patch": "@@ -239,6 +239,8 @@ public void run() {\n \t\t\t\tif (!CustomWindow.isConnected(true))\n \t\t\t\t\treturn;\n \n+\t\t\t\twaitForThreadsToComplete();\n+\n \t\t\t\tcreateJobRunning \u003d true;\n \n \t\t\t\ttry {\n@@ -249,9 +251,6 @@ public void run() {\n \t\t\t\t\tsetChanged();\n \t\t\t\t\tnotifyObservers(\"create\" + CustomWindow.NOTIFICATION_SEPARATOR + response);\n \n-\t\t\t\t\t// after the job is created, start a new search in order to update the job list\n-\t\t\t\t\tfindJobs();\n-\n \t\t\t\t\tActivityLogger.logActivity(this.getClass().getName(), \"Create job\");\n \n \t\t\t\t}\n@@ -262,6 +261,8 @@ public void run() {\n \t\t\t\tfinally {\n \t\t\t\t\tcreateJobRunning \u003d false;\n \n+\t\t\t\t\tfindJobs();\n+\n \t\t\t\t}\n \t\t\t}\n \t\t}\n@@ -296,6 +297,8 @@ public void run() {\n \t\t\t\tif (!CustomWindow.isConnected(true))\n \t\t\t\t\treturn;\n \n+\t\t\t\twaitForThreadsToComplete();\n+\n \t\t\t\tendJobRunning \u003d true;\n \n \t\t\t\ttry {\n@@ -364,21 +367,7 @@ public void run() {\n \t\t\t\tif (!CustomWindow.isConnected(false))\n \t\t\t\t\treturn;\n \n-\t\t\t\tboolean mayRun \u003d !findJobsRunning \u0026\u0026 !acceptJobRunning \u0026\u0026 !endJobRunning \u0026\u0026 !createJobRunning\n-\t\t\t\t\t\t\u0026\u0026 !cancelJobRunning \u0026\u0026 !pushJobRunning;\n-\n-\t\t\t\t// wait for other threads to complete\n-\t\t\t\twhile (!mayRun) {\n-\t\t\t\t\ttry {\n-\t\t\t\t\t\tThread.sleep(100);\n-\t\t\t\t\t}\n-\t\t\t\t\tcatch (InterruptedException e) {\n-\t\t\t\t\t\t// TODO Auto-generated catch block\n-\t\t\t\t\t\te.printStackTrace();\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\n-\t\t\t\tfindJobsRunning \u003d true;\n+\t\t\t\twaitForThreadsToComplete();\n \n \t\t\t\ttry {\n \n@@ -442,6 +431,8 @@ public void run() {\n \t\t\t\tif (!CustomWindow.isConnected(true))\n \t\t\t\t\treturn;\n \n+\t\t\t\twaitForThreadsToComplete();\n+\n \t\t\t\tacceptJobRunning \u003d true;\n \n \t\t\t\ttry {\n@@ -461,7 +452,6 @@ public void run() {\n \n \t\t\t\t\t\t\t\tjob.setBookedBy(\"Yourself\");\n \n-\t\t\t\t\t\t\t\tfindJobs();\n \t\t\t\t\t\t\t}\n \n \t\t\t\t\t\t}\n@@ -480,6 +470,8 @@ public void run() {\n \t\t\t\t}\n \t\t\t\tfinally {\n \t\t\t\t\tacceptJobRunning \u003d false;\n+\t\t\t\t\t\n+\t\t\t\t\tfindJobs();\n \n \t\t\t\t}\n \t\t\t}\n@@ -509,7 +501,10 @@ public void run() {\n \t\t\t\tif (!CustomWindow.isConnected(true))\n \t\t\t\t\treturn;\n \n+\t\t\t\twaitForThreadsToComplete();\n+\n \t\t\t\tcancelJobRunning \u003d true;\n+\n \t\t\t\ttry {\n \n \t\t\t\t\tboolean response \u003d false;\n@@ -572,6 +567,8 @@ public void run() {\n \t\t\t\tif (!CustomWindow.isConnected(true))\n \t\t\t\t\treturn;\n \n+\t\t\t\twaitForThreadsToComplete();\n+\n \t\t\t\tpushJobRunning \u003d true;\n \n \t\t\t\ttry {\n@@ -586,7 +583,7 @@ public void run() {\n \t\t\t\t\t\t\tjob.setType(type);\n \t\t\t\t\t\t\tjob.setNextStaffMember(nextStaff);\n \t\t\t\t\t\t\tjob.setDescription(comments);\n-\t\t\t\t\t\t\t\n+\n \t\t\t\t\t\t\tif (subFile !\u003d null)\n \t\t\t\t\t\t\t\tjob.setSubFile(subFile);\n \n@@ -771,23 +768,61 @@ private Job createJobEntity(String[] data, String dirPath) {\n \t */\n \tprivate boolean isAccepted(int id) {\n \t\tfor (Job job : acceptedJobs) {\n+\n \t\t\tif (job.getID() \u003d\u003d id)\n \t\t\t\treturn true;\n+\n \t\t}\n \n \t\treturn false;\n \t}\n \n \t/**\n+\t * Wait for all the threads to complete. Times out after 30 seconds\n+\t */\n+\tprivate void waitForThreadsToComplete() {\n+\t\tint loopCounter \u003d 0;\n+\n+\t\tboolean active \u003d findJobsRunning \u0026\u0026 acceptJobRunning \u0026\u0026 endJobRunning \u0026\u0026 createJobRunning\n+\t\t\t\t\u0026\u0026 cancelJobRunning \u0026\u0026 pushJobRunning;\n+\n+\t\twhile (active \u0026\u0026 loopCounter \u003c 600) {\n+\n+\t\t\ttry {\n+\t\t\t\tThread.sleep(50);\n+\t\t\t}\n+\n+\t\t\tcatch (InterruptedException e) {\n+\t\t\t\te.printStackTrace();\n+\n+\t\t\t}\n+\n+\t\t\tloopCounter++;\n+\n+\t\t\tactive \u003d findJobsRunning \u0026\u0026 acceptJobRunning \u0026\u0026 endJobRunning \u0026\u0026 createJobRunning\n+\t\t\t\t\t\u0026\u0026 cancelJobRunning \u0026\u0026 pushJobRunning;\n+\n+\t\t}\n+\n+\t}\n+\n+\t/**\n \t * Clears a list of all the Job entiteis that it contains\n \t * \n \t * @param list\n \t *            The list that needs to be disposed\n \t */\n \tprivate void clearJobList(List\u003cJob\u003e list) {\n+\t\tif (list \u003d\u003d null)\n+\t\t\treturn;\n+\n+\t\tif (list.size() \u003d\u003d 0)\n+\t\t\treturn;\n+\n \t\tfor (Job job : list) {\n \t\t\tjob.dispose(false);\n \t\t}\n+\n \t\tlist.clear();\n \t}\n "
        }
      ]
    }
  },
  {
    "name": "Donation fragment not built yet causing null pointer",
    "url": "https://github.com/kontalk/androidclient/issues/687",
    "description": "Reported on Google Play by a OnePlus One on Android 6.0.\n\n```\njava.lang.RuntimeException: Failure delivering result ResultInfo{who\u003dnull, request\u003d10001, result\u003d-1, data\u003dIntent { (has extras) }} to activity {org.kontalk/org.kontalk.ui.AboutActivity}: java.lang.NullPointerException: Attempt to invoke virtual method \u0027org.kontalk.billing.IBillingService org.kontalk.ui.DonationFragment.getBillingService()\u0027 on a null object reference\n    at android.app.ActivityThread.deliverResults(ActivityThread.java:3733)\n    at android.app.ActivityThread.handleSendResult(ActivityThread.java:3776)\n    at android.app.ActivityThread.-wrap16(ActivityThread.java)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1412)\n    at android.os.Handler.dispatchMessage(Handler.java:102)\n    at android.os.Looper.loop(Looper.java:148)\n    at android.app.ActivityThread.main(ActivityThread.java:5461)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n    at de.robv.android.xposed.XposedBridge.main(XposedBridge.java:117)\nCaused by: java.lang.NullPointerException: Attempt to invoke virtual method \u0027org.kontalk.billing.IBillingService org.kontalk.ui.DonationFragment.getBillingService()\u0027 on a null object reference\n    at org.kontalk.ui.AboutActivity.onActivityResult(AboutActivity.java:98)\n    at android.app.Activity.dispatchActivityResult(Activity.java:6456)\n    at android.app.ActivityThread.deliverResults(ActivityThread.java:3729)\n    ... 10 more\n```\n\nThere is something wrong here because the fragment is not built yet, however the Google Play service for billing uses `Activity.startActivityForResult` so I\u0027ve been forced to use `Activity.onActivityResult` instead of the fragment\u0027s one. Either handle the billing result in the activity or find another way to pass/store the billing service object created by the donation fragment.\n",
    "keywords": [
      "app",
      "os",
      "activity",
      "method",
      "org",
      "android",
      "main",
      "invoke",
      "billing",
      "activitythread",
      "fragment",
      "java",
      "ui",
      "null",
      "android app",
      "lang",
      "kontalk",
      "zygoteinit",
      "object"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/kontalk/androidclient/commit/1df774dba22a5108abad0413539f9b0b75ed1dd3",
      "files": [
        {
          "file_name": "app/src/main/java/org/kontalk/ui/AboutActivity.java",
          "patch": "@@ -28,6 +28,7 @@\n import android.view.MenuItem;\n \n import org.kontalk.R;\n+import org.kontalk.billing.BillingServiceManager;\n import org.kontalk.billing.IBillingService;\n \n \n@@ -50,19 +51,17 @@\n \n     private static final int NUM_ITEMS \u003d 3;\n \n-    private AboutPagerAdapter mAdapter;\n-\n     @Override\n     protected void onCreate(Bundle savedInstanceState) {\n         super.onCreate(savedInstanceState);\n         setContentView(R.layout.about_screen);\n \n         setupToolbar(true);\n \n-        mAdapter \u003d new AboutPagerAdapter(getSupportFragmentManager());\n+        AboutPagerAdapter adapter \u003d new AboutPagerAdapter(getSupportFragmentManager());\n \n         ViewPager pager \u003d (ViewPager) findViewById(R.id.pager);\n-        pager.setAdapter(mAdapter);\n+        pager.setAdapter(adapter);\n \n         TabLayout tabs \u003d (TabLayout) findViewById(R.id.sliding_tabs);\n         tabs.setupWithViewPager(pager);\n@@ -94,18 +93,12 @@ public boolean onOptionsItemSelected(MenuItem item) {\n \n     @Override\n     protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n-        DonationFragment fragment \u003d mAdapter.getDonationFragment();\n-        IBillingService service \u003d fragment.getBillingService();\n-\n+        IBillingService service \u003d BillingServiceManager.getInstance(this);\n         if (service \u003d\u003d null || !service.handleActivityResult(requestCode, resultCode, data))\n             super.onActivityResult(requestCode, resultCode, data);\n     }\n \n     private class AboutPagerAdapter extends FragmentPagerAdapter {\n-\n-        // this is for IabHelper\n-        private DonationFragment mDonationFragment;\n-\n         public AboutPagerAdapter(FragmentManager fm) {\n             super(fm);\n         }\n@@ -122,8 +115,7 @@ public Fragment getItem(int position) {\n                     return new AboutFragment();\n \n                 case ABOUT_DONATION:\n-                    mDonationFragment \u003d new DonationFragment();\n-                    return mDonationFragment;\n+                    return new DonationFragment();\n \n                 case ABOUT_CREDITS:\n                     return new CreditsFragment();\n@@ -150,10 +142,6 @@ public CharSequence getPageTitle(int position) {\n             return super.getPageTitle(position);\n         }\n \n-        public DonationFragment getDonationFragment() {\n-            return mDonationFragment;\n-        }\n-\n     }\n \n }"
        }
      ]
    }
  },
  {
    "name": "Null pointer (race condition - audio view)",
    "url": "https://github.com/kontalk/androidclient/issues/769",
    "description": "```\njava.lang.NullPointerException\n       at org.kontalk.ui.view.AudioContentView.onClick(AudioContentView.java:143)\n       at android.view.View.performClick(View.java:2533)\n       at android.view.View$PerformClick.run(View.java:9320)\n       at android.os.Handler.handleCallback(Handler.java:587)\n       at android.os.Handler.dispatchMessage(Handler.java:92)\n       at android.os.Looper.loop(Looper.java:150)\n       at android.app.ActivityThread.main(ActivityThread.java:4389)\n       at java.lang.reflect.Method.invokeNative(Method.java)\n       at java.lang.reflect.Method.invoke(Method.java:507)\n       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)\n       at dalvik.system.NativeStart.main(NativeStart.java)\n```\n",
    "keywords": [
      "handler",
      "view",
      "java",
      "os",
      "method",
      "android",
      "main",
      "lang",
      "zygoteinit"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/kontalk/androidclient/commit/c9e6e3dd3a13e76bc9c749333ec917437b4ed868",
      "files": [
        {
          "file_name": "app/src/main/java/org/kontalk/ui/view/AudioContentView.java",
          "patch": "@@ -140,7 +140,9 @@ private void setTheme(MessageListItemTheme theme) {\n \n     @Override\n     public void onClick(View v) {\n-        mAudioPlayerControl.buttonClick(new File(mComponent.getLocalUri().getPath()), this, mMessageId);\n+        Uri localUri \u003d mComponent.getLocalUri();\n+        if (localUri !\u003d null)\n+            mAudioPlayerControl.buttonClick(new File(localUri.getPath()), this, mMessageId);\n     }\n \n     @Override"
        }
      ]
    }
  },
  {
    "name": "Null pointer exception on CloudActivity (mReceiver)",
    "url": "https://github.com/KomodoOpenLab/tagin/issues/28",
    "description": "trace...\n\n```\n08-28 11:25:34.136: E/AndroidRuntime(12073): FATAL EXCEPTION: main\n08-28 11:25:34.136: E/AndroidRuntime(12073): java.lang.RuntimeException: Error receiving broadcast Intent { act\u003dca.idrc.tagin.lib.ACTION_URN_READY flg\u003d0x10 (has extras) } in ca.idrc.tagin.cloud.CloudActivity$1@42c4be20\n08-28 11:25:34.136: E/AndroidRuntime(12073):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:773)\n08-28 11:25:34.136: E/AndroidRuntime(12073):    at android.os.Handler.handleCallback(Handler.java:730)\n08-28 11:25:34.136: E/AndroidRuntime(12073):    at android.os.Handler.dispatchMessage(Handler.java:92)\n08-28 11:25:34.136: E/AndroidRuntime(12073):    at android.os.Looper.loop(Looper.java:137)\n08-28 11:25:34.136: E/AndroidRuntime(12073):    at android.app.ActivityThread.main(ActivityThread.java:5103)\n08-28 11:25:34.136: E/AndroidRuntime(12073):    at java.lang.reflect.Method.invokeNative(Native Method)\n08-28 11:25:34.136: E/AndroidRuntime(12073):    at java.lang.reflect.Method.invoke(Method.java:525)\n08-28 11:25:34.136: E/AndroidRuntime(12073):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:737)\n08-28 11:25:34.136: E/AndroidRuntime(12073):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)\n08-28 11:25:34.136: E/AndroidRuntime(12073):    at dalvik.system.NativeStart.main(Native Method)\n08-28 11:25:34.136: E/AndroidRuntime(12073): Caused by: java.lang.NullPointerException\n08-28 11:25:34.136: E/AndroidRuntime(12073):    at ca.idrc.tagin.cloud.CloudActivity$1.onReceive(CloudActivity.java:178)\n08-28 11:25:34.136: E/AndroidRuntime(12073):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:763)\n08-28 11:25:34.136: E/AndroidRuntime(12073):    ... 9 more\n```\n",
    "keywords": [
      "app",
      "12073 ",
      "handler",
      "12073",
      "11:25:34",
      "os",
      "method",
      "android",
      "run",
      "main",
      "e/androidruntime",
      "java lang",
      "tagin",
      "11:25:34 136",
      "08-28 11:25:34",
      "java",
      "136",
      "08-28",
      "136: e/androidruntime",
      "lang",
      "idrc",
      "e/androidruntime 12073",
      "zygoteinit"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/KomodoOpenLab/tagin/commit/4b968ea7212335279a70ddb003a43c79884d2610",
      "files": [
        {
          "file_name": "experimental/apps/tagin-cloud/src/ca/idrc/tagin/cloud/CloudActivity.java",
          "patch": "@@ -174,8 +174,8 @@ private TagMap loadData() {\n \t\t@Override\n \t\tpublic void onReceive(Context context, Intent intent) {\n \t\t\tif (intent.getAction().equals(TaginService.ACTION_URN_READY)) {\n-\t\t\t\tif (intent.hasExtra(TaginService.EXTRA_QUERY_RESULT)) {\n-\t\t\t\t\tString urn \u003d intent.getStringExtra(TaginService.EXTRA_QUERY_RESULT);\n+\t\t\t\tString urn \u003d intent.getStringExtra(TaginService.EXTRA_QUERY_RESULT);\n+\t\t\t\tif (urn !\u003d null) {\n \t\t\t\t\tmTagAdderDialog.getURNTextView().setText(urn);\n \t\t\t\t\tGetLabelsTask\u003cCloudActivity\u003e task \u003d new GetLabelsTask\u003cCloudActivity\u003e(mInstance, urn);\n \t\t\t\t\ttask.execute();"
        }
      ]
    }
  },
  {
    "name": "Null pointer exception in Ether.java",
    "url": "https://github.com/jrupac/etherview/issues/3",
    "description": "Just realized what is causing the NPE. It\u0027s because currently our \"jam packet\" is just null. We should actually create one instead.\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/jrupac/etherview/commit/ac1627442fcc562a1b5295004874b797c16bc79c",
      "files": [
        {
          "file_name": "src/Cell.java",
          "patch": "@@ -38,12 +38,7 @@ public Packet getPacket() {\n     }\n \n     public Iterable\u003cPacket\u003e getPackets() {\n-//        return packetsInCell;\n-        return new HashSet\u003cPacket\u003e(packetsInCell);\n-    }\n-\n-    public Iterator\u003cPacket\u003e getPacketIterator() {\n-        return packetsInCell.iterator();\n+        return packetsInCell;\n     }\n \n     public void addPacket(Packet packet) {"
        },
        {
          "file_name": "src/Ether.java",
          "patch": "@@ -1,12 +1,19 @@\n+import java.awt.*;\n import java.util.*;\n \n /**\n  * A class to represent the ether, i.e., the cable\n  * that hosts on the network are connected to.\n  */\n public class Ether implements Drawable {\n-    // TODO: Implement this. Make the color something like black.\n-    public static Packet JAM_PACKET \u003d null;\n+\n+    // Used to make all jam packets have the same color\n+    private static final Host JAM_HOST \u003d new Host(\"JAM\", 0, 0, 0, Color.BLACK, null);\n+    public static final Packet JAM_PACKET \u003d new Packet(1, JAM_HOST);\n+\n+    static {\n+        JAM_PACKET.setSource(JAM_HOST);\n+    }\n \n     private static enum Direction {\n         LEFT,\n@@ -69,14 +76,7 @@ public void draw() {\n         }\n \n         for (int i \u003d 0; i \u003c ether.length; i++) {\n-//            for (Iterator\u003cPacket\u003e it \u003d ether[i].getPacketIterator(); it.hasNext(); ) {\n-//                Packet packet \u003d it.next();\n             for (Packet packet : ether[i].getPackets()) {\n-                // TODO: shouldn\u0027t have this case\n-                if (packet \u003d\u003d null) {\n-                    System.out.println(\"hi\");\n-                    continue;\n-                }\n                 if (directions.get(packet) \u003d\u003d Direction.BOTH) {\n                     Packet leftPacket \u003d new Packet(packet);\n                     directions.put(packet, Direction.RIGHT);\n@@ -91,8 +91,6 @@ public void draw() {\n                 } else {\n                     throw new RuntimeException(\"Packet did not have associated direction.\");\n                 }\n-//                ether[i].removePacket(packet);\n-//                it.remove();\n             }\n         }\n "
        }
      ]
    }
  },
  {
    "name": "Laundry adapter null-pointer",
    "url": "https://github.com/pennlabs/penn-mobile-android/issues/345",
    "description": "`Fatal Exception: java.lang.NullPointerException: Attempt to invoke virtual method \u0027android.content.Context android.view.ViewGroup.getContext()\u0027 on a null object reference\n       at android.support.design.widget.Snackbar.\u003cinit\u003e(Snackbar.java:180)\n       at android.support.design.widget.Snackbar.make(Snackbar.java:209)\n       at com.pennapps.labs.pennmobile.adapters.LaundryMachineAdapter$1.onCheckedChanged(LaundryMachineAdapter.java:158)\n       at android.widget.CompoundButton.setChecked(CompoundButton.java:156)\n       at android.widget.Switch.setChecked(Switch.java:1073)\n       at com.pennapps.labs.pennmobile.adapters.LaundryMachineAdapter.setSwitchState(LaundryMachineAdapter.java:124)\n       at com.pennapps.labs.pennmobile.adapters.LaundryMachineAdapter.getView(LaundryMachineAdapter.java:109)\n       at android.widget.AbsListView.obtainView(AbsListView.java:2346)\n       at android.widget.ListView.makeAndAddView(ListView.java:1875)`\n\nThink this happens as the user tries to go to another page too quickly, rendering the objects on screen to be null.\n",
    "keywords": [
      "com",
      "labs pennmobile",
      "widget",
      "laundrymachineadapter",
      "adapters",
      "labs",
      "android",
      "snackbar",
      "pennmobile",
      "pennapps",
      "com pennapps"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/pennlabs/penn-mobile-android/commit/d06b84635fbd823b505dccdd10027cf02fa051ba",
      "files": [
        {
          "file_name": "PennMobile/src/main/java/com/pennapps/labs/pennmobile/MainActivity.java",
          "patch": "@@ -349,15 +349,19 @@ private void getPermission(int code) {\n     private void fragmentTransact(Fragment fragment) {\n         if (fragment !\u003d null) {\n             final Fragment frag \u003d fragment;\n-            new Handler().post(new Runnable() {\n+            runOnUiThread(new Runnable() {\n                 @Override\n                 public void run() {\n-                    FragmentManager fragmentManager \u003d getSupportFragmentManager();\n-                    fragmentManager.beginTransaction()\n-                            .replace(R.id.content_frame, frag)\n-                            .addToBackStack(null)\n-                            .setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN)\n-                            .commit();\n+                    try {\n+                        FragmentManager fragmentManager \u003d getSupportFragmentManager();\n+                        fragmentManager.beginTransaction()\n+                                .replace(R.id.content_frame, frag)\n+                                .addToBackStack(null)\n+                                .setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN)\n+                                .commit();\n+                    } catch (IllegalStateException e) {\n+                        //ignore because the onSaveInstanceState etc states are called when activity is going to background etc\n+                    }\n                 }\n             });\n         }"
        },
        {
          "file_name": "PennMobile/src/main/java/com/pennapps/labs/pennmobile/adapters/LaundryMachineAdapter.java",
          "patch": "@@ -158,6 +158,9 @@ public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\n                     stringBuilder.append(activity.getString(R.string.laundry_notification_snackbar_off))\n                             .append(\" \").append(machine.machine_type).append(\" \")\n                             .append(machine.number);\n+                    if (buttonView.getContext() \u003d\u003d null) {\n+                        return;\n+                    }\n                     Snackbar snackbar \u003d Snackbar.make(buttonView,stringBuilder, Snackbar.LENGTH_SHORT);\n                     View subView \u003d snackbar.getView();\n                     TextView snackTextView \u003d (TextView) subView.findViewById(android.support.design.R.id.snackbar_text);"
        }
      ]
    }
  },
  {
    "name": "Null Pointer Exception at GUIInventoryGuildRankSettings.java:123",
    "url": "https://github.com/MarcinWieczorek/NovaGuilds/issues/65",
    "description": "```\n\n[NovaGuilds] Severe error: EventException\n\nServer Information:\n  NovaGuilds: #36 (7901460)\n  Storage Type: MYSQL\n  Bukkit: 1.9-R0.1-SNAPSHOT\n  Java: 1.7.0_99\n  Thread: Thread[Server thread,5,main]\n  Running CraftBukkit: false\n  Exception Message: \n   null\n\nStack trace: \n    at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:310)\n    at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:62)\n    at co.marcin.novaguilds.impl.util.logging.LoggedPluginManager$2.callEvent(LoggedPluginManager.java:106)\n    at org.bukkit.plugin.SimplePluginManager.fireEvent(SimplePluginManager.java:502)\n    at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:487)\n    at net.minecraft.server.v1_9_R1.PlayerConnection.a(PlayerConnection.java:1852)\n    at net.minecraft.server.v1_9_R1.PacketPlayInWindowClick.a(SourceFile:33)\n    at net.minecraft.server.v1_9_R1.PacketPlayInWindowClick.a(SourceFile:10)\n    at net.minecraft.server.v1_9_R1.PlayerConnectionUtils$1.run(SourceFile:13)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:262)\n    at net.minecraft.server.v1_9_R1.SystemUtils.a(SourceFile:45)\n    at net.minecraft.server.v1_9_R1.MinecraftServer.D(MinecraftServer.java:721)\n    at net.minecraft.server.v1_9_R1.DedicatedServer.D(DedicatedServer.java:400)\n    at net.minecraft.server.v1_9_R1.MinecraftServer.C(MinecraftServer.java:660)\n    at net.minecraft.server.v1_9_R1.MinecraftServer.run(MinecraftServer.java:559)\n    at java.lang.Thread.run(Thread.java:745)\n\nCaused by: java.lang.NullPointerException\n  null\n    at co.marcin.novaguilds.impl.util.guiinventory.guild.rank.GUIInventoryGuildRankSettings.generateContent(GUIInventoryGuildRankSettings.java:123)\n    at co.marcin.novaguilds.util.ChestGUIUtils.openGUIInventory(ChestGUIUtils.java:50)\n    at co.marcin.novaguilds.impl.util.AbstractGUIInventory.open(AbstractGUIInventory.java:62)\n    at co.marcin.novaguilds.impl.util.guiinventory.guild.rank.GUIInventoryGuildRankList.onClick(GUIInventoryGuildRankList.java:108)\n    at co.marcin.novaguilds.listener.ChestGUIListener.onInventoryClick(ChestGUIListener.java:57)\n    at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)\n    at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:306)\n    at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:62)\n    at co.marcin.novaguilds.impl.util.logging.LoggedPluginManager$2.callEvent(LoggedPluginManager.java:106)\n    at org.bukkit.plugin.SimplePluginManager.fireEvent(SimplePluginManager.java:502)\n    at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:487)\n    at net.minecraft.server.v1_9_R1.PlayerConnection.a(PlayerConnection.java:1852)\n    at net.minecraft.server.v1_9_R1.PacketPlayInWindowClick.a(SourceFile:33)\n    at net.minecraft.server.v1_9_R1.PacketPlayInWindowClick.a(SourceFile:10)\n    at net.minecraft.server.v1_9_R1.PlayerConnectionUtils$1.run(SourceFile:13)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:262)\n    at net.minecraft.server.v1_9_R1.SystemUtils.a(SourceFile:45)\n    at net.minecraft.server.v1_9_R1.MinecraftServer.D(MinecraftServer.java:721)\n    at net.minecraft.server.v1_9_R1.DedicatedServer.D(DedicatedServer.java:400)\n    at net.minecraft.server.v1_9_R1.MinecraftServer.C(MinecraftServer.java:660)\n    at net.minecraft.server.v1_9_R1.MinecraftServer.run(MinecraftServer.java:559)\n    at java.lang.Thread.run(Thread.java:745)\n\nEnd of Error.\n\n```\n",
    "keywords": [
      "minecraft",
      "server",
      "bukkit",
      "callevent",
      "java util",
      "concurrent",
      "invoke",
      "net minecraft",
      "run",
      "futuretask",
      "impl",
      "java:62",
      "reflect",
      "java",
      "minecraftserver",
      "minecraft server",
      "v1_9_r1",
      "lang",
      "net",
      "simplepluginmanager",
      "marcin novaguilds",
      "dedicatedserver",
      "d",
      "org",
      "marcin",
      "server v1_9_r1",
      "thread",
      "novaguilds",
      "co",
      "guiinventoryguildranksettings",
      "java lang",
      "packetplayinwindowclick",
      "impl util",
      "co marcin",
      "null",
      "plugin",
      "playerconnection",
      "util",
      "registeredlistener",
      "bukkit plugin"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/MarcinWieczorek/NovaGuilds/commit/16a9ff6d1c7a57a253568b9d6f14777ce2129db8",
      "files": [
        {
          "file_name": "src/main/java/co/marcin/novaguilds/impl/util/guiinventory/guild/rank/GUIInventoryGuildRankSettings.java",
          "patch": "@@ -75,6 +75,12 @@ else if(clickedItemStack.equals(setDefaultItem)) {\n \t\t\t}\n \n \t\t\tclonedRank.setDefault(true);\n+\n+\t\t\tif(rank.isGeneric()) {\n+\t\t\t\tclose();\n+\t\t\t\tnew GUIInventoryGuildRankSettings(clonedRank).open(getViewer());\n+\t\t\t}\n+\n \t\t\tgenerateContent();\n \t\t}\n \t\telse if(clickedItemStack.equals(cloneItem)) {\n@@ -146,7 +152,19 @@ public void generateContent() {\n \t * @return the guild\n \t */\n \tpublic NovaGuild getGuild() {\n-\t\treturn rank.getGuild();\n+\t\tif(rank.isGeneric()) {\n+\t\t\tGUIInventory previousGui \u003d getViewer().getGuiInventoryHistory().get(getViewer().getGuiInventoryHistory().size() - 2);\n+\n+\t\t\tif(previousGui instanceof GUIInventoryGuildRankList) {\n+\t\t\t\treturn ((GUIInventoryGuildRankList) previousGui).getGuild();\n+\t\t\t}\n+\t\t\telse {\n+\t\t\t\treturn getViewer().getGuild();\n+\t\t\t}\n+\t\t}\n+\t\telse {\n+\t\t\treturn rank.getGuild();\n+\t\t}\n \t}\n \n \t/**\n@@ -168,15 +186,7 @@ private NovaRank cloneRank() {\n \n \t\tNovaRank clone \u003d new NovaRankImpl(cloneName);\n \t\tclone.setClone(rank.isGeneric());\n-\t\tNovaGuild guild;\n-\n-\t\tif(rank.isGeneric()) {\n-\t\t\tGUIInventory previousGui \u003d getViewer().getGuiInventoryHistory().get(getViewer().getGuiInventoryHistory().size() - 2);\n-\t\t\tguild \u003d ((GUIInventoryGuildRankList) previousGui).getGuild();\n-\t\t}\n-\t\telse {\n-\t\t\tguild \u003d rank.getGuild();\n-\t\t}\n+\t\tNovaGuild guild \u003d getGuild();\n \n \t\tboolean doubleName;\n \t\tint i \u003d 1;\n@@ -200,6 +210,7 @@ private NovaRank cloneRank() {\n \t\t} while(doubleName);\n \n \t\tclone.setPermissions(rank.getPermissions());\n+\t\tclone.setGuild(guild);\n \t\tguild.addRank(clone);\n \t\treturn clone;\n \t}"
        },
        {
          "file_name": "src/main/java/co/marcin/novaguilds/impl/util/guiinventory/guild/settings/GUIInventoryGuildSettings.java",
          "patch": "@@ -24,6 +24,7 @@\n import co.marcin.novaguilds.enums.VarKey;\n import co.marcin.novaguilds.impl.util.AbstractGUIInventory;\n import co.marcin.novaguilds.impl.util.signgui.SignGUIPatternImpl;\n+import co.marcin.novaguilds.util.ChestGUIUtils;\n import org.bukkit.entity.Player;\n import org.bukkit.event.inventory.InventoryClickEvent;\n import org.bukkit.inventory.ItemStack;\n@@ -132,5 +133,7 @@ public void generateContent() {\n \t\tif(getViewer().hasPermission(GuildPermission.INVITE)) {\n \t\t\tadd(inviteItem);\n \t\t}\n+\n+\t\tChestGUIUtils.addBackItem(this);\n \t}\n }"
        }
      ]
    }
  },
  {
    "name": "Clicking cancel on join workspace results in null pointer exception",
    "url": "https://github.com/Floobits/floobits-intellij/issues/19",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/Floobits/floobits-intellij/commit/753c5b8faa57e161b8038cda24971d42dbd807ed",
      "files": [
        {
          "file_name": "src/floobits/JoinWorkspace.java",
          "patch": "@@ -31,6 +31,9 @@ public boolean checkInput(String inputString) {\n \n     public void actionPerformed(AnActionEvent e) {\n         String inputValue \u003d JOptionPane.showInputDialog(\"Workspace URL\", \"https://floobits.com/\");\n+        if (inputValue \u003d\u003d null) {\n+            return;\n+        }\n         Flog.info(inputValue);\n         FloobitsPlugin.joinWorkspace(inputValue);\n     }"
        }
      ]
    }
  },
  {
    "name": "Null pointer exception when using \u0027rebuild open MRs\u0027 and GitLab 7.14",
    "url": "https://github.com/jenkinsci/gitlab-plugin/issues/358",
    "description": "- **Gitlab plugin version**: HEAD of master (ref 165d01e07b436adf37ac6a07330a3e7c3752981b)\n- **Gitlab version**: 7.14.3\n- **Jenkins version**: 1.651.1\n\nWhile trying to reproduce a bug someone else reported about rebuilding open MRs, I found this issue. I have a job configured with \u0027Rebuild open Merge Requests on push to source or target branch.\u0027 But when I push a change to the target branch, I only see one build (that\u0027s the bug that was reported). When I went to look at the logs, I found this NPE:\n\n\u003cpre\u003e\njava.lang.reflect.InvocationTargetException\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)\n    at org.kohsuke.stapler.Function$InstanceFunction.invoke(Function.java:320)\n    at org.kohsuke.stapler.Function.bindAndInvoke(Function.java:163)\n    at org.kohsuke.stapler.MetaClass$11.dispatch(MetaClass.java:378)\n    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:746)\n    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:876)\n    at org.kohsuke.stapler.MetaClass$11.dispatch(MetaClass.java:380)\n    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:746)\n    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:876)\n    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:649)\n    at org.kohsuke.stapler.Stapler.service(Stapler.java:238)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)\n    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:686)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1494)\n    at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:135)\n    at com.cloudbees.jenkins.support.slowrequest.SlowRequestFilter.doFilter(SlowRequestFilter.java:37)\n    at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:132)\n    at hudson.plugins.greenballs.GreenBallFilter.doFilter(GreenBallFilter.java:58)\n    at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:132)\n    at jenkins.metrics.impl.MetricsFilter.doFilter(MetricsFilter.java:117)\n    at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:132)\n    at hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:126)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1482)\n    at hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:49)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1482)\n    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)\n    at hudson.security.UnwrapSecurityExceptionFilter.doFilter(UnwrapSecurityExceptionFilter.java:51)\n    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n    at jenkins.security.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:117)\n    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n    at org.acegisecurity.providers.anonymous.AnonymousProcessingFilter.doFilter(AnonymousProcessingFilter.java:125)\n    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n    at org.acegisecurity.ui.rememberme.RememberMeProcessingFilter.doFilter(RememberMeProcessingFilter.java:135)\n    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n    at org.acegisecurity.ui.AbstractProcessingFilter.doFilter(AbstractProcessingFilter.java:271)\n    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n    at jenkins.security.BasicHeaderProcessor.doFilter(BasicHeaderProcessor.java:93)\n    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n    at org.acegisecurity.context.HttpSessionContextIntegrationFilter.doFilter(HttpSessionContextIntegrationFilter.java:249)\n    at hudson.security.HttpSessionContextIntegrationFilter2.doFilter(HttpSessionContextIntegrationFilter2.java:67)\n    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n    at hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)\n    at hudson.security.HudsonFilter.doFilter(HudsonFilter.java:171)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1482)\n    at org.kohsuke.stapler.compression.CompressionFilter.doFilter(CompressionFilter.java:49)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1482)\n    at hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1482)\n    at org.kohsuke.stapler.DiagnosticThreadNameFilter.doFilter(DiagnosticThreadNameFilter.java:30)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1474)\n    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:499)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)\n    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:533)\n    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)\n    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1086)\n    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:428)\n    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)\n    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1020)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)\n    at org.eclipse.jetty.server.Server.handle(Server.java:370)\n    at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:489)\n    at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:960)\n    at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:1021)\n    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:865)\n    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)\n    at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)\n    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:668)\n    at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52)\n    at winstone.BoundedExecutorService$1.run(BoundedExecutorService.java:77)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.lang.NullPointerException\n    at com.dabsquared.gitlabjenkins.trigger.handler.push.OpenMergeRequestPushHookTriggerHandler.getOpenMergeRequests(OpenMergeRequestPushHookTriggerHandler.java:68)\n    at com.dabsquared.gitlabjenkins.trigger.handler.push.OpenMergeRequestPushHookTriggerHandler.handle(OpenMergeRequestPushHookTriggerHandler.java:49)\n    at com.dabsquared.gitlabjenkins.trigger.handler.push.OpenMergeRequestPushHookTriggerHandler.handle(OpenMergeRequestPushHookTriggerHandler.java:35)\n    at com.dabsquared.gitlabjenkins.trigger.handler.push.PushHookTriggerHandlerList.handle(PushHookTriggerHandlerList.java:23)\n    at com.dabsquared.gitlabjenkins.trigger.handler.push.PushHookTriggerHandlerList.handle(PushHookTriggerHandlerList.java:12)\n    at com.dabsquared.gitlabjenkins.GitLabPushTrigger.onPost(GitLabPushTrigger.java:183)\n    at com.dabsquared.gitlabjenkins.webhook.build.PushBuildAction$1.run(PushBuildAction.java:65)\n    at hudson.security.ACL.impersonate(ACL.java:198)\n    at com.dabsquared.gitlabjenkins.webhook.build.PushBuildAction.execute(PushBuildAction.java:61)\n    at com.dabsquared.gitlabjenkins.webhook.build.BuildWebHookAction.execute(BuildWebHookAction.java:15)\n    at com.dabsquared.gitlabjenkins.webhook.GitLabWebHook.getDynamic(GitLabWebHook.java:44)\n    ... 76 more\n\u003c/pre\u003e\n\n\nIn the plugin code, we do `String nextPage \u003d response.getHeaderString(\"X-Next-Page\");`  I suspect that, in GitLab 7.14, X-Next-Page is not sent. I commented this out (since my test case only had two MRs so I didn\u0027t need to worry about paging) and the NPE went away.\n",
    "keywords": [
      "com",
      "handler",
      "jetty servlet",
      "webhook",
      "servlet",
      "selectchannelendpoint",
      "run",
      "invoke",
      "chainedservletfilter",
      "jetty server",
      "chainedservletfilter java:87",
      "dofilter",
      "reflect",
      "java",
      "function",
      "hudson util",
      "gitlabjenkins",
      "abstracthttpconnection",
      "stapler stapler",
      "scopedhandler",
      "java:1482",
      "14",
      "stapler",
      "method",
      "org kohsuke",
      "servlethandler$cachedchain",
      "acegisecurity",
      "handle",
      "hudson",
      "trigger handler",
      "push",
      "chainedservletfilter$1",
      "eclipse",
      "invoke stapler",
      "util",
      "7 14",
      "7",
      "dohandle",
      "security chainedservletfilter$1",
      "dabsquared gitlabjenkins",
      "http",
      "version**",
      "servlet servlethandler$cachedchain",
      "java:135",
      "java:132",
      "com dabsquared",
      "threadpoolexecutor",
      "sessionhandler",
      "server",
      "pluginservletfilter",
      "eclipse jetty",
      "org acegisecurity",
      "sun",
      "servlethandler",
      "hudson security",
      "java:87",
      "security",
      "kohsuke",
      "pluginservletfilter$1",
      "pushhooktriggerhandlerlist",
      "contexthandler",
      "openmergerequestpushhooktriggerhandler",
      "jenkins",
      "dofilter servlethandler",
      "java:49",
      "jetty",
      "lang",
      "httpparser",
      "pushbuildaction",
      "org",
      "dofilter chainedservletfilter",
      "trigger",
      "nativemethodaccessorimpl",
      "dabsquared",
      "build",
      "doscope",
      "chainedservletfilter$1 dofilter",
      "open",
      "org eclipse"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/jenkinsci/gitlab-plugin/commit/5435cfcee9a1a75aeea70e10c4809861d6eee93e",
      "files": [
        {
          "file_name": "src/main/java/com/dabsquared/gitlabjenkins/trigger/handler/push/OpenMergeRequestPushHookTriggerHandler.java",
          "patch": "@@ -58,14 +58,14 @@ public void handle(Job\u003c?, ?\u003e job, PushHook hook, boolean ciSkip, BranchFilter br\n \n     private List\u003cMergeRequest\u003e getOpenMergeRequests(GitLabApi client, String projectId) {\n         List\u003cMergeRequest\u003e result \u003d new ArrayList\u003c\u003e();\n-        Integer page \u003d 0;\n+        Integer page \u003d 1;\n         do {\n             Response response \u003d null;\n             try {\n                 response \u003d client.getMergeRequests(projectId, State.opened, page, 100);\n-                result.addAll(response.readEntity(new GenericType\u003cList\u003cMergeRequest\u003e\u003e() {}));\n-                String nextPage \u003d response.getHeaderString(\"X-Next-Page\");\n-                page \u003d nextPage.isEmpty() ? null : Integer.valueOf(nextPage);\n+                List\u003cMergeRequest\u003e mergeRequests \u003d response.readEntity(new GenericType\u003cList\u003cMergeRequest\u003e\u003e() {});\n+                result.addAll(mergeRequests);\n+                page \u003d mergeRequests.isEmpty() ? null : page + 1;\n             } finally {\n                 if (response !\u003d null) {\n                     response.close();"
        }
      ]
    }
  },
  {
    "name": "Null Pointer on empty file",
    "url": "https://github.com/ProjectMoon/eve2/issues/24",
    "description": "ASTParser blows up if an empty file is passed:\n\n```\nException in thread \"main\" java.lang.NullPointerException\n    at org.antlr.runtime.tree.BaseTreeAdaptor.isNil(BaseTreeAdaptor.java:70)\n    at org.antlr.runtime.tree.TreeVisitor.visit(TreeVisitor.java:54)\n    at org.antlr.runtime.tree.TreeFilter.downup(TreeFilter.java:115)\n    at eve.core.EveCore.run(Unknown Source)\n    at eve.core.EveCore.main(Unknown Source)\n```\n",
    "keywords": [
      "org",
      "antlr",
      "tree",
      "runtime"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/ProjectMoon/eve2/commit/d5b8d8c36702e3d5cac5431477ec82731d74e0a3",
      "files": [
        {
          "file_name": "src/eve/core/EveCore.java",
          "patch": "@@ -126,6 +126,12 @@ public Script getScript(String file) throws RecognitionException, IOException {\n \t\tif (parser.hasErrors()) {\n \t\t\thandleErrors(parser.getErrors());\n \t\t}\n+\t\t\n+\t\t//If the file is empty, the tree will be null.\n+\t\t//Thus, we have an empty script.\n+\t\tif (main.tree \u003d\u003d null) {\n+\t\t\treturn new Script();\n+\t\t}\n \t\t\t\n \t\t//global is root construction scope.\n \t\tScript script \u003d new Script();"
        }
      ]
    }
  },
  {
    "name": "null pointer exception when running on hibernate-orm",
    "url": "https://github.com/schadr/java-dependency-extractor/issues/22",
    "description": "469669f121671a9f733d426fbbeddd4016f769ef\nf8c4d0252e277938343ac18aca597df18a631d02\njava.lang.NullPointerException\n        at java.util.regex.Pattern.\u003cinit\u003e(Pattern.java:1132)\n        at java.util.regex.Pattern.compile(Pattern.java:823)\n        at java.lang.String.replaceFirst(String.java:2146)\n        at as.jcge.scm.git.GitController.getAffectedFiles(GitController.java:84)\n        at as.jcge.scm.SCMIterator.next(SCMIterator.java:48)\n        at as.jcge.main.Main.main(Main.java:28)\n50da726269a5cd9b722cb44a6f40f0a5ca1e0e91\n6143e94e84f976a46e0805169383162e4c1cc6be\ndd2e0188d494b4e7d4d25a95b42787c5cf67d3f0\n0f42598a04447d15e6e1d1f32d6a2e1011e452da\njava.lang.NullPointerException\n        at java.util.regex.Pattern.\u003cinit\u003e(Pattern.java:1132)\n        at java.util.regex.Pattern.compile(Pattern.java:823)\n        at java.lang.String.replaceFirst(String.java:2146)\n        at as.jcge.scm.git.GitController.getAffectedFiles(GitController.java:84)\n        at as.jcge.scm.SCMIterator.next(SCMIterator.java:48)\n        at as.jcge.main.Main.main(Main.java:28)\n143a2402d5aebbcadc42e118903ce2a3d6fef0c3\n1f8720df0a206d5815dfa90db21ba547eee3a908\n5a055acb2b8c277aa2bed9ac4179884f74f60672\n",
    "keywords": [
      "regex",
      "java",
      "string",
      "util",
      "jcge",
      "pattern",
      "scmiterator",
      "main",
      "lang",
      "scm",
      "gitcontroller",
      "main main"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/schadr/java-dependency-extractor/commit/eab8ede47257879862ca24c480c716a5d7dc61f1",
      "files": [
        {
          "file_name": ".classpath",
          "patch": "@@ -1,6 +1,7 @@\n \u003c?xml version\u003d\"1.0\" encoding\u003d\"UTF-8\"?\u003e\n \u003cclasspath\u003e\n \t\u003cclasspathentry kind\u003d\"src\" path\u003d\"src\"/\u003e\n+\t\u003cclasspathentry kind\u003d\"src\" path\u003d\"test\"/\u003e\n \t\u003cclasspathentry kind\u003d\"con\" path\u003d\"org.eclipse.jdt.launching.JRE_CONTAINER\"/\u003e\n \t\u003cclasspathentry kind\u003d\"lib\" path\u003d\"libs/org.eclipse.osgi_3.6.1.R36x_v20100806.jar\"/\u003e\n \t\u003cclasspathentry kind\u003d\"lib\" path\u003d\"libs/org.eclipse.jdt.core_3.6.1.v_A68_R36x.jar\"/\u003e\n@@ -10,5 +11,6 @@\n \t\u003cclasspathentry kind\u003d\"lib\" path\u003d\"libs/org.eclipse.core.resources_3.6.0.R36x_v20100825-0600.jar\"/\u003e\n \t\u003cclasspathentry kind\u003d\"lib\" path\u003d\"libs/org.eclipse.core.jobs_3.5.1.R36x_v20100824.jar\"/\u003e\n \t\u003cclasspathentry kind\u003d\"lib\" path\u003d\"libs/org.eclipse.core.contenttype_3.4.100.v20100505-1235.jar\"/\u003e\n+\t\u003cclasspathentry kind\u003d\"con\" path\u003d\"org.eclipse.jdt.junit.JUNIT_CONTAINER/4\"/\u003e\n \t\u003cclasspathentry kind\u003d\"output\" path\u003d\"bin\"/\u003e\n \u003c/classpath\u003e"
        },
        {
          "file_name": "src/as/jcge/scm/SCMIterator.java",
          "patch": "@@ -37,6 +37,8 @@ synchronized public CallGraph next() {\n \t\tfCurrentCommit++;\n \t\tString commitID \u003d fCommits.get(fCurrentCommit);\n \t\t\n+\t\tSystem.err.println(commitID);\n+\t\t\n \t\t// checkout next revision\n \t\tfGit.reset(commitID);\n \t\t"
        },
        {
          "file_name": "src/as/jcge/scm/git/GitController.java",
          "patch": "@@ -70,9 +70,13 @@ public void reset(String commitID) {\n \t\tString output \u003d fSpawner.spawnProcess(new String[] {\"git\", \"diff\", \"--name-status\", beforeCommitId, afterCommitId});\n \t\t\n \t\tHashMap\u003cString, List\u003cString\u003e\u003e affectedFiles \u003d new HashMap\u003cString, List\u003cString\u003e\u003e();\n+\t\t\t\n \t\taffectedFiles.put(ADD, new ArrayList\u003cString\u003e());\n \t\taffectedFiles.put(DELETE, new ArrayList\u003cString\u003e());\n \t\taffectedFiles.put(MODIFY, new ArrayList\u003cString\u003e());\n+\n+\t\tif (output.length() \u003d\u003d 0)\n+\t\t\treturn affectedFiles;\n \t\t\n \t\tString[] lines \u003d output.split(System.getProperty(\"line.separator\"));\n \t\tString type \u003d null;"
        },
        {
          "file_name": "test/as/jcge/bugs/npe/HibernateNPE22.java",
          "patch": "@@ -0,0 +1,83 @@\n+/**\n+ * This test case is \n+ */\n+package as.jcge.bugs.npe;\n+\n+import static org.junit.Assert.fail;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import org.junit.After;\n+import org.junit.AfterClass;\n+import org.junit.Before;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+\n+import as.jcge.scm.SCMIterator;\n+import as.jcge.scm.git.GitController;\n+import as.jcge.util.ProcessSpawner;\n+\n+public class HibernateNPE22 {\n+\tprivate final static String REPOPATH \u003d \"./test-repo\";\n+\t\n+\t@BeforeClass\n+    public static void oneTimeSetUp() {\n+        // get the hibernate-orm repository\n+\t\tSystem.err.println(\"Cloning hibernate-orm\");\n+\t\tProcessSpawner s \u003d new ProcessSpawner();\n+\t\ts.spawnProcess(new String[] {\"git\",\"clone\",\"git://github.com/hibernate/hibernate-orm.git\",REPOPATH});\n+\t\tSystem.err.println(\"DONE cloning\");\n+    }\n+\t\n+\t@AfterClass\n+\tpublic static void oneTimeTearDown() {\n+\t\t// delete the hibernate-orm repository\n+\t\tProcessSpawner s \u003d new ProcessSpawner();\n+\t\ts.spawnProcess(new String[] {\"rm\", \"-rf\", REPOPATH});\n+\t}\n+\t\n+\t@Before\n+\tpublic void setUp() throws Exception {\n+\t}\n+\n+\t@After\n+\tpublic void tearDown() throws Exception {\n+\t}\n+\n+\t@Test\n+\tpublic void test() {\n+\t\tGitController gc \u003d new MockGitController(REPOPATH);\n+\t\t\n+\t\ttry {\n+\t\t\tSCMIterator iter \u003d new SCMIterator(gc);\n+\t\t\twhile (iter.hasNext()) {\n+\t\t\t\titer.next();\n+\t\t\t}\n+\t\t} catch (NullPointerException e) {\n+\t\t\te.printStackTrace();\n+\t\t\tfail();\n+\t\t}\n+\t}\n+\n+\tclass MockGitController extends GitController {\n+\n+\t\tpublic MockGitController(String repositoryPath) {\n+\t\t\tsuper(repositoryPath);\n+\t\t}\n+\n+\t\tpublic List\u003cString\u003e getAllCommits() {\n+\t\t\tList\u003cString\u003e commits \u003d new ArrayList\u003cString\u003e();\n+\t\t\tcommits.add(\"469669f121671a9f733d426fbbeddd4016f769ef\");\n+\t\t\tcommits.add(\"f8c4d0252e277938343ac18aca597df18a631d02\");\n+\t\t\tcommits.add(\"50da726269a5cd9b722cb44a6f40f0a5ca1e0e91\");\n+\t\t\tcommits.add(\"6143e94e84f976a46e0805169383162e4c1cc6be\");\n+\t\t\tcommits.add(\"dd2e0188d494b4e7d4d25a95b42787c5cf67d3f0\");\n+\t\t\tcommits.add(\"0f42598a04447d15e6e1d1f32d6a2e1011e452da\");\n+\t\t\tcommits.add(\"143a2402d5aebbcadc42e118903ce2a3d6fef0c3\");\n+\t\t\tcommits.add(\"1f8720df0a206d5815dfa90db21ba547eee3a908\");\n+\t\t\tcommits.add(\"5a055acb2b8c277aa2bed9ac4179884f74f60672\");\n+\t\t\treturn commits;\n+\t\t}\n+\t}\n+}"
        }
      ]
    }
  },
  {
    "name": "prevent null pointer exception if getCurrentWidget() returns null",
    "url": "https://github.com/dimagi/commcare-android/pull/721",
    "description": "This is a short-term patch for this bug on ACRA: https://commcare-acralyzer.cloudant.com/acralyzer/_design/acralyzer/index.html#/reports-browser/commcare-odk/bug/a75355af7f8fba060f693b6f8eb90128.\n\nIt looks like getCurrentWidget() is sometimes returning null, which isn\u0027t good, but is gonna be really hard to track down the cause of. For now, this will at least prevent the app from crashing when it does. In theory this means it\u0027s possible that we will skip performing scaling of an image capture when we should be, but since it\u0027s a very minimally used feature right now, the chances of that are unlikely. More concerned about what\u0027s wrong with the implementation of getCurrentWidget(), since it definitely shouldn\u0027t be returning null in the place the stack trace is indicating -- if anyone has intuitions, let me know.\n",
    "keywords": [
      "getcurrentwidget",
      "null"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/dimagi/commcare-android/commit/181ad2458b6fe0db53f2ab6815498f47f1f59b7f",
      "files": [
        {
          "file_name": "app/src/org/odk/collect/android/activities/FormEntryActivity.java",
          "patch": "@@ -542,13 +542,17 @@ private void processChooserResponse(Intent intent) {\n     public QuestionWidget getPendingWidget() {\n         FormIndex pendingIndex \u003d mFormController.getPendingCalloutFormIndex();\n         if (pendingIndex \u003d\u003d null) {\n+            Logger.log(AndroidLogger.SOFT_ASSERT,\n+                    \"getPendingWidget called when pending callout form index was null\");\n             return null;\n         }\n         for (QuestionWidget q : ((ODKView)mCurrentView).getWidgets()) {\n             if (q.getFormId().equals(pendingIndex)) {\n                 return q;\n             }\n         }\n+        Logger.log(AndroidLogger.SOFT_ASSERT,\n+                \"getPendingWidget couldn\u0027t find question widget with a form index that matches the pending callout.\");\n         return null;\n     }\n "
        },
        {
          "file_name": "app/src/org/odk/collect/android/activities/components/ImageCaptureProcessing.java",
          "patch": "@@ -8,6 +8,7 @@\n import java.io.IOException;\n \n public class ImageCaptureProcessing {\n+\n     /**\n      * Performs any necessary relocating and scaling of an image coming from either a\n      * SignatureWidget or ImageWidget (capture or choose)\n@@ -29,9 +30,11 @@ public static File moveAndScaleImage(File originalImage, boolean shouldScale,\n         // TODO PLM: this scale flag should be decoupled such that getPendingWidget doesn\u0027t need to be called\n         if (shouldScale) {\n             ImageWidget currentWidget \u003d (ImageWidget)formEntryActivity.getPendingWidget();\n-            int maxDimen \u003d currentWidget.getMaxDimen();\n-            if (maxDimen !\u003d -1) {\n-                savedScaledImage \u003d FileUtils.scaleAndSaveImage(originalImage, finalFilePath, maxDimen);\n+            if (currentWidget !\u003d null) {\n+                int maxDimen \u003d currentWidget.getMaxDimen();\n+                if (maxDimen !\u003d -1) {\n+                    savedScaledImage \u003d FileUtils.scaleAndSaveImage(originalImage, finalFilePath, maxDimen);\n+                }\n             }\n         }\n "
        }
      ]
    }
  },
  {
    "name": "null pointer running a feature in 2016.2",
    "url": "https://github.com/iantmoore/substeps-intellij-plugin/issues/3",
    "description": "```\njava.lang.NullPointerException\n    at uk.co.itmoore.intellisubsteps.ui.ConsolePanel.setModel(ConsolePanel.java:110)\n    at uk.co.itmoore.intellisubsteps.ui.SubstepsConsoleView.attachToModel(SubstepsConsoleView.java:62)\n    at uk.co.itmoore.intellisubsteps.execution.SubstepsRunProfileState.execute(SubstepsRunProfileState.java:481)\n    at com.intellij.execution.impl.DefaultJavaProgramRunner.doExecute(DefaultJavaProgramRunner.java:93)\n    at com.intellij.execution.runners.GenericProgramRunner$1.execute(GenericProgramRunner.java:43)\n    at com.intellij.execution.impl.ExecutionManagerImpl.a(ExecutionManagerImpl.java:380)\n    at com.intellij.openapi.application.TransactionGuardImpl.a(TransactionGuardImpl.java:88)\n    at com.intellij.openapi.application.TransactionGuardImpl.access$300(TransactionGuardImpl.java:40)\n    at com.intellij.openapi.application.TransactionGuardImpl$1.run(TransactionGuardImpl.java:73)\n    at com.intellij.openapi.application.impl.LaterInvocator$FlushQueue.a(LaterInvocator.java:326)\n    at com.intellij.openapi.application.impl.LaterInvocator$FlushQueue.run(LaterInvocator.java:310)\n    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)\n    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:756)\n    at java.awt.EventQueue.access$500(EventQueue.java:97)\n    at java.awt.EventQueue$3.run(EventQueue.java:709)\n    at java.awt.EventQueue$3.run(EventQueue.java:703)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:76)\n    at java.awt.EventQueue.dispatchEvent(EventQueue.java:726)\n    at com.intellij.ide.IdeEventQueue.a(IdeEventQueue.java:863)\n    at com.intellij.ide.IdeEventQueue._dispatchEvent(IdeEventQueue.java:699)\n    at com.intellij.ide.IdeEventQueue.dispatchEvent(IdeEventQueue.java:385)\n    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)\n    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\n    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\n    at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)\n2016-08-31 12:25:06,092 [ 512377]  ERROR - pplication.impl.LaterInvocator - IntelliJ IDEA 2016.2.2  Build #IU-162.1628.40 \n2016-08-31 12:25:06,092 [ 512377]  ERROR - pplication.impl.LaterInvocator - JDK: 1.8.0_76-release \n2016-08-31 12:25:06,093 [ 512378]  ERROR - pplication.impl.LaterInvocator - VM: OpenJDK 64-Bit Server VM \n2016-08-31 12:25:06,093 [ 512378]  ERROR - pplication.impl.LaterInvocator - Vendor: JetBrains s.r.o \n2016-08-31 12:25:06,093 [ 512378]  ERROR - pplication.impl.LaterInvocator - OS: Linux \n2016-08-31 12:25:06,093 [ 512378]  ERROR - pplication.impl.LaterInvocator - Last Action: Run \n```\n",
    "keywords": [
      "com",
      "2016-08-31",
      "093",
      "run",
      "intellij",
      "error",
      "co itmoore",
      "impl",
      "pplication",
      "java",
      "intellisubsteps",
      "uk",
      "com intellij",
      "[",
      "ide ideeventqueue",
      "eventqueue",
      "awt eventdispatchthread",
      "itmoore",
      "execution",
      "512378] error",
      "transactionguardimpl",
      "openapi",
      "ideeventqueue",
      "impl laterinvocator",
      "12:25:06",
      "ide",
      "co",
      "laterinvocator",
      "intellij openapi",
      "2016-08-31 12:25:06",
      "2",
      "application",
      "093 [",
      "eventdispatchthread",
      "java awt",
      "pplication impl",
      "512378]",
      "awt"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/iantmoore/substeps-intellij-plugin/commit/2963f04250e8efb4456c75e532736ef75223d22d",
      "files": [
        {
          "file_name": "META-INF/plugin.xml",
          "patch": "@@ -17,7 +17,7 @@\n \u003cidea-plugin version\u003d\"2\"\u003e\n   \u003cid\u003euk.co.itmoore.intellisubsteps\u003c/id\u003e\n   \u003cname\u003eSubsteps IntelliJ Plugin\u003c/name\u003e\n-  \u003cversion\u003e1.0.0\u003c/version\u003e\n+  \u003cversion\u003e1.0.1\u003c/version\u003e\n   \u003cvendor email\u003d\"ian@itmoore.co.uk\" url\u003d\"n/a\"\u003eSubsteps\u003c/vendor\u003e\n \n   \u003cdescription\u003e\u003c![CDATA[\n@@ -30,6 +30,14 @@\n \n \n   \u003cchange-notes\u003e\u003c![CDATA[\n+    \u003ch3\u003e1.0.1\u003c/h3\u003e\n+    \u003cul\u003e\n+        \u003cli\u003eUpdated to version 1.0.3 of substeps\u003c/li\u003e\n+        \u003cli\u003eUpdated to IU-162.1447.26 version of IntelliJ\u003c/li\u003e\n+        \u003cli\u003eFixed \u003ca href\u003d\"https://github.com/iantmoore/substeps-intellij-plugin/issues/3\u003eIssue #3\u003c/a\u003e as part of the IntelliJ upgrade\u003c/li\u003e\n+    \u003c/ul\u003e\n+\n+\n     \u003ch3\u003e1.0.0\u003c/h3\u003e\n     \u003cul\u003e\n         \u003cli\u003eSwitched dependency to 1.0.x version of org.substeps fork of Substeps\u003c/li\u003e\n@@ -99,7 +107,7 @@\n   \u003c/change-notes\u003e\n \n   \u003c!-- please see http://confluence.jetbrains.com/display/IDEADEV/Build+Number+Ranges for description --\u003e\n-  \u003cidea-version since-build\u003d\"143.0\"/\u003e\n+  \u003cidea-version since-build\u003d\"162.1\"/\u003e\n \n   \u003c!-- please see http://confluence.jetbrains.com/display/IDEADEV/Plugin+Compatibility+with+IntelliJ+Platform+Products\n        on how to target different products --\u003e"
        },
        {
          "file_name": "lib/substeps-core-1.0.1.jar"
        },
        {
          "file_name": "lib/substeps-core-1.0.3.jar"
        },
        {
          "file_name": "lib/substeps-core-api-1.0.1.jar"
        },
        {
          "file_name": "lib/substeps-core-api-1.0.3.jar"
        },
        {
          "file_name": "resources/icons/cucumber.png"
        },
        {
          "file_name": "src/uk/co/itmoore/intellisubsteps/ui/ConsolePanel.java",
          "patch": "@@ -37,7 +37,7 @@\n     private static final float DEFAULT_PROPORTION \u003d 0.2f;\n \n     private SubstepsStatusLine myStatusLine;\n-    private StatisticsPanel myStatisticsPanel;\n+//    private StatisticsPanel myStatisticsPanel;\n     private SubstepsTestTreeView myTreeView;\n     private TestsOutputConsolePrinter myPrinter;\n     private StartingProgress myStartingProgress;\n@@ -57,11 +57,11 @@ public void initUI() {\n         myStartingProgress \u003d new StartingProgress(myTreeView);\n     }\n \n-    @Override\n-    protected JComponent createStatisticsPanel() {\n-        myStatisticsPanel \u003d new StatisticsPanel();\n-        return myStatisticsPanel;\n-    }\n+//    @Override\n+//    protected JComponent createStatisticsPanel() {\n+//        myStatisticsPanel \u003d new StatisticsPanel();\n+//        return myStatisticsPanel;\n+//    }\n \n //    @Override\n //    protected ToolbarPanel createToolbarPanel() {\n@@ -107,7 +107,7 @@ public void setModel(final SubstepsRunningModel model) {\n \n \n \n-        myStatisticsPanel.attachTo(model);\n+//        myStatisticsPanel.attachTo(model);\n     }\n \n     private void stopStartingProgress() {"
        }
      ]
    }
  },
  {
    "name": "Interacting with empty squares causes a null pointer",
    "url": "https://github.com/fwumdesoft/Cosmic-Circuitry/issues/97",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/fwumdesoft/Cosmic-Circuitry/commit/52dba95aae204df8931ce6c1f773df247e0d4cac",
      "files": [
        {
          "file_name": "core/src/com/fwumdesoft/project8/CircuitInput.java",
          "patch": "@@ -151,8 +151,11 @@ private void interact(int cursorX, int cursorY)\n \t\t\tif (!(cursorY \u003e\u003d 0 \u0026\u0026 cursorY \u003c circuit.grid.length \u0026\u0026 cursorX \u003e\u003d 0\r\n \t\t\t\t\t\u0026\u0026 cursorX \u003c circuit.grid[cursorY].length) || !circuit.grid[cursorY][cursorX].isChangeable)\r\n \t\t\t\treturn;\r\n-\t\t\tinventory.addComponent(circuit.grid[cursorY][cursorX]);\r\n-\t\t\tcircuit.grid[cursorY][cursorX] \u003d CircuitComponent.blank();\r\n+\t\t\tif(circuit.grid[cursorY][cursorX].type !\u003d null)\r\n+\t\t\t{\r\n+\t\t\t\tinventory.addComponent(circuit.grid[cursorY][cursorX]);\r\n+\t\t\t\tcircuit.grid[cursorY][cursorX] \u003d CircuitComponent.blank();\r\n+\t\t\t}\r\n \t\t}\r\n \t\tList\u003cCircuitComponent\u003e type \u003d null;\r\n \t\tString componentName \u003d \"\";\r"
        }
      ]
    }
  },
  {
    "name": "RecurrencePicker null pointer exception",
    "url": "https://github.com/code-troopers/android-betterpickers/issues/139",
    "description": "Set it to month, and to day of week. The sample app will crash (my app will too):\n\njava.lang.NullPointerException: Attempt to read from field \u0027int android.text.format.Time.weekDay\u0027 on a null object reference\n            at com.doomonafireball.betterpickers.recurrencepicker.EventRecurrenceFormatter.getRepeatString(EventRecurrenceFormatter.java:106)\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/code-troopers/android-betterpickers/commit/2056cb140014ab3259d17853b95d9fe5485b632c",
      "files": [
        {
          "file_name": "library/src/main/java/com/doomonafireball/betterpickers/recurrencepicker/EventRecurrenceFormatter.java",
          "patch": "@@ -26,14 +26,13 @@\n \n import java.util.Calendar;\n \n-public class EventRecurrenceFormatter\n-{\n+public class EventRecurrenceFormatter {\n \n     private static int[] mMonthRepeatByDayOfWeekIds;\n     private static String[][] mMonthRepeatByDayOfWeekStrs;\n \n     public static String getRepeatString(Context context, Resources r, EventRecurrence recurrence,\n-            boolean includeEndString) {\n+                                         boolean includeEndString) {\n         String endString \u003d \"\";\n         if (includeEndString) {\n             StringBuilder sb \u003d new StringBuilder();\n@@ -78,7 +77,7 @@ public static String getRepeatString(Context context, Resources r, EventRecurren\n \n                     if (recurrence.bydayCount \u003e 0) {\n                         int count \u003d recurrence.bydayCount - 1;\n-                        for (int i \u003d 0 ; i \u003c count ; i++) {\n+                        for (int i \u003d 0; i \u003c count; i++) {\n                             days.append(dayToString(recurrence.byday[i], dayOfWeekLength));\n                             days.append(\", \");\n                         }\n@@ -103,7 +102,11 @@ public static String getRepeatString(Context context, Resources r, EventRecurren\n             }\n             case EventRecurrence.MONTHLY: {\n                 if (recurrence.bydayCount \u003d\u003d 1) {\n-                    int weekday \u003d recurrence.startDate.weekDay;\n+                    int weekday;\n+                    if (recurrence.startDate \u003d\u003d null) {\n+                        return null;\n+                    }\n+                    weekday \u003d recurrence.startDate.weekDay;\n                     // Cache this stuff so we won\u0027t have to redo work again later.\n                     cacheMonthRepeatStrings(r, weekday);\n                     int dayNumber \u003d (recurrence.startDate.monthDay - 1) / 7;\n@@ -146,6 +149,7 @@ private static void cacheMonthRepeatStrings(Resources r, int weekday) {\n \n     /**\n      * Converts day of week to a String.\n+     *\n      * @param day a EventRecurrence constant\n      * @return day of week as a string\n      */\n@@ -155,19 +159,28 @@ private static String dayToString(int day, int dayOfWeekLength) {\n \n     /**\n      * Converts EventRecurrence\u0027s day of week to DateUtil\u0027s day of week.\n+     *\n      * @param day of week as an EventRecurrence value\n      * @return day of week as a DateUtil value.\n      */\n     private static int dayToUtilDay(int day) {\n         switch (day) {\n-        case EventRecurrence.SU: return Calendar.SUNDAY;\n-        case EventRecurrence.MO: return Calendar.MONDAY;\n-        case EventRecurrence.TU: return Calendar.TUESDAY;\n-        case EventRecurrence.WE: return Calendar.WEDNESDAY;\n-        case EventRecurrence.TH: return Calendar.THURSDAY;\n-        case EventRecurrence.FR: return Calendar.FRIDAY;\n-        case EventRecurrence.SA: return Calendar.SATURDAY;\n-        default: throw new IllegalArgumentException(\"bad day argument: \" + day);\n+            case EventRecurrence.SU:\n+                return Calendar.SUNDAY;\n+            case EventRecurrence.MO:\n+                return Calendar.MONDAY;\n+            case EventRecurrence.TU:\n+                return Calendar.TUESDAY;\n+            case EventRecurrence.WE:\n+                return Calendar.WEDNESDAY;\n+            case EventRecurrence.TH:\n+                return Calendar.THURSDAY;\n+            case EventRecurrence.FR:\n+                return Calendar.FRIDAY;\n+            case EventRecurrence.SA:\n+                return Calendar.SATURDAY;\n+            default:\n+                throw new IllegalArgumentException(\"bad day argument: \" + day);\n         }\n     }\n }"
        }
      ]
    }
  },
  {
    "name": "[Bug] Fix query without data load null pointer exception on hdfs",
    "url": "https://github.com/HuaweiBigData/carbondata/pull/826",
    "description": "When create a table, execute query without data load, it will throws null pointer exception on hdfs.\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/HuaweiBigData/carbondata/commit/6b8d35dba8d4354afe0165d12d442cc27df415c9",
      "files": [
        {
          "file_name": "integration/spark/src/test/scala/org/carbondata/spark/testsuite/allqueries/TestQueryWithoutDataLoad.scala",
          "patch": "@@ -0,0 +1,63 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.carbondata.spark.testsuite.allqueries\n+\n+import org.apache.spark.sql.Row\n+import org.apache.spark.sql.common.util.CarbonHiveContext._\n+import org.apache.spark.sql.common.util.QueryTest\n+import org.scalatest.BeforeAndAfterAll\n+\n+/*\n+ * Test Class for query without data load\n+ *\n+ */\n+class TestQueryWithoutDataLoad extends QueryTest with BeforeAndAfterAll {\n+  override def beforeAll {\n+    sql(\"drop table if exists no_load\")\n+    sql(\"\"\"\n+        CREATE TABLE no_load(imei string, age int, productdate timestamp, gamePointId double)\n+        STORED BY \u0027org.apache.carbondata.format\u0027\n+        TBLPROPERTIES(\u0027DICTIONARY_EXCLUDE\u0027\u003d\u0027productdate\u0027, \u0027DICTIONARY_INCLUDE\u0027\u003d\u0027gamePointId\u0027)\n+      \"\"\")\n+  }\n+\n+  test(\"test query without data load\") {\n+    checkAnswer(\n+      sql(\"select count(*) from no_load\"), Seq(Row(0))\n+    )\n+    checkAnswer(\n+      sql(\"select * from no_load\"), Seq.empty\n+    )\n+    checkAnswer(\n+      sql(\"select imei, count(age) from no_load group by imei\"), Seq.empty\n+    )\n+    checkAnswer(\n+      sql(\"select imei, sum(age) from no_load group by imei\"), Seq.empty\n+    )\n+    checkAnswer(\n+      sql(\"select imei, avg(age) from no_load group by imei\"), Seq.empty\n+    )\n+  }\n+\n+  override def afterAll {\n+    sql(\"drop table no_load\")\n+  }\n+\n+}"
        },
        {
          "file_name": "processing/src/main/java/org/carbondata/lcm/status/SegmentStatusManager.java",
          "patch": "@@ -81,12 +81,16 @@ public ICarbonLock getTableStatusLock() {\n   /**\n    * This method will return last modified time of tablestatus file\n    */\n-  public long getTableStatusLastModifiedTime() {\n+  public long getTableStatusLastModifiedTime() throws IOException {\n     String tableStatusPath \u003d CarbonStorePath.getCarbonTablePath(\n         absoluteTableIdentifier.getStorePath(), absoluteTableIdentifier.getCarbonTableIdentifier())\n           .getTableStatusFilePath();\n-    return FileFactory.getCarbonFile(tableStatusPath, FileFactory.getFileType(tableStatusPath))\n-      .getLastModifiedTime();\n+    if (!FileFactory.isFileExist(tableStatusPath, FileFactory.getFileType(tableStatusPath))) {\n+      return 0L;\n+    } else {\n+      return FileFactory.getCarbonFile(tableStatusPath, FileFactory.getFileType(tableStatusPath))\n+          .getLastModifiedTime();\n+    }\n   }\n \n   /**"
        }
      ]
    }
  },
  {
    "name": "Null Pointer Error when clicking a link",
    "url": "https://github.com/MineMaarten/IGW-mod/issues/34",
    "description": "I clicked one of the links in the gui and my game hung for a few seconds before crashing. The crash report can be found here: http://pastebin.com/VpyVz0jQ\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/MineMaarten/IGW-mod/commit/d2263536e3c2ea69a09797520065dc866b2ed239",
      "files": [
        {
          "file_name": "src/igwmod/WikiUtils.java",
          "patch": "@@ -1,5 +1,7 @@\n package igwmod;\n \n+import igwmod.lib.IGWLog;\n+\n import java.util.ArrayList;\n import java.util.HashMap;\n import java.util.Iterator;\n@@ -51,8 +53,12 @@ public static String getNameFromStack(ItemStack stack){\n \n     public static String getOwningModId(ItemStack stack){\n         String modid \u003d \"minecraft\";\n-        UniqueIdentifier id \u003d GameRegistry.findUniqueIdentifierFor(stack.getItem());\n-        if(id !\u003d null \u0026\u0026 id.modId !\u003d null) modid \u003d id.modId.toLowerCase();\n+        if(stack.getItem() \u003d\u003d null) {\n+            IGWLog.warning(\"Found an ItemStack with a null item! This isn\u0027t supposed to happen!\");\n+        } else {\n+            UniqueIdentifier id \u003d GameRegistry.findUniqueIdentifierFor(stack.getItem());\n+            if(id !\u003d null \u0026\u0026 id.modId !\u003d null) modid \u003d id.modId.toLowerCase();\n+        }\n         return modid;\n     }\n }"
        }
      ]
    }
  },
  {
    "name": "Fix null pointer exception on important empty declaration",
    "url": "https://github.com/SomMeri/less4j/issues/304",
    "description": "Already fixed while doing something else, just add test:\n\n```\n.div {\n  property: ;\n}\n\ndivdiv {\n  .div() !important;\n}\n```\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/SomMeri/less4j/commit/9f3d4c0e0851d0093cd6cc224299d8d66f52fd04",
      "files": [
        {
          "file_name": "src/test/resources/compile-basic-features/expressions/expressions-issues.css",
          "patch": "@@ -0,0 +1,6 @@\n+#issue-304 .div {\n+  property: ;\n+}\n+#issue-304 divdiv {\n+  property: !important;\n+}\n\\ No newline at end of file"
        },
        {
          "file_name": "src/test/resources/compile-basic-features/expressions/expressions-issues.less",
          "patch": "@@ -0,0 +1,10 @@\n+//https://github.com/SomMeri/less4j/issues/304\n+#issue-304 {\n+  .div {\n+    property: ;\n+  }\n+\n+  divdiv {\n+    .div() !important;\n+  }\n+}\n\\ No newline at end of file"
        },
        {
          "file_name": "src/test/resources/minitests/debug1.less",
          "patch": "@@ -1,15 +1,10 @@\n-// with tail\n-.tail-loop() { the: end; }\n-.tail-loop(@head, @tail...) {\n-  @first: extract(@head, 1);\n-  @second: extract(@head, 2);\n-\n-  @{first}: @second;\n-  tail: @tail;\n-  .tail-loop(@tail...);\n+.loop() { the: end; }\n+.loop(@head, @tail...) {\n+  value: @head;\n+  .loop(@tail...);\n }\n \n .class {\n-  @values : a A, b B, c C;\n-  .tail-loop(@values...);\n+  @values : 1 2 3 4;\n+  .loop(@values...);\n }\n\\ No newline at end of file"
        }
      ]
    }
  },
  {
    "name": "sometimes getting the device id throws a null pointer exception",
    "url": "https://github.com/tapsavvy/tabletalk/pull/24",
    "description": "https://trello.com/c/TRAMebDr\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/tapsavvy/tabletalk/commit/b797f1b12d18224bbfc3c2f228bfa429c71072ac",
      "files": [
        {
          "file_name": "android/TapSavvyTableTalk/src/main/java/com/tapsavvy/tabletalk/api/API.java",
          "patch": "@@ -149,6 +149,7 @@ public static String getMacAddress(Context context) {\n         WifiManager manager \u003d (WifiManager) context.getSystemService(Context.WIFI_SERVICE);\n         if (manager !\u003d null) {\n             String mac \u003d manager.getConnectionInfo().getMacAddress();\n+            if (mac \u003d\u003d null) mac \u003d \"\";\n             Timber.i(\"MAC address determined to be \" + mac);\n             return mac;\n         } else {\n@@ -167,6 +168,7 @@ public static String getDeviceId() {\n     }\n \n     public static String sha256(String input) {\n+        if (input \u003d\u003d null) return \"\";\n         try {\n             MessageDigest digest \u003d MessageDigest.getInstance(\"SHA-256\");\n             digest.reset();"
        }
      ]
    }
  },
  {
    "name": "Null pointer exception in updateMyPlayerText",
    "url": "https://github.com/okitec/mpmp/issues/116",
    "description": "@dieechtenilente, `null` is passed in the beginning, probably because `Player.search(name)` can\u0027t find the not yet existant player.\n\n**Output:**\n\n```\nException in thread \"Timer-0\" java.lang.NullPointerException\n    at view.Frame.updateMyPlayerText(Frame.java:275)\n    at controller.Controller$TimerTick.run(Controller.java:164)\n    at java.util.TimerThread.mainLoop(Timer.java:555)\n    at java.util.TimerThread.run(Timer.java:505)\n```\n\n**Offending code:**\n\n``` java\n274 public void updateMyPlayerText(Player p) {\n275     if (p.inPrison) {\n```\n",
    "keywords": [
      "updatemyplayertext",
      "java"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/okitec/mpmp/commit/3a44f6e7ccc341a3b4dd956e8723bda216336406",
      "files": [
        {
          "file_name": "mpmp/src/view/Frame.java",
          "patch": "@@ -158,12 +158,13 @@ public void createFrame() {\n \t\tpLeft.add(tPlayerList);\n \t\tpLeft.add(bPayPrison);\n \t\tpLeft.add(bUsePrisonLeave);\n-\t\t\n+\n \t\tpChat.add(bUpdatePlayer);\n \t\tpChat.add(bStartGame);\n \t\tpChat.add(sP);\n \t\tpChat.add(tChatField);\n \t\tpChat.add(bEndTurn);\n+\t\tpChat.add(bClearChat);\n \n \t\tpCurrentPlayer.add(new JLabel(\"Spieler\"));\n \t\tpCurrentPlayer.add(lmP);\n@@ -254,7 +255,7 @@ public void addStartGameListener(ActionListener al) {\n \t\tSystem.out.println(\"Spiel gestartet.\");\n \t\tbStartGame.addActionListener(al);\n \t}\n-\t\n+\n \tpublic void addClearChatListener(ActionListener al) {\n \t\tSystem.out.println(\"Chat geleert.\");\n \t\tbClearChat.addActionListener(al);\n@@ -272,17 +273,19 @@ public void subscribeErr() {\n \t}\n \n \tpublic void updateMyPlayerText(Player p) {\n-\t\tif (p.inPrison) {\n-\t\t\tlmP.setText(p.getName() + \"(Im Gefngnis)\");\n-\t\t} else {\n-\t\t\tlmP.setText(p.getName());\n+\t\tif (p !\u003d null) {\n+\t\t\tif (p.inPrison) {\n+\t\t\t\tlmP.setText(p.getName() + \"(Im Gefngnis)\");\n+\t\t\t} else {\n+\t\t\t\tlmP.setText(p.getName());\n+\t\t\t}\n+\n+\t\t\tlmP.setForeground(p.getColor());\n+\t\t\tbUsePrisonLeave.setVisible(p.isInJail());\n+\t\t\tbPayPrison.setVisible(p.isInJail());\n+\t\t\tlmPMoney.setText(\"RM \" + p.getMoney());\n+\t\t\tlmPPlots.setText(\"Gekaufte Grundstcke: \" + p.getPlots());\n \t\t}\n-\t\t\n-\t\tlmP.setForeground(p.getColor());\n-\t\tbUsePrisonLeave.setVisible(p.isInJail());\n-\t\tbPayPrison.setVisible(p.isInJail());\n-\t\tlmPMoney.setText(\"RM \" + p.getMoney());\n-\t\tlmPPlots.setText(\"Gekaufte Grundstcke: \" + p.getPlots());\n \t}\n \n \tpublic class ChatDisp implements Displayer {"
        },
        {
          "file_name": "mpmp/src/view/Gameboard.java",
          "patch": "@@ -24,6 +24,9 @@\n \tprivate Frame f;\n \tprivate Converter converter;\n \n+\tpublic void setDocument(){\n+\t}\n+\t\n \tpublic Gameboard(Frame f) {\n \t\tthis.f \u003d f;\n \t\tconverter \u003d new Converter(304, 506);\t  // XXX magic: original unresized wfld, hfld"
        }
      ]
    }
  },
  {
    "name": "GPS tracker null pointer",
    "url": "https://github.com/gtataranni/remote-access/issues/2",
    "description": "There is a null pointer exception in the GPS tracker when it is launched\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/gtataranni/remote-access/commit/1ac5f35d42b5e646288e4bc70c517bc660dd3e17",
      "files": [
        {
          "file_name": "RemoteApp/.idea/encodings.xml",
          "patch": "@@ -0,0 +1,6 @@\n+\u003c?xml version\u003d\"1.0\" encoding\u003d\"UTF-8\"?\u003e\n+\u003cproject version\u003d\"4\"\u003e\n+  \u003ccomponent name\u003d\"Encoding\"\u003e\n+    \u003cfile url\u003d\"PROJECT\" charset\u003d\"UTF-8\" /\u003e\n+  \u003c/component\u003e\n+\u003c/project\u003e\n\\ No newline at end of file"
        },
        {
          "file_name": "RemoteApp/.idea/misc.xml",
          "patch": "@@ -3,13 +3,6 @@\n   \u003ccomponent name\u003d\"EntryPointsManager\"\u003e\n     \u003centry_points version\u003d\"2.0\" /\u003e\n   \u003c/component\u003e\n-  \u003ccomponent name\u003d\"MavenImportPreferences\"\u003e\n-    \u003coption name\u003d\"generalSettings\"\u003e\n-      \u003cMavenGeneralSettings\u003e\n-        \u003coption name\u003d\"mavenHome\" value\u003d\"Bundled (Maven 3)\" /\u003e\n-      \u003c/MavenGeneralSettings\u003e\n-    \u003c/option\u003e\n-  \u003c/component\u003e\n   \u003ccomponent name\u003d\"NullableNotNullManager\"\u003e\n     \u003coption name\u003d\"myDefaultNullable\" value\u003d\"android.support.annotation.Nullable\" /\u003e\n     \u003coption name\u003d\"myDefaultNotNull\" value\u003d\"android.support.annotation.NonNull\" /\u003e\n@@ -50,20 +43,4 @@\n   \u003ccomponent name\u003d\"ProjectType\"\u003e\n     \u003coption name\u003d\"id\" value\u003d\"Android\" /\u003e\n   \u003c/component\u003e\n-  \u003ccomponent name\u003d\"masterDetails\"\u003e\n-    \u003cstates\u003e\n-      \u003cstate key\u003d\"ProjectJDKs.UI\"\u003e\n-        \u003csettings\u003e\n-          \u003clast-edited\u003e1.8\u003c/last-edited\u003e\n-          \u003csplitter-proportions\u003e\n-            \u003coption name\u003d\"proportions\"\u003e\n-              \u003clist\u003e\n-                \u003coption value\u003d\"0.2\" /\u003e\n-              \u003c/list\u003e\n-            \u003c/option\u003e\n-          \u003c/splitter-proportions\u003e\n-        \u003c/settings\u003e\n-      \u003c/state\u003e\n-    \u003c/states\u003e\n-  \u003c/component\u003e\n \u003c/project\u003e\n\\ No newline at end of file"
        },
        {
          "file_name": "RemoteApp/app/app.iml",
          "patch": "@@ -69,33 +69,37 @@\n       \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/debug\" /\u003e\n       \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/dependency-cache\" /\u003e\n       \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/dex\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.android.support/appcompat-v7/23.0.1/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.android.support/appcompat-v7/23.1.1/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.android.support/design/23.1.1/jars\" /\u003e\n       \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.android.support/mediarouter-v7/22.2.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.android.support/support-v4/23.0.1/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-ads/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-analytics/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-appindexing/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-appinvite/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-appstate/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-base/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-basement/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-cast/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-drive/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-fitness/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-games/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-gcm/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-identity/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-location/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-maps/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-measurement/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-nearby/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-panorama/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-plus/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-safetynet/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-vision/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-wallet/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-wearable/8.1.0/jars\" /\u003e\n-      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services/8.1.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.android.support/recyclerview-v7/23.1.1/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.android.support/support-v4/23.1.1/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-ads/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-analytics/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-appindexing/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-appinvite/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-appstate/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-auth/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-base/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-basement/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-cast/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-drive/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-fitness/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-games/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-gcm/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-identity/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-location/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-maps/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-measurement/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-nearby/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-panorama/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-plus/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-safetynet/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-vision/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-wallet/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services-wearable/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.google.android.gms/play-services/8.3.0/jars\" /\u003e\n+      \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/exploded-aar/com.jpardogo.materialtabstrip/library/1.1.0/jars\" /\u003e\n       \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/incremental\" /\u003e\n       \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/manifests\" /\u003e\n       \u003cexcludeFolder url\u003d\"file://$MODULE_DIR$/build/intermediates/pre-dexed\" /\u003e\n@@ -109,32 +113,36 @@\n     \u003corderEntry type\u003d\"jdk\" jdkName\u003d\"Android API 23 Platform\" jdkType\u003d\"Android SDK\" /\u003e\n     \u003corderEntry type\u003d\"sourceFolder\" forTests\u003d\"false\" /\u003e\n     \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"mediarouter-v7-22.2.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-measurement-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-appindexing-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-base-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-location-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-identity-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-vision-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-drive-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-analytics-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"support-v4-23.0.1\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"appcompat-v7-23.0.1\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-cast-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"support-annotations-23.0.1\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-appinvite-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-ads-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-appstate-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-gcm-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-safetynet-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-games-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-wallet-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-basement-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-maps-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-nearby-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-panorama-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-fitness-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-wearable-8.1.0\" level\u003d\"project\" /\u003e\n-    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-plus-8.1.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-location-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-plus-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-appindexing-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-auth-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-wearable-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-base-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-measurement-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-identity-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-vision-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-wallet-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"recyclerview-v7-23.1.1\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"support-v4-23.1.1\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-analytics-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-drive-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"library-1.1.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"support-annotations-23.1.1\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"appcompat-v7-23.1.1\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-cast-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-ads-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-appinvite-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-appstate-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-games-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-gcm-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-safetynet-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"design-23.1.1\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-basement-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-maps-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-nearby-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-fitness-8.3.0\" level\u003d\"project\" /\u003e\n+    \u003corderEntry type\u003d\"library\" exported\u003d\"\" name\u003d\"play-services-panorama-8.3.0\" level\u003d\"project\" /\u003e\n   \u003c/component\u003e\n \u003c/module\u003e\n\\ No newline at end of file"
        },
        {
          "file_name": "RemoteApp/app/build.gradle",
          "patch": "@@ -22,6 +22,8 @@ android {\n dependencies {\n     compile fileTree(dir: \u0027libs\u0027, include: [\u0027*.jar\u0027])\n     testCompile \u0027junit:junit:4.12\u0027\n-    compile \u0027com.android.support:appcompat-v7:23.0.1\u0027\n-    compile \u0027com.google.android.gms:play-services:8.1.0\u0027\n+    compile \u0027com.android.support:appcompat-v7:23.1.1\u0027\n+    compile \u0027com.google.android.gms:play-services:8.3.0\u0027\n+    compile \u0027com.jpardogo.materialtabstrip:library:1.1.0\u0027\n+    compile \u0027com.android.support:design:23.1.1\u0027\n }"
        },
        {
          "file_name": "RemoteApp/app/src/main/AndroidManifest.xml",
          "patch": "@@ -1,64 +1,73 @@\n \u003c?xml version\u003d\"1.0\" encoding\u003d\"utf-8\"?\u003e\n \u003cmanifest xmlns:android\u003d\"http://schemas.android.com/apk/res/android\"\n-    package\u003d\"com.example.mobserv.remoteapp\" \u003e\n+    package\u003d\"com.example.mobserv.remoteapp\"\u003e\n \n     \u003cuses-permission android:name\u003d\"android.permission.INTERNET\" /\u003e\n     \u003cuses-permission android:name\u003d\"android.permission.ACCESS_NETWORK_STATE\" /\u003e\n-\n-    \u003cuses-permission android:name\u003d\"android.permission.ACCESS_COARSE_LOCATION\"/\u003e\u003c!--coarse location saves battery--\u003e\n+    \u003cuses-permission android:name\u003d\"android.permission.ACCESS_COARSE_LOCATION\" /\u003e\n+    \u003c!-- coarse location saves battery --\u003e\n     \u003cuses-permission android:name\u003d\"android.permission.ACCESS_FINE_LOCATION\" /\u003e\n-    \u003cuses-permission android:name\u003d\"android.permission.WRITE_EXTERNAL_STORAGE\"/\u003e\n+    \u003cuses-permission android:name\u003d\"android.permission.WRITE_EXTERNAL_STORAGE\" /\u003e\n     \u003cuses-permission android:name\u003d\"android.permission.READ_EXTERNAL_STORAGE\" /\u003e\n-\n     \u003cuses-permission android:name\u003d\"android.permission.CAMERA\" /\u003e\n     \u003cuses-permission android:name\u003d\"android.permission.FLASHLIGHT\" /\u003e\n+\n     \u003cuses-feature android:name\u003d\"android.hardware.camera\" /\u003e\n     \u003cuses-feature android:name\u003d\"android.hardware.camera.autofocus\" /\u003e\n+\n     \u003cuses-permission android:name\u003d\"android.permission.WAKE_LOCK\" /\u003e\n \n     \u003capplication\n         android:allowBackup\u003d\"true\"\n         android:icon\u003d\"@drawable/ic_launcher\"\n         android:label\u003d\"@string/app_name\"\n         android:supportsRtl\u003d\"true\"\n-        android:theme\u003d\"@style/AppTheme\" \u003e\n-        \u003cactivity android:name\u003d\".MainActivity\" \u003e\n+        android:theme\u003d\"@style/AppTheme\"\n+        \u003e\n+        \u003c!--android:theme\u003d\"@style/AppTheme\"--\u003e\n+        \u003cactivity android:name\u003d\".MainActivity\"\u003e\n             \u003cintent-filter\u003e\n                 \u003caction android:name\u003d\"android.intent.action.MAIN\" /\u003e\n \n                 \u003ccategory android:name\u003d\"android.intent.category.LAUNCHER\" /\u003e\n             \u003c/intent-filter\u003e\n         \u003c/activity\u003e\n-\n-        \u003cactivity android:name\u003d\".ServerActivity\"\n-                  android:label\u003d\"Server Activity\"\u003e\n+        \u003cactivity\n+            android:name\u003d\".ServerActivity\"\n+            android:label\u003d\"Server Activity\"\u003e\n             \u003cintent-filter\u003e\n                 \u003caction android:name\u003d\"com.example.mobserv.remoteapp.ServerActivity\" /\u003e\n+\n                 \u003ccategory android:name\u003d\"android.intent.category.DEFAULT\" /\u003e\n             \u003c/intent-filter\u003e\n         \u003c/activity\u003e\n-\n-        \u003cactivity android:name\u003d\".ClientActivity\"\n-                  android:label\u003d\"Client Activity\"\n-            \u003e\n+        \u003cactivity\n+            android:name\u003d\".ClientActivity\"\n+            android:label\u003d\"Client Activity\"\u003e\n             \u003cintent-filter\u003e\n                 \u003caction android:name\u003d\"com.example.mobserv.remoteapp.ClientActivity\" /\u003e\n+\n                 \u003ccategory android:name\u003d\"android.intent.category.DEFAULT\" /\u003e\n             \u003c/intent-filter\u003e\n         \u003c/activity\u003e\n-        \u003cactivity android:name\u003d\".MapActivity\"\n-            android:label\u003d\"Map Activity\"\n-            \u003e\n+        \u003cactivity\n+            android:name\u003d\".MapActivity\"\n+            android:label\u003d\"Map Activity\"\u003e\n             \u003cintent-filter\u003e\n-                \u003caction  android:name\u003d\"com.example.mobserv.remoteapp.MapActivity\" /\u003e\n+                \u003caction android:name\u003d\"com.example.mobserv.remoteapp.MapActivity\" /\u003e\n+\n                 \u003ccategory android:name\u003d\"android.intent.category.DEFAULT\" /\u003e\n             \u003c/intent-filter\u003e\n         \u003c/activity\u003e\n \n         \u003cmeta-data\n             android:name\u003d\"com.google.android.geo.API_KEY\"\n-            android:value\u003d\"AIzaSyAFLDYdtQ6nMWjkEUowbywvG2FctN3Xz7E\"/\u003e\n+            android:value\u003d\"AIzaSyAFLDYdtQ6nMWjkEUowbywvG2FctN3Xz7E\" /\u003e\n \n+        \u003cactivity\n+            android:name\u003d\".LiveActivity\"\n+            android:label\u003d\"@string/title_activity_live\"\n+            android:theme\u003d\"@style/AppTheme.NoActionBar\"\u003e\u003c/activity\u003e\n     \u003c/application\u003e\n \n \u003c/manifest\u003e"
        },
        {
          "file_name": "RemoteApp/app/src/main/java/com/example/mobserv/remoteapp/CameraPreview.java",
          "patch": "@@ -70,7 +70,7 @@\n     private boolean mRunning \u003d false;\n     private CameraStreamer mCameraStreamer \u003d null;\n \n-    CameraPreview(Context context, SurfaceView sv) {\n+    public CameraPreview(Context context, SurfaceView sv) {\n         super(context);\n         this.context \u003d context;\n         mSurfaceView \u003d sv;\n@@ -373,9 +373,9 @@ private static String tryGetIpV4Address()\n         return null;\n     }\n \n-    public void releaseMWakeLock(){\n-        mWakeLock.release();\n-    }\n+    public void releaseMWakeLock(){if(mRunning \u003d\u003d true) mWakeLock.release();}\n+    public String getIpServer(){ return mIpAddress; }\n+    public int getPortServer(){ return mPort; }\n \n     private final class LoadPreferencesTask extends AsyncTask\u003cVoid, Void, SharedPreferences\u003e\n     {"
        },
        {
          "file_name": "RemoteApp/app/src/main/java/com/example/mobserv/remoteapp/ClientActivity.java",
          "patch": "@@ -1,148 +1,229 @@\n package com.example.mobserv.remoteapp;\n \n import android.app.AlertDialog;\n-import android.content.Context;\n-import android.content.pm.PackageManager;\n-import android.support.v4.app.FragmentManager;\n import android.content.DialogInterface;\n import android.content.Intent;\n+import android.content.pm.PackageManager;\n import android.graphics.Bitmap;\n import android.os.Bundle;\n-import android.support.v4.app.FragmentActivity;\n+import android.support.v4.app.FragmentManager;\n+import android.support.v4.view.ViewPager;\n+import android.support.v7.app.AppCompatActivity;\n import android.text.Layout;\n-import android.text.method.ScrollingMovementMethod;\n-import android.util.DisplayMetrics;\n import android.util.Log;\n-import android.view.SurfaceView;\n+import android.view.Menu;\n+import android.view.MenuItem;\n import android.view.View;\n-import android.view.ViewGroup;\n-import android.view.inputmethod.InputMethodManager;\n-import android.widget.Button;\n-import android.widget.EditText;\n-import android.widget.ImageView;\n import android.widget.LinearLayout;\n+import android.widget.RelativeLayout;\n import android.widget.TextView;\n import android.widget.Toast;\n \n+import com.astuetz.PagerSlidingTabStrip;\n+import com.example.mobserv.remoteapp.fragments.OneFragment;\n+import com.example.mobserv.remoteapp.fragments.PagerAdapter;\n+import com.example.mobserv.remoteapp.fragments.ThreeFragment;\n+import com.example.mobserv.remoteapp.fragments.TwoFragment;\n+\n import java.util.ArrayList;\n import java.util.List;\n \n /**\n  * Created by pacel_000 on 22/10/2015.\n  */\n-public class ClientActivity extends FragmentActivity implements TaskFragment.TaskCallbacks {\n+public class ClientActivity extends AppCompatActivity implements TaskFragment.TaskCallbacks{\n+    /*private SmartFragmentStatePagerAdapter adapterViewPager;\n+    @Override\n+    protected void onCreate(Bundle savedInstanceState) {\n+        super.onCreate(savedInstanceState);\n+        setContentView(R.layout.activity_client);\n+        ViewPager vpPager \u003d (ViewPager) findViewById(R.id.vpPager);\n+        adapterViewPager \u003d new MyPagerAdapter(getSupportFragmentManager());\n+        vpPager.setAdapter(adapterViewPager);\n+        vpPager.setOffscreenPageLimit(3);\n+    }\n \n+    // Extend from SmartFragmentStatePagerAdapter now instead for more dynamic ViewPager items\n+    public static class MyPagerAdapter extends SmartFragmentStatePagerAdapter {\n+        private static int NUM_ITEMS \u003d 3;\n+\n+        public MyPagerAdapter(FragmentManager fragmentManager) {\n+            super(fragmentManager);\n+        }\n+\n+        // Returns total number of pages\n+        @Override\n+        public int getCount() {\n+            return NUM_ITEMS;\n+        }\n+\n+        // Returns the fragment to display for that page\n+        @Override\n+        public Fragment getItem(int position) {\n+            switch (position) {\n+                case 0: // Fragment # 0 - This will show FirstFragment\n+                    return TwoFragment.newInstance(0, \"Page # 1\");\n+                case 1: // Fragment # 0 - This will show FirstFragment different title\n+                    return TwoFragment.newInstance(1, \"Page # 2\");\n+                case 2: // Fragment # 1 - This will show SecondFragment\n+                    return TwoFragment.newInstance(2, \"Page # 3\");\n+                default:\n+                    return null;\n+            }\n+        }\n+\n+        // Returns the page title for the top indicator\n+        @Override\n+        public CharSequence getPageTitle(int position) {\n+            return \"Page \" + position;\n+        }\n+    }*/\n+    private List\u003cString\u003e clientsList;\n     private static final String TAG \u003d TaskFragment.class.getSimpleName();\n     private static final boolean DEBUG \u003d true; // Set this to false to disable logs .\n \n     private static final int serverport \u003d 45678;\n     private static final String CLIENTS_LIST \u003d \"clientsList\";\n-    private static final String TEXT_SCROLL_X \u003d \"tScrollX\";\n-    private static final String TEXT_SCROLL_Y \u003d \"tScrollY\";\n \n     private String serverip \u003d \"another dummy IP\";\n-    private TextView text;\n-    private EditText et;\n-    private List\u003cString\u003e clientsList;\n-    private SurfaceView mSurfaceView;\n-    private ImageView contactImage;\n-    private CameraPreview preview;\n-    private boolean nameTaken;\n \n     private static final String TAG_TASK_FRAGMENT \u003d \"task_fragment\";\n     private TaskFragment mTaskFragment;\n \n+    private OneFragment oneFragment;\n+    private TwoFragment twoFragment;\n+    private ThreeFragment threeFragment;\n+\n+    private PagerSlidingTabStrip tabs;\n+    private ViewPager pager;\n+    private PagerAdapter adapter;\n \n     @Override\n     public void onCreate(Bundle savedInstanceState) {\n         super.onCreate(savedInstanceState);\n         setContentView(R.layout.activity_client);\n-        text \u003d (TextView) findViewById(R.id.idClientText);\n-        text.setMovementMethod(new ScrollingMovementMethod());\n-        et \u003d (EditText) findViewById(R.id.idClientEditText);\n-        mSurfaceView \u003d (SurfaceView) findViewById(R.id.surfaceView);\n-        contactImage \u003d (ImageView) findViewById(R.id.photo);\n-\n-        preview \u003d new CameraPreview(this, (SurfaceView) findViewById(R.id.surfaceView));\n-        preview.setKeepScreenOn(true);\n-        DisplayMetrics metrics \u003d new DisplayMetrics();\n-        getWindowManager().getDefaultDisplay().getMetrics(metrics);\n-        mSurfaceView.setX(metrics.widthPixels + 1);\n \n+        tabs \u003d (PagerSlidingTabStrip) findViewById(R.id.tabs);\n+        pager \u003d (ViewPager) findViewById(R.id.pager);\n+\n+        adapter \u003d new PagerAdapter(getSupportFragmentManager());\n+        oneFragment \u003d new OneFragment();\n+        twoFragment \u003d new TwoFragment();\n+        threeFragment \u003d new ThreeFragment();\n+        adapter.addFragment(oneFragment, \"Home\", 0);\n+        adapter.addFragment(twoFragment, \"Live\", 0);\n+        adapter.addFragment(threeFragment, \"Photo\", 0);\n+        pager.setAdapter(adapter);\n+        pager.setOffscreenPageLimit(3);\n+        tabs.setViewPager(pager);\n+\n+        /*\n+        Toolbar toolbar \u003d (Toolbar) findViewById(R.id.toolbar);\n+        setSupportActionBar(toolbar);\n+\n+        TabLayout tabLayout \u003d (TabLayout) findViewById(R.id.tab_layout);\n+        tabLayout.setTabGravity(TabLayout.GRAVITY_FILL);\n+\n+        final ViewPager viewPager \u003d (ViewPager) findViewById(R.id.pager);\n+        final PagerAdapter adapter \u003d new PagerAdapter(getSupportFragmentManager());\n+        oneFragment \u003d new OneFragment();\n+        twoFragment \u003d new TwoFragment();\n+        threeFragment \u003d new ThreeFragment();\n+        adapter.addFragment(oneFragment, \"Home\");\n+        adapter.addFragment(twoFragment, \"Live\");\n+        adapter.addFragment(threeFragment, \"Photo\");\n+        viewPager.setAdapter(adapter);\n+        viewPager.setOffscreenPageLimit(3);\n+        viewPager.addOnPageChangeListener(new TabLayout.TabLayoutOnPageChangeListener(tabLayout));\n+        tabLayout.setupWithViewPager(viewPager);\n+        tabLayout.setOnTabSelectedListener(new TabLayout.OnTabSelectedListener() {\n+            @Override\n+            public void onTabSelected(TabLayout.Tab tab) {\n+                viewPager.setCurrentItem(tab.getPosition());\n+            }\n+\n+            @Override\n+            public void onTabUnselected(TabLayout.Tab tab) {\n+                if(tab.getPosition() \u003d\u003d 1)\n+                    twoFragment.stopPlayback();\n+            }\n+\n+            @Override\n+            public void onTabReselected(TabLayout.Tab tab) {\n+\n+            }\n+        });\n+        */\n+    }\n+\n+    class notifyTabStripChanged implements Runnable{\n+        int position, notificationsCount;\n+        public notifyTabStripChanged(int position, int notificationsCount) {\n+            this.position \u003d position;\n+            this.notificationsCount \u003d notificationsCount;\n+        }\n+        @Override\n+        public void run() {\n+            LinearLayout tabHost \u003d (LinearLayout) tabs.getChildAt(0);\n+            RelativeLayout tabLayout \u003d (RelativeLayout) tabHost.getChildAt(position);\n+            TextView badge \u003d (TextView) tabLayout.findViewById(R.id.badge);\n+            if (notificationsCount \u003e 0) {\n+                badge.setText(String.valueOf(notificationsCount));\n+                badge.setVisibility(View.VISIBLE);\n+            } else {\n+                badge.setVisibility(View.GONE);\n+            }\n+        }\n+    }\n+\n+    public void startConnection(){\n         FragmentManager fm \u003d getSupportFragmentManager();\n-        mTaskFragment \u003d (TaskFragment) fm.findFragmentByTag(TAG_TASK_FRAGMENT);\n+        mTaskFragment \u003d (TaskFragment) fm.findFragmentByTag(\"task_fragment\");\n \n         Intent it \u003d getIntent();\n-        this.serverip \u003d it.getStringExtra(\"serverip\");\n-\n-        // If the Fragment is non-null, then it is currently being\n-        // retained across a configuration change,\n-        // but otherwise we instantiate a NEW ONE\n-        if (mTaskFragment \u003d\u003d null) {\n+        serverip \u003d it.getStringExtra(\"serverip\");\n+        if (mTaskFragment\u003d\u003d null) {\n             Bundle bd \u003d new Bundle();\n             bd.putString(\"serverip\", serverip);\n             mTaskFragment \u003d new TaskFragment();\n             mTaskFragment.setArguments(bd);\n             fm.beginTransaction().add(mTaskFragment, TAG_TASK_FRAGMENT).commit();\n         }\n-\n-\n-        if(savedInstanceState \u003d\u003d null) { // IF first launch of the activity\n-            et.setFocusable(false);\n-        }\n     }\n \n-    public void onClick(View view) {\n-        String str \u003d et.getText().toString();\n-        mTaskFragment.sendMsg(str);\n-        et.setText(null);\n+    @Override\n+    public boolean onCreateOptionsMenu(Menu menu) {\n+        getMenuInflater().inflate(R.menu.menu_main, menu);\n+        return true;\n     }\n \n-    /**\n-     * Takes the name of the button and concatenates it to\n-     * the current composing message\n-     * @param view (the button)\n-     */\n-    public void onClickEnterText(View view) {\n-        String tmp \u003d et.getText().toString();\n-        tmp +\u003d \"/\" + ((Button) view).getText().toString();\n-        et.setText(tmp);\n-        et.setSelection(et.getText().toString().length());\n-    }\n+    @Override\n+    public boolean onOptionsItemSelected(MenuItem item) {\n+        int id \u003d item.getItemId();\n+        //*if (id \u003d\u003d R.id.action_settings) {\n+        //    return true;\n+        //}\n \n-    class updateUIThread implements Runnable {\n-        private String msg;\n-        public updateUIThread(String str) { this.msg \u003d str; }\n-        @Override\n-        public void run() {\n-            text.setText(text.getText().toString() + msg + \"\\n\");\n-            // code below just makes the text scroll on update/receive of messages\n-            final Layout layout \u003d text.getLayout();\n-            if(layout !\u003d null){\n-                int scrollDelta \u003d layout.getLineBottom(text.getLineCount() - 1)\n-                        - text.getScrollY() - text.getHeight();\n-                if(scrollDelta \u003e 0)\n-                    text.scrollBy(0, scrollDelta);\n-            }\n-        }\n+        return super.onOptionsItemSelected(item);\n     }\n \n-    class updateUIImage implements Runnable {\n-        private Bitmap bitmap;\n-\n-        public updateUIImage(Bitmap bitmap) {this.bitmap \u003d bitmap; }\n-        @Override\n-        public void run() {\n-            contactImage.setImageBitmap(bitmap);\n-        }\n+    @Override\n+    public void onSaveInstanceState(Bundle outState) {\n+        super.onSaveInstanceState(outState);\n+        if(clientsList !\u003d null)\n+            outState.putStringArrayList(CLIENTS_LIST, new ArrayList\u003cString\u003e(clientsList));\n+        oneFragment.saveInstance(outState);\n     }\n \n-    class makeToast implements Runnable{\n-        private String msg;\n-        public makeToast(String msg){ this.msg \u003d msg; }\n-        @Override\n-        public void run() {\n-            Toast.makeText(getApplicationContext(), msg, Toast.LENGTH_SHORT).show();\n+    @Override\n+    protected void onRestoreInstanceState(Bundle savedInstanceState) {\n+        super.onRestoreInstanceState(savedInstanceState);\n+        setClientsList(savedInstanceState.getStringArrayList(CLIENTS_LIST));\n+        List\u003cString\u003e cl \u003d getClientsList();\n+        if (cl !\u003d null)\n+            oneFragment.updateUIClientsListButtons(cl.size(), cl);\n+        if (savedInstanceState !\u003d null) {\n+            oneFragment.scrollText(savedInstanceState);\n         }\n     }\n \n@@ -161,117 +242,49 @@ public void onClick(DialogInterface arg0, int arg1) {\n                 }).create().show();\n     }\n \n-    public void setClientsList(List\u003cString\u003e clientsList){ this.clientsList \u003d clientsList; }\n+    public void onClick(View view) {\n+        String str \u003d oneFragment.getEt().getText().toString();\n+        mTaskFragment.sendMsg(str);\n+        oneFragment.getEt().setText(null);\n+    }\n \n-    class updateUIClientsList implements Runnable{\n-        Integer numOfClients;\n-        List\u003cString\u003e clientsList;\n-        public updateUIClientsList(Integer numOfClients, List\u003cString\u003e clientsList) {\n-            this.clientsList \u003d clientsList;\n-            this.numOfClients \u003d numOfClients;\n-        }\n+    class updateUIThread implements Runnable {\n+        private String msg;\n+        public updateUIThread(String str) { this.msg \u003d str; }\n         @Override\n         public void run() {\n-            ViewGroup linearLayout \u003d (ViewGroup) findViewById(R.id.clientsLinearLayout);\n-            linearLayout.removeAllViews();\n-            for (String clientName : clientsList){\n-                // let\u0027s keep also own name so we can send msgs to ourselves for debugging purposes\n-                //if ( !clientName.equalsIgnoreCase(myName) ) {\n-                    Button bt \u003d new Button(getApplicationContext());\n-                    bt.setText(clientName);\n-                    bt.setOnClickListener(new View.OnClickListener() {\n-                        @Override\n-                        public void onClick(View v) {\n-                            onClickEnterText(v);\n-                        }\n-                    });\n-                    bt.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT));\n-                    linearLayout.addView(bt);\n-                //}\n+            oneFragment.gettext().setText(oneFragment.gettext().getText().toString() + msg + \"\\n\");\n+            // code below just makes the text scroll on update/receive of messages\n+            final Layout layout \u003d oneFragment.gettext().getLayout();\n+            if(layout !\u003d null){\n+                int scrollDelta \u003d layout.getLineBottom(oneFragment.gettext().getLineCount() - 1)\n+                        - oneFragment.gettext().getScrollY() - oneFragment.gettext().getHeight();\n+                if(scrollDelta \u003e 0)\n+                    oneFragment.gettext().scrollBy(0, scrollDelta);\n             }\n-            setClientsList(clientsList);\n         }\n     }\n \n-    public void setNameTaken(boolean val){\n-        this.nameTaken \u003d val;\n-    }\n-\n-    class createNameDialog implements Runnable {\n-        Boolean alreadyTaken;\n-        ClientActivity activity;\n-        public createNameDialog(Boolean alreadyTaken) {\n-            this.alreadyTaken \u003d alreadyTaken;\n-            this.activity \u003d ClientActivity.this;\n-        }\n-\n+    class updateUIImage implements Runnable {\n+        private Bitmap bitmap;\n+        public updateUIImage(Bitmap bitmap) {this.bitmap \u003d bitmap; }\n         @Override\n         public void run() {\n-            final EditText name \u003d new EditText(activity);\n-            name.setHint(\"Name...\");\n-            if (!alreadyTaken) {\n-                new AlertDialog.Builder(activity)\n-                        .setTitle(\"Please choose a username\")\n-                        .setView(name)\n-                        .setPositiveButton(android.R.string.yes, new DialogInterface.OnClickListener() {\n-                            public void onClick(DialogInterface arg0, int arg1) {\n-                                mTaskFragment.sendMsg(name.getText().toString());\n-                            }\n-                        }).create().show();\n-            } else {\n-                new AlertDialog.Builder(activity)\n-                        .setTitle(\"Please choose another username\")\n-                        .setMessage(\"The name you chose had already been picked\")\n-                        .setView(name)\n-                        .setPositiveButton(android.R.string.yes, new DialogInterface.OnClickListener() {\n-                            public void onClick(DialogInterface arg0, int arg1) {\n-                                mTaskFragment.sendMsg(name.getText().toString());\n-                            }\n-                        }).create().show();\n-            }\n+            threeFragment.getContactImage().setImageBitmap(bitmap);\n+            runOnUiThread(new notifyTabStripChanged(2, 1));\n         }\n     }\n \n-    @Override\n-    public void onSaveInstanceState(Bundle outState) {\n-        super.onSaveInstanceState(outState);\n-\n-        if(clientsList !\u003d null)\n-            outState.putStringArrayList(CLIENTS_LIST, new ArrayList\u003cString\u003e(clientsList));\n-        outState.putBoolean(\"nameTaken\", nameTaken);\n-        outState.putInt(TEXT_SCROLL_X, text.getScrollX());\n-        outState.putInt(TEXT_SCROLL_Y, text.getScrollY());\n-\n+    class makeToast implements Runnable{\n+        private String msg;\n+        public makeToast(String msg){ this.msg \u003d msg; }\n+        @Override\n+        public void run() {\n+            Toast.makeText(getApplicationContext(), msg, Toast.LENGTH_SHORT).show();\n+        }\n     }\n \n-    @Override\n-    protected void onRestoreInstanceState(Bundle savedInstanceState) {\n-        super.onRestoreInstanceState(savedInstanceState);\n-\n-        // code below just makes the text scroll on update/receive of messages\n-            /*Layout layout \u003d text.getLayout();\n-            if(layout !\u003d null){\n-                int scrollDelta \u003d layout.getLineBottom(text.getLineCount() - 1)\n-                        - text.getScrollY() - text.getHeight();\n-                if(scrollDelta \u003e 0)\n-                    text.scrollBy(0, scrollDelta);\n-                Log.d(\"onRestore\", \"delta is \"+scrollDelta);\n-            }*/\n-        final int x \u003d savedInstanceState.getInt(TEXT_SCROLL_X);\n-        final int y \u003d savedInstanceState.getInt(TEXT_SCROLL_Y);\n-        text.post(new Runnable() {\n-            @Override\n-            public void run() {\n-                text.scrollTo(x, y);\n-            }\n-        });\n-        List\u003cString\u003e cl \u003d savedInstanceState.getStringArrayList(CLIENTS_LIST);\n-        if(cl !\u003d null)\n-            runOnUiThread(new updateUIClientsList(cl.size(), cl));\n-        nameTaken \u003d savedInstanceState.getBoolean(\"nameTaken\");\n-        if (!nameTaken)\n-            runOnUiThread(new createNameDialog(false));\n-    }\n+    public void setClientsList(List\u003cString\u003e clientsList){ this.clientsList \u003d clientsList; }\n \n     @Override\n     public void onShowToast(String str){\n@@ -280,7 +293,8 @@ public void onShowToast(String str){\n \n     @Override\n     public void onChooseName(Boolean taken) {\n-        runOnUiThread(new createNameDialog(taken));\n+        oneFragment.createNameDialog(taken);\n+        //runOnUiThread(new createNameDialog(taken));\n     }\n \n     @Override\n@@ -289,10 +303,10 @@ public void onConnected() {\n         runOnUiThread(new Runnable() {\n             @Override\n             public void run() {\n-                et.setFocusableInTouchMode(true);\n+                oneFragment.getEt().setFocusableInTouchMode(true);\n             }\n         });\n-        setNameTaken(false);\n+        oneFragment.setNameTaken(false);\n     }\n \n     @Override\n@@ -320,61 +334,123 @@ public String onImageRequested() {\n             onShowToast(\"No camera on this device\");\n         } else {\n             try {\n-                preview.setCamera();\n-                preview.openSurface();\n-                result \u003d preview.takePicture();\n+                oneFragment.getPreview().setCamera();\n+                oneFragment.getPreview().openSurface();\n+                result \u003d oneFragment.getPreview().takePicture();\n             } catch (Exception e) {\n                 Log.d(\"ERROR\", \"Failed to config the camera: \" + e.getMessage());\n             } finally {\n-                preview.closeSurface();\n+                oneFragment.getPreview().closeSurface();\n             }\n         }\n         return result;\n     }\n \n     @Override\n+    public String onLiveRequested() {\n+        if (!getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA)) {\n+            new makeToast(\"No camera on this device\");\n+        } else {\n+            oneFragment.getPreview().liveSetId();\n+            oneFragment.getPreview().openSurface();\n+            oneFragment.getPreview().onResume();\n+            return oneFragment.getPreview().getIpServer() + \":\" + String.valueOf(oneFragment.getPreview().getPortServer());\n+        }\n+        return null;\n+    }\n+\n+    @Override\n     public void onClientListReceived(int numOfClients, List\u003cString\u003e clients) {\n-        runOnUiThread(new updateUIClientsList(numOfClients, clients));\n+        setClientsList(clients);\n+        oneFragment.updateUIClientsListButtons(numOfClients, clientsList);\n+        //runOnUiThread(new OneFragment.updateUIClientsList(numOfClients, clientsList));\n+    }\n+\n+    public void onIpListReceived(int numOfIps, List\u003cString\u003e ips){\n+        runOnUiThread(new notifyTabStripChanged(1, numOfIps));\n+        twoFragment.updateUIIPsListButtons(numOfIps, ips);\n     }\n \n     @Override\n-    public void onWelcome(){\n-        setNameTaken(true);\n+    public void onWelcome() {\n+        oneFragment.setNameTaken(true);\n+    }\n+\n+    /**\n+     * Takes the name of the button and concatenates it to\n+     * the current composing message\n+     * @param view (the button)\n+     */\n+    public void onClickEnterText(View view) {\n+        oneFragment.onClickEnterText(view);\n     }\n \n     /************************/\n+    /*** GETTER \u0026 SETTER ****/\n+    /************************/\n+    public List\u003cString\u003e getClientsList() {\n+        return clientsList;\n+    }\n+    public void setmTaskFragment(TaskFragment mTaskFragment) {\n+        this.mTaskFragment \u003d mTaskFragment;\n+    }\n+\n+    public void setServerip(String serverip) {\n+        this.serverip \u003d serverip;\n+    }\n+\n+    public String getServerip() {\n+        return serverip;\n+    }\n+\n+    public TaskFragment getmTaskFragment() {\n+        return mTaskFragment;\n+    }\n     /***** LOGS \u0026 STUFF *****/\n     /************************/\n \n     @Override\n-    protected void onStart() {\n+    public void onStart() {\n         if (DEBUG) Log.i(TAG, \"onStart()\");\n         super.onStart();\n     }\n \n     @Override\n-    protected void onResume() {\n+    public void onResume() {\n         if (DEBUG) Log.i(TAG, \"onResume()\");\n         super.onResume();\n+        if(oneFragment.getPreview() !\u003d null)\n+            oneFragment.getPreview().onResume();\n     }\n \n     @Override\n-    protected void onPause() {\n+    public void onPause() {\n         if (DEBUG) Log.i(TAG, \"onPause()\");\n+        if(oneFragment.getPreview() !\u003d null)\n+            oneFragment.getPreview().releaseMWakeLock();\n         super.onPause();\n+        if(oneFragment.getPreview() !\u003d null)\n+            oneFragment.getPreview().onPause();\n     }\n \n     @Override\n-    protected void onStop() {\n+    public void onStop() {\n         if (DEBUG) Log.i(TAG, \"onStop()\");\n+        if(oneFragment.getPreview() !\u003d null)\n+            oneFragment.getPreview().releaseMWakeLock();\n         super.onStop();\n+        if(oneFragment.getPreview() !\u003d null)\n+            oneFragment.getPreview().onPause();\n     }\n \n     @Override\n-    protected void onDestroy() {\n+    public void onDestroy() {\n         if (DEBUG) Log.i(TAG, \"onDestroy()\");\n+        if (oneFragment.getPreview() !\u003d null)\n+            oneFragment.getPreview().releaseMWakeLock();\n         super.onDestroy();\n+        if (oneFragment.getPreview() !\u003d null)\n+            oneFragment.getPreview().onPause();\n     }\n \n-\n }"
        },
        {
          "file_name": "RemoteApp/app/src/main/java/com/example/mobserv/remoteapp/GPSTracker.java",
          "patch": "@@ -40,10 +40,8 @@\n \n     // flag for GPS Status\n     boolean isGPSEnabled \u003d false;\n-\n     // flag for network status\n     boolean isNetworkEnabled \u003d false;\n-\n     // flag for GPS Tracking is enabled\n     boolean isGPSTrackingEnabled \u003d false;\n \n@@ -54,16 +52,12 @@\n \n     // How many Geocoder should return our GPSTracker\n     int geocoderMaxResults \u003d 1;\n-\n     // The minimum distance to change updates in meters\n-    private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES \u003d 10; // 10 meters\n-\n+    private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES \u003d 1; // 1 meters , HIGH precision is required\n     // The minimum time between updates in milliseconds\n     private static final long MIN_TIME_BW_UPDATES \u003d 1000 * 60 * 1; // 1 minute\n-\n     // Declaring a Location Manager\n     protected LocationManager locationManager;\n-\n     // Store LocationManager.GPS_PROVIDER or LocationManager.NETWORK_PROVIDER information\n     private String provider_info;\n \n@@ -80,39 +74,29 @@ public void getLocation() {\n \n         try {\n             locationManager \u003d (LocationManager) mContext.getSystemService(LOCATION_SERVICE);\n-\n             //getting GPS status\n             isGPSEnabled \u003d locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);\n-\n             //getting network status\n             isNetworkEnabled \u003d locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);\n-\n             // Try to get location if you GPS Service is enabled\n             if (isGPSEnabled) {\n                 this.isGPSTrackingEnabled \u003d true;\n-\n                 Log.d(TAG, \"Application use GPS Service\");\n-\n                 /*\n                  * This provider determines location using\n                  * satellites. Depending on conditions, this provider may take a while to return\n                  * a location fix.\n                  */\n-\n                 provider_info \u003d LocationManager.GPS_PROVIDER;\n-\n             } else if (isNetworkEnabled) { // Try to get location if you Network Service is enabled\n                 this.isGPSTrackingEnabled \u003d true;\n-\n                 Log.d(TAG, \"Application use Network State to get GPS coordinates\");\n-\n                 /*\n                  * This provider determines location based on\n                  * availability of cell tower and WiFi access points. Results are retrieved\n                  * by means of a network lookup.\n                  */\n                 provider_info \u003d LocationManager.NETWORK_PROVIDER;\n-\n             }\n \n             // Application can use GPS or Network Provider\n@@ -155,6 +139,7 @@ public void getLocation() {\n      * Update GPSTracker latitude and longitude\n      */\n     public void updateGPSCoordinates() {\n+\n         if (location !\u003d null) {\n             latitude \u003d location.getLatitude();\n             longitude \u003d location.getLongitude();\n@@ -350,6 +335,11 @@ public String getCountryName(Context context) {\n \n     @Override\n     public void onLocationChanged(Location location) {\n+        this.location \u003d location;\n+        /* the biggest bug was here\n+            when the location was changed and this function was triggered\n+             there was no update of the location saved\n+         */\n     }\n \n     @Override"
        },
        {
          "file_name": "RemoteApp/app/src/main/java/com/example/mobserv/remoteapp/LiveActivity.java",
          "patch": "@@ -0,0 +1,29 @@\n+package com.example.mobserv.remoteapp;\n+\n+import android.os.Bundle;\n+import android.support.design.widget.FloatingActionButton;\n+import android.support.design.widget.Snackbar;\n+import android.support.v7.app.AppCompatActivity;\n+import android.support.v7.widget.Toolbar;\n+import android.view.View;\n+\n+public class LiveActivity extends AppCompatActivity {\n+\n+    @Override\n+    protected void onCreate(Bundle savedInstanceState) {\n+        super.onCreate(savedInstanceState);\n+        setContentView(R.layout.activity_live);\n+        Toolbar toolbar \u003d (Toolbar) findViewById(R.id.toolbar);\n+        setSupportActionBar(toolbar);\n+\n+        FloatingActionButton fab \u003d (FloatingActionButton) findViewById(R.id.fab);\n+        fab.setOnClickListener(new View.OnClickListener() {\n+            @Override\n+            public void onClick(View view) {\n+                Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\n+                        .setAction(\"Action\", null).show();\n+            }\n+        });\n+    }\n+\n+}"
        },
        {
          "file_name": "RemoteApp/app/src/main/java/com/example/mobserv/remoteapp/MainActivity.java",
          "patch": "@@ -26,3 +26,4 @@ public void onClickClient (View view ){\n         startActivity(it); // TODO manifest\n     }\n }\n+"
        },
        {
          "file_name": "RemoteApp/app/src/main/java/com/example/mobserv/remoteapp/TaskFragment.java",
          "patch": "@@ -1,13 +1,12 @@\n package com.example.mobserv.remoteapp;\n \n import android.app.Activity;\n-import android.content.Context;\n import android.content.Intent;\n import android.graphics.Bitmap;\n import android.graphics.BitmapFactory;\n import android.graphics.Matrix;\n-import android.support.v4.app.Fragment;\n import android.os.Bundle;\n+import android.support.v4.app.Fragment;\n import android.text.TextUtils;\n import android.util.Base64;\n import android.util.Log;\n@@ -41,15 +40,17 @@\n      * Callback interface through which the fragment will report the\n      * task\u0027s progress and results back to the Activity.\n      */\n-    interface TaskCallbacks {\n+    public interface TaskCallbacks {\n         void onConnected();\n         void onFragmentCancel();\n         void onTextReceived(String str);\n         void onShowToast(String str);\n         void onChooseName(Boolean taken);\n         void onImageReceived(Bitmap decodedByte);\n         void onClientListReceived(int numOfClients, List\u003cString\u003e clients);\n+        void onIpListReceived(int numOfIps, List\u003cString\u003e ips);\n         void onWelcome();\n+        String onLiveRequested();\n         String onImageRequested();\n     }\n \n@@ -74,15 +75,10 @@\n      * each configuration change.\n      */\n     @Override\n-    public void onAttach(Context context) {\n-        super.onAttach(context);\n-\n-        if(context instanceof TaskCallbacks) {\n-            mCallbacks \u003d (TaskCallbacks) context;\n-        }\n-        if (context instanceof Activity){\n-            attachedActivity \u003d (Activity) context;\n-        }\n+    public void onAttach(Activity activity) {\n+        super.onAttach(activity);\n+        mCallbacks \u003d (TaskCallbacks) activity;\n+        attachedActivity \u003d activity;\n     }\n \n     /**\n@@ -173,6 +169,7 @@ public void run() {\n             }\n \n             mCallbacks.onFragmentCancel();\n+            return;\n         }\n \n         /**\n@@ -251,7 +248,7 @@ public void messageIsWrite(String senderName, String[] args) {\n                                     break;\n                                 }\n                             }\n-                            total.append(line).append(\"\\n\");\n+                            total.append(line + \"\\n\");\n                         }\n                         encodedImage \u003d total.toString();\n                         byte[] decodedString \u003d Base64.decode(encodedImage, Base64.DEFAULT);\n@@ -269,12 +266,13 @@ public void messageIsWrite(String senderName, String[] args) {\n                         Double lon \u003d Double.parseDouble(args[4]);\n                         Double lat \u003d Double.parseDouble(args[5]);\n                         Double alt \u003d Double.parseDouble(args[6]);\n-                        onGpsReceived(lat,lon,senderName);\n                         mCallbacks.onShowToast(\"Received GPS position from \" + senderName + \":\\n\" + TextUtils.join(\"/\", Arrays.asList(args).subList(4, 7)));\n+                        onGpsReceived(lat, lon, senderName);\n                     } catch (ArrayIndexOutOfBoundsException e){\n                         Log.d(\"msgIsWrite\", \"bad format in msg write gps: \"+ TextUtils.join(\"/\", args));\n                     }\n                     break;\n+\n                 default:\n                     mCallbacks.onShowToast(\"Unknown WRITE message:\\n\" + TextUtils.join(\"/\", args));\n \n@@ -292,6 +290,7 @@ public void messageIsRead(String senderName, String[] args) {\n             String data \u003d null;\n             switch (args[3]) {\n                 case \"gps\":\n+                    gpsTracker.updateGPSCoordinates();\n                     if (gpsTracker.getIsGPSTrackingEnabled()) {\n                         reply.add(\"write\");\n                         reply.add(\"gps\");\n@@ -310,12 +309,26 @@ public void messageIsRead(String senderName, String[] args) {\n                     Log.d(\"msgIsRead\", \"Parsed list of clients: \" + numOfClients + \" \" + clients.toString());\n                     mCallbacks.onClientListReceived(numOfClients, clients);\n                     break;\n+                case \"liveIps\":\n+                    int numOfIPs \u003d Integer.parseInt(args[4]);\n+                    List\u003cString\u003e ips \u003d new LinkedList\u003c\u003e();\n+                    ips.addAll(Arrays.asList(args).subList(5, args.length));\n+                    Log.d(\"msgIsRead\", \"Parsed list of ips: \" + numOfIPs + \" \" + ips.toString());\n+                    mCallbacks.onIpListReceived(numOfIPs, ips);\n+                    break;\n                 case \"photo\":\n                     String encodedImage \u003d mCallbacks.onImageRequested();\n                     reply.add(\"write\");\n                     reply.add(\"photo\");\n                     data \u003d encodedImage;\n                     break;\n+                case \"live\":\n+                    String ip \u003d mCallbacks.onLiveRequested();\n+                    reply.add(\"write\");\n+                    reply.add(\"live\");\n+                    if(ip !\u003d null)\n+                        reply.add(ip);\n+                    break;\n                 case \"nametaken\":\n                     if (!nameTaken) {\n                         mCallbacks.onChooseName(true);\n@@ -388,6 +401,14 @@ public void closeSocket(){\n         }\n     }\n \n+    private void onGpsReceived(Double lat, Double lon, String senderName) {\n+        Intent it \u003d new Intent(\"com.example.mobserv.remoteapp.MapActivity\");\n+        it.putExtra(\"latitude\", lat);\n+        it.putExtra(\"longitude\", lon);\n+        it.putExtra(\"nametoshow\", senderName);\n+        startActivity(it);\n+    }\n+\n     /************************/\n     /***** LOGS \u0026 STUFF *****/\n     /************************/\n@@ -421,13 +442,4 @@ public void onStop() {\n         if (DEBUG) Log.i(TAG, \"onStop()\");\n         super.onStop();\n     }\n-\n-    private void onGpsReceived(Double lat, Double lon, String senderName) {\n-        Intent it \u003d new Intent(\"com.example.mobserv.remoteapp.MapActivity\");\n-        it.putExtra(\"latitude\", lat);\n-        it.putExtra(\"longitude\", lon);\n-        it.putExtra(\"nametoshow\", senderName);\n-        startActivity(it);\n-    }\n-\n }"
        },
        {
          "file_name": "RemoteApp/app/src/main/java/com/example/mobserv/remoteapp/camera/CameraStreamer.java",
          "patch": "@@ -29,6 +29,7 @@\n import android.view.SurfaceHolder;\n \n import java.io.IOException;\n+import java.io.OutputStream;\n import java.util.List;\n \n /* package */ public final class CameraStreamer extends Object\n@@ -313,6 +314,105 @@ private void sendPreviewFrame(final byte[] data, final Camera camera, final long\n         camera.addCallbackBuffer(data);\n    } // sendPreviewFrame(byte[], camera, long)\n \n+    final class MovingAverage\n+    {\n+        private final int mNumValues;\n+        private final long[] mValues;\n+        private int mEnd \u003d 0;\n+        private int mLength \u003d 0;\n+        private long mSum \u003d 0L;\n+\n+        /* package */ MovingAverage(final int numValues)\n+        {\n+            super();\n+            mNumValues \u003d numValues;\n+            mValues \u003d new long[numValues];\n+        } // constructor()\n+\n+        /* package */ void update(final long value)\n+        {\n+            mSum -\u003d mValues[mEnd];\n+            mValues[mEnd] \u003d value;\n+            mEnd \u003d (mEnd + 1) % mNumValues;\n+            if (mLength \u003c mNumValues)\n+            {\n+                mLength++;\n+            } // if\n+            mSum +\u003d value;\n+        } // update(long)\n+\n+        /* package */ double getAverage()\n+        {\n+            return mSum / (double) mLength;\n+        } // getAverage()\n+\n+    } // class MovingAverage\n+\n+    /* package */ final class MemoryOutputStream extends OutputStream\n+    {\n+        private final byte[] mBuffer;\n+        private int mLength \u003d 0;\n+\n+        /* package */ MemoryOutputStream(final int size)\n+        {\n+            this(new byte[size]);\n+        } // constructor(int)\n+\n+        /* package */ MemoryOutputStream(final byte[] buffer)\n+        {\n+            super();\n+            mBuffer \u003d buffer;\n+        } // constructor(byte[])\n+\n+        @Override\n+        public void write(final byte[] buffer, final int offset, final int count)\n+                throws IOException\n+        {\n+            checkSpace(count);\n+            System.arraycopy(buffer, offset, mBuffer, mLength, count);\n+            mLength +\u003d count;\n+        } // write(buffer, offset, count)\n+\n+        @Override\n+        public void write(final byte[] buffer) throws IOException\n+        {\n+            checkSpace(buffer.length);\n+            System.arraycopy(buffer, 0, mBuffer, mLength, buffer.length);\n+            mLength +\u003d buffer.length;\n+        } // write(byte[])\n+\n+        @Override\n+        public void write(final int oneByte) throws IOException\n+        {\n+            checkSpace(1);\n+            mBuffer[mLength++] \u003d (byte) oneByte;\n+        } // write(int)\n+\n+        private void checkSpace(final int length) throws IOException\n+        {\n+            if (mLength + length \u003e\u003d mBuffer.length)\n+            {\n+                throw new IOException(\"insufficient space in buffer\");\n+            } // if\n+        } // checkSpace(int)\n+\n+        /* package */ void seek(final int index)\n+        {\n+            mLength \u003d index;\n+        } // seek(int)\n+\n+        /* package */ byte[] getBuffer()\n+        {\n+            return mBuffer;\n+        } // getBuffer()\n+\n+        /* package */ int getLength()\n+        {\n+            return mLength;\n+        } // getLength()\n+\n+    } // class MemoryOutputStream\n+\n \n } // class CameraStreamer\n "
        },
        {
          "file_name": "RemoteApp/app/src/main/java/com/example/mobserv/remoteapp/camera/MJpegHttpStreamer.java",
          "patch": "@@ -15,11 +15,15 @@\n \n package com.example.mobserv.remoteapp.camera;\n \n+import android.util.Log;\n+\n import java.io.DataOutputStream;\n import java.io.IOException;\n import java.net.ServerSocket;\n import java.net.Socket;\n import java.net.SocketTimeoutException;\n+import java.util.concurrent.ExecutorService;\n+import java.util.concurrent.Executors;\n \n /* package */ public final class MJpegHttpStreamer\n {\n@@ -73,13 +77,42 @@\n         } // if\n \n         mRunning \u003d true;\n+        final ExecutorService clientProcessingPool \u003d Executors.newFixedThreadPool(10);\n         mWorker \u003d new Thread(new Runnable()\n         {\n             @Override\n-            public void run()\n-            {\n-                workerRun();\n-            } // run()\n+            public void run() {\n+                ServerSocket serverSocket \u003d null;\n+                Socket clientSocket \u003d null;\n+                try {\n+                    serverSocket \u003d new ServerSocket(mPort);\n+                    serverSocket.setSoTimeout(2000 /* milliseconds */);\n+                    System.out.println(\"Waiting for clients to connect...\");\n+                    while (true) {\n+                        try {\n+                            clientSocket \u003d serverSocket.accept();\n+                            clientProcessingPool.submit(new ClientTask(clientSocket));\n+                        } // try\n+                        catch (final SocketTimeoutException e) {\n+                            if (!mRunning) {\n+                                return;\n+                            } // if\n+                        } // catch\n+                    }\n+                } catch (IOException e) {\n+                    System.err.println(\"Unable to process client request\");\n+                    e.printStackTrace();\n+                } finally {\n+                    if (serverSocket !\u003d null) {\n+                        try {\n+                            serverSocket.close();\n+                        } // try\n+                        catch (final IOException closingServerSocket) {\n+                            System.err.println(closingServerSocket);\n+                        } // catch\n+                    } // if\n+                } // run()\n+            }\n         });\n         mWorker.start();\n     } // start()\n@@ -118,141 +151,138 @@ public void run()\n         } // synchronized\n     } // streamJpeg(byte[], int, long)\n \n-    private void workerRun()\n-    {\n-        while (mRunning)\n-        {\n-            try\n-            {\n-                acceptAndStream();\n-            } // try\n-            catch (final IOException exceptionWhileStreaming)\n-            {\n-                System.err.println(exceptionWhileStreaming);\n-            } // catch\n-        } // while\n-    } // mainLoop()\n-\n-    private void acceptAndStream() throws IOException\n-    {\n-        ServerSocket serverSocket \u003d null;\n-        Socket socket \u003d null;\n-        DataOutputStream stream \u003d null;\n-\n-        try\n-        {\n-            serverSocket \u003d new ServerSocket(mPort);\n-            serverSocket.setSoTimeout(1000 /* milliseconds */);\n+/*\n+    public void startServer() throws IOException{\n+        final ExecutorService clientProcessingPool \u003d Executors.newFixedThreadPool(10);\n \n-            do\n-            {\n-                try\n-                {\n-                    socket \u003d serverSocket.accept();\n-                } // try\n-                catch (final SocketTimeoutException e)\n-                {\n-                    if (!mRunning)\n-                    {\n-                        return;\n-                    } // if\n-                } // catch\n-            } while (socket \u003d\u003d null);\n-\n-            serverSocket.close();\n-            serverSocket \u003d null;\n-            stream \u003d new DataOutputStream(socket.getOutputStream());\n-            stream.writeBytes(HTTP_HEADER);\n-            stream.flush();\n-\n-            while (mRunning)\n-            {\n-                final byte[] buffer;\n-                final int length;\n-                final long timestamp;\n-\n-                synchronized (mBufferLock)\n-                {\n-                    while (!mNewJpeg)\n+        Runnable serverTask \u003d new Runnable() {\n+            @Override\n+            public void run() {\n+                ServerSocket serverSocket \u003d null;\n+                Socket clientSocket \u003d null;\n+                try {\n+                    serverSocket \u003d new ServerSocket(mPort);\n+                    //serverSocket.setSoTimeout(1000);\n+                    System.out.println(\"Waiting for clients to connect...\");\n+                    do\n                     {\n                         try\n                         {\n-                            mBufferLock.wait();\n+                            clientSocket \u003d serverSocket.accept();\n+                            clientProcessingPool.submit(new ClientTask(clientSocket));\n                         } // try\n-                        catch (final InterruptedException stopMayHaveBeenCalled)\n+                        catch (final SocketTimeoutException e)\n                         {\n-                            // stop() may have been called\n-                            return;\n+                            if (!mRunning)\n+                            {\n+                                return;\n+                            } // if\n                         } // catch\n-                    } // while\n-\n-                    mStreamingBufferA \u003d !mStreamingBufferA;\n-\n-                    if (mStreamingBufferA)\n+                    } while (clientSocket \u003d\u003d null);\n+                } catch (IOException e) {\n+                    System.err.println(\"Unable to process client request\");\n+                    e.printStackTrace();\n+                } finally {\n+                    /*\n+                    if (serverSocket !\u003d null)\n                     {\n-                        buffer \u003d mBufferA;\n-                        length \u003d mLengthA;\n-                        timestamp \u003d mTimestampA;\n+                        try\n+                        {\n+                            serverSocket.close();\n+                        } // try\n+                        catch (final IOException closingServerSocket)\n+                        {\n+                            System.err.println(closingServerSocket);\n+                        } // catch\n                     } // if\n-                    else\n-                    {\n-                        buffer \u003d mBufferB;\n-                        length \u003d mLengthB;\n-                        timestamp \u003d mTimestampB;\n-                    } // else\n+                }\n+            }\n+        };\n+        Thread serverThread \u003d new Thread(serverTask);\n+        serverThread.start();\n+    }*/\n+\n+    private class ClientTask implements Runnable {\n+        private final Socket socket;\n \n-                    mNewJpeg \u003d false;\n-                } // synchronized\n+        private ClientTask(Socket clientSocket) {\n+            socket \u003d clientSocket;\n+        }\n \n-                stream.writeBytes(\n-                    \"Content-type: image/jpeg\\r\\n\"\n-                    + \"Content-Length: \" + length + \"\\r\\n\"\n-                    + \"X-Timestamp:\" + timestamp + \"\\r\\n\"\n-                    + \"\\r\\n\"\n-                );\n-                stream.write(buffer, 0 /* offset */, length);\n-                stream.writeBytes(BOUNDARY_LINES);\n+        @Override\n+        public void run() {\n+            DataOutputStream stream \u003d null;\n+            try {\n+                stream \u003d new DataOutputStream(socket.getOutputStream());\n+                stream.writeBytes(HTTP_HEADER);\n                 stream.flush();\n-            } // while\n-        } // try\n-        finally\n-        {\n-            if (stream !\u003d null)\n-            {\n-                try\n-                {\n-                    stream.close();\n-                } // try\n-                catch (final IOException closingStream)\n-                {\n-                    System.err.println(closingStream);\n-                } // catch\n-            } //\n-            if (socket !\u003d null)\n-            {\n-                try\n-                {\n-                    socket.close();\n-                } // try\n-                catch (final IOException closingSocket)\n-                {\n-                    System.err.println(closingSocket);\n-                } // catch\n-            } // socket\n-            if (serverSocket !\u003d null)\n-            {\n-                try\n-                {\n-                    serverSocket.close();\n-                } // try\n-                catch (final IOException closingServerSocket)\n-                {\n-                    System.err.println(closingServerSocket);\n-                } // catch\n-            } // if\n-        } // finally\n-    } // accept()\n \n+                while (mRunning) {\n+                    final byte[] buffer;\n+                    final int length;\n+                    final long timestamp;\n \n-} // class MJpegHttpStreamer\n+                    synchronized (mBufferLock) {\n+                        while (!mNewJpeg) {\n+                            try {\n+                                mBufferLock.wait();\n+                            } // try\n+                            catch (final InterruptedException stopMayHaveBeenCalled) {\n+                                // stop() may have been called\n+                                return;\n+                            } // catch\n+                        } // while\n+\n+                        mStreamingBufferA \u003d !mStreamingBufferA;\n+\n+                        if (mStreamingBufferA) {\n+                            buffer \u003d mBufferA;\n+                            length \u003d mLengthA;\n+                            timestamp \u003d mTimestampA;\n+                        } // if\n+                        else {\n+                            buffer \u003d mBufferB;\n+                            length \u003d mLengthB;\n+                            timestamp \u003d mTimestampB;\n+                        } // else\n+\n+                        mNewJpeg \u003d false;\n+                    } // synchronized\n+\n+                    stream.writeBytes(\n+                            \"Content-type: image/jpeg\\r\\n\"\n+                                    + \"Content-Length: \" + length + \"\\r\\n\"\n+                                    + \"X-Timestamp:\" + timestamp + \"\\r\\n\"\n+                                    + \"\\r\\n\"\n+                    );\n+                    stream.write(buffer, 0 /* offset */, length);\n+                    stream.writeBytes(BOUNDARY_LINES);\n+                    stream.flush();\n+                } // while\n+            } // try\n+            catch (IOException e) {\n+                e.printStackTrace();\n+            } finally {\n+                if (stream !\u003d null) {\n+                    try {\n+                        Log.d(\"MjpegStreaming\", \"Streaming closed\");\n+                        stream.close();\n+                    } // try\n+                    catch (final IOException closingStream) {\n+                        System.err.println(closingStream);\n+                    } // catch\n+                } //\n+                if (socket !\u003d null) {\n+                    try {\n+                        Log.d(\"MjpegStreaming\", \"Socket closed\");\n+                        socket.close();\n+                    } // try\n+                    catch (final IOException closingSocket) {\n+                        System.err.println(closingSocket);\n+                    } // catch\n+                } // socket\n \n+            }\n+        }\n+    }\n+}\n\\ No newline at end of file"
        },
        {
          "file_name": "RemoteApp/app/src/main/java/com/example/mobserv/remoteapp/camera/MemoryOutputStream.java",
          "patch": "@@ -1,85 +0,0 @@\n-/* Copyright 2013 Foxdog Studios Ltd\n- *\n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific language governing permissions and\n- * limitations under the License.\n- */\n-\n-package com.example.mobserv.remoteapp.camera;\n-\n-import java.io.IOException;\n-import java.io.OutputStream;\n-\n-/* package */ public final class MemoryOutputStream extends OutputStream\n-{\n-    private final byte[] mBuffer;\n-    private int mLength \u003d 0;\n-\n-    /* package */ MemoryOutputStream(final int size)\n-    {\n-        this(new byte[size]);\n-    } // constructor(int)\n-\n-    /* package */ MemoryOutputStream(final byte[] buffer)\n-    {\n-        super();\n-        mBuffer \u003d buffer;\n-    } // constructor(byte[])\n-\n-    @Override\n-    public void write(final byte[] buffer, final int offset, final int count)\n-            throws IOException\n-    {\n-        checkSpace(count);\n-        System.arraycopy(buffer, offset, mBuffer, mLength, count);\n-        mLength +\u003d count;\n-    } // write(buffer, offset, count)\n-\n-    @Override\n-    public void write(final byte[] buffer) throws IOException\n-    {\n-        checkSpace(buffer.length);\n-        System.arraycopy(buffer, 0, mBuffer, mLength, buffer.length);\n-        mLength +\u003d buffer.length;\n-    } // write(byte[])\n-\n-    @Override\n-    public void write(final int oneByte) throws IOException\n-    {\n-        checkSpace(1);\n-        mBuffer[mLength++] \u003d (byte) oneByte;\n-    } // write(int)\n-\n-    private void checkSpace(final int length) throws IOException\n-    {\n-        if (mLength + length \u003e\u003d mBuffer.length)\n-        {\n-            throw new IOException(\"insufficient space in buffer\");\n-        } // if\n-    } // checkSpace(int)\n-\n-    /* package */ void seek(final int index)\n-    {\n-        mLength \u003d index;\n-    } // seek(int)\n-\n-    /* package */ byte[] getBuffer()\n-    {\n-        return mBuffer;\n-    } // getBuffer()\n-\n-    /* package */ int getLength()\n-    {\n-        return mLength;\n-    } // getLength()\n-\n-} // class MemoryOutputStream\n-"
        },
        {
          "file_name": "RemoteApp/app/src/main/java/com/example/mobserv/remoteapp/camera/MjpegInputStream.java",
          "patch": "@@ -0,0 +1,97 @@\n+package com.example.mobserv.remoteapp.camera;\n+\n+import android.graphics.Bitmap;\n+import android.graphics.BitmapFactory;\n+\n+import java.io.BufferedInputStream;\n+import java.io.ByteArrayInputStream;\n+import java.io.DataInputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.HttpURLConnection;\n+import java.net.MalformedURLException;\n+import java.net.ProtocolException;\n+import java.net.URL;\n+import java.util.Properties;\n+\n+/**\n+ * Created by alessioalberti on 13/12/15.\n+ */\n+public class MjpegInputStream extends DataInputStream {\n+    private final byte[] SOI_MARKER \u003d { (byte) 0xFF, (byte) 0xD8 };\n+    private final byte[] EOF_MARKER \u003d { (byte) 0xFF, (byte) 0xD9 };\n+    private final String CONTENT_LENGTH \u003d \"Content-Length\";\n+    private final static int HEADER_MAX_LENGTH \u003d 100;\n+    private final static int FRAME_MAX_LENGTH \u003d 40000 + HEADER_MAX_LENGTH;\n+    private int mContentLength \u003d -1;\n+\n+    public static MjpegInputStream read(String url) {\n+        /*\n+        HttpResponse res;\n+        DefaultHttpClient httpclient \u003d new DefaultHttpClient();\n+        try {\n+            res \u003d httpclient.execute(new HttpGet(URI.create(url)));\n+            return new MjpegInputStream(res.getEntity().getContent());\n+        } catch (ClientProtocolException e) {\n+        } catch (IOException e) {}*/\n+        try {\n+            HttpURLConnection connection \u003d (HttpURLConnection) new URL(url).openConnection();\n+            connection.setRequestMethod(\"GET\");\n+            connection.connect();\n+            return new MjpegInputStream(connection.getInputStream());\n+        } catch (MalformedURLException e) {\n+            e.printStackTrace();\n+        } catch (ProtocolException e) {\n+            e.printStackTrace();\n+        } catch (IOException e) {\n+            e.printStackTrace();\n+        }\n+\n+        return null;\n+    }\n+\n+    public MjpegInputStream(InputStream in) { super(new BufferedInputStream(in, FRAME_MAX_LENGTH)); }\n+\n+    private int getEndOfSeqeunce(DataInputStream in, byte[] sequence) throws IOException {\n+        int seqIndex \u003d 0;\n+        byte c;\n+        for(int i\u003d0; i \u003c FRAME_MAX_LENGTH; i++) {\n+            c \u003d (byte) in.readUnsignedByte();\n+            if(c \u003d\u003d sequence[seqIndex]) {\n+                seqIndex++;\n+                if(seqIndex \u003d\u003d sequence.length) return i + 1;\n+            } else seqIndex \u003d 0;\n+        }\n+        return -1;\n+    }\n+\n+    private int getStartOfSequence(DataInputStream in, byte[] sequence) throws IOException {\n+        int end \u003d getEndOfSeqeunce(in, sequence);\n+        return (end \u003c 0) ? (-1) : (end - sequence.length);\n+    }\n+\n+    private int parseContentLength(byte[] headerBytes) throws IOException, NumberFormatException {\n+        ByteArrayInputStream headerIn \u003d new ByteArrayInputStream(headerBytes);\n+        Properties props \u003d new Properties();\n+        props.load(headerIn);\n+        return Integer.parseInt(props.getProperty(CONTENT_LENGTH));\n+    }\n+\n+    public Bitmap readMjpegFrame() throws IOException {\n+        mark(FRAME_MAX_LENGTH);\n+        int headerLen \u003d getStartOfSequence(this, SOI_MARKER);\n+        reset();\n+        byte[] header \u003d new byte[headerLen];\n+        readFully(header);\n+        try {\n+            mContentLength \u003d parseContentLength(header);\n+        } catch (NumberFormatException nfe) {\n+            mContentLength \u003d getEndOfSeqeunce(this, EOF_MARKER);\n+        }\n+        reset();\n+        byte[] frameData \u003d new byte[mContentLength];\n+        skipBytes(headerLen);\n+        readFully(frameData);\n+        return BitmapFactory.decodeStream(new ByteArrayInputStream(frameData));\n+    }\n+}\n\\ No newline at end of file"
        },
        {
          "file_name": "RemoteApp/app/src/main/java/com/example/mobserv/remoteapp/camera/MjpegView.java",
          "patch": "@@ -0,0 +1,239 @@\n+package com.example.mobserv.remoteapp.camera;\n+\n+import android.content.Context;\n+import android.graphics.Bitmap;\n+import android.graphics.Canvas;\n+import android.graphics.Color;\n+import android.graphics.Paint;\n+import android.graphics.PorterDuff;\n+import android.graphics.PorterDuffXfermode;\n+import android.graphics.Rect;\n+import android.graphics.Typeface;\n+import android.util.AttributeSet;\n+import android.util.Log;\n+import android.view.SurfaceHolder;\n+import android.view.SurfaceView;\n+\n+import java.io.IOException;\n+\n+/**\n+ * Created by alessioalberti on 13/12/15.\n+ */\n+public class MjpegView extends SurfaceView implements SurfaceHolder.Callback {\n+    private static final String TAG \u003d \"MjpegView\";\n+\n+    public final static int POSITION_UPPER_LEFT \u003d 9;\n+    public final static int POSITION_UPPER_RIGHT \u003d 3;\n+    public final static int POSITION_LOWER_LEFT \u003d 12;\n+    public final static int POSITION_LOWER_RIGHT \u003d 6;\n+\n+    public final static int SIZE_STANDARD \u003d 1;\n+    public final static int SIZE_BEST_FIT \u003d 4;\n+    public final static int SIZE_FULLSCREEN \u003d 8;\n+\n+    private MjpegViewThread thread;\n+    private MjpegInputStream mIn \u003d null;\n+    private boolean showFps \u003d false;\n+    private boolean mRun \u003d false;\n+    private boolean surfaceDone \u003d false;\n+    private Paint overlayPaint;\n+    private int overlayTextColor;\n+    private int overlayBackgroundColor;\n+    private int ovlPos;\n+    private int dispWidth;\n+    private int dispHeight;\n+    private int displayMode;\n+\n+    public class MjpegViewThread extends Thread {\n+        private SurfaceHolder mSurfaceHolder;\n+        private int frameCounter \u003d 0;\n+        private long start;\n+        private Bitmap ovl;\n+\n+        public MjpegViewThread(SurfaceHolder surfaceHolder, Context context) {\n+            mSurfaceHolder \u003d surfaceHolder;\n+        }\n+\n+        private Rect destRect(int bmw, int bmh) {\n+            int tempx;\n+            int tempy;\n+            if (displayMode \u003d\u003d MjpegView.SIZE_STANDARD) {\n+                tempx \u003d (dispWidth / 2) - (bmw / 2);\n+                tempy \u003d (dispHeight / 2) - (bmh / 2);\n+                return new Rect(tempx, tempy, bmw + tempx, bmh + tempy);\n+            }\n+            if (displayMode \u003d\u003d MjpegView.SIZE_BEST_FIT) {\n+                float bmasp \u003d (float) bmw / (float) bmh;\n+                bmw \u003d dispWidth;\n+                bmh \u003d (int) (dispWidth / bmasp);\n+                if (bmh \u003e dispHeight) {\n+                    bmh \u003d dispHeight;\n+                    bmw \u003d (int) (dispHeight * bmasp);\n+                }\n+                tempx \u003d (dispWidth / 2) - (bmw / 2);\n+                tempy \u003d (dispHeight / 2) - (bmh / 2);\n+                return new Rect(tempx, tempy, bmw + tempx, bmh + tempy);\n+            }\n+            if (displayMode \u003d\u003d MjpegView.SIZE_FULLSCREEN)\n+                return new Rect(0, 0, dispWidth, dispHeight);\n+            return null;\n+        }\n+\n+        public void setSurfaceSize(int width, int height) {\n+            synchronized (mSurfaceHolder) {\n+                dispWidth \u003d width;\n+                dispHeight \u003d height;\n+            }\n+        }\n+\n+        private Bitmap makeFpsOverlay(Paint p, String text) {\n+            Rect b \u003d new Rect();\n+            p.getTextBounds(text, 0, text.length(), b);\n+            int bwidth \u003d b.width() + 2;\n+            int bheight \u003d b.height() + 2;\n+            Bitmap bm \u003d Bitmap.createBitmap(bwidth, bheight, Bitmap.Config.ARGB_8888);\n+            Canvas c \u003d new Canvas(bm);\n+            p.setColor(overlayBackgroundColor);\n+            c.drawRect(0, 0, bwidth, bheight, p);\n+            p.setColor(overlayTextColor);\n+            c.drawText(text, -b.left + 1, (bheight / 2) - ((p.ascent() + p.descent()) / 2) + 1, p);\n+            return bm;\n+        }\n+\n+        public void run() {\n+            start \u003d System.currentTimeMillis();\n+            PorterDuffXfermode mode \u003d new PorterDuffXfermode(PorterDuff.Mode.DST_OVER);\n+            Bitmap bm;\n+            int width;\n+            int height;\n+            Rect destRect;\n+            Canvas c \u003d null;\n+            Paint p \u003d new Paint();\n+            String fps \u003d \"\";\n+            while (mRun) {\n+                if (surfaceDone) {\n+                    try {\n+                        c \u003d mSurfaceHolder.lockCanvas();\n+                        synchronized (mSurfaceHolder) {\n+                            try {\n+                                bm \u003d mIn.readMjpegFrame();\n+                                destRect \u003d destRect(bm.getWidth(), bm.getHeight());\n+                                c.drawColor(Color.BLACK);\n+                                c.drawBitmap(bm, null, destRect, p);\n+                                if (showFps) {\n+                                    p.setXfermode(mode);\n+                                    if (ovl !\u003d null) {\n+                                        height \u003d ((ovlPos \u0026 1) \u003d\u003d 1) ? destRect.top : destRect.bottom - ovl.getHeight();\n+                                        width \u003d ((ovlPos \u0026 8) \u003d\u003d 8) ? destRect.left : destRect.right - ovl.getWidth();\n+                                        c.drawBitmap(ovl, width, height, null);\n+                                    }\n+                                    p.setXfermode(null);\n+                                    frameCounter++;\n+                                    if ((System.currentTimeMillis() - start) \u003e\u003d 1000) {\n+                                        fps \u003d String.valueOf(frameCounter) + \"fps\";\n+                                        frameCounter \u003d 0;\n+                                        start \u003d System.currentTimeMillis();\n+                                        ovl \u003d makeFpsOverlay(overlayPaint, fps);\n+                                    }\n+                                }\n+                            } catch (IOException e) {\n+                            }\n+                        }\n+                    } finally {\n+                        if (c !\u003d null) mSurfaceHolder.unlockCanvasAndPost(c);\n+                    }\n+                }\n+            }\n+        }\n+    }\n+\n+    private void init(Context context) {\n+        SurfaceHolder holder \u003d getHolder();\n+        holder.addCallback(this);\n+        thread \u003d new MjpegViewThread(holder, context);\n+        setFocusable(true);\n+        overlayPaint \u003d new Paint();\n+        overlayPaint.setTextAlign(Paint.Align.LEFT);\n+        overlayPaint.setTextSize(12);\n+        overlayPaint.setTypeface(Typeface.DEFAULT);\n+        overlayTextColor \u003d Color.WHITE;\n+        overlayBackgroundColor \u003d Color.BLACK;\n+        ovlPos \u003d MjpegView.POSITION_LOWER_RIGHT;\n+        displayMode \u003d MjpegView.SIZE_STANDARD;\n+        dispWidth \u003d getWidth();\n+        dispHeight \u003d getHeight();\n+    }\n+\n+    public void startPlayback() {\n+        if (mIn !\u003d null \u0026\u0026 mRun !\u003d true) {\n+            mRun \u003d true;\n+            thread.start();\n+        }\n+    }\n+\n+    public void stopPlayback() {\n+        mRun \u003d false;\n+        boolean retry \u003d true;\n+        while (retry) {\n+            try {\n+                thread.join();\n+                retry \u003d false;\n+            } catch (InterruptedException e) {\n+                e.printStackTrace();\n+                Log.d(TAG, \"catch IOException hit in stopPlayback\", e);\n+            }\n+        }\n+    }\n+\n+    public MjpegView(Context context, AttributeSet attrs) {\n+        super(context, attrs);\n+        init(context);\n+    }\n+\n+    public void surfaceChanged(SurfaceHolder holder, int f, int w, int h) {\n+        thread.setSurfaceSize(w, h);\n+    }\n+\n+    public void surfaceDestroyed(SurfaceHolder holder) {\n+        surfaceDone \u003d false;\n+        stopPlayback();\n+    }\n+\n+    public MjpegView(Context context) {\n+        super(context);\n+        init(context);\n+    }\n+\n+    public void surfaceCreated(SurfaceHolder holder) {\n+        surfaceDone \u003d true;\n+    }\n+\n+    public void showFps(boolean b) {\n+        showFps \u003d b;\n+    }\n+\n+    public void setSource(MjpegInputStream source) {\n+        mIn \u003d source;\n+        startPlayback();\n+    }\n+\n+    public void setOverlayPaint(Paint p) {\n+        overlayPaint \u003d p;\n+    }\n+\n+    public void setOverlayTextColor(int c) {\n+        overlayTextColor \u003d c;\n+    }\n+\n+    public void setOverlayBackgroundColor(int c) {\n+        overlayBackgroundColor \u003d c;\n+    }\n+\n+    public void setOverlayPosition(int p) {\n+        ovlPos \u003d p;\n+    }\n+\n+    public void setDisplayMode(int s) {\n+        displayMode \u003d s;\n+    }\n+}"
        },
        {
          "file_name": "RemoteApp/app/src/main/java/com/example/mobserv/remoteapp/camera/MovingAverage.java",
          "patch": "@@ -1,51 +0,0 @@\n-/* Copyright 2013 Foxdog Studios Ltd\n- *\n- * Licensed under the Apache License, Version 2.0 (the \"License\");\n- * you may not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS,\n- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n- * See the License for the specific language governing permissions and\n- * limitations under the License.\n- */\n-\n-package com.example.mobserv.remoteapp.camera;\n-\n-/* package */ public final class MovingAverage\n-{\n-    private final int mNumValues;\n-    private final long[] mValues;\n-    private int mEnd \u003d 0;\n-    private int mLength \u003d 0;\n-    private long mSum \u003d 0L;\n-\n-    /* package */ MovingAverage(final int numValues)\n-    {\n-        super();\n-        mNumValues \u003d numValues;\n-        mValues \u003d new long[numValues];\n-    } // constructor()\n-\n-    /* package */ void update(final long value)\n-    {\n-        mSum -\u003d mValues[mEnd];\n-        mValues[mEnd] \u003d value;\n-        mEnd \u003d (mEnd + 1) % mNumValues;\n-        if (mLength \u003c mNumValues)\n-        {\n-            mLength++;\n-        } // if\n-        mSum +\u003d value;\n-    } // update(long)\n-\n-    /* package */ double getAverage()\n-    {\n-        return mSum / (double) mLength;\n-    } // getAverage()\n-\n-} // class MovingAverage\n-"
        },
        {
          "file_name": "RemoteApp/app/src/main/java/com/example/mobserv/remoteapp/fragments/OneFragment.java",
          "patch": "@@ -0,0 +1,196 @@\n+package com.example.mobserv.remoteapp.fragments;\n+\n+import android.app.AlertDialog;\n+import android.content.DialogInterface;\n+import android.os.Bundle;\n+import android.support.v4.app.Fragment;\n+import android.text.method.ScrollingMovementMethod;\n+import android.util.DisplayMetrics;\n+import android.util.Log;\n+import android.view.LayoutInflater;\n+import android.view.SurfaceView;\n+import android.view.View;\n+import android.view.ViewGroup;\n+import android.widget.Button;\n+import android.widget.EditText;\n+import android.widget.LinearLayout;\n+import android.widget.TextView;\n+\n+import com.example.mobserv.remoteapp.CameraPreview;\n+import com.example.mobserv.remoteapp.ClientActivity;\n+import com.example.mobserv.remoteapp.R;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+public class OneFragment extends Fragment{\n+    private TextView text;\n+    private EditText et;\n+    private ClientActivity act;\n+\n+    private SurfaceView mSurfaceView;\n+    private CameraPreview preview;\n+\n+    private ViewGroup clientsLinearLayout;\n+\n+    private static final String TEXT_SCROLL_X \u003d \"tScrollX\";\n+    private static final String TEXT_SCROLL_Y \u003d \"tScrollY\";\n+    private boolean nameTaken;\n+/*\n+    @Override\n+    public void onAttach(Context context) {\n+        super.onAttach(context);\n+    }\n+*/\n+    @Override\n+    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n+                             Bundle savedInstanceState) {\n+        // Inflate the layout for this fragment\n+        View view \u003d inflater.inflate(R.layout.fragment_one, container, false);\n+        if(savedInstanceState \u003d\u003d null) {\n+            act \u003d (ClientActivity)getActivity();\n+            text \u003d (TextView) view.findViewById(R.id.idClientText);\n+            text.setMovementMethod(new ScrollingMovementMethod());\n+            et \u003d (EditText) view.findViewById(R.id.idClientEditText);\n+            mSurfaceView \u003d (SurfaceView) view.findViewById(R.id.surfaceView);\n+            clientsLinearLayout \u003d (LinearLayout) view.findViewById(R.id.clientsLinearLayout);\n+\n+            preview \u003d new CameraPreview(getActivity(), mSurfaceView);\n+            preview.setKeepScreenOn(true);\n+            DisplayMetrics metrics \u003d new DisplayMetrics();\n+            getActivity().getWindowManager().getDefaultDisplay().getMetrics(metrics);\n+            mSurfaceView.setX(metrics.widthPixels + 1);\n+        }\n+\n+        return view;\n+    }\n+\n+    @Override\n+    public void onActivityCreated(Bundle savedInstanceState) {\n+        super.onActivityCreated(savedInstanceState);\n+        if(savedInstanceState \u003d\u003d null) { // IF first launch of the activity\n+            et.setFocusable(false);\n+        }\n+        act.startConnection();\n+    }\n+\n+    public void saveInstance(Bundle outState) {\n+        outState.putBoolean(\"nameTaken\", nameTaken);\n+        outState.putInt(TEXT_SCROLL_X, text.getScrollX());\n+        outState.putInt(TEXT_SCROLL_Y, text.getScrollY());\n+        if(act.getClientsList()!\u003d null) {\n+            outState.putStringArrayList(\"clientsList\", new ArrayList\u003cString\u003e(act.getClientsList()));\n+        }\n+    }\n+\n+    public void scrollText(Bundle savedInstanceState) {\n+        final int x \u003d savedInstanceState.getInt(TEXT_SCROLL_X);\n+        final int y \u003d savedInstanceState.getInt(TEXT_SCROLL_Y);\n+        text.post(new Runnable() {\n+            @Override\n+            public void run() {\n+                text.scrollTo(x, y);\n+            }\n+        });\n+        nameTaken \u003d savedInstanceState.getBoolean(\"nameTaken\");\n+        if (!nameTaken)\n+            act.runOnUiThread(new createNameDialog(false));\n+    }\n+\n+    public void updateUIClientsListButtons(int numOfClients, List\u003cString\u003e clients) {\n+        act.runOnUiThread(new updateUIClientsList(numOfClients, clients));\n+    }\n+\n+    class updateUIClientsList implements Runnable{\n+        Integer numOfClients;\n+        List\u003cString\u003e clientsList;\n+        public updateUIClientsList(Integer numOfClients, List\u003cString\u003e clientsList) {\n+            this.clientsList \u003d clientsList;\n+            this.numOfClients \u003d numOfClients;\n+        }\n+        @Override\n+        public void run() {\n+            clientsLinearLayout.removeAllViews();\n+            for (String clientName : clientsList){\n+                // let\u0027s keep also own name so we can send msgs to ourselves for debugging purposes\n+                //if ( !clientName.equalsIgnoreCase(myName) ) {\n+                Button bt \u003d new Button(getContext());\n+                bt.setText(clientName);\n+                bt.setOnClickListener(new View.OnClickListener() {\n+                    @Override\n+                    public void onClick(View v) {\n+                        onClickEnterText(v);\n+                    }\n+                });\n+                bt.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT));\n+                clientsLinearLayout.addView(bt);\n+                //}\n+            }\n+            act.setClientsList(clientsList);\n+        }\n+    }\n+    public void createNameDialog(Boolean taken){\n+        act.runOnUiThread(new createNameDialog(taken));\n+    }\n+\n+    class createNameDialog implements Runnable {\n+        Boolean alreadyTaken;\n+        ClientActivity activity;\n+        public createNameDialog(Boolean alreadyTaken) {\n+            this.alreadyTaken \u003d alreadyTaken;\n+            this.activity \u003d act;\n+        }\n+\n+        @Override\n+        public void run() {\n+            final EditText name \u003d new EditText(activity);\n+            name.setHint(\"Name...\");\n+            if (!alreadyTaken) {\n+                new AlertDialog.Builder(activity)\n+                        .setTitle(\"Please choose a username\")\n+                        .setView(name)\n+                        .setPositiveButton(android.R.string.yes, new DialogInterface.OnClickListener() {\n+                            public void onClick(DialogInterface arg0, int arg1) {\n+                                act.getmTaskFragment().sendMsg(name.getText().toString());\n+                            }\n+                        }).create().show();\n+            } else {\n+                new AlertDialog.Builder(activity)\n+                        .setTitle(\"Please choose another username\")\n+                        .setMessage(\"The name you chose had already been picked\")\n+                        .setView(name)\n+                        .setPositiveButton(android.R.string.yes, new DialogInterface.OnClickListener() {\n+                            public void onClick(DialogInterface arg0, int arg1) {\n+                                act.getmTaskFragment().sendMsg(name.getText().toString());\n+                            }\n+                        }).create().show();\n+            }\n+        }\n+    }\n+\n+    @Override\n+    public void onDestroyView() {\n+        super.onDestroyView();\n+        Log.i(\"DEBUG\", \"view destroyed\");\n+    }\n+\n+    /**\n+     * Takes the name of the button and concatenates it to\n+     * the current composing message\n+     * @param view (the button)\n+     */\n+    public void onClickEnterText(View view) {\n+        String tmp \u003d et.getText().toString();\n+        tmp +\u003d \"/\" + ((Button) view).getText().toString();\n+        et.setText(tmp);\n+        et.setSelection(et.getText().toString().length());\n+    }\n+\n+    /*************************\n+     **** Getter \u0026 Setter ****\n+     *************************/\n+    public EditText getEt(){return et;}\n+    public TextView gettext(){return text;}\n+    public CameraPreview getPreview(){return preview;}\n+    public void setNameTaken(boolean nameTaken) { this.nameTaken \u003d nameTaken; }\n+}\n\\ No newline at end of file"
        },
        {
          "file_name": "RemoteApp/app/src/main/java/com/example/mobserv/remoteapp/fragments/PagerAdapter.java",
          "patch": "@@ -0,0 +1,88 @@\n+package com.example.mobserv.remoteapp.fragments;\n+\n+import android.support.v4.app.Fragment;\n+import android.support.v4.app.FragmentManager;\n+import android.support.v4.app.FragmentPagerAdapter;\n+import android.view.LayoutInflater;\n+import android.view.View;\n+import android.view.ViewGroup;\n+import android.widget.RelativeLayout;\n+import android.widget.TextView;\n+\n+import com.astuetz.PagerSlidingTabStrip;\n+import com.example.mobserv.remoteapp.R;\n+import com.example.mobserv.remoteapp.model.ViewPagerTab;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+/**\n+ * Created by alessioalberti on 15/12/15.\n+ */\n+\n+public class PagerAdapter extends FragmentPagerAdapter implements PagerSlidingTabStrip.CustomTabProvider {\n+\n+    private final ArrayList\u003cViewPagerTab\u003e tabs \u003d new ArrayList\u003c\u003e();\n+    private final List\u003cFragment\u003e mFragmentList \u003d new ArrayList\u003c\u003e();\n+\n+    public PagerAdapter(FragmentManager fm) {\n+        super(fm);\n+    }\n+\n+    @Override\n+    public View getCustomTabView(ViewGroup viewGroup, int i) {\n+        RelativeLayout tabLayout \u003d (RelativeLayout)\n+                LayoutInflater.from(viewGroup.getContext()).inflate(R.layout.tab_layout, null);\n+\n+        TextView tabTitle \u003d (TextView) tabLayout.findViewById(R.id.tab_title);\n+        TextView badge \u003d (TextView) tabLayout.findViewById(R.id.badge);\n+\n+        ViewPagerTab tab \u003d tabs.get(i);\n+\n+        tabTitle.setText(tab.title.toUpperCase());\n+        if (tab.notifications \u003e 0) {\n+            badge.setVisibility(View.VISIBLE);\n+            badge.setText(String.valueOf(tab.notifications));\n+        } else {\n+            badge.setVisibility(View.GONE);\n+        }\n+\n+        return tabLayout;\n+    }\n+\n+    @Override\n+    public void tabSelected(View view) {\n+        RelativeLayout tabLayout \u003d (RelativeLayout) view;\n+        TextView badge \u003d (TextView) tabLayout.findViewById(R.id.badge);\n+        if (badge.getText() \u003d\u003d \"\") {\n+            badge.setVisibility(View.GONE);\n+        } else {\n+            badge.setVisibility(View.VISIBLE);\n+        }\n+    }\n+\n+    @Override\n+    public void tabUnselected(View view) {\n+\n+    }\n+\n+    @Override\n+    public Fragment getItem(int position) {\n+        return mFragmentList.get(position);\n+    }\n+\n+    public void addFragment(Fragment fragment, String title, int notifNum) {\n+        mFragmentList.add(fragment);\n+        tabs.add(new ViewPagerTab(title, notifNum));\n+    }\n+\n+    @Override\n+    public int getCount() {\n+        return mFragmentList.size();\n+    }\n+\n+    @Override\n+    public CharSequence getPageTitle(int position) {\n+        return tabs.get(position).title;\n+    }\n+}\n\\ No newline at end of file"
        },
        {
          "file_name": "RemoteApp/app/src/main/java/com/example/mobserv/remoteapp/fragments/SmartFragmentStatePagerAdapter.java",
          "patch": "@@ -0,0 +1,41 @@\n+package com.example.mobserv.remoteapp.fragments;\n+\n+import android.support.v4.app.Fragment;\n+import android.support.v4.app.FragmentManager;\n+import android.support.v4.app.FragmentStatePagerAdapter;\n+import android.util.SparseArray;\n+import android.view.ViewGroup;\n+\n+/*\n+   Extension of FragmentStatePagerAdapter which intelligently caches \n+   all active fragments and manages the fragment lifecycles. \n+   Usage involves extending from SmartFragmentStatePagerAdapter as you would any other PagerAdapter.\n+*/\n+public abstract class SmartFragmentStatePagerAdapter extends FragmentStatePagerAdapter {\n+\t// Sparse array to keep track of registered fragments in memory\n+\tprivate SparseArray\u003cFragment\u003e registeredFragments \u003d new SparseArray\u003cFragment\u003e();\n+\n+\tpublic SmartFragmentStatePagerAdapter(FragmentManager fragmentManager) {\n+\t\tsuper(fragmentManager);\n+\t}\n+\n+\t// Register the fragment when the item is instantiated\n+\t@Override\n+\tpublic Object instantiateItem(ViewGroup container, int position) {\n+\t\tFragment fragment \u003d (Fragment) super.instantiateItem(container, position);\n+\t\tregisteredFragments.put(position, fragment);\n+\t\treturn fragment;\n+\t}\n+\n+\t// Unregister when the item is inactive\n+\t@Override\n+\tpublic void destroyItem(ViewGroup container, int position, Object object) {\n+\t\tregisteredFragments.remove(position);\n+\t\tsuper.destroyItem(container, position, object);\n+\t}\n+\n+\t// Returns the fragment for the position (if instantiated)\n+\tpublic Fragment getRegisteredFragment(int position) {\n+\t\treturn registeredFragments.get(position);\n+\t}\n+}\n\\ No newline at end of file"
        },
        {
          "file_name": "RemoteApp/app/src/main/java/com/example/mobserv/remoteapp/fragments/ThreeFragment.java",
          "patch": "@@ -0,0 +1,29 @@\n+package com.example.mobserv.remoteapp.fragments;\n+\n+import android.os.Bundle;\n+import android.support.v4.app.Fragment;\n+import android.view.LayoutInflater;\n+import android.view.View;\n+import android.view.ViewGroup;\n+import android.widget.ImageView;\n+\n+import com.example.mobserv.remoteapp.R;\n+\n+/**\n+ * Created by alessioalberti on 15/12/15.\n+ */\n+public class ThreeFragment extends Fragment{\n+    private ImageView contactImage;\n+    @Override\n+    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n+                             Bundle savedInstanceState) {\n+        // Inflate the layout for this fragment\n+        View view \u003d inflater.inflate(R.layout.fragment_three, container, false);\n+        contactImage \u003d (ImageView) view.findViewById(R.id.photo);\n+        return view;\n+    }\n+\n+    public ImageView getContactImage() {\n+        return contactImage;\n+    }\n+}"
        },
        {
          "file_name": "RemoteApp/app/src/main/java/com/example/mobserv/remoteapp/fragments/TwoFragment.java",
          "patch": "@@ -0,0 +1,168 @@\n+package com.example.mobserv.remoteapp.fragments;\n+\n+/**\n+ * Created by alessioalberti on 14/12/15.\n+ */\n+\n+import android.os.AsyncTask;\n+import android.os.Bundle;\n+import android.support.v4.app.Fragment;\n+import android.util.Log;\n+import android.view.LayoutInflater;\n+import android.view.View;\n+import android.view.ViewGroup;\n+import android.widget.Button;\n+import android.widget.LinearLayout;\n+\n+import com.example.mobserv.remoteapp.ClientActivity;\n+import com.example.mobserv.remoteapp.R;\n+import com.example.mobserv.remoteapp.camera.MjpegInputStream;\n+import com.example.mobserv.remoteapp.camera.MjpegView;\n+\n+import java.io.IOException;\n+import java.net.HttpURLConnection;\n+import java.net.URL;\n+import java.util.List;\n+\n+public class TwoFragment extends Fragment {\n+    private final String TAG \u003d \"Two Fragment\";\n+    private MjpegView mv;\n+    private ViewGroup IpLinearLayout;\n+\n+    private ClientActivity act;\n+\n+    // Inflate the view for the fragment based on layout XML\n+    @Override\n+    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n+                             Bundle savedInstanceState) {\n+        View view \u003d inflater.inflate(R.layout.fragment_two, container, false);\n+        act \u003d (ClientActivity)getActivity();\n+        mv \u003d (MjpegView) view.findViewById(R.id.videoView1);\n+        IpLinearLayout \u003d (LinearLayout) view.findViewById(R.id.IpLinearLayout);\n+        return view;\n+    }\n+\n+    public class DoRead extends AsyncTask\u003cString, Void, MjpegInputStream\u003e {\n+        protected MjpegInputStream doInBackground(String... url) {\n+            //TODO: if camera has authentication deal with it and don\u0027t just not work\n+        /*\n+        HttpResponse res \u003d null;\n+        DefaultHttpClient httpclient \u003d new DefaultHttpClient();\n+        HttpParams httpParams \u003d httpclient.getParams();\n+        HttpConnectionParams.setConnectionTimeout(httpParams, 5 * 1000);\n+        HttpConnectionParams.setSoTimeout(httpParams, 5*1000);\n+        if(DEBUG) Log.d(TAG, \"1. Sending http request\");\n+        try {\n+            res \u003d httpclient.execute(new HttpGet(URI.create(url[0])));\n+            if(DEBUG) Log.d(TAG, \"2. Request finished, status \u003d \" + res.getStatusLine().getStatusCode());\n+            if(res.getStatusLine().getStatusCode()\u003d\u003d401){\n+                //You must turn off camera User Access Control before this will work\n+                return null;\n+            }\n+            return new MjpegInputStream(res.getEntity().getContent());\n+        } catch (ClientProtocolException e) {\n+            if(DEBUG){\n+                e.printStackTrace();\n+                Log.d(TAG, \"Request failed-ClientProtocolException\", e);\n+            }\n+            //Error connecting to camera\n+        } catch (IOException e) {\n+            if(DEBUG){\n+                e.printStackTrace();\n+                Log.d(TAG, \"Request failed-IOException\", e);\n+            }\n+            //Error connecting to camera\n+        }\n+        return null;\n+        */\n+            HttpURLConnection connection \u003d null;\n+            try {\n+                connection \u003d (HttpURLConnection) new URL(url[0]).openConnection();\n+                connection.setConnectTimeout(5 * 1000);\n+                connection.setReadTimeout(5 * 1000);\n+                Log.i(TAG, \"1. Sending http request\");\n+                connection.setRequestMethod(\"GET\");\n+                connection.connect();\n+                Log.i(TAG, \"2. Request finished, status \u003d \" + connection.getResponseCode());\n+                if(connection.getResponseCode()\u003d\u003d401){\n+                    //You must turn off camera User Access Control before this will work\n+                    return null;\n+                }\n+                return new MjpegInputStream(connection.getInputStream());\n+            } catch (IOException e) {\n+                e.printStackTrace();\n+                Log.i(TAG, \"Request failed-IOException\", e);\n+                //Error connecting to camera\n+            } finally {\n+                try {\n+                    if(connection !\u003d null) connection.disconnect();\n+                } catch (Exception e) {\n+                    e.printStackTrace(); //If you want further info on failure...\n+                }\n+            }\n+            return null;\n+\n+        }\n+\n+        protected void onPostExecute(MjpegInputStream result) {\n+            if(result!\u003dnull){\n+                if(mv.isActivated() \u003d\u003d true)\n+                    Log.i(TAG, \"Already activated\");\n+                if(mv.isEnabled() \u003d\u003d true)\n+                    Log.i(TAG, \"Already activated\");\n+                //mv.startPlayback();\n+                mv.setSource(result);\n+\n+                mv.setDisplayMode(MjpegView.SIZE_BEST_FIT);\n+                mv.showFps(true);\n+                Log.i(TAG, \"Start playback\");\n+            }else{\n+                Log.i(TAG, \"result is null\");\n+            }\n+        }\n+    }\n+    public void updateUIIPsListButtons(int numOfIps, List\u003cString\u003e ips) {\n+        act.runOnUiThread(new updateUIIpList(numOfIps, ips));\n+    }\n+    class updateUIIpList implements Runnable{\n+        Integer numOfIps;\n+        List\u003cString\u003e IpList;\n+        public updateUIIpList(Integer numOfIps, List\u003cString\u003e IpList) {\n+            this.IpList \u003d IpList;\n+            this.numOfIps \u003d numOfIps;\n+        }\n+        @Override\n+        public void run() {\n+            IpLinearLayout.removeAllViews();\n+            for (String ip : IpList){\n+                // let\u0027s keep also own name so we can send msgs to ourselves for debugging purposes\n+                //if ( !clientName.equalsIgnoreCase(myName) ) {\n+                Button bt \u003d new Button(getContext());\n+                bt.setText(ip);\n+                bt.setOnClickListener(new View.OnClickListener() {\n+                    @Override\n+                    public void onClick(View v) {\n+                        onClickEnterText(v);\n+                    }\n+                });\n+                bt.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT));\n+                IpLinearLayout.addView(bt);\n+                //}\n+            }\n+            //act.setIPList(IpList);\n+        }\n+    }\n+    /**\n+     * Takes the name of the button and concatenates it to\n+     * the current composing message\n+     * @param view (the button)\n+     */\n+    public void onClickEnterText(View view) {\n+        String url \u003d \"http://\" + ((Button) view).getText().toString();\n+        new DoRead().execute(url);\n+    }\n+    public void stopPlayback(){\n+        Log.i(TAG,\"Stop playback\");\n+        mv.stopPlayback();\n+    }\n+}\n\\ No newline at end of file"
        },
        {
          "file_name": "RemoteApp/app/src/main/java/com/example/mobserv/remoteapp/model/ViewPagerTab.java",
          "patch": "@@ -0,0 +1,14 @@\n+package com.example.mobserv.remoteapp.model;\n+\n+/**\n+ * Created by Roman on 29.06.15.\n+ */\n+public class ViewPagerTab {\n+    public String title;\n+    public int notifications;\n+\n+    public ViewPagerTab(String title, int notifications) {\n+        this.title \u003d title;\n+        this.notifications \u003d notifications;\n+    }\n+}"
        },
        {
          "file_name": "RemoteApp/app/src/main/res/drawable-mdpi/badge_background.xml",
          "patch": "@@ -0,0 +1,10 @@\n+\u003c?xml version\u003d\"1.0\" encoding\u003d\"utf-8\"?\u003e\n+\u003cshape xmlns:android\u003d\"http://schemas.android.com/apk/res/android\"\n+    android:shape\u003d\"oval\"\u003e\n+\n+    \u003csolid android:color\u003d\"@color/badge_color\" /\u003e\n+    \u003csize\n+        android:height\u003d\"16dp\"\n+        android:width\u003d\"16dp\" /\u003e\n+\n+\u003c/shape\u003e\n\\ No newline at end of file"
        },
        {
          "file_name": "RemoteApp/app/src/main/res/layout/activity_client.xml",
          "patch": "@@ -1,110 +1,46 @@\n-\u003c?xml version\u003d\"1.0\" encoding\u003d\"utf-8\"?\u003e\n-\u003cLinearLayout xmlns:android\u003d\"http://schemas.android.com/apk/res/android\"\n-              android:orientation\u003d\"vertical\"\n-              android:layout_width\u003d\"match_parent\"\n-              android:layout_height\u003d\"match_parent\"\u003e\n-\n-    \u003cTextView\n-        android:hint\u003d\"Received commands will be shown here\\n\"\n-        android:freezesText\u003d\"true\"\n-        android:layout_width\u003d\"match_parent\"\n-        android:layout_height\u003d\"173dp\"\n-        android:id\u003d\"@+id/idClientText\"\n-        android:scrollbars\u003d\"vertical\"\n-        /\u003e\n-    \u003cLinearLayout\n+\u003cRelativeLayout\n+    android:id\u003d\"@+id/main_layout\"\n+    xmlns:android\u003d\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app\u003d\"http://schemas.android.com/apk/res-auto\"\n+    xmlns:tools\u003d\"http://schemas.android.com/tools\"\n+    android:layout_width\u003d\"match_parent\"\n+    android:layout_height\u003d\"match_parent\"\n+    tools:context\u003d\".MainActivity\"\u003e\n+\u003c!--\n+    \u003candroid.support.v7.widget.Toolbar\n+        android:id\u003d\"@+id/toolbar\"\n         android:layout_width\u003d\"match_parent\"\n         android:layout_height\u003d\"wrap_content\"\n-        android:orientation\u003d\"horizontal\"\n-        \u003e\n-        \u003cEditText\n-            android:hint\u003d\"Write here\"\n-            android:layout_width\u003d\"300dp\"\n-            android:layout_height\u003d\"wrap_content\"\n-            android:id\u003d\"@+id/idClientEditText\"\n-            /\u003e\n-        \u003cButton\n-            android:id\u003d\"@+id/sendButton\"\n-            android:layout_width\u003d\"wrap_content\"\n-            android:layout_height\u003d\"wrap_content\"\n-            android:onClick\u003d\"onClick\"\n-            android:text\u003d\"Send\"\n-            \u003e\n-        \u003c/Button\u003e\n-    \u003c/LinearLayout\u003e\n-\n-    \u003cTextView\n-        android:layout_width\u003d\"wrap_content\"\n-        android:layout_height\u003d\"wrap_content\"\n-        android:layout_gravity\u003d\"center\"\n-        android:text\u003d\"Predefined commands\"\n-        android:textSize\u003d\"25dp\"\n-        android:textColor\u003d\"#000000\" /\u003e\n-    \u003cLinearLayout\n-        android:layout_width\u003d\"wrap_content\"\n-        android:layout_height\u003d\"wrap_content\"\n-        android:layout_gravity\u003d\"center\"\n-        \u003e\n-\n-        \u003cButton\n-            android:layout_width\u003d\"wrap_content\"\n-            android:layout_height\u003d\"wrap_content\"\n-            android:text\u003d\"write\"\n-            android:onClick\u003d\"onClickEnterText\"\n-            /\u003e\n-        \u003cButton\n-            android:layout_width\u003d\"wrap_content\"\n-            android:layout_height\u003d\"wrap_content\"\n-            android:text\u003d\"read\"\n-            android:onClick\u003d\"onClickEnterText\"\n-            /\u003e\n-        \u003c!--\u003cButton\n-            android:layout_width\u003d\"wrap_content\"\n-            android:layout_height\u003d\"wrap_content\"\n-            android:text\u003d\"exec\"\n-            android:onClick\u003d\"onClickEnterText\"\n-            /\u003e--\u003e\n-        \u003cButton\n-            android:layout_width\u003d\"wrap_content\"\n-            android:layout_height\u003d\"wrap_content\"\n-            android:text\u003d\"photo\"\n-            android:onClick\u003d\"onClickEnterText\"\n-            /\u003e\n-        \u003cButton\n-            android:layout_width\u003d\"wrap_content\"\n-            android:layout_height\u003d\"wrap_content\"\n-            android:text\u003d\"gps\"\n-            android:onClick\u003d\"onClickEnterText\"\n-            /\u003e\n-    \u003c/LinearLayout\u003e\n-\n-    \u003cLinearLayout\n-        android:layout_width\u003d\"wrap_content\"\n+        android:layout_alignParentTop\u003d\"true\"\n+        android:background\u003d\"?attr/colorPrimary\"\n+        android:elevation\u003d\"6dp\"\n+        android:minHeight\u003d\"?attr/actionBarSize\"\n+        android:theme\u003d\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"\n+        app:popupTheme\u003d\"@style/ThemeOverlay.AppCompat.Light\"/\u003e\n+\n+    \u003candroid.support.design.widget.TabLayout\n+        android:id\u003d\"@+id/tab_layout\"\n+        android:layout_width\u003d\"match_parent\"\n         android:layout_height\u003d\"wrap_content\"\n-        android:orientation\u003d\"horizontal\"\n-        android:layout_gravity\u003d\"center\"\n-        android:id\u003d\"@+id/clientsLinearLayout\"\n-        \u003e\n-\n-    \u003c/LinearLayout\u003e\n-\n-    \u003cLinearLayout\n+        android:layout_below\u003d\"@+id/toolbar\"\n+        android:background\u003d\"?attr/colorPrimary\"\n+        android:elevation\u003d\"6dp\"\n+        android:minHeight\u003d\"?attr/actionBarSize\"\n+        android:theme\u003d\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"/\u003e\n+--\u003e\n+    \u003ccom.astuetz.PagerSlidingTabStrip\n+        android:id\u003d\"@+id/tabs\"\n         android:layout_width\u003d\"match_parent\"\n-        android:layout_height\u003d\"match_parent\"\n-        android:layout_gravity\u003d\"center\"\u003e\n-\n-        \u003cSurfaceView\n-            android:layout_width\u003d\"1dp\"\n-            android:layout_height\u003d\"1dp\"\n-            android:id\u003d\"@+id/surfaceView\" /\u003e\n-\n-        \u003cImageView\n-            android:layout_width\u003d\"fill_parent\"\n-            android:layout_height\u003d\"fill_parent\"\n-            android:id\u003d\"@+id/photo\"/\u003e\n-\n-    \u003c/LinearLayout\u003e\n-\n-\n+        app:pstsShouldExpand\u003d\"true\"\n+        app:pstsIndicatorHeight\u003d\"3dp\"\n+        app:pstsIndicatorColor\u003d\"@color/badge_color\"\n+        android:layout_height\u003d\"?attr/actionBarSize\"\n+        android:background\u003d\"@color/main_color\" /\u003e\n+\n+    \u003candroid.support.v4.view.ViewPager\n+        android:id\u003d\"@+id/pager\"\n+        android:layout_width\u003d\"match_parent\"\n+        android:layout_height\u003d\"fill_parent\"\n+        android:layout_below\u003d\"@id/tabs\"/\u003e\n \n-\u003c/LinearLayout\u003e\n\\ No newline at end of file\n+\u003c/RelativeLayout\u003e\n\\ No newline at end of file"
        },
        {
          "file_name": "RemoteApp/app/src/main/res/layout/activity_live.xml",
          "patch": "@@ -0,0 +1,34 @@\n+\u003c?xml version\u003d\"1.0\" encoding\u003d\"utf-8\"?\u003e\n+\u003candroid.support.design.widget.CoordinatorLayout xmlns:android\u003d\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app\u003d\"http://schemas.android.com/apk/res-auto\"\n+    xmlns:tools\u003d\"http://schemas.android.com/tools\"\n+    android:layout_width\u003d\"match_parent\"\n+    android:layout_height\u003d\"match_parent\"\n+    android:fitsSystemWindows\u003d\"true\"\n+    tools:context\u003d\"com.example.mobserv.remoteapp.LiveActivity\"\u003e\n+\n+    \u003candroid.support.design.widget.AppBarLayout\n+        android:layout_width\u003d\"match_parent\"\n+        android:layout_height\u003d\"wrap_content\"\n+        android:theme\u003d\"@style/AppTheme.AppBarOverlay\"\u003e\n+\n+        \u003candroid.support.v7.widget.Toolbar\n+            android:id\u003d\"@+id/toolbar\"\n+            android:layout_width\u003d\"match_parent\"\n+            android:layout_height\u003d\"?attr/actionBarSize\"\n+            android:background\u003d\"?attr/colorPrimary\"\n+            app:popupTheme\u003d\"@style/AppTheme.PopupOverlay\" /\u003e\n+\n+    \u003c/android.support.design.widget.AppBarLayout\u003e\n+\n+    \u003cinclude layout\u003d\"@layout/content_live\" /\u003e\n+\n+    \u003candroid.support.design.widget.FloatingActionButton\n+        android:id\u003d\"@+id/fab\"\n+        android:layout_width\u003d\"wrap_content\"\n+        android:layout_height\u003d\"wrap_content\"\n+        android:layout_gravity\u003d\"bottom|end\"\n+        android:layout_margin\u003d\"@dimen/fab_margin\"\n+        android:src\u003d\"@android:drawable/ic_dialog_email\" /\u003e\n+\n+\u003c/android.support.design.widget.CoordinatorLayout\u003e"
        },
        {
          "file_name": "RemoteApp/app/src/main/res/layout/activity_main.xml",
          "patch": "@@ -9,9 +9,7 @@\n     android:paddingTop\u003d\"@dimen/activity_vertical_margin\"\n     android:paddingBottom\u003d\"@dimen/activity_vertical_margin\"\n     android:orientation\u003d\"vertical\"\n-    tools:context\u003d\".MainActivity\"\u003e\n-\n-    \u003cButton\n+    tools:context\u003d\".MainActivity\"\u003e  \u003cButton\n         android:text\u003d\"Server\"\n         android:layout_width\u003d\"wrap_content\"\n         android:layout_height\u003d\"wrap_content\"\n@@ -24,7 +22,13 @@\n         android:layout_height\u003d\"wrap_content\"\n         android:id\u003d\"@+id/idIpAddrEditText\"\n         android:inputType\u003d\"text\"\n-        android:text\u003d\"192.168.1.43\" /\u003e\n+\u003c\u003c\u003c\u003c\u003c\u003c\u003c HEAD\n+        android:text\u003d\"192.168.1.47\"\n+        /\u003e\n+\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n+        android:text\u003d\"172.24.11.225\"/\u003e\n+\u003e\u003e\u003e\u003e\u003e\u003e\u003e 77818f801f70066bf5a1898a69b96847318920e3\n+\n     \u003cButton\n         android:text\u003d\"Connect as Client\"\n         android:layout_width\u003d\"wrap_content\""
        },
        {
          "file_name": "RemoteApp/app/src/main/res/layout/content_live.xml",
          "patch": "@@ -0,0 +1,15 @@\n+\u003c?xml version\u003d\"1.0\" encoding\u003d\"utf-8\"?\u003e\n+\u003cRelativeLayout xmlns:android\u003d\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app\u003d\"http://schemas.android.com/apk/res-auto\"\n+    xmlns:tools\u003d\"http://schemas.android.com/tools\"\n+    android:layout_width\u003d\"match_parent\"\n+    android:layout_height\u003d\"match_parent\"\n+    android:paddingBottom\u003d\"@dimen/activity_vertical_margin\"\n+    android:paddingLeft\u003d\"@dimen/activity_horizontal_margin\"\n+    android:paddingRight\u003d\"@dimen/activity_horizontal_margin\"\n+    android:paddingTop\u003d\"@dimen/activity_vertical_margin\"\n+    app:layout_behavior\u003d\"@string/appbar_scrolling_view_behavior\"\n+    tools:context\u003d\"com.example.mobserv.remoteapp.LiveActivity\"\n+    tools:showIn\u003d\"@layout/activity_live\"\u003e\n+\n+\u003c/RelativeLayout\u003e"
        },
        {
          "file_name": "RemoteApp/app/src/main/res/layout/fragment_one.xml",
          "patch": "@@ -0,0 +1,102 @@\n+\u003cRelativeLayout xmlns:android\u003d\"http://schemas.android.com/apk/res/android\"\n+    xmlns:tools\u003d\"http://schemas.android.com/tools\"\n+    android:layout_width\u003d\"match_parent\"\n+    android:layout_height\u003d\"match_parent\"\n+    tools:context\u003d\"com.example.mobserv.remoteapp.fragments.OneFragment\"\u003e\n+\n+    \u003cLinearLayout xmlns:android\u003d\"http://schemas.android.com/apk/res/android\"\n+        android:orientation\u003d\"vertical\"\n+        android:layout_width\u003d\"match_parent\"\n+        android:layout_height\u003d\"match_parent\"\u003e\n+\n+        \u003cTextView\n+            android:hint\u003d\"Received commands will be shown here\\n\"\n+            android:freezesText\u003d\"true\"\n+            android:layout_width\u003d\"match_parent\"\n+            android:layout_height\u003d\"173dp\"\n+            android:id\u003d\"@+id/idClientText\"\n+            android:scrollbars\u003d\"vertical\"\n+            /\u003e\n+        \u003cLinearLayout\n+            android:layout_width\u003d\"match_parent\"\n+            android:layout_height\u003d\"wrap_content\"\n+            android:orientation\u003d\"horizontal\"\n+            \u003e\n+            \u003cEditText\n+                android:hint\u003d\"Write here\"\n+                android:layout_width\u003d\"300dp\"\n+                android:layout_height\u003d\"wrap_content\"\n+                android:id\u003d\"@+id/idClientEditText\"\n+                /\u003e\n+            \u003cButton\n+                android:id\u003d\"@+id/sendButton\"\n+                android:layout_width\u003d\"wrap_content\"\n+                android:layout_height\u003d\"wrap_content\"\n+                android:onClick\u003d\"onClick\"\n+                android:text\u003d\"Send\"\n+                \u003e\n+            \u003c/Button\u003e\n+        \u003c/LinearLayout\u003e\n+\n+        \u003cTextView\n+            android:layout_width\u003d\"wrap_content\"\n+            android:layout_height\u003d\"wrap_content\"\n+            android:layout_gravity\u003d\"center\"\n+            android:text\u003d\"Predefined commands\"\n+            android:textSize\u003d\"25dp\"\n+            android:textColor\u003d\"#000000\" /\u003e\n+        \u003cLinearLayout\n+            android:layout_width\u003d\"wrap_content\"\n+            android:layout_height\u003d\"wrap_content\"\n+            android:layout_gravity\u003d\"center\"\n+            \u003e\n+\n+            \u003cButton\n+                android:layout_width\u003d\"wrap_content\"\n+                android:layout_height\u003d\"wrap_content\"\n+                android:text\u003d\"read\"\n+                android:onClick\u003d\"onClickEnterText\"\n+                /\u003e\n+            \u003c!--\u003cButton\n+                android:layout_width\u003d\"wrap_content\"\n+                android:layout_height\u003d\"wrap_content\"\n+                android:text\u003d\"exec\"\n+                android:onClick\u003d\"onClickEnterText\"\n+                /\u003e--\u003e\n+            \u003cButton\n+                android:layout_width\u003d\"wrap_content\"\n+                android:layout_height\u003d\"wrap_content\"\n+                android:text\u003d\"photo\"\n+                android:onClick\u003d\"onClickEnterText\"\n+                /\u003e\n+            \u003cButton\n+                android:layout_width\u003d\"wrap_content\"\n+                android:layout_height\u003d\"wrap_content\"\n+                android:text\u003d\"gps\"\n+                android:onClick\u003d\"onClickEnterText\"\n+                /\u003e\n+            \u003cButton\n+                android:layout_width\u003d\"wrap_content\"\n+                android:layout_height\u003d\"wrap_content\"\n+                android:text\u003d\"live\"\n+                android:onClick\u003d\"onClickEnterText\"\n+                /\u003e\n+        \u003c/LinearLayout\u003e\n+\n+        \u003cLinearLayout\n+            android:layout_width\u003d\"wrap_content\"\n+            android:layout_height\u003d\"wrap_content\"\n+            android:orientation\u003d\"horizontal\"\n+            android:layout_gravity\u003d\"center\"\n+            android:id\u003d\"@+id/clientsLinearLayout\"\n+            \u003e\n+\n+        \u003c/LinearLayout\u003e\n+\n+        \u003cSurfaceView\n+            android:layout_width\u003d\"1dp\"\n+            android:layout_height\u003d\"1dp\"\n+            android:id\u003d\"@+id/surfaceView\" /\u003e\n+    \u003c/LinearLayout\u003e\n+\n+\u003c/RelativeLayout\u003e\n\\ No newline at end of file"
        },
        {
          "file_name": "RemoteApp/app/src/main/res/layout/fragment_three.xml",
          "patch": "@@ -0,0 +1,9 @@\n+\u003c?xml version\u003d\"1.0\" encoding\u003d\"utf-8\"?\u003e\n+\u003cLinearLayout xmlns:android\u003d\"http://schemas.android.com/apk/res/android\"\n+    android:orientation\u003d\"vertical\" android:layout_width\u003d\"match_parent\"\n+    android:layout_height\u003d\"match_parent\"\u003e\n+    \u003cImageView\n+        android:layout_width\u003d\"match_parent\"\n+        android:layout_height\u003d\"match_parent\"\n+        android:id\u003d\"@+id/photo\"/\u003e\n+\u003c/LinearLayout\u003e\n\\ No newline at end of file"
        },
        {
          "file_name": "RemoteApp/app/src/main/res/layout/fragment_two.xml",
          "patch": "@@ -0,0 +1,21 @@\n+\u003c?xml version\u003d\"1.0\" encoding\u003d\"utf-8\"?\u003e\n+\u003cRelativeLayout xmlns:android\u003d\"http://schemas.android.com/apk/res/android\"\n+android:layout_width\u003d\"match_parent\"\n+android:layout_height\u003d\"match_parent\"\n+android:orientation\u003d\"vertical\"\u003e\n+    \u003cLinearLayout\n+        android:layout_width\u003d\"wrap_content\"\n+        android:layout_height\u003d\"wrap_content\"\n+        android:orientation\u003d\"vertical\"\n+        android:layout_gravity\u003d\"center\"\n+        android:id\u003d\"@+id/IpLinearLayout\"\u003e\n+    \u003c/LinearLayout\u003e\n+    \u003ccom.example.mobserv.remoteapp.camera.MjpegView\n+        android:id\u003d\"@+id/videoView1\"\n+        android:layout_width\u003d\"match_parent\"\n+        android:layout_height\u003d\"match_parent\"\n+        android:layout_below\u003d\"@+id/IpLinearLayout\"\n+        android:layout_alignParentLeft\u003d\"true\"\n+        android:layout_alignParentStart\u003d\"true\"\u003e\n+    \u003c/com.example.mobserv.remoteapp.camera.MjpegView\u003e\n+\u003c/RelativeLayout\u003e\n\\ No newline at end of file"
        },
        {
          "file_name": "RemoteApp/app/src/main/res/layout/tab_layout.xml",
          "patch": "@@ -0,0 +1,29 @@\n+\u003c?xml version\u003d\"1.0\" encoding\u003d\"utf-8\"?\u003e\n+\u003cRelativeLayout xmlns:android\u003d\"http://schemas.android.com/apk/res/android\"\n+    android:layout_width\u003d\"match_parent\"\n+    android:layout_height\u003d\"match_parent\"\u003e\n+\n+    \u003cTextView\n+        android:id\u003d\"@+id/tab_title\"\n+        android:layout_width\u003d\"wrap_content\"\n+        android:layout_height\u003d\"wrap_content\"\n+        android:layout_centerInParent\u003d\"true\"\n+        android:gravity\u003d\"center\"\n+        android:textColor\u003d\"@android:color/white\"\n+        android:textStyle\u003d\"bold\"\n+        android:textSize\u003d\"15sp\"\n+        android:singleLine\u003d\"true\" /\u003e\n+\n+    \u003cTextView\n+        android:id\u003d\"@+id/badge\"\n+        android:layout_width\u003d\"wrap_content\"\n+        android:layout_height\u003d\"wrap_content\"\n+        android:layout_toRightOf\u003d\"@+id/tab_title\"\n+        android:textSize\u003d\"12sp\"\n+        android:gravity\u003d\"center\"\n+        android:layout_marginLeft\u003d\"8dp\"\n+        android:layout_centerVertical\u003d\"true\"\n+        android:textColor\u003d\"@android:color/white\"\n+        android:background\u003d\"@drawable/badge_background\" /\u003e\n+\n+\u003c/RelativeLayout\u003e\n\\ No newline at end of file"
        },
        {
          "file_name": "RemoteApp/app/src/main/res/menu/menu_main.xml",
          "patch": "@@ -0,0 +1,13 @@\n+\u003c?xml version\u003d\"1.0\" encoding\u003d\"utf-8\"?\u003e\n+\u003cmenu xmlns:android\u003d\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app\u003d\"http://schemas.android.com/apk/res-auto\"\n+    xmlns:tools\u003d\"http://schemas.android.com/tools\"\n+    tools:context\u003d\"com.example.mobserv.remoteapp.ClientActivity\" \u003e\n+\n+    \u003c!--\u003citem\n+        android:id\u003d\"@+id/action_add\"\n+        android:icon\u003d\"@drawable/add_button\"\n+        android:title\u003d\"@string/add_button\"\n+        app:showAsAction\u003d\"always\"\n+        android:orderInCategory\u003d\"100\"/\u003e--\u003e\n+\u003c/menu\u003e\n\\ No newline at end of file"
        },
        {
          "file_name": "RemoteApp/app/src/main/res/values-v21/styles.xml",
          "patch": "@@ -0,0 +1,9 @@\n+\u003cresources\u003e\u003e\n+\n+    \u003cstyle name\u003d\"AppTheme.NoActionBar\"\u003e\n+        \u003citem name\u003d\"windowActionBar\"\u003efalse\u003c/item\u003e\n+        \u003citem name\u003d\"windowNoTitle\"\u003etrue\u003c/item\u003e\n+        \u003citem name\u003d\"android:windowDrawsSystemBarBackgrounds\"\u003etrue\u003c/item\u003e\n+        \u003citem name\u003d\"android:statusBarColor\"\u003e@android:color/transparent\u003c/item\u003e\n+    \u003c/style\u003e\n+\u003c/resources\u003e"
        },
        {
          "file_name": "RemoteApp/app/src/main/res/values/colors.xml",
          "patch": "@@ -3,4 +3,12 @@\n     \u003ccolor name\u003d\"colorPrimary\"\u003e#3F51B5\u003c/color\u003e\n     \u003ccolor name\u003d\"colorPrimaryDark\"\u003e#303F9F\u003c/color\u003e\n     \u003ccolor name\u003d\"colorAccent\"\u003e#FF4081\u003c/color\u003e\n+    \u003c!--\u003ccolor name\u003d\"colorPrimary\"\u003e#125688\u003c/color\u003e\n+    \u003ccolor name\u003d\"colorPrimaryDark\"\u003e#125688\u003c/color\u003e--\u003e\n+    \u003ccolor name\u003d\"textColorPrimary\"\u003e#FFFFFF\u003c/color\u003e\n+    \u003ccolor name\u003d\"windowBackground\"\u003e#FFFFFF\u003c/color\u003e\n+    \u003ccolor name\u003d\"navigationBarColor\"\u003e#000000\u003c/color\u003e\n+   \u003c!-- \u003ccolor name\u003d\"colorAccent\"\u003e#c8e8ff\u003c/color\u003e--\u003e\n+    \u003ccolor name\u003d\"main_color\"\u003e#689F38\u003c/color\u003e\n+    \u003ccolor name\u003d\"badge_color\"\u003e#ff4e4e\u003c/color\u003e\n \u003c/resources\u003e"
        },
        {
          "file_name": "RemoteApp/app/src/main/res/values/dimens.xml",
          "patch": "@@ -2,4 +2,9 @@\n     \u003c!-- Default screen margins, per the Android Design guidelines. --\u003e\n     \u003cdimen name\u003d\"activity_horizontal_margin\"\u003e16dp\u003c/dimen\u003e\n     \u003cdimen name\u003d\"activity_vertical_margin\"\u003e16dp\u003c/dimen\u003e\n+    \u003cdimen name\u003d\"fab_margin\"\u003e16dp\u003c/dimen\u003e\n+    \u003cdimen name\u003d\"tab_max_width\"\u003e264dp\u003c/dimen\u003e\n+    \u003cdimen name\u003d\"tab_padding_bottom\"\u003e16dp\u003c/dimen\u003e\n+    \u003cdimen name\u003d\"tab_label\"\u003e14sp\u003c/dimen\u003e\n+    \u003cdimen name\u003d\"custom_tab_layout_height\"\u003e72dp\u003c/dimen\u003e\n \u003c/resources\u003e"
        },
        {
          "file_name": "RemoteApp/app/src/main/res/values/menu.xml",
          "patch": "@@ -0,0 +1,2 @@\n+\u003c?xml version\u003d\"1.0\" encoding\u003d\"utf-8\"?\u003e\n+\u003cresources\u003e\u003c/resources\u003e\n\\ No newline at end of file"
        },
        {
          "file_name": "RemoteApp/app/src/main/res/values/strings.xml",
          "patch": "@@ -1,3 +1,5 @@\n \u003cresources\u003e\n     \u003cstring name\u003d\"app_name\"\u003eRemoteApp\u003c/string\u003e\n+    \u003cstring name\u003d\"title_activity_live\"\u003eLiveActivity\u003c/string\u003e\n+    \u003cstring name\u003d\"action_settings\"\u003esettings\u003c/string\u003e\n \u003c/resources\u003e"
        },
        {
          "file_name": "RemoteApp/app/src/main/res/values/styles.xml",
          "patch": "@@ -1,11 +1,19 @@\n \u003cresources\u003e\n \n     \u003c!-- Base application theme. --\u003e\n-    \u003cstyle name\u003d\"AppTheme\" parent\u003d\"Theme.AppCompat.Light.DarkActionBar\"\u003e\n+    \u003cstyle name\u003d\"AppTheme\" parent\u003d\"Theme.AppCompat.Light.NoActionBar\"\u003e\n         \u003c!-- Customize your theme here. --\u003e\n         \u003citem name\u003d\"colorPrimary\"\u003e@color/colorPrimary\u003c/item\u003e\n         \u003citem name\u003d\"colorPrimaryDark\"\u003e@color/colorPrimaryDark\u003c/item\u003e\n         \u003citem name\u003d\"colorAccent\"\u003e@color/colorAccent\u003c/item\u003e\n     \u003c/style\u003e\n \n+    \u003cstyle name\u003d\"AppTheme.NoActionBar\"\u003e\n+        \u003citem name\u003d\"windowActionBar\"\u003efalse\u003c/item\u003e\n+        \u003citem name\u003d\"windowNoTitle\"\u003etrue\u003c/item\u003e\n+    \u003c/style\u003e\n+\n+    \u003cstyle name\u003d\"AppTheme.AppBarOverlay\" parent\u003d\"ThemeOverlay.AppCompat.Dark.ActionBar\" /\u003e\n+\n+    \u003cstyle name\u003d\"AppTheme.PopupOverlay\" parent\u003d\"ThemeOverlay.AppCompat.Light\" /\u003e\n \u003c/resources\u003e"
        },
        {
          "file_name": "server.py",
          "patch": "@@ -4,24 +4,26 @@\n import socket,os\n \n class Chat(LineReceiver):\n-    def __init__(self, clients):\n+    def __init__(self, clients, liveIps):\n         self.clients \u003d clients\n+        self.liveIps \u003d liveIps\n         self.name \u003d None\n         self.state \u003d \"GETNAME\"\n-\n+    \n     def connectionMade(self):\n         print \"New client connecting...\"\n         self.sendLine(\"\u003cserver\u003e //read/Hello/whatsyourname\")\n \n-\n     def connectionLost(self, reason):\n         if self.clients.has_key(self.name):\n             left_name \u003d self.name\n             del self.clients[self.name]\n+            if self.liveIps.has_key(self.name):\n+                del self.liveIps[self.name]\n             print left_name + \u0027 has left\u0027\n             #self.broadcast( left_name + \u0027 has left\u0027)\n             self.send_clients_lists()\n-\n+            self.send_liveIPs_lists()\n \n     def handle_getname(self, name):\n         if self.clients.has_key(name):\n@@ -33,6 +35,7 @@ def handle_getname(self, name):\n         send_msg \u003d \"\u003cserver\u003e /%s/read/Welcome!\" % (name, )\n         self.sendLine(send_msg )\n         self.send_clients_lists()\n+        self.send_liveIPs_lists()\n \n     def dataReceived(self, data):\n         if self.state \u003d\u003d \"READATA\":\n@@ -86,6 +89,17 @@ def send_clients_lists(self):\n         for name, protocol in self.clients.iteritems():\n             protocol.sendLine(message)\n \n+    def send_liveIPs_lists(self):\n+        names \u003d \u0027\u0027\n+        count \u003d 0\n+        for name, ip in self.liveIps.iteritems():\n+            names +\u003d \u0027/\u0027 + ip\n+            count +\u003d1\n+        #message \u003d \"\u003cserver\u003e there are %s clients. %s\" %(str(count), names)\n+        message \u003d \"\u003cserver\u003e /broadcast/read/liveIps/%s%s\" %(str(count), names)\n+        for name, protocol in self.clients.iteritems():\n+            protocol.sendLine(message)\n+\n     def handle_Command(self, msg_array, raw_msg):\n         print \"clients are %s \" %self.clients\n         if len(msg_array)\u003e\u003d3 and (msg_array[2] \u003d\u003d \u0027read\u0027or msg_array[2] \u003d\u003d \u0027write\u0027or msg_array[2] \u003d\u003d \u0027exec\u0027 or msg_array[2] \u003d\u003d \u0027OK\u0027):\n@@ -96,6 +110,10 @@ def handle_Command(self, msg_array, raw_msg):\n                     self.state \u003d \"READATA\"\n                     self.dest \u003d msg_array[1]\n                     self.message(msg_array[1], raw_msg)\n+                elif msg_array[2] \u003d\u003d \u0027write\u0027 and msg_array[3] \u003d\u003d \u0027live\u0027:\n+                    self.liveIps[self.name] \u003d msg_array[4]\n+                    #print \"live IPs are %s\" %self.liveIps\n+                    self.send_liveIPs_lists()\n                 else:\n                     self.message(msg_array[1], raw_msg)\n             else :\n@@ -109,11 +127,11 @@ def handle_Command(self, msg_array, raw_msg):\n         \n \n class ChatFactory(Factory):\n-\n     def __init__(self):\n         self.clients \u003d {} # maps user names to Chat instances\n+        self.liveIps \u003d {}\n     def buildProtocol(self, addr):\n-        return Chat(self.clients)\n+        return Chat(self.clients, self.liveIps)\n \n \n ifaceListeningPort \u003d reactor.listenTCP(45678, ChatFactory())"
        }
      ]
    }
  },
  {
    "name": "Null pointer exceptions are sometimes thrown thrown by javaFX",
    "url": "https://github.com/asgill/SEM-25/issues/54",
    "description": "Game continues to work when this happens\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/asgill/SEM-25/commit/647f542922b78abb75ed333e38d01fb2ac7be04c",
      "files": [
        {
          "file_name": "src/main/java/nl/tudelft/bejeweled/game/BejeweledGame.java",
          "patch": "@@ -134,6 +134,10 @@ public void stop() {\n             return;\n         }\n \n+        inProgress \u003d false;\n+        isStop \u003d true;\n+        isResume \u003d false;\n+        \n         Logger.logInfo(\"Final score: \" + score);\n         int place \u003d highScore.isHighScore(score);\n         if (place \u003e  0) {\n@@ -157,10 +161,6 @@ public void stop() {\n         spriteStore.removeAllSprites();\n         board.resetGrid();\n \n-        inProgress \u003d false;\n-        isStop \u003d true;\n-        isResume \u003d false;\n-        \n         File boardFile \u003d new File(\"board.mine\");\n         File scoreFile \u003d new File(\"score.mine\");\n         if (boardFile.exists() || scoreFile.exists()) {"
        }
      ]
    }
  },
  {
    "name": "Using DownloadSchritt-WFS2_*.xml in headless mode causes Null-Pointer Exception",
    "url": "https://github.com/Intevation/downloadclient/issues/42",
    "description": "A Null-Pointer exception is raised when trying to download from WFS 2.0 basic and simple and using the provided example download-step files.\n\n```\nINFORMATION: Using download config file: DownloadSchritt-WFS2_Basic.xml\nMai 31, 2016 9:18:19 AM de.bayern.gdi.Headless main\nINFORMATION: Download configuration: [DownloadStep:\n        serviceType: \"WFS2_BASIC\"\n        serviceURL: \"http://geoserv.weichand.de:8080/geoserver/wfs\"\n        dataset: \"bvv:gmd_ex\"\n        path: \"/tmp/\"\n        parameters: [Parameter: key \u003d \"srsName\" value \u003d \"urn:ogc:def:crs:EPSG::31468\"], [Parameter: key \u003d \"bbox\" value \u003d \"5500000,4500000,5500500,4500500,urn:ogc:def:crs:EPSG::31468\"]]\n        processing steps:\n]\nMai 31, 2016 9:18:19 AM de.bayern.gdi.processor.DownloadStepConverter createWfsDownload\nINFORMATION: url: http://geoserv.weichand.de:8080/geoserver/wfs?service\u003dwfs\u0026request\u003dGetFeature\u0026version\u003d2.0.0\u0026typeNames\u003dbvv%3Agmd_ex\u0026srsName\u003durn%3Aogc%3Adef%3Acrs%3AEPSG%3A%3A31468\u0026bbox\u003d5500000%2C4500000%2C5500500%2C4500500%2Curn%3Aogc%3Adef%3Acrs%3AEPSG%3A%3A31468\nMai 31, 2016 9:18:19 AM de.bayern.gdi.processor.DownloadStepConverter createWfsDownload\nINFORMATION: Download to file \"/tmp/gdibydl-20160531091819/download.gml\"\nMai 31, 2016 9:18:19 AM de.bayern.gdi.processor.JobList run\nINFORMATION: Executing job list\n[WARNING] \njava.lang.NullPointerException\n        at de.bayern.gdi.processor.FileDownloadJob.download(FileDownloadJob.java:74)\n        at de.bayern.gdi.processor.AbstractDownloadJob.run(AbstractDownloadJob.java:62)\n        at de.bayern.gdi.processor.JobList.run(JobList.java:52)\n        at de.bayern.gdi.processor.Processor.run(Processor.java:149)\n        at java.lang.Thread.run(Thread.java:745)\n```\n",
    "keywords": [
      "de",
      "using",
      "de bayern",
      "bayern gdi",
      "gdi processor",
      "run",
      "joblist",
      "bayern",
      "processor",
      "gdi",
      "31 2016",
      "download",
      "9:18:19",
      "2016",
      "mai",
      "information",
      "31"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/Intevation/downloadclient/commit/682e3b4a103955d04ac25a4dd0c1dcacc877b2c7",
      "files": [
        {
          "file_name": "src/main/java/de/bayern/gdi/processor/AbstractDownloadJob.java",
          "patch": "@@ -66,6 +66,26 @@ public void run(Processor p) throws JobExecutionException {\n     }\n \n     /**\n+     * Broadcasts a message to a processor if set.\n+     * @param message The message to broadcast.\n+     */\n+    protected void broadcastMessage(String message) {\n+        if (this.processor !\u003d null) {\n+            this.processor.broadcastMessage(message);\n+        }\n+    }\n+\n+    /**\n+     * Broadcasts an exception to a processor if set.\n+     * @param e The exception to broadcast.\n+     */\n+    protected void broadcastException(JobExecutionException e) {\n+        if (this.processor !\u003d null) {\n+            this.processor.broadcastException(e);\n+        }\n+    }\n+\n+    /**\n      * Override this for the concrete download.\n      * @throws JobExecutionException Something went wrong during\n      * the download."
        },
        {
          "file_name": "src/main/java/de/bayern/gdi/processor/AtomDownloadJob.java",
          "patch": "@@ -55,8 +55,6 @@\n     private long currentCount;\n     private long totalCount;\n \n-    private Processor processor;\n-\n     public AtomDownloadJob() {\n     }\n "
        },
        {
          "file_name": "src/main/java/de/bayern/gdi/processor/FileDownloadJob.java",
          "patch": "@@ -20,7 +20,6 @@\n import java.io.File;\n import java.io.IOException;\n import java.net.URL;\n-import java.util.logging.Logger;\n \n import org.apache.http.client.methods.HttpGet;\n import org.apache.http.impl.client.CloseableHttpClient;\n@@ -34,14 +33,9 @@\n /** FileDownloadJob is a job to download features from a service. */\n public class FileDownloadJob extends AbstractDownloadJob {\n \n-    private static final Logger log\n-        \u003d Logger.getLogger(FileDownloadJob.class.getName());\n-\n     private String urlString;\n     private File file;\n \n-    private Processor processor;\n-\n     public FileDownloadJob() {\n     }\n \n@@ -54,11 +48,9 @@ public FileDownloadJob(\n \n     @Override\n     public void bytesCounted(long count) {\n-        String message \u003d I18n.format(\"file.download.bytes\", count);\n-        processor.broadcastMessage(message);\n+        broadcastMessage(I18n.format(\"file.download.bytes\", count));\n     }\n \n-\n     @Override\n     protected void download() throws JobExecutionException {\n         URL url \u003d toURL(this.urlString);;\n@@ -71,7 +63,7 @@ protected void download() throws JobExecutionException {\n \n         CloseableHttpClient httpclient \u003d getClient(url);\n \n-        this.processor.broadcastMessage(I18n.getMsg(\"file.download.start\"));\n+        broadcastMessage(I18n.getMsg(\"file.download.start\"));\n \n         try {\n             HttpGet httpget \u003d new HttpGet(this.urlString);\n@@ -82,6 +74,6 @@ protected void download() throws JobExecutionException {\n         } finally {\n             HTTP.closeGraceful(httpclient);\n         }\n-        this.processor.broadcastMessage(I18n.getMsg(\"file.download.finished\"));\n+        broadcastMessage(I18n.getMsg(\"file.download.finished\"));\n     }\n }"
        }
      ]
    }
  },
  {
    "name": "snpEff annotation null pointer exception",
    "url": "https://github.com/molgenis/molgenis/issues/5565",
    "description": "#### Reproduce\r\n- Extract [test.zip](https://github.com/molgenis/molgenis/files/596812/test.zip) and import resulting file using the \u0027Upload\u0027 plugin with name \u0027testvcf\u0027\r\n- Select the \u0027testvcf\u0027 entity in the \u0027Data explorer\u0027 plugin\r\n- Select the annotation tab\r\n- Select the \u0027snpEff\u0027 annotator in the \u0027Available annotators\u0027 column (if the snpEff annotator is not available then configure it first)\r\n- Select \u0027Annotate\u0027\r\n\r\n#### Expected\r\n- Annotation successful\r\n\r\n#### Observed\r\n- ```java.lang.NullPointerException``` displayed above 1/1 progress bar",
    "keywords": [
      "####",
      "annotation",
      "select"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/molgenis/molgenis/commit/d8fd122fd5aaafc5f1980f097a18b962daf0ce1b",
      "files": [
        {
          "file_name": "molgenis-data-annotators/src/main/java/org/molgenis/data/annotation/web/CrudRepositoryAnnotator.java",
          "patch": "@@ -75,9 +75,8 @@ private void annotate(RepositoryAnnotator annotator, Repository\u003cEntity\u003e reposito\n \t\t\t\t\tRepository externalRepository \u003d dataService.getMeta().createRepository(targetMetaData);\n \t\t\t\t\tpermissionSystemService.giveUserEntityPermissions(SecurityContextHolder.getContext(),\n \t\t\t\t\t\t\tCollections.singletonList(externalRepository.getName()));\n-\t\t\t\t\tRunAsSystemProxy.runAsSystem(() -\u003e dataService.getMeta().updateEntityType(AnnotatorUtils\n-\t\t\t\t\t\t\t.addAnnotatorMetaDataToRepositories(externalRepository.getEntityType(), attributeFactory,\n-\t\t\t\t\t\t\t\t\tannotator)));\n+\t\t\t\t\tRunAsSystemProxy.runAsSystem(\n+\t\t\t\t\t\t\t() -\u003e dataService.getMeta().updateEntityType(externalRepository.getEntityType()));\n \n \t\t\t\t\titerateOverEntitiesAndAnnotate(repository, annotator, DatabaseAction.ADD);\n \t\t\t\t}"
        }
      ]
    }
  },
  {
    "name": "If translator is removed, a null pointer exception might be thrown during generation",
    "url": "https://github.com/speedment/speedment/issues/223",
    "description": "no check against null is performed before an translator is invoked. This may result in the code generation crashing if a partiuclar translator has been removed using a plugin. This can be fixed b y modifying `CodeGenerationComponentImpl` so that it ignores translators whose constructor are set to null.\n",
    "keywords": [
      "null",
      "translator"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/speedment/speedment/commit/b28d3a0a9826b70521a9737d3ca69fc42ed9c792",
      "files": [
        {
          "file_name": "generator/src/main/java/com/speedment/generator/internal/component/CodeGenerationComponentImpl.java",
          "patch": "@@ -157,6 +157,8 @@ void remove(Class\u003cDOC\u003e docType, String key) {\n             .values()\n             .flatMap(m -\u003e MapStream.of(m).filterKey(nameFilter).values())\n             .map(s -\u003e (TranslatorSettings\u003cDOC, ?\u003e) s)\n+            .filter(s -\u003e s !\u003d null)\n+            .filter(s -\u003e s.getConstructor() !\u003d null)\n             .map(settings -\u003e settings.createDecorated(document))\n             .map(injector::inject);\n     }"
        }
      ]
    }
  },
  {
    "name": "Null pointer exception with refseq data",
    "url": "https://github.com/charite/jannovar/issues/258",
    "description": "There seems to be an issue regarding refseq data and the jannovar refseq/GFF parser. I get a null pointer exception while processing different data sets:\n\n```\n$ java -jar jannovar-cli-0.17.jar download --data-dir test_jannovar -d hg19/refseq_curated \nOptions\nverbosity: 1\ndataSourceFiles: [bundle:///default_sources.ini]\ndataSourceNames: [hg19/refseq_curated]\ndownloadPathtest_jannovar\nHTTP proxy: null\nHTTPS proxy: null\nFTP proxy: null\nDownloading/parsing for data source \"hg19/refseq_curated\"\nINFO Downloading data...\nINFO Downloading ftp://ftp.ncbi.nlm.nih.gov/genomes/H_sapiens/ARCHIVE/ANNOTATION_RELEASE.105/GFF/ref_GRCh37.p13_top_level.gff3.gz\nINFO Creating directory test_jannovar/hg19/refseq_curated\nINFO (server did not tell us the file size, no progress bar)\nINFO Downloading ftp://ftp.ncbi.nlm.nih.gov/genomes/H_sapiens/ARCHIVE/ANNOTATION_RELEASE.105/RNA/rna.fa.gz\nINFO (server did not tell us the file size, no progress bar)\nINFO Downloading http://hgdownload.soe.ucsc.edu/goldenPath/hg19/database/chromInfo.txt.gz\n[\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d]   100%     \nINFO Downloading ftp://ftp.ncbi.nlm.nih.gov/genomes/H_sapiens/ARCHIVE/ANNOTATION_RELEASE.105/Assembled_chromosomes/chr_accessions_GRCh37.p13\nINFO (server did not tell us the file size, no progress bar)\nINFO Building ReferenceDictionary...\nINFO Parsing transcripts...\nINFO Determined GTF/GFF file version to be GFF3\nINFO Loaded 1936560 GFF records for 44939 genes\nException in thread \"main\" java.lang.NullPointerException\n    at de.charite.compbio.jannovar.impl.parse.refseq.RefSeqParser.processGeneGFFRecords(RefSeqParser.java:264)\n    at de.charite.compbio.jannovar.impl.parse.refseq.RefSeqParser.recordsToBuilders(RefSeqParser.java:166)\n    at de.charite.compbio.jannovar.impl.parse.refseq.RefSeqParser.run(RefSeqParser.java:79)\n    at de.charite.compbio.jannovar.datasource.RefSeqJannovarDataFactory.parseTranscripts(RefSeqJannovarDataFactory.java:38)\n    at de.charite.compbio.jannovar.datasource.JannovarDataFactory.build(JannovarDataFactory.java:99)\n    at de.charite.compbio.jannovar.cmd.download.DownloadCommand.run(DownloadCommand.java:42)\n    at de.charite.compbio.jannovar.Jannovar.main(Jannovar.java:111)\n```\n\n```\n$ java -jar jannovar-cli-0.17.jar download --data-dir test_jannovar -d mm9/refseq\nOptions\nverbosity: 1\ndataSourceFiles: [bundle:///default_sources.ini]\ndataSourceNames: [mm9/refseq]\ndownloadPathtest_jannovar\nHTTP proxy: null\nHTTPS proxy: null\nFTP proxy: null\nDownloading/parsing for data source \"mm9/refseq\"\nINFO Downloading data...\nINFO Downloading ftp://ftp.ncbi.nlm.nih.gov/genomes/M_musculus/ARCHIVE/BUILD.37.2/GFF/ref_MGSCv37_top_level.gff3.gz\nINFO Creating directory test_jannovar/mm9/refseq\nINFO (server did not tell us the file size, no progress bar)\nINFO Downloading ftp://ftp.ncbi.nlm.nih.gov/genomes/M_musculus/ARCHIVE/BUILD.37.2/RNA/rna.fa.gz\nINFO (server did not tell us the file size, no progress bar)\nINFO Downloading http://hgdownload.soe.ucsc.edu/goldenPath/mm9/database/chromInfo.txt.gz\n[\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d]   100%     \nINFO Downloading ftp://ftp.ncbi.nlm.nih.gov/genomes/M_musculus/ARCHIVE/BUILD.37.2/Assembled_chromosomes/chr_accessions_MGSCv37\nINFO (server did not tell us the file size, no progress bar)\nINFO Building ReferenceDictionary...\nINFO Parsing transcripts...\nINFO Determined GTF/GFF file version to be GFF3\nException in thread \"main\" java.lang.NullPointerException\n    at de.charite.compbio.jannovar.impl.parse.refseq.RefSeqParser.loadRecords(RefSeqParser.java:342)\n    at de.charite.compbio.jannovar.impl.parse.refseq.RefSeqParser.run(RefSeqParser.java:79)\n    at de.charite.compbio.jannovar.datasource.RefSeqJannovarDataFactory.parseTranscripts(RefSeqJannovarDataFactory.java:38)\n    at de.charite.compbio.jannovar.datasource.JannovarDataFactory.build(JannovarDataFactory.java:99)\n    at de.charite.compbio.jannovar.cmd.download.DownloadCommand.run(DownloadCommand.java:42)\n    at de.charite.compbio.jannovar.Jannovar.main(Jannovar.java:111)\n```\n\n```\n$ java -jar jannovar-cli-0.17.jar download --data-dir test_jannovar -d hg38/refseq_curated\nOptions\nverbosity: 1\ndataSourceFiles: [bundle:///default_sources.ini]\ndataSourceNames: [hg38/refseq_curated]\ndownloadPathtest_jannovar\nHTTP proxy: null\nHTTPS proxy: null\nFTP proxy: null\nDownloading/parsing for data source \"hg38/refseq_curated\"\nINFO Downloading data...\nINFO Downloading ftp://ftp.ncbi.nlm.nih.gov/genomes/H_sapiens/GFF/ref_GRCh38.p7_top_level.gff3.gz\nINFO Creating directory test_jannovar/hg38/refseq_curated\nINFO (server did not tell us the file size, no progress bar)\nINFO Downloading ftp://ftp.ncbi.nlm.nih.gov/genomes/H_sapiens/RNA/rna.fa.gz\nINFO (server did not tell us the file size, no progress bar)\nINFO Downloading http://hgdownload.soe.ucsc.edu/goldenPath/hg38/database/chromInfo.txt.gz\n[\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d]   100%     \nINFO Downloading ftp://ftp.ncbi.nlm.nih.gov/genomes/H_sapiens/Assembled_chromosomes/chr_accessions_GRCh38.p7\nINFO (server did not tell us the file size, no progress bar)\nINFO Building ReferenceDictionary...\nINFO Parsing transcripts...\nINFO Determined GTF/GFF file version to be GFF3\nINFO Loaded 3519976 GFF records for 59894 genes\nException in thread \"main\" java.lang.NullPointerException\n    at de.charite.compbio.jannovar.impl.parse.refseq.RefSeqParser.processGeneGFFRecords(RefSeqParser.java:264)\n    at de.charite.compbio.jannovar.impl.parse.refseq.RefSeqParser.recordsToBuilders(RefSeqParser.java:166)\n    at de.charite.compbio.jannovar.impl.parse.refseq.RefSeqParser.run(RefSeqParser.java:79)\n    at de.charite.compbio.jannovar.datasource.RefSeqJannovarDataFactory.parseTranscripts(RefSeqJannovarDataFactory.java:38)\n    at de.charite.compbio.jannovar.datasource.JannovarDataFactory.build(JannovarDataFactory.java:99)\n    at de.charite.compbio.jannovar.cmd.download.DownloadCommand.run(DownloadCommand.java:42)\n    at de.charite.compbio.jannovar.Jannovar.main(Jannovar.java:111)\n```\n",
    "keywords": [
      "exception",
      "jannovar impl",
      "de charite",
      "gov/genomes/m_musculus/archive/build",
      "--data-dir",
      "parsing",
      "nih",
      "progress bar",
      "building",
      "datasourcenames",
      "impl",
      "bar",
      "java",
      "options",
      "jar",
      "https",
      "$",
      "17",
      "proxy: null",
      "version",
      "proxy",
      "1",
      "size",
      "determined",
      "datasource",
      "downloadpathtest_jannovar",
      "file size",
      "creating",
      "gtf/gff",
      "downloadcommand",
      "java:38",
      "cmd",
      "[\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d]",
      "compbio",
      "size no",
      "server",
      "parse refseq",
      "100%",
      "compbio jannovar",
      "jannovar-cli-0",
      "downloading ftp://ftp",
      "http://hgdownload",
      "java:42",
      "jannovar datasource",
      "test_jannovar",
      "file",
      "no progress",
      "not tell",
      "ftp",
      "37",
      "ucsc",
      "parsetranscripts",
      "charite compbio",
      "nlm",
      "txt",
      "refseqparser",
      "gov/genomes/h_sapiens/archive/annotation_release",
      "bar info",
      "progress",
      "jannovar",
      "de",
      "refseqjannovardatafactory",
      "gff3 gz",
      "data",
      "tell",
      "soe",
      "charite",
      "main",
      "run",
      "source",
      "[bundle:///default_sources",
      "ncbi",
      "download",
      "downloading",
      "nlm nih",
      "gff3",
      "us",
      "referencedictionary",
      "info",
      "tell us",
      "transcripts",
      "info downloading",
      "refseq",
      "nullpointerexception",
      "null",
      "jannovardatafactory",
      "http",
      "fa",
      "java:79",
      "ftp://ftp ncbi",
      "no",
      "ftp://ftp",
      "ini]",
      "downloading/parsing",
      "directory",
      "not",
      "ncbi nlm",
      "-d",
      "-jar",
      "lang",
      "thread",
      "parse",
      "datasourcefiles",
      "info creating",
      "gz",
      "build",
      "info server",
      "verbosity",
      "java:99",
      "java:111"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/charite/jannovar/commit/73f3da4c152795a03a5b12f23968d33be89e345b",
      "files": [
        {
          "file_name": "jannovar-core/src/main/java/de/charite/compbio/jannovar/impl/parse/refseq/RefSeqParser.java",
          "patch": "@@ -261,7 +261,7 @@ private void loadFASTA(Map\u003cString, TranscriptModelBuilder\u003e builders, String path\n \t\t\t\tcdsRegion \u003d new GenomeInterval(txRegion.getGenomeBeginPos(), 0);\n \t\t\tbuilder.setCDSRegion(cdsRegion);\n \n-\t\t\tif (onlyCurated() \u0026\u0026 mrnaName.startsWith(\"X\")) {\n+\t\t\tif (onlyCurated() \u0026\u0026 (mrnaName \u003d\u003d null || mrnaName.startsWith(\"X\"))) {\n \t\t\t\tLOGGER.debug(\"Skipping non-curated transcript {}\", new Object[] { mrnaName });\n \t\t\t\tcontinue; // skip non-curated one\n \t\t\t}"
        },
        {
          "file_name": "manual/annotate_pos.rst",
          "patch": "@@ -11,7 +11,7 @@ Jannovar will then return the effect and the HGVS annotation for each chromosoma\n \n .. code-block:: console\n \n-    # java -jar jannovar-cli-0.16.jar annotate-pos -d data/hg19_ucsc.ser -i \u0027chr1:12345C\u003eA\u0027 \u0027chr1:12346C\u003eA\u0027\n+    # java -jar jannovar-cli-0.17.1.jar annotate-pos -d data/hg19_ucsc.ser -i \u0027chr1:12345C\u003eA\u0027 \u0027chr1:12346C\u003eA\u0027\n     [...]\n     #change     effect  hgvs_annotation\n     chr1:12345C\u003eA       CODING_TRANSCRIPT_INTRON_VARIANT        DDX11L1:uc010nxq.1:c.38+118C\u003eA:p.\u003d"
        },
        {
          "file_name": "manual/annotate_vcf.rst",
          "patch": "@@ -15,7 +15,7 @@ For example, for annotating the ``small.vcf`` file in the ``examples`` directory\n \n .. code-block:: console\n \n-    # java -jar jannovar-cli-0.16.jar annotate -d data/hg19_ucsc.ser -i examples/small.vcf\n+    # java -jar jannovar-cli-0.17.1.jar annotate -d data/hg19_ucsc.ser -i examples/small.vcf\n     [...]\n     # ls examples/small.jv.vcf\n     small.jv.vcf\n@@ -41,7 +41,7 @@ Here is an example of using this command line option:\n \n .. code-block:: console\n \n-    # java -jar jannovar-cli-0.16.jar annotate --no-3-prime-shifting \\\n+    # java -jar jannovar-cli-0.17.1.jar annotate --no-3-prime-shifting \\\n         -d data/hg19_refseq.ser -i examples/small.vcf\n \n The Show-All Option\n@@ -52,7 +52,7 @@ You can use the ``--show-all``/``-a`` option to write out all functional annotat\n \n .. code-block:: console\n \n-    # java -jar jannovar-cli-0.16.jar annotate --show-all \\\n+    # java -jar jannovar-cli-0.17.1.jar annotate --show-all \\\n         -d data/hg19_refseq.ser -i examples/small.vcf\n \n For example, the first line of ``small.jv.vcf`` will look as follows and contain multiple effects and HGVS annotations."
        },
        {
          "file_name": "manual/datasource.rst",
          "patch": "@@ -36,7 +36,7 @@ When saving the above file contents as ``my_ucsc.ini``, you can pass it to the J\n \n .. code-block:: bash\n \n-    java -Xms2G -Xmx2G -jar jannovar-cli-0.16.jar download -s my_ucsc.ini -d hg19/ucsc\n+    java -Xms2G -Xmx2G -jar jannovar-cli-0.17.1.jar download -s my_ucsc.ini -d hg19/ucsc\n \n Your INI file can either add new definitions or override the built-in ones.\n In fact, the definition from above is part of the INI file that is contained in the Jannovar JAR file and used by default."
        },
        {
          "file_name": "manual/download.rst",
          "patch": "@@ -22,7 +22,7 @@ You can view the built-in database names using the ``db-list`` Jannovar command:\n \n .. code-block:: console\n \n-    # java -jar jannovar-cli-0.16.jar db-list\n+    # java -jar jannovar-cli-0.17.1.jar db-list\n     [...]\n         hg18/refseq_curated\n         hg19/ucsc\n@@ -53,6 +53,6 @@ Let us now download the RefSeq and UCSC annotations for human release *hg19*:\n \n .. code-block:: console\n \n-    # java -jar jannovar-cli-0.16.jar download -d hg19/refseq -d hg19/ucsc\n+    # java -jar jannovar-cli-0.17.1.jar download -d hg19/refseq -d hg19/ucsc\n \n "
        },
        {
          "file_name": "manual/quickstart.rst",
          "patch": "@@ -5,10 +5,10 @@ Quickstart\n \n This short How-To guides you from downloading the Jannovar program to annotating a VCF file in 5 steps.\n \n-#. Download the current stable release from our `GitHub project \u003chttps://github.com/charite/jannovar\u003e`_ by clicking `here \u003chttps://github.com/charite/jannovar/releases/download/v0.16/jannovar-0.16.zip\u003e`_.\n+#. Download the current stable release from our `GitHub project \u003chttps://github.com/charite/jannovar\u003e`_ by clicking `here \u003chttps://github.com/charite/jannovar/releases/download/v0.17.1/jannovar-0.17.1.zip\u003e`_.\n #. Extract the ZIP archive.\n \n-   * you should find file called ``jannovar-cli-0.16.jar`` in the ZIP\n+   * you should find file called ``jannovar-cli-0.17.1.jar`` in the ZIP\n    * you should also find a file ``small.vcf`` file in the folder ``examples``\n \n #. Download the `RefSeq \u003chttp://www.ncbi.nlm.nih.gov/refseq/\u003e`_ transcript database for the release *hg19/GRCh37*.\n@@ -20,14 +20,14 @@ This short How-To guides you from downloading the Jannovar program to annotating\n \n    .. code-block:: console\n \n-      # java -jar jannovar-cli-0.16.jar download -d hg19/refseq\n+      # java -jar jannovar-cli-0.17.1.jar download -d hg19/refseq\n \n    This will create the file ``data/hg19_refseq.ser`` which is a self-contained transcript database and can be used for functional annotation.\n #. Annotate the file ``small.vcf`` from the ``examples`` directory.\n \n    .. code-block:: console\n \n-      # java -jar jannovar-cli-0.16.jar annotate -d data/hg19_refseq.ser -i examples/small.vcf\n+      # java -jar jannovar-cli-0.17.1.jar annotate -d data/hg19_refseq.ser -i examples/small.vcf\n \n    Jannovar will now load the transcript database from ``data/hg19_refseq.ser`` and then read ``examples/small.vcf`` file.\n    Each contained variant in this file will be annotated with an ``EFFECT`` and an ``HGVS`` field in the ``VCF`` info column."
        }
      ]
    }
  },
  {
    "name": "null pointer exception on converters when no entity-body",
    "url": "https://github.com/apptik/jus/issues/38",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/apptik/jus/commit/49cbd9e839f55c42b2f776df1b1e0d3f5033ba93",
      "files": [
        {
          "file_name": "converter/jus-gson/src/main/java/io/apptik/comm/jus/converter/GsonResponseConverter.java",
          "patch": "@@ -34,7 +34,7 @@ public GsonResponseConverter(TypeAdapter\u003cT\u003e adapter) {\n \n     @Override\n     public T convert(NetworkResponse value) throws IOException {\n-        if(value.statusCode \u003d\u003d 204) {\n+        if (value.statusCode \u003d\u003d 204 || value.statusCode \u003d\u003d 205) {\n             return null;\n         } else {\n             Reader reader \u003d value.getCharStream();"
        },
        {
          "file_name": "converter/jus-jackson/src/main/java/io/apptik/comm/jus/converter/JacksonResponseConverter.java",
          "patch": "@@ -26,18 +26,23 @@\n import io.apptik.comm.jus.toolbox.Utils;\n \n public final class JacksonResponseConverter\u003cT\u003e implements Converter\u003cNetworkResponse, T\u003e {\n-  private final ObjectReader adapter;\n+    private final ObjectReader adapter;\n \n-  public JacksonResponseConverter(ObjectReader adapter) {\n-    this.adapter \u003d adapter;\n-  }\n+    public JacksonResponseConverter(ObjectReader adapter) {\n+        this.adapter \u003d adapter;\n+    }\n \n-  @Override public T convert(NetworkResponse value) throws IOException {\n-    Reader reader \u003d value.getCharStream();\n-    try {\n-      return adapter.readValue(reader);\n-    } finally {\n-      Utils.closeQuietly(reader);\n+    @Override\n+    public T convert(NetworkResponse value) throws IOException {\n+        if (value.statusCode \u003d\u003d 204 || value.statusCode \u003d\u003d 205) {\n+            return null;\n+        } else {\n+            Reader reader \u003d value.getCharStream();\n+            try {\n+                return adapter.readValue(reader);\n+            } finally {\n+                Utils.closeQuietly(reader);\n+            }\n+        }\n     }\n-  }\n }"
        },
        {
          "file_name": "converter/jus-jjson/src/main/java/io/apptik/comm/jus/converter/JJsonArrayResponseConverter.java",
          "patch": "@@ -28,15 +28,20 @@\n \n public final class JJsonArrayResponseConverter implements Converter\u003cNetworkResponse, JsonArray\u003e {\n \n-  public JJsonArrayResponseConverter() {\n-  }\n+    public JJsonArrayResponseConverter() {\n+    }\n \n-  @Override public JsonArray convert(NetworkResponse value) throws IOException {\n-    Reader reader \u003d value.getCharStream();\n-    try {\n-      return JsonElement.readFrom(reader).asJsonArray();\n-    } finally {\n-      Utils.closeQuietly(reader);\n+    @Override\n+    public JsonArray convert(NetworkResponse value) throws IOException {\n+        if (value.statusCode \u003d\u003d 204 || value.statusCode \u003d\u003d 205) {\n+            return null;\n+        } else {\n+            Reader reader \u003d value.getCharStream();\n+            try {\n+                return JsonElement.readFrom(reader).asJsonArray();\n+            } finally {\n+                Utils.closeQuietly(reader);\n+            }\n+        }\n     }\n-  }\n }"
        },
        {
          "file_name": "converter/jus-jjson/src/main/java/io/apptik/comm/jus/converter/JJsonObjectResponseConverter.java",
          "patch": "@@ -28,15 +28,20 @@\n \n public final class JJsonObjectResponseConverter implements Converter\u003cNetworkResponse, JsonObject\u003e {\n \n-  public JJsonObjectResponseConverter() {\n-  }\n+    public JJsonObjectResponseConverter() {\n+    }\n \n-  @Override public JsonObject convert(NetworkResponse value) throws IOException {\n-    Reader reader \u003d value.getCharStream();\n-    try {\n-      return JsonElement.readFrom(reader).asJsonObject();\n-    } finally {\n-      Utils.closeQuietly(reader);\n+    @Override\n+    public JsonObject convert(NetworkResponse value) throws IOException {\n+        if (value.statusCode \u003d\u003d 204 || value.statusCode \u003d\u003d 205) {\n+            return null;\n+        } else {\n+            Reader reader \u003d value.getCharStream();\n+            try {\n+                return JsonElement.readFrom(reader).asJsonObject();\n+            } finally {\n+                Utils.closeQuietly(reader);\n+            }\n+        }\n     }\n-  }\n }"
        },
        {
          "file_name": "converter/jus-jjson/src/main/java/io/apptik/comm/jus/converter/JJsonResponseConverter.java",
          "patch": "@@ -28,15 +28,20 @@\n \n public final class JJsonResponseConverter implements Converter\u003cNetworkResponse, JsonElement\u003e {\n \n-  public JJsonResponseConverter() {\n-  }\n-\n-  @Override public JsonElement convert(NetworkResponse value) throws IOException {\n-    Reader reader \u003d value.getCharStream();\n-    try {\n-      return JsonElement.readFrom(reader);\n-    } finally {\n-      Utils.closeQuietly(reader);\n+    public JJsonResponseConverter() {\n+    }\n+\n+    @Override\n+    public JsonElement convert(NetworkResponse value) throws IOException {\n+        if (value.statusCode \u003d\u003d 204 || value.statusCode \u003d\u003d 205) {\n+            return null;\n+        } else {\n+            Reader reader \u003d value.getCharStream();\n+            try {\n+                return JsonElement.readFrom(reader);\n+            } finally {\n+                Utils.closeQuietly(reader);\n+            }\n+        }\n     }\n-  }\n }"
        },
        {
          "file_name": "converter/jus-moshi/src/main/java/io/apptik/comm/jus/converter/MoshiResponseConverter.java",
          "patch": "@@ -34,11 +34,15 @@ public MoshiResponseConverter(JsonAdapter\u003cT\u003e adapter) {\n \n     @Override\n     public T convert(NetworkResponse value) throws IOException {\n-        BufferedSource source \u003d value.getBufferedSource();\n-        try {\n-            return adapter.fromJson(source);\n-        } finally {\n-            Utils.closeQuietly(source);\n+        if (value.statusCode \u003d\u003d 204 || value.statusCode \u003d\u003d 205) {\n+            return null;\n+        } else {\n+            BufferedSource source \u003d value.getBufferedSource();\n+            try {\n+                return adapter.fromJson(source);\n+            } finally {\n+                Utils.closeQuietly(source);\n+            }\n         }\n     }\n }"
        },
        {
          "file_name": "converter/jus-protobuf/src/main/java/io/apptik/comm/jus/converter/ProtoResponseConverter.java",
          "patch": "@@ -37,13 +37,18 @@ public ProtoResponseConverter(Parser\u003cT\u003e parser) {\n \n     @Override\n     public T convert(NetworkResponse value) throws IOException {\n-        InputStream is \u003d value.getByteStream();\n-        try {\n-            return parser.parseFrom(is);\n-        } catch (InvalidProtocolBufferException e) {\n-            throw new RuntimeException(e); // Despite extending IOException, this is data mismatch.\n-        } finally {\n-            Utils.closeQuietly(is);\n+        if(value.statusCode \u003d\u003d 204 || value.statusCode \u003d\u003d 205) {\n+            return null;\n+        } else {\n+            InputStream is \u003d value.getByteStream();\n+            try {\n+                return parser.parseFrom(is);\n+            } catch (InvalidProtocolBufferException e) {\n+                throw new RuntimeException(e); // Despite extending IOException, this is data mismatch.\n+\n+            } finally {\n+                Utils.closeQuietly(is);\n+            }\n         }\n     }\n }"
        },
        {
          "file_name": "converter/jus-simplexml/src/main/java/io/apptik/comm/jus/converter/SimpleXmlResponseConverter.java",
          "patch": "@@ -26,33 +26,38 @@\n import io.apptik.comm.jus.NetworkResponse;\n \n public final class SimpleXmlResponseConverter\u003cT\u003e implements Converter\u003cNetworkResponse, T\u003e {\n-  private final Class\u003cT\u003e cls;\n-  private final Serializer serializer;\n-  private final boolean strict;\n+    private final Class\u003cT\u003e cls;\n+    private final Serializer serializer;\n+    private final boolean strict;\n \n-  public SimpleXmlResponseConverter(Class\u003cT\u003e cls, Serializer serializer, boolean strict) {\n-    this.cls \u003d cls;\n-    this.serializer \u003d serializer;\n-    this.strict \u003d strict;\n-  }\n+    public SimpleXmlResponseConverter(Class\u003cT\u003e cls, Serializer serializer, boolean strict) {\n+        this.cls \u003d cls;\n+        this.serializer \u003d serializer;\n+        this.strict \u003d strict;\n+    }\n \n-  @Override public T convert(NetworkResponse value) throws IOException {\n-    InputStream is \u003d value.getByteStream();\n-    try {\n-      T read \u003d serializer.read(cls, is, strict);\n-      if (read \u003d\u003d null) {\n-        throw new IllegalStateException(\"Could not deserialize body as \" + cls);\n-      }\n-      return read;\n-    } catch (RuntimeException | IOException e) {\n-      throw e;\n-    } catch (Exception e) {\n-      throw new RuntimeException(e);\n-    } finally {\n-      try {\n-        is.close();\n-      } catch (IOException ignored) {\n-      }\n+    @Override\n+    public T convert(NetworkResponse value) throws IOException {\n+        if (value.statusCode \u003d\u003d 204 || value.statusCode \u003d\u003d 205) {\n+            return null;\n+        } else {\n+            InputStream is \u003d value.getByteStream();\n+            try {\n+                T read \u003d serializer.read(cls, is, strict);\n+                if (read \u003d\u003d null) {\n+                    throw new IllegalStateException(\"Could not deserialize body as \" + cls);\n+                }\n+                return read;\n+            } catch (RuntimeException | IOException e) {\n+                throw e;\n+            } catch (Exception e) {\n+                throw new RuntimeException(e);\n+            } finally {\n+                try {\n+                    is.close();\n+                } catch (IOException ignored) {\n+                }\n+            }\n+        }\n     }\n-  }\n }"
        },
        {
          "file_name": "converter/jus-wire/src/main/java/io/apptik/comm/jus/converter/WireResponseConverter.java",
          "patch": "@@ -37,11 +37,15 @@ public WireResponseConverter(ProtoAdapter\u003cT\u003e adapter) {\n \n     @Override\n     public T convert(NetworkResponse value) throws IOException {\n-        BufferedSource source \u003d value.getBufferedSource();\n-        try {\n-            return adapter.decode(source);\n-        } finally {\n-            Utils.closeQuietly(source);\n+        if (value.statusCode \u003d\u003d 204 || value.statusCode \u003d\u003d 205) {\n+            return null;\n+        } else {\n+            BufferedSource source \u003d value.getBufferedSource();\n+            try {\n+                return adapter.decode(source);\n+            } finally {\n+                Utils.closeQuietly(source);\n+            }\n         }\n     }\n "
        }
      ]
    }
  },
  {
    "name": "Deleting non existing entity on File Meta results in null pointer when using V1 REST api",
    "url": "https://github.com/molgenis/molgenis/issues/5990",
    "description": "### How to Reproduce\r\nCreate a user and grant the user writeMeta rights on File Meta\r\nUse the rest api to delete a non existing entity on FileMeta\r\nDELETE https://[server]/api/v1/sys_FileMeta/non-existing-entity_id\r\n\r\n### Expected behavior\r\ncall returns with a 204\r\n\r\n### Observed behavior\r\ncall returns with a 500, and a null pointer is thrown in the backend.\r\n\r\n```\r\n11:14:50.252 [ajp-bio-8009-exec-17] ERROR o.molgenis.data.rest.RestController -\r\njava.lang.NullPointerException: null\r\n\tat org.molgenis.file.FileMetaRepositoryDecorator.deleteFile(FileMetaRepositoryDecorator.java:78) ~[molgenis-file-3.1.0-SNAPSHOT.jar:3.1.0-SNAPSHOT]\r\n\tat org.molgenis.file.FileMetaRepositoryDecorator.deleteById(FileMetaRepositoryDecorator.java:45) ~[molgenis-file-3.1.0-SNAPSHOT.jar:3.1.0-SNAPSHOT]\r\n\tat org.molgenis.data.AbstractRepositoryDecorator.deleteById(AbstractRepositoryDecorator.java:143) ~[molgenis-data-3.1.0-SNAPSHOT.jar:3.1.0-SNAPSHOT]\r\n\tat org.molgenis.data.CascadeDeleteRepositoryDecorator.deleteById(CascadeDeleteRepositoryDecorator.java:43) ~[molgenis-data-3.1.0-SNAPSHOT.jar:3.1.0-SNAPSHOT]\r\n\tat org.molgenis.security.owned.OwnedEntityRepositoryDecorator.deleteById(OwnedEntityRepositoryDecorator.java:228) ~[molgenis-security-3.1.0-SNAPSHOT.jar:3.1.0-SNAPSHOT]\r\n```",
    "keywords": [
      "rest",
      "0-snapshot jar:3",
      "###",
      "data",
      "org",
      "0-snapshot",
      "deletebyid",
      "molgenis",
      "1",
      "filemetarepositorydecorator",
      "file",
      "null",
      "0-snapshot]",
      "jar:3",
      "1 0-snapshot]"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/molgenis/molgenis/commit/7b5bc33efcfcc28ed99eec914947ef361c4e985f",
      "files": [
        {
          "file_name": "molgenis-file/src/main/java/org/molgenis/file/FileMetaRepositoryDecorator.java",
          "patch": "@@ -2,12 +2,14 @@\n \n import org.molgenis.data.AbstractRepositoryDecorator;\n import org.molgenis.data.Repository;\n+import org.molgenis.data.UnknownEntityException;\n import org.molgenis.file.model.FileMeta;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n import java.util.stream.Stream;\n \n+import static java.lang.String.format;\n import static java.util.Objects.requireNonNull;\n \n /**\n@@ -42,7 +44,7 @@ public void delete(FileMeta fileMeta)\n \t@Override\n \tpublic void deleteById(Object id)\n \t{\n-\t\tdeleteFile(findOneById(id));\n+\t\tdeleteFile(getFileMeta(id));\n \t\tsuper.deleteById(id);\n \t}\n \n@@ -68,7 +70,7 @@ public void deleteAll(Stream\u003cObject\u003e ids)\n \t{\n \t\tsuper.deleteAll(ids.filter(id -\u003e\n \t\t{\n-\t\t\tthis.deleteFile(findOneById(id));\n+\t\t\tthis.deleteFile(getFileMeta(id));\n \t\t\treturn true;\n \t\t}));\n \t}\n@@ -81,4 +83,15 @@ private void deleteFile(FileMeta fileMeta)\n \t\t\tLOG.warn(\"Could not delete file \u0027{}\u0027 from file store\", fileMeta.getId());\n \t\t}\n \t}\n+\n+\tprivate FileMeta getFileMeta(Object id)\n+\t{\n+\t\tFileMeta fileMeta \u003d findOneById(id);\n+\t\tif (fileMeta \u003d\u003d null)\n+\t\t{\n+\t\t\tthrow new UnknownEntityException(\n+\t\t\t\t\tformat(\"Unknown [%s] with id [%s]\", getEntityType().getLabel(), id.toString()));\n+\t\t}\n+\t\treturn fileMeta;\n+\t}\n }"
        },
        {
          "file_name": "molgenis-file/src/test/java/org/molgenis/file/FileMetaRepositoryDecoratorTest.java",
          "patch": "@@ -4,6 +4,8 @@\n import org.mockito.Mock;\n import org.molgenis.data.Query;\n import org.molgenis.data.Repository;\n+import org.molgenis.data.UnknownEntityException;\n+import org.molgenis.data.meta.model.EntityType;\n import org.molgenis.file.model.FileMeta;\n import org.molgenis.test.AbstractMockitoTest;\n import org.testng.annotations.BeforeMethod;\n@@ -29,6 +31,8 @@\n \t@BeforeMethod\n \tpublic void setUpBeforeMethod()\n \t{\n+\t\tEntityType entityType \u003d when(mock(EntityType.class).getLabel()).thenReturn(\"file metadata\").getMock();\n+\t\twhen(fileMetaRepository.getEntityType()).thenReturn(entityType);\n \t\twhen(fileStore.delete(anyString())).thenReturn(true);\n \t\tfileMetaRepositoryDecorator \u003d new FileMetaRepositoryDecorator(fileMetaRepository, fileStore);\n \t}\n@@ -77,6 +81,14 @@ public void testDeleteById() throws Exception\n \t\tverify(fileStore).delete(\"id\");\n \t}\n \n+\t@Test(expectedExceptions \u003d UnknownEntityException.class, expectedExceptionsMessageRegExp \u003d \"Unknown \\\\[file metadata] with id \\\\[id]\")\n+\tpublic void testDeleteByIdUnknownId() throws Exception\n+\t{\n+\t\tFileMeta fileMeta \u003d getMockFileMeta(\"id\");\n+\t\twhen(fileMetaRepository.findOneById(\"id\")).thenReturn(null);\n+\t\tfileMetaRepositoryDecorator.deleteById(\"id\");\n+\t}\n+\n \t@Test\n \tpublic void testDeleteAll() throws Exception\n \t{"
        }
      ]
    }
  },
  {
    "name": "Null Pointer Exception",
    "url": "https://github.com/Vilbrekin/tinc_gui/issues/24",
    "description": "Reported by user:\n\nI\u0027m getting a null pointer error, see screenshot.\nIt happens when I\u0027m trying to point tinc to config path in /etc/tinc, I think it can\u0027t read it. \n\n![image](https://cloud.githubusercontent.com/assets/281450/4223084/c72d9480-3918-11e4-965e-222a35d2e3a1.png)\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/Vilbrekin/tinc_gui/commit/2e22114f8ea37794142c408ae294b7252f8d674e",
      "files": [
        {
          "file_name": "AndroidManifest.xml",
          "patch": "@@ -1,8 +1,8 @@\n \u003c?xml version\u003d\"1.0\" encoding\u003d\"utf-8\"?\u003e\n \u003cmanifest xmlns:android\u003d\"http://schemas.android.com/apk/res/android\" xmlns:tools\u003d\"http://schemas.android.com/tools\"\n     package\u003d\"org.poirsouille.tinc_gui\"\n-    android:versionCode\u003d\"11\"\n-    android:versionName\u003d\"0.9.10\" \u003e\n+    android:versionCode\u003d\"12\"\n+    android:versionName\u003d\"0.9.11\" \u003e\n \n     \u003cuses-sdk android:minSdkVersion\u003d\"10\" android:targetSdkVersion\u003d\"19\" /\u003e\n     \u003cuses-permission android:name\u003d\"android.permission.ACCESS_SUPERUSER\" /\u003e"
        },
        {
          "file_name": "src/org/poirsouille/tinc_gui/SettingsTools.java",
          "patch": "@@ -99,14 +99,18 @@ private void updateConfig()\n     private void addHostsToGroup(File iHostsDir, PreferenceGroup oGroup)\n     {\n         File[] aChildren \u003d iHostsDir.listFiles();\n-        for (File aChild : aChildren) \n+        // listFiles might return null even if it\u0027s a proper directory but we can\u0027t access it\n+        if (aChildren !\u003d null)\n         {\n-            // Apply similar check to tinc\u0027s check_id to filter only valid hosts configuration files\n-            if (aChild.getName().matches(\"[a-zA-Z0-9_]+\"))\n+            for (File aChild : aChildren) \n             {\n-                addFilePreference(aChild, oGroup, R.drawable.ic_menu_manage);\n-                // Look for -up/-down scripts for this host\n-                addUpDown(aChild, oGroup);\n+                // Apply similar check to tinc\u0027s check_id to filter only valid hosts configuration files\n+                if (aChild.getName().matches(\"[a-zA-Z0-9_]+\"))\n+                {\n+                    addFilePreference(aChild, oGroup, R.drawable.ic_menu_manage);\n+                    // Look for -up/-down scripts for this host\n+                    addUpDown(aChild, oGroup);\n+                }\n             }\n         }\n     }"
        }
      ]
    }
  },
  {
    "name": "Null Pointer Exception with multiple result sets",
    "url": "https://github.com/mybatis/mybatis-3/issues/132",
    "description": "When running a stored procedure that returns more than one result set, we get the following Null Pointer Exception on mybatis 3.2.4\n\n```\nCaused by: java.lang.NullPointerException\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleResultSets(DefaultResultSetHandler.java:159)\n    at org.apache.ibatis.executor.statement.CallableStatementHandler.query(CallableStatementHandler.java:64)\n    at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:70)\n    at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:57)\n    at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:259)\n    at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:132)\n    at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:105)\n    at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:81)\n    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:104)\n    ... 41 more\n\n```\n\nwhen running the same stored procedure in mybatis 3.2.2, we do not get this exception.  The exception occurs whether or not there is a empty result set present.\n\nthe null item appears to be the resultSets string array on the mappedStatement object, which you can see [here](https://github.com/mybatis/mybatis-3/blob/mybatis-3.2.4/src/main/java/org/apache/ibatis/executor/resultset/DefaultResultSetHandler.java#L159)\n\nour database is Sybase, and we\u0027re using jtds-1.2.4\n",
    "keywords": [
      "result",
      "exception",
      "2",
      "apache",
      "null",
      "org apache",
      "org",
      "cachingexecutor",
      "executor",
      "query",
      "baseexecutor",
      "ibatis",
      "apache ibatis"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/mybatis/mybatis-3/commit/97a4fbee4512924a7cad266bc98f49b6814587e7",
      "files": [
        {
          "file_name": "src/main/java/org/apache/ibatis/executor/resultset/DefaultResultSetHandler.java",
          "patch": "@@ -156,16 +156,19 @@ private void handleRefCursorOutputParameter(ResultSet rs, ParameterMapping param\n       resultSetCount++;\n     }\n \n-    while (rsw !\u003d null \u0026\u0026 resultSetCount \u003c mappedStatement.getResulSets().length) {\n-      ResultMapping parentMapping \u003d nextResultMaps.get(mappedStatement.getResulSets()[resultSetCount]);\n-      if (parentMapping !\u003d null) {\n-        String nestedResultMapId \u003d parentMapping.getNestedResultMapId();\n-        ResultMap resultMap \u003d configuration.getResultMap(nestedResultMapId);\n-        handleResultSet(rsw, resultMap, null, parentMapping);\n+    String[] resultSets \u003d mappedStatement.getResulSets();\n+    if (resultSets !\u003d null) {\n+      while (rsw !\u003d null \u0026\u0026 resultSetCount \u003c resultSets.length) {\n+        ResultMapping parentMapping \u003d nextResultMaps.get(resultSets[resultSetCount]);\n+        if (parentMapping !\u003d null) {\n+          String nestedResultMapId \u003d parentMapping.getNestedResultMapId();\n+          ResultMap resultMap \u003d configuration.getResultMap(nestedResultMapId);\n+          handleResultSet(rsw, resultMap, null, parentMapping);\n+        }\n+        rsw \u003d getNextResultSet(stmt);\n+        cleanUpAfterHandlingResultSet();\n+        resultSetCount++;\n       }\n-      rsw \u003d getNextResultSet(stmt);\n-      cleanUpAfterHandlingResultSet();\n-      resultSetCount++;\n     }\n \n     return collapseSingleResultList(multipleResults);"
        }
      ]
    }
  },
  {
    "name": "Null pointer on my local adapter fields from the SectionedRecyclerViewAdapter constructor?",
    "url": "https://github.com/afollestad/sectioned-recyclerview/issues/46",
    "description": "- [X] I have verified there are no duplicate active or recent bugs, questions, or requests\r\n- [X] I have verified that I am using the latest version of this library.\r\n- [X] I have given my issue a non-generic title.\r\n\r\n###### Include the following:\r\n - Library version: `0.4.4`\r\n - Device OS version: `7.1.1`\r\n - Device Manufacturer: `Android Emulator`\r\n - Device Name: `Nexus 5X base device`\r\n\r\nHello,\r\nso I updated from v0.4.1 to v0.4.4 today, and now the app crashes with a Nullpointer from `getItemCount(int section)` where I call `entries.getSize()` on my adapter list. The list shouldn\u0027t be null though, as this is the constructor:\r\n\r\n```java\r\nCacheEntriesAdapter(CompositeUnmodifiableList\u003cCacheEntry\u003e entries) {\r\n        Log.d(getClass().getSimpleName(), \"DUDUDU\");\r\n        this.entries \u003d entries;\r\n}\r\n```\r\n\r\nI already checked several times, and the input list is definitely not null, it just doesn\u0027t seem to execute the constructor before calling `entries.getSize()`, as my Log.d\u0027s in the first line don\u0027t get printed before it crashes. This problem doesn\u0027t appear in v0.4.1, v0.4.2 or v0.4.3.\r\n\r\n```java\r\n06-07 13:42:48.478 19590-19590/io.github.madeinspengergasse.wischmopp D/AndroidRuntime: Shutting down VM\r\n06-07 13:42:48.478 19590-19590/io.github.madeinspengergasse.wischmopp E/AndroidRuntime: FATAL EXCEPTION: main\r\n                                                                                        Process: io.github.madeinspengergasse.wischmopp, PID: 19590\r\n                                                                                        java.lang.NullPointerException: Attempt to invoke virtual method \u0027int io.github.madeinspengergasse.wischmopp.util.CompositeUnmodifiableList.sizeOfList1()\u0027 on a null object reference\r\n                                                                                            at io.github.madeinspengergasse.wischmopp.scan.view.CacheEntriesAdapter.getItemCount(CacheEntriesAdapter.java:43)\r\n                                                                                            at com.afollestad.sectionedrecyclerview.PositionManager.invalidate(PositionManager.java:23)\r\n                                                                                            at com.afollestad.sectionedrecyclerview.SectionedRecyclerViewAdapter.\u003cinit\u003e(SectionedRecyclerViewAdapter.java:32)\r\n                                                                                            at io.github.madeinspengergasse.wischmopp.scan.view.CacheEntriesAdapter.\u003cinit\u003e(CacheEntriesAdapter.java:28)\r\n                                                                                            at io.github.madeinspengergasse.wischmopp.scan.view.ScanFragment.showData(ScanFragment.java:142)\r\n                                                                                            at io.github.madeinspengergasse.wischmopp.scan.presenter.ScanPresenter$1.lambda$onGetStatsCompleted$0$ScanPresenter$1(ScanPresenter.java:120)\r\n                                                                                            at io.github.madeinspengergasse.wischmopp.scan.presenter.ScanPresenter$1$$Lambda$0.run(Unknown Source)\r\n                                                                                            at android.os.Handler.handleCallback(Handler.java:751)\r\n                                                                                            at android.os.Handler.dispatchMessage(Handler.java:95)\r\n                                                                                            at android.os.Looper.loop(Looper.java:154)\r\n                                                                                            at android.app.ActivityThread.main(ActivityThread.java:6119)\r\n                                                                                            at java.lang.reflect.Method.invoke(Native Method)\r\n                                                                                            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\r\n                                                                                            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\r\n```\r\n \r\n###### Reproduction Steps\r\n\r\n1. Create an args constructor in SectionedRecyclerViewAdapter in which you pass your entries list\r\n2. Run\r\n\r\nYou can find the current, non-working state of our app with this problem here: https://github.com/Xorok/Wischmopp/tree/testing/adrian\r\nThe important classes are CacheEntriesAdapter, ScanPresenter \u0026 ScanFragment in the scan package. You just have to press the big red button on the first screen to see the problem in action. If you decide to take a look at the project, any comments or possible improvements are welcome \r\n\r\n###### Expected Result\r\nIt doesn\u0027t call `entries.getSize()` before executing the constructor, the list gets initialized and the Nullpointer doesn\u0027t happen.\r\n\r\n###### Actual Result\r\nThe app crashes with a Nullpointer.",
    "keywords": [
      "com",
      "madeinspengergasse",
      "sectionedrecyclerviewadapter",
      "[x]",
      "handler",
      "nullpointer",
      "getsize",
      "cacheentriesadapter",
      "android",
      "scan",
      "main",
      "run",
      "crashes",
      "scanfragment",
      "view",
      "problem",
      "######",
      "wischmopp",
      "zygoteinit",
      "`",
      "app",
      "io github",
      "github",
      "`entries",
      "method",
      "os",
      "io",
      "getsize `",
      "constructor",
      "github madeinspengergasse",
      "list",
      "version",
      "madeinspengergasse wischmopp",
      "1",
      "entries",
      "null",
      "4",
      "v0",
      "device"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/afollestad/sectioned-recyclerview/commit/b7aad621c040f00cd802a53f38036a4a2e3e8084",
      "files": [
        {
          "file_name": ".travis.yml",
          "patch": "@@ -4,8 +4,8 @@ android:\n   components:\n     - tools\n     - platform-tools\n-    - build-tools-25.0.3\n-    - android-25\n+    - build-tools-26.0.0\n+    - android-26\n     - extra-android-support\n     - extra-android-m2repository\n     - extra-google-m2repository"
        },
        {
          "file_name": "README.md",
          "patch": "@@ -22,7 +22,7 @@ Add this to your module\u0027s `build.gradle` file:\n ```gradle\n dependencies {\n     // ... other dependencies\n-    compile \u0027com.afollestad:sectioned-recyclerview:0.4.4\u0027\n+    compile \u0027com.afollestad:sectioned-recyclerview:0.5.0\u0027\n }\n ```\n "
        },
        {
          "file_name": "build.gradle",
          "patch": "@@ -5,6 +5,11 @@ buildscript {\n \n     repositories {\n         jcenter()\n+        repositories {\n+            maven {\n+                url \u0027https://maven.google.com\u0027\n+            }\n+        }\n     }\n     dependencies {\n         classpath \u0027com.android.tools.build:gradle:\u0027 + versions.gradlePlugin\n@@ -14,6 +19,11 @@ buildscript {\n allprojects {\n     repositories {\n         jcenter()\n+        repositories {\n+            maven {\n+                url \u0027https://maven.google.com\u0027\n+            }\n+        }\n     }\n }\n "
        },
        {
          "file_name": "dependencies.gradle",
          "patch": "@@ -1,9 +1,9 @@\n ext.versions \u003d [\n         minSdk: 14,\n-        compileSdk: 25,\n-        buildTools: \u002725.0.3\u0027,\n-        publishVersion: \u00270.4.4\u0027,\n-        publishVersionCode: 14,\n+        compileSdk: 26,\n+        buildTools: \u002726.0.0\u0027,\n+        publishVersion: \u00270.5.0\u0027,\n+        publishVersionCode: 16,\n         gradlePlugin: \u00272.3.2\u0027,\n         supportLib: \u002725.3.1\u0027,\n         truth: \u00270.31\u0027,"
        },
        {
          "file_name": "library/src/main/java/com/afollestad/sectionedrecyclerview/ItemCoord.java",
          "patch": "@@ -3,8 +3,8 @@\n @SuppressWarnings(\"WeakerAccess\")\n public class ItemCoord {\n \n-  private int section;\n-  private int relativePos;\n+  private final int section;\n+  private final int relativePos;\n \n   ItemCoord(int section, int relativePos) {\n     this.section \u003d section;"
        },
        {
          "file_name": "library/src/main/java/com/afollestad/sectionedrecyclerview/PositionManager.java",
          "patch": "@@ -9,13 +9,19 @@\n   private final ArrayMap\u003cInteger, Integer\u003e headerLocationMap;\n   private final ArrayMap\u003cInteger, Boolean\u003e collapsedSectionMap;\n   private ItemProvider itemProvider;\n+  private boolean hasInvalidated;\n \n   PositionManager() {\n     this.headerLocationMap \u003d new ArrayMap\u003c\u003e(0);\n     this.collapsedSectionMap \u003d new ArrayMap\u003c\u003e(0);\n   }\n \n+  boolean hasInvalidated() {\n+    return hasInvalidated;\n+  }\n+\n   int invalidate(ItemProvider itemProvider) {\n+    this.hasInvalidated \u003d true;\n     this.itemProvider \u003d itemProvider;\n     int count \u003d 0;\n     headerLocationMap.clear();\n@@ -120,6 +126,18 @@ void toggleSectionExpanded(int section) {\n     }\n   }\n \n+  void expandAllSections() {\n+    for (int i \u003d 0; i \u003c itemProvider.getSectionCount(); i++) {\n+      expandSection(i);\n+    }\n+  }\n+\n+  void collapseAllSections() {\n+    for (int i \u003d 0; i \u003c itemProvider.getSectionCount(); i++) {\n+      collapseSection(i);\n+    }\n+  }\n+\n   boolean isSectionExpanded(int section) {\n     if (section \u003c 0 || section \u003e itemProvider.getSectionCount() - 1) {\n       throw new IllegalArgumentException(\"Section \" + section + \" is out of bounds.\");"
        },
        {
          "file_name": "library/src/main/java/com/afollestad/sectionedrecyclerview/SectionedRecyclerViewAdapter.java",
          "patch": "@@ -11,25 +11,20 @@\n \n import java.util.List;\n \n-/**\n- * @author Aidan Follestad (afollestad)\n- */\n+/** @author Aidan Follestad (afollestad) */\n @SuppressWarnings({\"WeakerAccess\", \"unused\"})\n public abstract class SectionedRecyclerViewAdapter\u003cVH extends SectionedViewHolder\u003e\n     extends RecyclerView.Adapter\u003cVH\u003e implements ItemProvider {\n \n-  private static final String TAG \u003d \"SectionedRVAdapter\";\n-\n   protected static final int VIEW_TYPE_HEADER \u003d -2;\n   protected static final int VIEW_TYPE_ITEM \u003d -1;\n-\n+  private static final String TAG \u003d \"SectionedRVAdapter\";\n   private PositionManager positionManager;\n   private GridLayoutManager layoutManager;\n   private boolean showHeadersForEmptySections;\n \n   public SectionedRecyclerViewAdapter() {\n     positionManager \u003d new PositionManager();\n-    positionManager.invalidate(this);\n   }\n \n   public void notifySectionChanged(@IntRange(from \u003d 0, to \u003d Integer.MAX_VALUE) int section) {\n@@ -46,7 +41,8 @@ public void notifySectionChanged(@IntRange(from \u003d 0, to \u003d Integer.MAX_VALUE) int\n       Log.d(TAG, \"There are no items in section \" + section + \" to notify.\");\n       return;\n     }\n-    Log.d(TAG, \"Invalidating \" + sectionItemCount + \" items starting at index \" + sectionHeaderIndex);\n+    Log.d(\n+        TAG, \"Invalidating \" + sectionItemCount + \" items starting at index \" + sectionHeaderIndex);\n     notifyItemRangeChanged(sectionHeaderIndex, sectionItemCount);\n   }\n \n@@ -61,16 +57,18 @@ public void collapseSection(int section) {\n   }\n \n   public void expandAllSections() {\n-    for (int i \u003d 0; i \u003c getSectionCount(); i++) {\n-      positionManager.expandSection(i);\n+    if (!positionManager.hasInvalidated()) {\n+      positionManager.invalidate(this);\n     }\n+    positionManager.expandAllSections();\n     notifyDataSetChanged();\n   }\n \n   public void collapseAllSections() {\n-    for (int i \u003d 0; i \u003c getSectionCount(); i++) {\n-      positionManager.collapseSection(i);\n+    if (!positionManager.hasInvalidated()) {\n+      positionManager.invalidate(this);\n     }\n+    positionManager.collapseAllSections();\n     notifyDataSetChanged();\n   }\n \n@@ -79,7 +77,6 @@ public void toggleSectionExpanded(int section) {\n     notifyDataSetChanged();\n   }\n \n-\n   public abstract int getSectionCount();\n \n   public abstract int getItemCount(int section);\n@@ -134,9 +131,7 @@ protected int getRowSpan(\n     return 1;\n   }\n \n-  /**\n-   * Converts an absolute position to a relative position and section.\n-   */\n+  /** Converts an absolute position to a relative position and section. */\n   public ItemCoord getRelativePosition(int absolutePosition) {\n     return positionManager.relativePosition(absolutePosition);\n   }"
        },
        {
          "file_name": "library/src/main/java/com/afollestad/sectionedrecyclerview/SectionedViewHolder.java",
          "patch": "@@ -3,14 +3,9 @@\n import android.support.v7.widget.RecyclerView;\n import android.view.View;\n \n+/** @author Aidan Follestad */\n public abstract class SectionedViewHolder extends RecyclerView.ViewHolder {\n \n-  interface PositionDelegate {\n-    ItemCoord relativePosition(int absolutePosition);\n-\n-    boolean isHeader(int absolutePosition);\n-  }\n-\n   private PositionDelegate positionDelegate;\n \n   public SectionedViewHolder(View itemView) {\n@@ -28,4 +23,10 @@ protected ItemCoord getRelativePosition() {\n   protected boolean isHeader() {\n     return positionDelegate.isHeader(getAdapterPosition());\n   }\n+\n+  interface PositionDelegate {\n+    ItemCoord relativePosition(int absolutePosition);\n+\n+    boolean isHeader(int absolutePosition);\n+  }\n }"
        },
        {
          "file_name": "library/src/test/java/com/afollestad/sectionedrecyclerview/PositionManagerTest.java",
          "patch": "@@ -14,6 +14,7 @@\n   @Before\n   public void before() {\n     positionManager \u003d new PositionManager();\n+    assertThat(positionManager.hasInvalidated()).isFalse();\n     invalidate();\n   }\n \n@@ -162,6 +163,13 @@ public void test_collapse_section() {\n   }\n \n   @Test\n+  public void test_collapse_all_sections() {\n+    assertThat(invalidate()).isEqualTo(12);\n+    positionManager.collapseAllSections();\n+    assertThat(invalidate()).isEqualTo(2);\n+  }\n+\n+  @Test\n   public void test_expand_section() {\n     positionManager.collapseSection(1);\n     assertThat(invalidate()).isEqualTo(7);\n@@ -170,6 +178,14 @@ public void test_expand_section() {\n   }\n \n   @Test\n+  public void test_expand_all_sections() {\n+    positionManager.collapseAllSections();\n+    assertThat(invalidate()).isEqualTo(2);\n+    positionManager.expandAllSections();\n+    assertThat(invalidate()).isEqualTo(12);\n+  }\n+\n+  @Test\n   public void test_toggle_expanded() {\n     positionManager.collapseSection(1);\n     assertThat(invalidate()).isEqualTo(7);\n@@ -180,6 +196,11 @@ public void test_toggle_expanded() {\n   }\n \n   @Test\n+  public void test_has_invalidated() {\n+    assertThat(positionManager.hasInvalidated()).isTrue();\n+  }\n+\n+  @Test\n   public void test_item_coord_toString() {\n     assertThat(new ItemCoord(8, 16).toString()).isEqualTo(\"8:16\");\n   }"
        },
        {
          "file_name": "sample/src/main/java/com/afollestad/sectionedrecyclerviewsample/MainActivity.java",
          "patch": "@@ -25,14 +25,14 @@ protected void onCreate(@Nullable Bundle savedInstanceState) {\n         new GridLayoutManager(this, getResources().getInteger(R.integer.grid_span));\n     list.setLayoutManager(manager);\n     adapter.setLayoutManager(manager);\n-    adapter.shouldShowHeadersForEmptySections(false);\n-    adapter.collapseAllSections();\n+    adapter.shouldShowHeadersForEmptySections(hideEmpty);\n     list.setAdapter(adapter);\n   }\n \n   @Override\n   public boolean onCreateOptionsMenu(Menu menu) {\n     getMenuInflater().inflate(R.menu.main, menu);\n+    menu.findItem(R.id.hide_empty_sections).setChecked(!hideEmpty);\n     return super.onCreateOptionsMenu(menu);\n   }\n \n@@ -42,7 +42,7 @@ public boolean onOptionsItemSelected(MenuItem item) {\n       hideEmpty \u003d !hideEmpty;\n       adapter.shouldShowHeadersForEmptySections(hideEmpty);\n       adapter.notifyDataSetChanged();\n-      item.setChecked(hideEmpty);\n+      item.setChecked(!hideEmpty);\n       return true;\n     }\n     return super.onOptionsItemSelected(item);"
        },
        {
          "file_name": "sample/src/main/java/com/afollestad/sectionedrecyclerviewsample/MainAdapter.java",
          "patch": "@@ -81,8 +81,8 @@ public MainVH onCreateViewHolder(ViewGroup parent, int viewType) {\n \n     MainVH(View itemView, MainAdapter adapter) {\n       super(itemView);\n-      this.title \u003d (TextView) itemView.findViewById(R.id.title);\n-      this.caret \u003d (ImageView) itemView.findViewById(R.id.caret);\n+      this.title \u003d itemView.findViewById(R.id.title);\n+      this.caret \u003d itemView.findViewById(R.id.caret);\n       this.adapter \u003d adapter;\n       itemView.setOnClickListener(this);\n     }"
        }
      ]
    }
  },
  {
    "name": "Null Pointer Exception on change orientation",
    "url": "https://github.com/SchibstedSpain/Leku/pull/32",
    "description": "Solved issue when clicking on voice icon then changes orientation raises a Null Pointer Exception.\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/SchibstedSpain/Leku/commit/2b75d95919a9d625b38b671e4b941e54160df72f",
      "files": [
        {
          "file_name": "README.md",
          "patch": "@@ -75,7 +75,7 @@ Include the dependency in your app `build.gradle`:\n \n ```groovy\n dependencies {\n-    compile \u0027com.schibstedspain.android:leku:2.1.0\u0027\n+    compile \u0027com.schibstedspain.android:leku:2.1.1\u0027\n }\n ```\n "
        },
        {
          "file_name": "build.gradle",
          "patch": "@@ -5,7 +5,7 @@ buildscript {\n     jcenter()\n   }\n   dependencies {\n-    classpath \u0027com.android.tools.build:gradle:2.1.2\u0027\n+    classpath \u0027com.android.tools.build:gradle:2.1.3\u0027\n \n     classpath \u0027com.github.dcendents:android-maven-gradle-plugin:1.3\u0027\n     classpath \"org.jfrog.buildinfo:build-info-extractor-gradle:3.1.1\""
        },
        {
          "file_name": "gradle/wrapper/gradle-wrapper.properties",
          "patch": "@@ -1,6 +1,6 @@\n-#Wed Jun 08 15:17:45 CEST 2016\n+#Tue Aug 30 11:45:10 CEST 2016\n distributionBase\u003dGRADLE_USER_HOME\n distributionPath\u003dwrapper/dists\n zipStoreBase\u003dGRADLE_USER_HOME\n zipStorePath\u003dwrapper/dists\n-distributionUrl\u003dhttps\\://services.gradle.org/distributions/gradle-2.10-all.zip\n+distributionUrl\u003dhttps\\://services.gradle.org/distributions/gradle-2.14.1-all.zip"
        },
        {
          "file_name": "leku/build.gradle",
          "patch": "@@ -4,7 +4,7 @@ apply plugin: \u0027com.novoda.bintray-release\u0027\n apply from: \u0027../quality.gradle\u0027\n \n group \u003d \u0027com.schibstedspain.android\u0027\n-version \u003d \u00272.1.0\u0027\n+version \u003d \u00272.1.1\u0027\n \n android {\n   compileSdkVersion 24\n@@ -60,7 +60,7 @@ publish {\n   userOrg \u003d \u0027schibstedspain\u0027\n   groupId \u003d \u0027com.schibstedspain.android\u0027\n   artifactId \u003d \u0027leku\u0027\n-  publishVersion \u003d \u00272.1.0\u0027\n+  publishVersion \u003d \u00272.1.1\u0027\n   desc \u003d \u0027Location picker component for Android. It returns a latitude,longitude and an address based on the location picked in the LocationPickerActivity provided.\u0027\n   website \u003d \u0027https://github.com/SchibstedSpain/leku\u0027\n }"
        },
        {
          "file_name": "leku/src/main/java/com/schibstedspain/leku/LocationPickerActivity.java",
          "patch": "@@ -193,11 +193,19 @@ public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n           adapter.clear();\n           adapter.notifyDataSetChanged();\n           showLocationInfoLayout();\n-          clearSearchButton.setVisibility(View.INVISIBLE);\n-          searchOption.setIcon(R.drawable.ic_mic);\n+          if (clearSearchButton !\u003d null) {\n+            clearSearchButton.setVisibility(View.INVISIBLE);\n+          }\n+          if (searchOption !\u003d null) {\n+            searchOption.setIcon(R.drawable.ic_mic);\n+          }\n         } else {\n-          clearSearchButton.setVisibility(View.VISIBLE);\n-          searchOption.setIcon(R.drawable.ic_search);\n+          if (clearSearchButton !\u003d null) {\n+            clearSearchButton.setVisibility(View.VISIBLE);\n+          }\n+          if (searchOption !\u003d null) {\n+            searchOption.setIcon(R.drawable.ic_search);\n+          }\n         }\n       }\n "
        }
      ]
    }
  },
  {
    "name": "Null pointer on MediaPlayer completion listener",
    "url": "https://github.com/kontalk/androidclient/issues/975",
    "description": "Android 6.0.1, version 4.0.0.\r\n\r\n```\r\njava.lang.NullPointerException: Attempt to invoke virtual method \u0027void org.kontalk.ui.AudioFragment.seekPlayerTo(int)\u0027 on a null object reference\r\n       at org.kontalk.ui.AbstractComposeFragment$22.onCompletion(AbstractComposeFragment.java:2206)\r\n       at android.media.MediaPlayer$EventHandler.handleMessage(MediaPlayer.java:2820)\r\n       at android.os.Handler.dispatchMessage(Handler.java:102)\r\n       at android.os.Looper.loop(Looper.java:148)\r\n       at android.app.ActivityThread.main(ActivityThread.java:5417)\r\n       at java.lang.reflect.Method.invoke(Method.java)\r\n       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\r\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\r\n```",
    "keywords": [
      "0",
      "java",
      "os",
      "method",
      "android",
      "zygoteinit"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/kontalk/androidclient/commit/17d867777033972c306149c1cdab728d1b9b2dad",
      "files": [
        {
          "file_name": "app/src/main/java/org/kontalk/ui/AbstractComposeFragment.java",
          "patch": "@@ -2203,7 +2203,9 @@ public void onUnbind(long messageId, AudioContentViewControl view) {\n             player.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {\n                 @Override\n                 public void onCompletion(MediaPlayer mp) {\n-                    getAudioFragment().seekPlayerTo(0);\n+                    AudioFragment audio \u003d getAudioFragment();\n+                    if (audio !\u003d null)\n+                        audio.seekPlayerTo(0);\n                     setAudioStatus(AudioContentView.STATUS_ENDED);\n                 }\n             });"
        }
      ]
    }
  },
  {
    "name": "Prevents a null pointer exception sometimes seen when switching to th",
    "url": "https://github.com/ISISComputingGroup/ibex_gui/pull/21",
    "description": "e synoptic view.\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/ISISComputingGroup/ibex_gui/commit/1185714a326a98c00c6a22bb5828ffa14c78d26e",
      "files": [
        {
          "file_name": "base/uk.ac.stfc.isis.ibex.ui.synoptic/src/uk/ac/stfc/isis/ibex/ui/synoptic/NavigationPresenter.java",
          "patch": "@@ -53,7 +53,7 @@ public void previous() {\n \t}\n \t\n \tpublic String nameOfPrevious() {\n-\t\treturn getHasPrevious() ? display(current.previous().item().name()) : \"\";\n+\t\treturn getHasPrevious() ? displayName(current.previous().item().name()) : \"\";\n \t}\n \n \tpublic void up() {\n@@ -63,7 +63,7 @@ public void up() {\n \t}\n \t\n \tpublic String nameOfUp() {\n-\t\treturn getHasUp() ? display(current.up().item().name()) : \"\";\n+\t\treturn getHasUp() ? displayName(current.up().item().name()) : \"\";\n \t}\n \t\n \tpublic void next() {\n@@ -73,7 +73,13 @@ public void next() {\n \t}\n \t\n \tpublic String nameOfNext() {\n-\t\treturn getHasNext() ? display(current.next().item().name()) : \"\";\n+\t\tString returnString \u003d \"\";\n+\t\t\n+\t\tif (getHasNext() \u0026\u0026 (current.next().item() !\u003d null)) {\n+\t\t\treturnString \u003d current.next().item().name();\n+\t\t}\n+\n+\t\treturn displayName(returnString);\n \t}\n \t\n \tpublic void down() {\n@@ -83,10 +89,10 @@ public void down() {\n \t}\n \t\n \tpublic String nameOfDown() {\n-\t\treturn getHasDown() ? display(current.down().item().name()) : \"\";\n+\t\treturn getHasDown() ? displayName(current.down().item().name()) : \"\";\n \t}\n \t\n-\tprivate String display(String name) {\n+\tprivate String displayName(String name) {\n \t\treturn name.trim();\n \t}\n \t"
        }
      ]
    }
  },
  {
    "name": "A tab without a controlling portlet can produce a null pointer exception when the selection changes",
    "url": "https://github.com/protegeproject/webprotege/issues/273",
    "description": "Relevant code:\n\n``` java\npublic void setSelection(Collection\u003cEntityData\u003e selection) {\n        if (controllingPortlet !\u003d null) {\n            Collection\u003cEntityData\u003e currentSel \u003d controllingPortlet.getSelection();\n\n            if (currentSel \u003d\u003d null) {\n                if (selection \u003d\u003d null) {\n                    return;\n                } // else do nothing here\n            } else if (currentSel.equals(selection)) {\n                return;\n            }\n        }\n        controllingPortlet.setSelection(selection);\n}\n```\n",
    "keywords": [
      "null",
      "selection",
      "currentsel",
      "controllingportlet"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/protegeproject/webprotege/commit/2ddd720c52918a1942bbb3691b171b7136a8750f",
      "files": [
        {
          "file_name": "src/main/java/edu/stanford/bmir/protege/web/client/ui/tab/AbstractTab.java",
          "patch": "@@ -54,7 +54,9 @@\n     private EntityPortlet controllingPortlet;\n \n     private SelectionListener selectionControllingListener;\n+\n     private PanelListener portletDestroyListener;\n+\n     private PanelListener panelListener;\n \n     public AbstractTab(final Project project) {\n@@ -178,11 +180,12 @@ public void setSelection(Collection\u003cEntityData\u003e selection) {\n                 if (selection \u003d\u003d null) {\n                     return;\n                 } // else do nothing here\n-            } else if (currentSel.equals(selection)) {\n+            }\n+            else if (currentSel.equals(selection)) {\n                 return;\n             }\n+            controllingPortlet.setSelection(selection);\n         }\n-        controllingPortlet.setSelection(selection);\n     }\n \n     public int getColumnCount() {"
        }
      ]
    }
  },
  {
    "name": "Jenkin Slack Notification Plugin Null Pointer Exception",
    "url": "https://github.com/jenkinsci/slack-plugin/issues/62",
    "description": "Hi, \nWe are seeing the occaionaly Null Pointer Execption from the Jenkins Slack Notification plugin: \n\"\nFATAL: null\njava.lang.NullPointerException\nat java.util.AbstractCollection.addAll(Unknown Source)\nat jenkins.plugins.slack.ActiveNotifier.getChanges(ActiveNotifier.java:115)\nat jenkins.plugins.slack.ActiveNotifier.started(ActiveNotifier.java:45)\nat jenkins.plugins.slack.SlackNotifier$SlackJobProperty.prebuild(SlackNotifier.java:280)\nat hudson.model.AbstractBuild$AbstractBuildExecution.preBuild(AbstractBuild.java:804)\nat hudson.model.AbstractBuild$AbstractBuildExecution.preBuild(AbstractBuild.java:799)\nat hudson.model.AbstractBuild$AbstractBuildExecution.preBuild(AbstractBuild.java:795)\nat hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:530)\nat hudson.model.Run.execute(Run.java:1745)\nat hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:43)\nat hudson.model.ResourceController.execute(ResourceController.java:89)\nat hudson.model.Executor.run(Executor.java:240)\n\" \nSlack Notification Plugin 1.7 \n",
    "keywords": [
      "abstractbuild",
      "plugins",
      "run",
      "hudson",
      "notification",
      "prebuild",
      "plugin",
      "null",
      "activenotifier",
      "slack",
      "jenkins",
      "hudson model",
      "abstractbuild$abstractbuildexecution",
      "model",
      "jenkins plugins"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/jenkinsci/slack-plugin/commit/0c6b4a7ef65adc2db8aa8025b8daf97c7c850c9f",
      "files": [
        {
          "file_name": "src/main/java/jenkins/plugins/slack/ActiveNotifier.java",
          "patch": "@@ -16,6 +16,7 @@\n import hudson.tasks.test.AbstractTestResultAction;\n import hudson.triggers.SCMTrigger;\n import hudson.util.LogTaskListener;\n+import org.apache.commons.collections.CollectionUtils;\n import org.apache.commons.lang.StringUtils;\n \n import java.io.IOException;\n@@ -128,7 +129,9 @@ String getChanges(AbstractBuild r, boolean includeCustomMessage) {\n             Entry entry \u003d (Entry) o;\n             logger.info(\"Entry \" + o);\n             entries.add(entry);\n-            files.addAll(entry.getAffectedFiles());\n+            if (CollectionUtils.isNotEmpty(entry.getAffectedFiles())) {\n+                files.addAll(entry.getAffectedFiles());\n+            }\n         }\n         if (entries.isEmpty()) {\n             logger.info(\"Empty change...\");"
        }
      ]
    }
  },
  {
    "name": "percolator: null_pointer_exception when storing query with date range query using \"gt\" or \"gte\" operator",
    "url": "https://github.com/elastic/elasticsearch/issues/22355",
    "description": "**Elasticsearch version**: 5.1.1\r\n\r\n**Plugins installed**:\r\n```javascript\r\n[{\r\n  \"name\" : \"x-pack\",\r\n  \"version\" : \"5.1.1\",\r\n  \"description\" : \"Elasticsearch Expanded Pack Plugin\",\r\n  \"classname\" : \"org.elasticsearch.xpack.XPackPlugin\"\r\n}]\r\n```\r\n\r\n**JVM version**: 1.8.0_111\r\n\r\n**OS version**: Ubuntu 16.04 (Linux amd64 4.4.0-57-generic)\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nAttempting to index a percolate query that uses `gte` or `gt` in a range query against a field of type `date` fails with the following error:\r\n\r\n```javascript\r\n{\r\n  \"error\": {\r\n    \"root_cause\": [\r\n      {\r\n        \"type\": \"mapper_parsing_exception\",\r\n        \"reason\": \"failed to parse\"\r\n      }\r\n    ],\r\n    \"type\": \"mapper_parsing_exception\",\r\n    \"reason\": \"failed to parse\",\r\n    \"caused_by\": {\r\n      \"type\": \"null_pointer_exception\",\r\n      \"reason\": null\r\n    }\r\n  },\r\n  \"status\": 400\r\n}\r\n```\r\n\r\nRange queries using `gte` or `gt` fail to index; however both `lte` and `lt` work properly. Note that the queries listed below are using fixed dates. Thus this note regarding breaking changes in ES 5.0 **DOES NOT APPLY**:\r\n\r\n\u003e The percolator no longer accepts percolator queries containing range queries with ranges that are based on current time (using now).\r\n\r\nIf it helps to know, our setup is a new cluster installed from scratch on ES 5.1.1. There was no index upgrade done from a previous version, nor was any of the data copied. Fresh install, new mapping definitions and data inserts as per the example below.\r\n\r\n**Steps to reproduce**:\r\n 1. Create a new index (named `searches`) with the type mapping for percolate pre-processing (named `item`, with a date field named `created`), as well as the type mapping for storing the percolate queries themselves (named `search`, with the percolate field named `query`).\r\n\r\n```javascript\r\nPUT searches\r\n{\r\n  \"mappings\": {\r\n    \"item\": {\r\n      \"properties\": {\r\n        \"created\": {\r\n          \"type\": \"date\"\r\n        }\r\n      }\r\n    },\r\n    \"search\": {\r\n      \"properties\": {\r\n        \"query\": {\r\n          \"type\": \"percolator\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n 2. Attempt to index the following queries. The only difference is the range operator used (`lt`, `lte`, `gt`, and `gte`). The first two (`lte` and `lt`) will index, while the other two (`gte` and `gt`) throw the `null_pointer_exception` error.\r\n\r\n```javascript\r\nPUT searches/search/1\r\n{ \"query\": { \"range\": { \"created\": { \"lte\": \"2016-01-01\" } } } }\r\n```\r\n\r\n```javascript\r\nPUT searches/search/2\r\n{ \"query\": { \"range\": { \"created\": { \"lt\": \"2016-01-01\" } } } }\r\n```\r\n\r\n```javascript\r\nPUT searches/search/3\r\n{ \"query\": { \"range\": { \"created\": { \"gte\": \"2016-01-01\" } } } }\r\n```\r\n\r\n```javascript\r\nPUT searches/search/4\r\n{ \"query\": { \"range\": { \"created\": { \"gt\": \"2016-01-01\" } } } }\r\n```",
    "keywords": [
      "date",
      "reason",
      "named",
      "5 1",
      "range",
      "```javascript",
      "type",
      "error",
      "put",
      "`gte`",
      "```javascript put",
      "`lt`",
      "`gt`",
      "percolator",
      "new",
      "mapping",
      "using",
      "percolate",
      "created",
      "query",
      "index",
      "query ",
      "queries",
      "1",
      "field",
      "5",
      "`lte`",
      "version**",
      "type ",
      "2016-01-01"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/elastic/elasticsearch/commit/9ccdd3303d0a6d6bceea7ef5de74bbae5f0340dd",
      "files": [
        {
          "file_name": "modules/percolator/src/main/java/org/elasticsearch/percolator/PercolatorFieldMapper.java",
          "patch": "@@ -377,12 +377,18 @@ static void verifyQuery(QueryBuilder queryBuilder) {\n             RangeQueryBuilder rangeQueryBuilder \u003d (RangeQueryBuilder) queryBuilder;\n             if (rangeQueryBuilder.from() instanceof String) {\n                 String from \u003d (String) rangeQueryBuilder.from();\n-                String to \u003d (String) rangeQueryBuilder.to();\n-                if (from.contains(\"now\") || to.contains(\"now\")) {\n+                if (from.contains(\"now\")) {\n                     throw new IllegalArgumentException(\"percolator queries containing time range queries based on the \" +\n                             \"current time is unsupported\");\n                 }\n             }\n+            if (rangeQueryBuilder.to() instanceof String) {\n+                String to \u003d (String) rangeQueryBuilder.to();\n+                if (to.contains(\"now\")) {\n+                    throw new IllegalArgumentException(\"percolator queries containing time range queries based on the \" +\n+                        \"current time is unsupported\");\n+                }\n+            }\n         } else if (queryBuilder instanceof HasChildQueryBuilder) {\n             throw new IllegalArgumentException(\"the [has_child] query is unsupported inside a percolator query\");\n         } else if (queryBuilder instanceof HasParentQueryBuilder) {"
        },
        {
          "file_name": "modules/percolator/src/test/java/org/elasticsearch/percolator/PercolatorFieldMapperTests.java",
          "patch": "@@ -442,6 +442,53 @@ public void testRangeQueryWithNowRangeIsForbidden() throws Exception {\n                 }\n         );\n         assertThat(e.getCause(), instanceOf(IllegalArgumentException.class));\n+        e \u003d expectThrows(MapperParsingException.class, () -\u003e {\n+                mapperService.documentMapper(typeName).parse(\"test\", typeName, \"1\",\n+                    jsonBuilder().startObject()\n+                        .field(fieldName, rangeQuery(\"date_field\").from(\"now\"))\n+                        .endObject().bytes());\n+            }\n+        );\n+        assertThat(e.getCause(), instanceOf(IllegalArgumentException.class));\n+        e \u003d expectThrows(MapperParsingException.class, () -\u003e {\n+                mapperService.documentMapper(typeName).parse(\"test\", typeName, \"1\",\n+                    jsonBuilder().startObject()\n+                        .field(fieldName, rangeQuery(\"date_field\").to(\"now\"))\n+                        .endObject().bytes());\n+            }\n+        );\n+        assertThat(e.getCause(), instanceOf(IllegalArgumentException.class));\n+    }\n+\n+    // https://github.com/elastic/elasticsearch/issues/22355\n+    public void testVerifyRangeQueryWithNullBounds() throws Exception {\n+        addQueryMapping();\n+        MapperParsingException e \u003d expectThrows(MapperParsingException.class, () -\u003e {\n+                mapperService.documentMapper(typeName).parse(\"test\", typeName, \"1\",\n+                    jsonBuilder().startObject()\n+                        .field(fieldName, rangeQuery(\"date_field\").from(\"now\").to(null))\n+                        .endObject().bytes());\n+            }\n+        );\n+        assertThat(e.getCause(), instanceOf(IllegalArgumentException.class));\n+        e \u003d expectThrows(MapperParsingException.class, () -\u003e {\n+                mapperService.documentMapper(typeName).parse(\"test\", typeName, \"1\",\n+                    jsonBuilder().startObject()\n+                        .field(fieldName, rangeQuery(\"date_field\").from(null).to(\"now\"))\n+                        .endObject().bytes());\n+            }\n+        );\n+        assertThat(e.getCause(), instanceOf(IllegalArgumentException.class));\n+\n+        // No validation failures:\n+        mapperService.documentMapper(typeName).parse(\"test\", typeName, \"1\",\n+            jsonBuilder().startObject()\n+                .field(fieldName, rangeQuery(\"date_field\").from(\"2016-01-01\").to(null))\n+                .endObject().bytes());\n+        mapperService.documentMapper(typeName).parse(\"test\", typeName, \"1\",\n+            jsonBuilder().startObject()\n+                .field(fieldName, rangeQuery(\"date_field\").from(null).to(\"2016-01-01\"))\n+                .endObject().bytes());\n     }\n \n     public void testUnsupportedQueries() {"
        }
      ]
    }
  },
  {
    "name": "fix for null pointer issue",
    "url": "https://github.com/aol/cyclops/pull/77",
    "description": "Fix for [Mappable does not support null field values](https://github.com/aol/cyclops/issues/76)\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/aol/cyclops/commit/c867a9d00756d719be6af5c42f8c84a79376274d",
      "files": [
        {
          "file_name": "cyclops-mixins/src/main/java/com/aol/cyclops/lambda/api/Mappable.java",
          "patch": "@@ -1,9 +1,8 @@\n package com.aol.cyclops.lambda.api;\n \n import java.lang.reflect.Field;\n+import java.util.HashMap;\n import java.util.Map;\n-import java.util.stream.Collectors;\n-import java.util.stream.Stream;\n \n import com.aol.cyclops.invokedynamic.ExceptionSoftener;\n import com.aol.cyclops.invokedynamic.ReflectionCache;\n@@ -26,21 +25,15 @@ default Object unwrap(){\n \tdefault Map\u003cString,?\u003e toMap(){\n \t\ttry {\n \t\t\tfinal Object o \u003d unwrap();\n-\t\t\treturn ReflectionCache.getFields(o.getClass())\n-\t\t\t\t\t.stream()\n-\t\t\t\t\t.collect(Collectors.toMap((Field f)-\u003ef.getName(),(Field f) -\u003e{\n-\t\t\t\t\t\ttry {\n-\n-\t\t\t\t\t\t\treturn f.get(o);\n-\t\t\t\t\t\t} catch (Exception e) {\n-\t\t\t\t\t\t\tExceptionSoftener.throwSoftenedException(e);\n-\t\t\t\t\t\t\treturn null;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}));\n+\t\t\tMap\u003cString, Object\u003e result \u003d new HashMap\u003c\u003e();\n+\t\t\tfor (Field f : ReflectionCache.getFields(o.getClass())) {\n+\t\t\t    result.put(f.getName(),f.get(o));\n+\t\t\t}\n+\t\t\treturn result;\n \t\t} catch (Exception e) {\n-\t\t\tExceptionSoftener\n+\t\t\tthrow ExceptionSoftener\n \t\t\t\t\t.throwSoftenedException(e);\n-\t\t\treturn null;\n+\t\t\t\n \t\t}\n \t}\n }"
        },
        {
          "file_name": "cyclops-mixins/src/test/java/com/aol/cyclops/lambda/mixins/CoerceToMapTest.java",
          "patch": "@@ -5,7 +5,7 @@\n import lombok.Value;\n \n import org.junit.Test;\n-import static org.hamcrest.Matchers.equalTo;\n+import static org.hamcrest.Matchers.*;\n import com.aol.cyclops.lambda.api.AsMappable;\n import static org.junit.Assert.assertThat;\n \n@@ -18,5 +18,12 @@ public void testMap(){\n \t\tassertThat(map.get(\"num\"),equalTo(10));\n \t\tassertThat(map.get(\"str\"),equalTo(\"hello\"));\n \t}\n+\t@Test\n+\tpublic void testMapNulls(){\n+\t\tMap\u003cString,?\u003e map \u003d AsMappable.asMappable(new MyEntity(10,null)).toMap();\n+\t\tSystem.out.println(map);\n+\t\tassertThat(map.get(\"num\"),equalTo(10));\n+\t\tassertThat(map.get(\"str\"),nullValue());\n+\t}\n \t@Value static class MyEntity { int num; String str;}\n }"
        },
        {
          "file_name": "cyclops-monad-api/src/main/java/com/aol/cyclops/internal/InternalList.java",
          "patch": "@@ -0,0 +1,23 @@\n+package com.aol.cyclops.internal;\n+\n+import java.util.List;\n+\n+import lombok.AllArgsConstructor;\n+\n+import com.aol.cyclops.sequence.SequenceM;\n+\n+\n+@AllArgsConstructor\n+public class InternalList\u003cT\u003e  {\n+\t\n+\tprivate List\u003cT\u003e list;\n+\tpublic SequenceM\u003cT\u003e sequence(){\n+\t\treturn SequenceM.fromList(list);\n+\t}\n+\n+\t\n+\tpublic String toString(){\n+\t\treturn list.toString();\n+\t}\n+}\n+"
        }
      ]
    }
  },
  {
    "name": "Plain text in response element causes null pointer exception.",
    "url": "https://github.com/petkivim/xrd4j/issues/6",
    "description": "If SOAP body response is of format\n\n```\n\u003cABCServiceResponse\u003e\n  \u003crequest\u003e\n     ...\n  \u003crequest\u003e\n  \u003cresponse\u003e\n    plain text and other cool stuff\n  \u003c/response\u003e\n\u003cABCServiceResponse\u003e\n```\n\ni. e. response (1) is  plain textNode (2), it has no \u0027localName\u0027 (3) (i.e. is null). This (3) results to NPE in AbstractResponseDeserializer.java at deserializeResponseError(..) line 284.\n",
    "keywords": [
      "response",
      "plain"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/petkivim/xrd4j/commit/0d5fdec84c9722adc72b886fe4a8885886cded24",
      "files": [
        {
          "file_name": "src/client/src/main/java/com/pkrete/xrd4j/client/deserializer/AbstractResponseDeserializer.java",
          "patch": "@@ -36,7 +36,7 @@\n      * This boolean value tells if the response is from X-Road meta service.\n      */\n     protected boolean isMetaServiceResponse \u003d false;\n-    \n+\n     private static final Logger logger \u003d LoggerFactory.getLogger(AbstractResponseDeserializer.class);\n \n     /**\n@@ -273,19 +273,23 @@ protected Object deserializeFaultDetail(final Node detailNode) {\n      */\n     private boolean deserializeResponseError(final ServiceResponse response, final Node responseNode) throws SOAPException {\n         logger.debug(\"Deserialize a non-technical SOAP error message.\");\n-        if(this.isMetaServiceResponse) {\n+        if (this.isMetaServiceResponse) {\n             logger.debug(\"Response being processed is from X-Road meta service. Skip.\");\n             return false;\n         }\n         String faultCode \u003d null;\n         String faultString \u003d null;\n         for (int i \u003d 0; i \u003c responseNode.getChildNodes().getLength(); i++) {\n-            if (responseNode.getChildNodes().item(i).getLocalName().equalsIgnoreCase(\"faultcode\")) {\n-                logger.trace(\"FaultCode found.\");\n-                faultCode \u003d responseNode.getChildNodes().item(i).getTextContent();\n-            } else if (responseNode.getChildNodes().item(i).getLocalName().equalsIgnoreCase(\"faultstring\")) {\n-                logger.trace(\"FaultString found.\");\n-                faultString \u003d responseNode.getChildNodes().item(i).getTextContent();\n+            // Make sure that it\u0027s an element node\n+            if (responseNode.getChildNodes().item(i).getNodeType() \u003d\u003d Node.ELEMENT_NODE) {\n+                // Hanle faultcode and faultstring\n+                if (responseNode.getChildNodes().item(i).getLocalName().equalsIgnoreCase(\"faultcode\")) {\n+                    logger.trace(\"FaultCode found.\");\n+                    faultCode \u003d responseNode.getChildNodes().item(i).getTextContent();\n+                } else if (responseNode.getChildNodes().item(i).getLocalName().equalsIgnoreCase(\"faultstring\")) {\n+                    logger.trace(\"FaultString found.\");\n+                    faultString \u003d responseNode.getChildNodes().item(i).getTextContent();\n+                }\n             }\n         }\n         if (faultCode !\u003d null || faultString !\u003d null) {"
        },
        {
          "file_name": "src/client/src/test/java/com/pkrete/xrd4j/client/deserializer/ServiceResponseDeserializerTest.java",
          "patch": "@@ -289,7 +289,7 @@ public void test7() throws XRd4JException, SOAPException {\n      * @throws SOAPException\n      */\n     public void test8() throws XRd4JException, SOAPException {\n-        String soapString \u003d \"\u003cSOAP-ENV:Envelope xmlns:SOAP-ENV\u003d\\\"http://schemas.xmlsoap.org/soap/envelope/\\\" xmlns:id\u003d\\\"http://x-road.eu/xsd/identifiers\\\" xmlns:xrd\u003d\\\"http://x-road.eu/xsd/xroad.xsd\\\"\u003e\u003cSOAP-ENV:Header\u003e\u003cxrd:client id:objectType\u003d\\\"SUBSYSTEM\\\"\u003e\u003cid:xRoadInstance\u003eFI\u003c/id:xRoadInstance\u003e\u003cid:memberClass\u003eGOV\u003c/id:memberClass\u003e\u003cid:memberCode\u003eMEMBER1\u003c/id:memberCode\u003e\u003cid:subsystemCode\u003esubsystem\u003c/id:subsystemCode\u003e\u003c/xrd:client\u003e\u003cxrd:service id:objectType\u003d\\\"SERVICE\\\"\u003e\u003cid:xRoadInstance\u003eFI\u003c/id:xRoadInstance\u003e\u003cid:memberClass\u003eCOM\u003c/id:memberClass\u003e\u003cid:memberCode\u003eMEMBER2\u003c/id:memberCode\u003e\u003cid:subsystemCode\u003esubsystem\u003c/id:subsystemCode\u003e\u003cid:serviceCode\u003egetRandom\u003c/id:serviceCode\u003e\u003cid:serviceVersion\u003ev1\u003c/id:serviceVersion\u003e\u003c/xrd:service\u003e\u003cxrd:id\u003eID-1234567890\u003c/xrd:id\u003e\u003cxrd:protocolVersion\u003e4.0\u003c/xrd:protocolVersion\u003e\u003c/SOAP-ENV:Header\u003e\u003cSOAP-ENV:Body\u003e\u003cns1:getRandomResponse xmlns:ns1\u003d\\\"http://producer.x-road.ee\\\"\u003e\u003crequest\u003e\u003cdata\u003e1234567890\u003c/data\u003e\u003c/request\u003e\u003cresponse\u003e\u003cdata\u003e9876543210\u003c/data\u003e\u003c/response\u003e\u003c/ns1:getRandomResponse\u003e\u003c/SOAP-ENV:Body\u003e\u003c/SOAP-ENV:Envelope\u003e\";\n+        String soapString \u003d \"\u003cSOAP-ENV:Envelope xmlns:SOAP-ENV\u003d\\\"http://schemas.xmlsoap.org/soap/envelope/\\\" xmlns:id\u003d\\\"http://x-road.eu/xsd/identifiers\\\" xmlns:xrd\u003d\\\"http://x-road.eu/xsd/xroad.xsd\\\"\u003e\u003cSOAP-ENV:Header\u003e\u003cxrd:client id:objectType\u003d\\\"SUBSYSTEM\\\"\u003e\u003cid:xRoadInstance\u003eFI\u003c/id:xRoadInstance\u003e\u003cid:memberClass\u003eGOV\u003c/id:memberClass\u003e\u003cid:memberCode\u003eMEMBER1\u003c/id:memberCode\u003e\u003cid:subsystemCode\u003esubsystem\u003c/id:subsystemCode\u003e\u003c/xrd:client\u003e\u003cxrd:service id:objectType\u003d\\\"SERVICE\\\"\u003e\u003cid:xRoadInstance\u003eFI\u003c/id:xRoadInstance\u003e\u003cid:memberClass\u003eCOM\u003c/id:memberClass\u003e\u003cid:memberCode\u003eMEMBER2\u003c/id:memberCode\u003e\u003cid:subsystemCode\u003esubsystem\u003c/id:subsystemCode\u003e\u003cid:serviceCode\u003egetRandom\u003c/id:serviceCode\u003e\u003cid:serviceVersion\u003ev1\u003c/id:serviceVersion\u003e\u003c/xrd:service\u003e\u003cxrd:id\u003eID-1234567890\u003c/xrd:id\u003e\u003cxrd:protocolVersion\u003e4.0\u003c/xrd:protocolVersion\u003e\u003c/SOAP-ENV:Header\u003e\u003cSOAP-ENV:Body\u003e\u003cns1:getRandomResponse xmlns:ns1\u003d\\\"http://producer.x-road.ee\\\"\u003e  \u003crequest\u003e    \u003cdata\u003e1234567890\u003c/data\u003e    \u003c/request\u003e  \u003cresponse\u003e    \u003cdata\u003e9876543210\u003c/data\u003e    \u003c/response\u003e  \u003c/ns1:getRandomResponse\u003e\u003c/SOAP-ENV:Body\u003e\u003c/SOAP-ENV:Envelope\u003e\";\n         SOAPMessage msg \u003d SOAPHelper.toSOAP(soapString);\n \n         ServiceResponseDeserializer deserializer \u003d new TestResponseDeserializer();\n@@ -329,9 +329,9 @@ public void test8() throws XRd4JException, SOAPException {\n      * @throws SOAPException\n      */\n     public void test9() throws XRd4JException, SOAPException {\n-        String soapString \u003d \"\u003cSOAP-ENV:Envelope xmlns:SOAP-ENV\u003d\\\"http://schemas.xmlsoap.org/soap/envelope/\\\" xmlns:id\u003d\\\"http://x-road.eu/xsd/identifiers\\\" xmlns:xrd\u003d\\\"http://x-road.eu/xsd/xroad.xsd\\\"\u003e\u003cSOAP-ENV:Header\u003e\u003cxrd:client id:objectType\u003d\\\"SUBSYSTEM\\\"\u003e\u003cid:xRoadInstance\u003eFI\u003c/id:xRoadInstance\u003e\u003cid:memberClass\u003eGOV\u003c/id:memberClass\u003e\u003cid:memberCode\u003eMEMBER1\u003c/id:memberCode\u003e\u003cid:subsystemCode\u003esubsystem\u003c/id:subsystemCode\u003e\u003c/xrd:client\u003e\u003cxrd:service id:objectType\u003d\\\"SERVICE\\\"\u003e\u003cid:xRoadInstance\u003eFI\u003c/id:xRoadInstance\u003e\u003cid:memberClass\u003eCOM\u003c/id:memberClass\u003e\u003cid:memberCode\u003eMEMBER2\u003c/id:memberCode\u003e\u003cid:subsystemCode\u003esubsystem\u003c/id:subsystemCode\u003e\u003cid:serviceCode\u003egetRandom\u003c/id:serviceCode\u003e\u003cid:serviceVersion\u003ev1\u003c/id:serviceVersion\u003e\u003c/xrd:service\u003e\u003cxrd:userId\u003eEE1234567890\u003c/xrd:userId\u003e\u003cxrd:id\u003eID-1234567890\u003c/xrd:id\u003e\u003cxrd:protocolVersion\u003e4.0\u003c/xrd:protocolVersion\u003e\u003cxrd:requestHash algorithmId\u003d\\\"SHA-512\\\"\u003eZPbWPAOcJxzE81EmSk//R3DUQtqwMcuMMF9tsccJypdNcukzICQtlhhr3a/bTmexDrn8e/BrBVyl2t0ni/cUvw\u003d\u003d\u003c/xrd:requestHash\u003e\u003c/SOAP-ENV:Header\u003e\u003cSOAP-ENV:Body\u003e\u003cns1:getRandomResponse xmlns:ns1\u003d\\\"http://producer.x-road.ee\\\"\u003e\u003crequest\u003e\u003cdata\u003e1234567890\u003c/data\u003e\u003c/request\u003e\u003cresponse\u003e\u003cdata\u003e9876543210\u003c/data\u003e\u003c/response\u003e\u003c/ns1:getRandomResponse\u003e\u003c/SOAP-ENV:Body\u003e\u003c/SOAP-ENV:Envelope\u003e\";\n+        String soapString \u003d \"\u003cSOAP-ENV:Envelope xmlns:SOAP-ENV\u003d\\\"http://schemas.xmlsoap.org/soap/envelope/\\\" xmlns:id\u003d\\\"http://x-road.eu/xsd/identifiers\\\" xmlns:xrd\u003d\\\"http://x-road.eu/xsd/xroad.xsd\\\"\u003e\u003cSOAP-ENV:Header\u003e\u003cxrd:client id:objectType\u003d\\\"SUBSYSTEM\\\"\u003e\u003cid:xRoadInstance\u003eFI\u003c/id:xRoadInstance\u003e\u003cid:memberClass\u003eGOV\u003c/id:memberClass\u003e\u003cid:memberCode\u003eMEMBER1\u003c/id:memberCode\u003e\u003cid:subsystemCode\u003esubsystem\u003c/id:subsystemCode\u003e\u003c/xrd:client\u003e\u003cxrd:service id:objectType\u003d\\\"SERVICE\\\"\u003e\u003cid:xRoadInstance\u003eFI\u003c/id:xRoadInstance\u003e\u003cid:memberClass\u003eCOM\u003c/id:memberClass\u003e\u003cid:memberCode\u003eMEMBER2\u003c/id:memberCode\u003e\u003cid:subsystemCode\u003esubsystem\u003c/id:subsystemCode\u003e\u003cid:serviceCode\u003egetRandom\u003c/id:serviceCode\u003e\u003cid:serviceVersion\u003ev1\u003c/id:serviceVersion\u003e\u003c/xrd:service\u003e\u003cxrd:userId\u003eEE1234567890\u003c/xrd:userId\u003e\u003cxrd:id\u003eID-1234567890\u003c/xrd:id\u003e\u003cxrd:protocolVersion\u003e4.0\u003c/xrd:protocolVersion\u003e\u003cxrd:requestHash algorithmId\u003d\\\"SHA-512\\\"\u003eZPbWPAOcJxzE81EmSk//R3DUQtqwMcuMMF9tsccJypdNcukzICQtlhhr3a/bTmexDrn8e/BrBVyl2t0ni/cUvw\u003d\u003d\u003c/xrd:requestHash\u003e\u003c/SOAP-ENV:Header\u003e\u003cSOAP-ENV:Body\u003e\u003cns1:getRandomResponse xmlns:ns1\u003d\\\"http://producer.x-road.ee\\\"\u003e\u003crequest\u003e\u003cdata\u003e1234567890\u003c/data\u003e\u003c/request\u003e \u003cresponse\u003e \u003cdata\u003e9876543210\u003c/data\u003e \u003c/response\u003e \u003c/ns1:getRandomResponse\u003e\u003c/SOAP-ENV:Body\u003e\u003c/SOAP-ENV:Envelope\u003e\";\n         SOAPMessage msg \u003d SOAPHelper.toSOAP(soapString);\n-\n+        assertEquals(true, msg !\u003d null);\n         ServiceResponseDeserializer deserializer \u003d new TestResponseDeserializer();\n         ServiceResponse\u003cString, String\u003e response \u003d deserializer.deserialize(msg, \"http://producer.x-road.ee\");\n \n@@ -367,7 +367,7 @@ public void test9() throws XRd4JException, SOAPException {\n      * @throws SOAPException\n      */\n     public void test10() throws XRd4JException, SOAPException {\n-        String soapString \u003d \"\u003cSOAP-ENV:Envelope xmlns:SOAP-ENV\u003d\\\"http://schemas.xmlsoap.org/soap/envelope/\\\" xmlns:id\u003d\\\"http://x-road.eu/xsd/identifiers\\\" xmlns:xrd\u003d\\\"http://x-road.eu/xsd/xroad.xsd\\\"\u003e\u003cSOAP-ENV:Header\u003e\u003cxrd:client id:objectType\u003d\\\"SUBSYSTEM\\\"\u003e\u003cid:xRoadInstance\u003eFI\u003c/id:xRoadInstance\u003e\u003cid:memberClass\u003eGOV\u003c/id:memberClass\u003e\u003cid:memberCode\u003eMEMBER1\u003c/id:memberCode\u003e\u003cid:subsystemCode\u003esubsystem\u003c/id:subsystemCode\u003e\u003c/xrd:client\u003e\u003cxrd:service id:objectType\u003d\\\"SERVICE\\\"\u003e\u003cid:xRoadInstance\u003eFI\u003c/id:xRoadInstance\u003e\u003cid:memberClass\u003eCOM\u003c/id:memberClass\u003e\u003cid:memberCode\u003eMEMBER2\u003c/id:memberCode\u003e\u003cid:subsystemCode\u003esubsystem\u003c/id:subsystemCode\u003e\u003cid:serviceCode\u003egetRandom\u003c/id:serviceCode\u003e\u003cid:serviceVersion\u003ev1\u003c/id:serviceVersion\u003e\u003c/xrd:service\u003e\u003cxrd:userId\u003eEE1234567890\u003c/xrd:userId\u003e\u003cxrd:id\u003eID-1234567890\u003c/xrd:id\u003e\u003cxrd:protocolVersion\u003e4.0\u003c/xrd:protocolVersion\u003e\u003cxrd:requestHash algorithmId\u003d\\\"SHA-512\\\"\u003eZPbWPAOcJxzE81EmSk//R3DUQtqwMcuMMF9tsccJypdNcukzICQtlhhr3a/bTmexDrn8e/BrBVyl2t0ni/cUvw\u003d\u003d\u003c/xrd:requestHash\u003e\u003c/SOAP-ENV:Header\u003e\u003cSOAP-ENV:Body\u003e\u003cns1:getRandomResponse xmlns:ns1\u003d\\\"http://producer.x-road.ee\\\"\u003e\u003crequest\u003e\u003cdata\u003e1234567890\u003c/data\u003e\u003c/request\u003e\u003cresponse\u003e\u003cdata\u003e9876543210\u003c/data\u003e\u003c/response\u003e\u003c/ns1:getRandomResponse\u003e\u003c/SOAP-ENV:Body\u003e\u003c/SOAP-ENV:Envelope\u003e\";\n+        String soapString \u003d \"\u003cSOAP-ENV:Envelope xmlns:SOAP-ENV\u003d\\\"http://schemas.xmlsoap.org/soap/envelope/\\\" xmlns:id\u003d\\\"http://x-road.eu/xsd/identifiers\\\" xmlns:xrd\u003d\\\"http://x-road.eu/xsd/xroad.xsd\\\"\u003e\u003cSOAP-ENV:Header\u003e\u003cxrd:client id:objectType\u003d\\\"SUBSYSTEM\\\"\u003e\u003cid:xRoadInstance\u003eFI\u003c/id:xRoadInstance\u003e\u003cid:memberClass\u003eGOV\u003c/id:memberClass\u003e\u003cid:memberCode\u003eMEMBER1\u003c/id:memberCode\u003e\u003cid:subsystemCode\u003esubsystem\u003c/id:subsystemCode\u003e\u003c/xrd:client\u003e\u003cxrd:service id:objectType\u003d\\\"SERVICE\\\"\u003e\u003cid:xRoadInstance\u003eFI\u003c/id:xRoadInstance\u003e\u003cid:memberClass\u003eCOM\u003c/id:memberClass\u003e\u003cid:memberCode\u003eMEMBER2\u003c/id:memberCode\u003e\u003cid:subsystemCode\u003esubsystem\u003c/id:subsystemCode\u003e\u003cid:serviceCode\u003egetRandom\u003c/id:serviceCode\u003e\u003cid:serviceVersion\u003ev1\u003c/id:serviceVersion\u003e\u003c/xrd:service\u003e\u003cxrd:userId\u003eEE1234567890\u003c/xrd:userId\u003e\u003cxrd:id\u003eID-1234567890\u003c/xrd:id\u003e\u003cxrd:protocolVersion\u003e4.0\u003c/xrd:protocolVersion\u003e\u003cxrd:requestHash algorithmId\u003d\\\"SHA-512\\\"\u003eZPbWPAOcJxzE81EmSk//R3DUQtqwMcuMMF9tsccJypdNcukzICQtlhhr3a/bTmexDrn8e/BrBVyl2t0ni/cUvw\u003d\u003d\u003c/xrd:requestHash\u003e\u003c/SOAP-ENV:Header\u003e\u003cSOAP-ENV:Body\u003e\u003cns1:getRandomResponse xmlns:ns1\u003d\\\"http://producer.x-road.ee\\\"\u003e\u003crequest\u003e\u003cdata\u003e1234567890\u003c/data\u003e\u003c/request\u003e  \u003cresponse\u003e    \u003cdata\u003e9876543210\u003c/data\u003e    \u003c/response\u003e  \u003c/ns1:getRandomResponse\u003e\u003c/SOAP-ENV:Body\u003e\u003c/SOAP-ENV:Envelope\u003e\";\n         SOAPMessage msg \u003d SOAPHelper.toSOAP(soapString);\n \n         ServiceResponseDeserializer deserializer \u003d new TestResponseDeserializer();\n@@ -399,6 +399,45 @@ public void test10() throws XRd4JException, SOAPException {\n     }\n \n     /**\n+     * Response to subsystem -\u003e service level service call. Producer namespace\n+     * URI parameter used. Response string inside response element - no\n+     * child elements.\n+     *\n+     * @throws XRd4JException\n+     * @throws SOAPException\n+     */\n+    public void test11() throws XRd4JException, SOAPException {\n+        String soapString \u003d \"\u003cSOAP-ENV:Envelope xmlns:SOAP-ENV\u003d\\\"http://schemas.xmlsoap.org/soap/envelope/\\\" xmlns:id\u003d\\\"http://x-road.eu/xsd/identifiers\\\" xmlns:xrd\u003d\\\"http://x-road.eu/xsd/xroad.xsd\\\"\u003e\u003cSOAP-ENV:Header\u003e\u003cxrd:client id:objectType\u003d\\\"SUBSYSTEM\\\"\u003e\u003cid:xRoadInstance\u003eFI\u003c/id:xRoadInstance\u003e\u003cid:memberClass\u003eGOV\u003c/id:memberClass\u003e\u003cid:memberCode\u003eMEMBER1\u003c/id:memberCode\u003e\u003cid:subsystemCode\u003esubsystem\u003c/id:subsystemCode\u003e\u003c/xrd:client\u003e\u003cxrd:service id:objectType\u003d\\\"SERVICE\\\"\u003e\u003cid:xRoadInstance\u003eFI\u003c/id:xRoadInstance\u003e\u003cid:memberClass\u003eCOM\u003c/id:memberClass\u003e\u003cid:memberCode\u003eMEMBER2\u003c/id:memberCode\u003e\u003cid:subsystemCode\u003esubsystem\u003c/id:subsystemCode\u003e\u003cid:serviceCode\u003egetRandom\u003c/id:serviceCode\u003e\u003cid:serviceVersion\u003ev1\u003c/id:serviceVersion\u003e\u003c/xrd:service\u003e\u003cxrd:userId\u003eEE1234567890\u003c/xrd:userId\u003e\u003cxrd:id\u003eID-1234567890\u003c/xrd:id\u003e\u003cxrd:protocolVersion\u003e4.0\u003c/xrd:protocolVersion\u003e\u003cxrd:requestHash algorithmId\u003d\\\"SHA-512\\\"\u003eZPbWPAOcJxzE81EmSk//R3DUQtqwMcuMMF9tsccJypdNcukzICQtlhhr3a/bTmexDrn8e/BrBVyl2t0ni/cUvw\u003d\u003d\u003c/xrd:requestHash\u003e\u003c/SOAP-ENV:Header\u003e\u003cSOAP-ENV:Body\u003e\u003cns1:getRandomResponse xmlns:ns1\u003d\\\"http://producer.x-road.ee\\\"\u003e\u003crequest\u003e\u003cdata\u003e1234567890\u003c/data\u003e\u003c/request\u003e\u003cresponse\u003e9876543210\u003c/response\u003e\u003c/ns1:getRandomResponse\u003e\u003c/SOAP-ENV:Body\u003e\u003c/SOAP-ENV:Envelope\u003e\";\n+        SOAPMessage msg \u003d SOAPHelper.toSOAP(soapString);\n+        assertEquals(true, msg !\u003d null);\n+        ServiceResponseDeserializer deserializer \u003d new TestResponseDeserializer3();\n+        ServiceResponse\u003cString, String\u003e response \u003d deserializer.deserialize(msg, \"http://producer.x-road.ee\");\n+\n+        assertEquals(\"FI\", response.getConsumer().getXRoadInstance());\n+        assertEquals(\"GOV\", response.getConsumer().getMemberClass());\n+        assertEquals(\"MEMBER1\", response.getConsumer().getMemberCode());\n+        assertEquals(\"subsystem\", response.getConsumer().getSubsystemCode());\n+        assertEquals(ObjectType.SUBSYSTEM, response.getConsumer().getObjectType());\n+\n+        assertEquals(\"FI\", response.getProducer().getXRoadInstance());\n+        assertEquals(\"COM\", response.getProducer().getMemberClass());\n+        assertEquals(\"MEMBER2\", response.getProducer().getMemberCode());\n+        assertEquals(\"subsystem\", response.getProducer().getSubsystemCode());\n+        assertEquals(\"getRandom\", response.getProducer().getServiceCode());\n+        assertEquals(\"v1\", response.getProducer().getServiceVersion());\n+        assertEquals(\"ID-1234567890\", response.getId());\n+        assertEquals(\"EE1234567890\", response.getUserId());\n+        assertEquals(\"4.0\", response.getProtocolVersion());\n+        assertEquals(ObjectType.SERVICE, response.getProducer().getObjectType());\n+        assertEquals(\"1234567890\", response.getRequestData());\n+        assertEquals(\"9876543210\", response.getResponseData());\n+\n+        assertEquals(\"SHA-512\", response.getRequestHashAlgorithm());\n+        assertEquals(\"ZPbWPAOcJxzE81EmSk//R3DUQtqwMcuMMF9tsccJypdNcukzICQtlhhr3a/bTmexDrn8e/BrBVyl2t0ni/cUvw\u003d\u003d\", response.getRequestHash());\n+        assertEquals(true, response.getSoapMessage() !\u003d null);\n+    }\n+\n+    /**\n      * Response to subsystem -\u003e service level service call. Technical error with\n      * header.\n      *\n@@ -840,7 +879,8 @@ public void testNonTechError5() throws XRd4JException, SOAPException {\n \n         protected String deserializeRequestData(Node requestNode) throws SOAPException {\n             for (int i \u003d 0; i \u003c requestNode.getChildNodes().getLength(); i++) {\n-                if (requestNode.getChildNodes().item(i).getLocalName().equals(\"data\")) {\n+                if (requestNode.getChildNodes().item(i).getNodeType() \u003d\u003d Node.ELEMENT_NODE\n+                        \u0026\u0026 requestNode.getChildNodes().item(i).getLocalName().equals(\"data\")) {\n                     return requestNode.getChildNodes().item(i).getTextContent();\n                 }\n             }\n@@ -849,7 +889,8 @@ protected String deserializeRequestData(Node requestNode) throws SOAPException {\n \n         protected String deserializeResponseData(Node responseNode, SOAPMessage message) throws SOAPException {\n             for (int i \u003d 0; i \u003c responseNode.getChildNodes().getLength(); i++) {\n-                if (responseNode.getChildNodes().item(i).getLocalName().equals(\"data\")) {\n+                if (responseNode.getChildNodes().item(i).getNodeType() \u003d\u003d Node.ELEMENT_NODE\n+                        \u0026\u0026 responseNode.getChildNodes().item(i).getLocalName().equals(\"data\")) {\n                     return responseNode.getChildNodes().item(i).getTextContent();\n                 }\n             }\n@@ -867,4 +908,12 @@ protected Object deserializeFaultDetail(Node detailNode) {\n             return SOAPHelper.nodesToMap(detailNode.getChildNodes());\n         }\n     }\n+\n+    private class TestResponseDeserializer3 extends TestResponseDeserializer {\n+\n+        @Override\n+        protected String deserializeResponseData(Node responseNode, SOAPMessage message) throws SOAPException {\n+            return responseNode.getTextContent();\n+        }\n+    }\n }"
        }
      ]
    }
  },
  {
    "name": "HiveFieldExtractor null pointer exception",
    "url": "https://github.com/elastic/elasticsearch-hadoop/issues/115",
    "description": "Hello\n\nLooking at different tests I\u0027m making it seems that a Hive NULL field will result in a nullpointer exception in the HiveFieldExtractor.\nI\u0027m guessing\nreturn soi.getStructFieldData(type.getObject(), field).toString();\nshould be checked.\n\nMy example is a line like so:\n{\"vid\":\"133952206\",\"session\":\"193351661\",\"hostname\":\"host\",\"remoteip\":null,\"useragent\":null,\"event_timestamp\":null,\"dt\":\"2013-12-05\",\"event_type\":\"hit\"}\n\nAnd I insert it with a insert overwrite table estable select \\* from mytbale\n",
    "keywords": [
      ":null"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/elastic/elasticsearch-hadoop/commit/aacab5585b19c9c130f1f0cca1a62b35b0fdbab8",
      "files": [
        {
          "file_name": "src/main/java/org/elasticsearch/hadoop/hive/HiveFieldExtractor.java",
          "patch": "@@ -15,14 +15,17 @@\n  */\n package org.elasticsearch.hadoop.hive;\n \n+import java.util.Locale;\n import java.util.Map;\n \n import org.apache.hadoop.hive.serde2.objectinspector.ObjectInspector;\n import org.apache.hadoop.hive.serde2.objectinspector.StructField;\n import org.apache.hadoop.hive.serde2.objectinspector.StructObjectInspector;\n+import org.apache.hadoop.io.NullWritable;\n import org.elasticsearch.hadoop.cfg.Settings;\n import org.elasticsearch.hadoop.serialization.ConstantFieldExtractor;\n import org.elasticsearch.hadoop.util.Assert;\n+import org.elasticsearch.hadoop.util.StringUtils;\n \n public class HiveFieldExtractor extends ConstantFieldExtractor {\n \n@@ -41,7 +44,11 @@ protected String extractField(Object target) {\n                         String.format(\"Field [%s] needs to be a primitive; found [%s]\", fieldName, foi.getTypeName()));\n \n                 // expecting a writeable - simply do a toString\n-                return soi.getStructFieldData(type.getObject(), field).toString();\n+                Object data \u003d soi.getStructFieldData(type.getObject(), field);\n+                if (data \u003d\u003d null || data instanceof NullWritable) {\n+                    return StringUtils.EMPTY;\n+                }\n+                return data.toString();\n             }\n         }\n \n@@ -53,6 +60,6 @@ public void setSettings(Settings settings) {\n         super.setSettings(settings);\n         Map\u003cString, String\u003e columnNames \u003d HiveUtils.columnMap(settings);\n         // replace column name with _colX (which is what Hive uses during serialization)\n-        fieldName \u003d columnNames.get(getFieldName().toLowerCase());\n+        fieldName \u003d columnNames.get(getFieldName().toLowerCase(Locale.ENGLISH));\n     }\n }"
        }
      ]
    }
  },
  {
    "name": "Crash - Vector pool null pointer when multithreading is on",
    "url": "https://github.com/langurmonkey/gaiasky/issues/83",
    "description": "[Original message](https://aur.archlinux.org/packages/gaiasky/) from [8472](https://aur.archlinux.org/account/8472)\n\nThe app. hangs up (always) after a while (it\u0027s random, sometime it takes longer, sometime right), but obviously with the very same \"Exception in thread \"LWJGL Application\" java.lang.NullPointerException\" failure:\n{\njava -Xms1g -Xmx2g -XX:+UseConcMarkSweepGC -cp \"/opt/gaiasky/lib/*\" gaia.cu9.ari.gaiaorbit.desktop.GaiaSkyDesktop\nGlobalConf - GUI scale factor set to 0.96946806\nLoaded 1 music files\nConfiguration saved to ~/.gaiasky/global.properties\nDisplay mode set to 1600x1200, fullscreen: false\nFOV: 0.89079\n19:22:25: GaiaSky - GLSL version: 4.50 NVIDIA\n...\n...\n...\nException in thread \"LWJGL Application\" java.lang.NullPointerException\nat gaia.cu9.ari.gaiaorbit.util.coord.Coordinates.cartesianToSpherical(Coordinates.java:401)\nat gaia.cu9.ari.gaiaorbit.scenegraph.CameraManager.updatePointerRADEC(CameraManager.java:220)\nat gaia.cu9.ari.gaiaorbit.scenegraph.CameraManager.update(CameraManager.java:207)\nat gaia.cu9.ari.gaiaorbit.GaiaSky.update(GaiaSky.java:468)\nat gaia.cu9.ari.gaiaorbit.GaiaSky.render(GaiaSky.java:396)\nat com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:223)\nat com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:124)\n}\n\nI\u0027m running:\n{\nIntel(R) Core(TM) i7-6700 CPU @ 3.40GHz (Intel Skylake)\nRAM: 16GB\nGeForce GTX 750\n\nx86_64\n4.4.22-1-lts\n\njre8-openjdk 8.u102-1\n}\n",
    "keywords": [
      "gaia cu9",
      "cameramanager",
      "gaia",
      "gaiasky",
      "java",
      "4",
      "lwjglapplication",
      "cu9",
      "gaiaorbit",
      "ari",
      "cu9 ari",
      "ari gaiaorbit",
      "lwjgl"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/langurmonkey/gaiasky/commit/404157736a03af2d1bd7b8ef45208e77d07016e6",
      "files": [
        {
          "file_name": "android/assets/data/extra-low.json",
          "patch": "@@ -71,8 +71,8 @@\n \t\n \t{\n \t\"name\" : \"MW\",\n-\t\"color\" : [1.0, 1.0, 1.0, 0.3],\n-\t\"size\" : 1.6e12,\n+\t\"color\" : [1.0, 1.0, 1.0, 0.5],\n+\t\"size\" : 1.6e20,\n \t\"ct\" : MilkyWay,\n \t\"transformName\" : equatorialToGalactic,\n "
        },
        {
          "file_name": "android/assets/data/extra.json",
          "patch": "@@ -72,7 +72,7 @@\n \t{\n \t\"name\" : \"MW\",\n \t\"color\" : [1.0, 1.0, 1.0, 0.5],\n-\t\"size\" : 1.6e12,\n+\t\"size\" : 1.6e20,\n \t\"ct\" : MilkyWay,\n \t\"transformName\" : equatorialToGalactic,\n "
        },
        {
          "file_name": "android/src/gaia/cu9/ari/gaiaorbit/android/GaiaSandboxActivity.java",
          "patch": "@@ -1,14 +1,11 @@\n package gaia.cu9.ari.gaiaorbit.android;\n \n-import gaia.cu9.ari.gaiaorbit.GaiaSky;\n-import gaia.cu9.ari.gaiaorbit.android.util.AndroidConfInit;\n-import gaia.cu9.ari.gaiaorbit.scenegraph.NaturalCamera;\n-import gaia.cu9.ari.gaiaorbit.util.ConfInit;\n-import gaia.cu9.ari.gaiaorbit.util.GlobalConf;\n-import gaia.cu9.ari.gaiaorbit.util.math.MathUtilsd;\n-\n import java.io.InputStream;\n \n+import com.badlogic.gdx.backends.android.AndroidApplication;\n+import com.badlogic.gdx.backends.android.AndroidApplicationConfiguration;\n+import com.badlogic.gdx.math.Matrix4;\n+\n import android.app.Activity;\n import android.content.Context;\n import android.hardware.Sensor;\n@@ -21,10 +18,16 @@\n import android.util.Log;\n import android.view.View;\n import android.view.inputmethod.InputMethodManager;\n-\n-import com.badlogic.gdx.backends.android.AndroidApplication;\n-import com.badlogic.gdx.backends.android.AndroidApplicationConfiguration;\n-import com.badlogic.gdx.math.Matrix4;\n+import gaia.cu9.ari.gaiaorbit.GaiaSky;\n+import gaia.cu9.ari.gaiaorbit.android.util.AndroidConfInit;\n+import gaia.cu9.ari.gaiaorbit.scenegraph.NaturalCamera;\n+import gaia.cu9.ari.gaiaorbit.util.ConfInit;\n+import gaia.cu9.ari.gaiaorbit.util.GlobalConf;\n+import gaia.cu9.ari.gaiaorbit.util.concurrent.SingleThreadIndexer;\n+import gaia.cu9.ari.gaiaorbit.util.concurrent.SingleThreadLocalFactory;\n+import gaia.cu9.ari.gaiaorbit.util.concurrent.ThreadIndexer;\n+import gaia.cu9.ari.gaiaorbit.util.concurrent.ThreadLocalFactory;\n+import gaia.cu9.ari.gaiaorbit.util.math.MathUtilsd;\n \n public class GaiaSandboxActivity extends AndroidApplication {\n     WakeLock mWakeLock;\n@@ -60,6 +63,9 @@ public void onCreate(Bundle savedInstanceState) {\n         sensorAcce \u003d sensorMan.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);\n         sensorMagn \u003d sensorMan.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);\n \n+        ThreadIndexer.initialize(new SingleThreadIndexer());\n+        ThreadLocalFactory.initialize(new SingleThreadLocalFactory());\n+\n         initialize(new GaiaSky(), cfg);\n     }\n "
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/interfce/GaiaInputController.java",
          "patch": "@@ -17,7 +17,6 @@\n import com.badlogic.gdx.math.MathUtils;\n import com.badlogic.gdx.math.Vector2;\n import com.badlogic.gdx.math.Vector3;\n-import com.badlogic.gdx.utils.Pool;\n \n import gaia.cu9.ari.gaiaorbit.GaiaSky;\n import gaia.cu9.ari.gaiaorbit.event.EventManager;\n@@ -31,7 +30,6 @@\n import gaia.cu9.ari.gaiaorbit.scenegraph.Star;\n import gaia.cu9.ari.gaiaorbit.util.Constants;\n import gaia.cu9.ari.gaiaorbit.util.GlobalConf;\n-import gaia.cu9.ari.gaiaorbit.util.MyPools;\n import gaia.cu9.ari.gaiaorbit.util.comp.ViewAngleComparator;\n import gaia.cu9.ari.gaiaorbit.util.math.Vector3d;\n \n@@ -42,8 +40,6 @@\n  *\n  */\n public class GaiaInputController extends GestureDetector {\n-    protected static Pool\u003cVector3d\u003e v3dpool \u003d MyPools.get(Vector3d.class);\n-    protected static Pool\u003cVector3\u003e v3pool \u003d MyPools.get(Vector3.class);\n \n     public KeyBindings mappings;\n "
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/render/SGRStereoscopic.java",
          "patch": "@@ -11,7 +11,6 @@\n import com.badlogic.gdx.graphics.Texture;\n import com.badlogic.gdx.graphics.glutils.FrameBuffer;\n import com.badlogic.gdx.math.Vector3;\n-import com.badlogic.gdx.utils.Pool;\n import com.badlogic.gdx.utils.viewport.StretchViewport;\n import com.badlogic.gdx.utils.viewport.Viewport;\n import com.bitfire.postprocessing.effects.Anaglyphic;\n@@ -28,7 +27,6 @@\n import gaia.cu9.ari.gaiaorbit.util.GlobalConf;\n import gaia.cu9.ari.gaiaorbit.util.GlobalConf.ProgramConf.StereoProfile;\n import gaia.cu9.ari.gaiaorbit.util.GlobalResources;\n-import gaia.cu9.ari.gaiaorbit.util.MyPools;\n \n /**\n  * Renders all the 3D/stereoscopic modes. Renders basically two scenes, one for each eye,\n@@ -47,6 +45,8 @@\n \n     private Anaglyphic anaglyphic;\n \n+    private Vector3 aux1, aux2, aux3;\n+\n     public SGRStereoscopic() {\n         super();\n         // INIT VIEWPORT\n@@ -59,6 +59,11 @@ public SGRStereoscopic() {\n         // Init anaglyphic effect\n         anaglyphic \u003d new Anaglyphic();\n \n+        // Aux vectors\n+        aux1 \u003d new Vector3();\n+        aux2 \u003d new Vector3();\n+        aux3 \u003d new Vector3();\n+\n         EventManager.instance.subscribe(this, Events.FRAME_SIZE_UDPATE, Events.SCREENSHOT_SIZE_UDPATE);\n     }\n \n@@ -68,9 +73,8 @@ public void render(SceneGraphRenderer sgr, ICamera camera, float t, int rw, int\n         //movecam \u003d false;\n \n         PerspectiveCamera cam \u003d camera.getCamera();\n-        Pool\u003cVector3\u003e vectorPool \u003d MyPools.get(Vector3.class);\n         // Vector of 1 meter length pointing to the side of the camera\n-        Vector3 side \u003d vectorPool.obtain().set(cam.direction);\n+        Vector3 side \u003d aux1.set(cam.direction);\n         float separation \u003d (float) Constants.M_TO_U * GlobalConf.program.STEREOSCOPIC_EYE_SEPARATION_M;\n         float dirangleDeg \u003d 0;\n \n@@ -88,8 +92,8 @@ public void render(SceneGraphRenderer sgr, ICamera camera, float t, int rw, int\n         }\n \n         side.crs(cam.up).nor().scl(separation);\n-        Vector3 backupPos \u003d vectorPool.obtain().set(cam.position);\n-        Vector3 backupDir \u003d vectorPool.obtain().set(cam.direction);\n+        Vector3 backupPos \u003d aux2.set(cam.position);\n+        Vector3 backupDir \u003d aux3.set(cam.direction);\n \n         if (GlobalConf.program.STEREO_PROFILE \u003d\u003d StereoProfile.ANAGLYPHIC) {\n             camera.setViewport(extendViewport);\n@@ -229,9 +233,6 @@ public void render(SceneGraphRenderer sgr, ICamera camera, float t, int rw, int\n         /** RESTORE **/\n         cam.position.set(backupPos);\n         cam.direction.set(backupDir);\n-        vectorPool.free(side);\n-        vectorPool.free(backupPos);\n-        vectorPool.free(backupDir);\n \n     }\n "
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/render/SceneGraphRenderer.java",
          "patch": "@@ -353,20 +353,6 @@ public void render(ICamera camera, float t, int rw, int rh, FrameBuffer fb, Post\n             initSGR(camera);\n \n         sgr.render(this, camera, t, rw, rh, fb, ppb);\n-\n-        //        fb.getColorBufferTexture()\n-        //        if (fb !\u003d null) {\n-        //            int depthId \u003d fb.getDepthBufferHandle();\n-        //            Gdx.gl.glBindFramebuffer(GL20.GL_FRAMEBUFFER, depthId);\n-        //            int texid \u003d Gdx.gl.glGenTexture();\n-        //            Gdx.gl.glBindTexture(GL20.GL_TEXTURE_2D, texid);\n-        //            Gdx.gl.glTexImage2D(GL20.GL_TEXTURE_2D, 0, GL20.GL_RGB, rw, rh, 0, GL20.GL_RGB, GL20.GL_UNSIGNED_BYTE, null);\n-        //\n-        //            // Poor filtering. Needed !\n-        //            Gdx.gl.glTexParameteri(GL20.GL_TEXTURE_2D, GL20.GL_TEXTURE_MAG_FILTER, GL20.GL_NEAREST);\n-        //            Gdx.gl.glTexParameteri(GL20.GL_TEXTURE_2D, GL20.GL_TEXTURE_MIN_FILTER, GL20.GL_NEAREST);\n-        //\n-        //        }\n     }\n \n     /**"
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/scenegraph/AbstractPositionEntity.java",
          "patch": "@@ -174,9 +174,8 @@ public void updateLocal(ITimeFrameProvider time, ICamera camera) {\n \n         this.transform.translate(pos);\n \n-        Vector3d aux \u003d v3dpool.obtain();\n+        Vector3d aux \u003d aux3d1.get();\n         this.distToCamera \u003d (float) transform.getTranslation(aux).len();\n-        v3dpool.free(aux);\n         this.viewAngle \u003d (float) Math.atan(size / distToCamera);\n         this.viewAngleApparent \u003d this.viewAngle;\n         if (!copy) {\n@@ -264,7 +263,7 @@ public float getDistToCamera() {\n     }\n \n     protected void render2DLabel(SpriteBatch batch, ShaderProgram shader, BitmapFont font, ICamera camera, String label, Vector3d pos) {\n-        Vector3 p \u003d v3fpool.obtain();\n+        Vector3 p \u003d aux3f1.get();\n         pos.setVector3(p);\n \n         camera.getCamera().project(p);\n@@ -273,7 +272,6 @@ protected void render2DLabel(SpriteBatch batch, ShaderProgram shader, BitmapFont\n \n         shader.setUniformf(\"scale\", 1f);\n         DecalUtils.drawFont2D(font, batch, label, p);\n-        v3fpool.free(p);\n     }\n \n     protected void render3DLabel(SpriteBatch batch, ShaderProgram shader, BitmapFont font, ICamera camera, String label, Vector3d pos, float scale, float size, float[] colour) {"
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/scenegraph/CameraManager.java",
          "patch": "@@ -7,7 +7,6 @@\n import com.badlogic.gdx.math.Matrix4;\n import com.badlogic.gdx.math.Vector3;\n import com.badlogic.gdx.math.collision.Ray;\n-import com.badlogic.gdx.utils.Pool;\n import com.badlogic.gdx.utils.viewport.Viewport;\n \n import gaia.cu9.ari.gaiaorbit.event.EventManager;\n@@ -16,17 +15,13 @@\n import gaia.cu9.ari.gaiaorbit.util.Constants;\n import gaia.cu9.ari.gaiaorbit.util.GlobalConf;\n import gaia.cu9.ari.gaiaorbit.util.Logger;\n-import gaia.cu9.ari.gaiaorbit.util.MyPools;\n import gaia.cu9.ari.gaiaorbit.util.TwoWayHashmap;\n import gaia.cu9.ari.gaiaorbit.util.coord.AstroUtils;\n import gaia.cu9.ari.gaiaorbit.util.coord.Coordinates;\n import gaia.cu9.ari.gaiaorbit.util.math.Vector3d;\n import gaia.cu9.ari.gaiaorbit.util.time.ITimeFrameProvider;\n \n public class CameraManager implements ICamera, IObserver {\n-    protected static Pool\u003cVector3d\u003e v3dpool \u003d MyPools.get(Vector3d.class);\n-    protected static Pool\u003cVector3\u003e v3pool \u003d MyPools.get(Vector3.class);\n-\n     /**\n      * Convenience enum to describe the camera mode\n      * @author Toni Sagrista\n@@ -96,7 +91,8 @@ public boolean isGaiaFov() {\n     public FovCamera fovCamera;\n \n     /** Last position, for working out velocity **/\n-    private Vector3d lastPos;\n+    private Vector3d lastPos, out, in;\n+    private Vector3 vec, v0, v1;\n \n     /** Are we moving at high speeds? **/\n     private boolean supervelocity;\n@@ -113,6 +109,11 @@ public CameraManager(AssetManager manager, CameraMode mode) {\n         fovCamera \u003d new FovCamera(manager, this);\n         this.mode \u003d mode;\n         lastPos \u003d new Vector3d();\n+        in \u003d new Vector3d();\n+        out \u003d new Vector3d();\n+        vec \u003d new Vector3();\n+        v0 \u003d new Vector3();\n+        v1 \u003d new Vector3();\n         velocity \u003d new Vector3d();\n         supervelocity \u003d true;\n \n@@ -214,43 +215,37 @@ public void update(float dt, ITimeFrameProvider time) {\n     }\n \n     private void updatePointerRADEC(int screenX, int screenY) {\n-        Vector3 vec \u003d v3pool.obtain().set(screenX, screenY, 0.5f);\n+        vec.set(screenX, screenY, 0.5f);\n         ICamera camera \u003d current;\n         camera.getCamera().unproject(vec);\n \n-        Vector3d vecd \u003d v3dpool.obtain().set(vec);\n-        Vector3d out \u003d v3dpool.obtain();\n+        in.set(vec);\n \n-        Coordinates.cartesianToSpherical(vecd, out);\n+        Coordinates.cartesianToSpherical(in, out);\n \n         double alpha \u003d out.x * AstroUtils.TO_DEG;\n         double delta \u003d out.y * AstroUtils.TO_DEG;\n \n         Logger.debug(\"Alpha/delta: \" + alpha + \"/\" + delta);\n         EventManager.instance.post(Events.RA_DEC_UPDATED, alpha, delta, screenX, screenY);\n-\n-        v3dpool.free(out);\n-        v3dpool.free(vecd);\n-        v3pool.free(vec);\n     }\n \n     private void updateFocusLatLon(int screenX, int screenY) {\n         if (isNatural()) {\n             // Hover over planets gets us lat/lon\n             if (current.getFocus() !\u003d null \u0026\u0026 current.getFocus() instanceof Planet) {\n                 Planet p \u003d (Planet) current.getFocus();\n-                Vector3 pcenter \u003d v3pool.obtain();\n-                p.transform.getTranslationf(pcenter);\n+                p.transform.getTranslationf(vec);\n                 //pcenter.set((float) p.pos.x, (float) p.pos.y, (float) p.pos.z);\n                 ICamera camera \u003d current;\n-                Vector3 v0 \u003d v3pool.obtain().set(screenX, screenY, 0f);\n-                Vector3 v1 \u003d v3pool.obtain().set(screenX, screenY, 0.5f);\n+                v0.set(screenX, screenY, 0f);\n+                v1.set(screenX, screenY, 0.5f);\n                 camera.getCamera().unproject(v0);\n                 camera.getCamera().unproject(v1);\n \n                 Ray ray \u003d new Ray(v0, v1.sub(v0));\n                 Vector3 intersection \u003d new Vector3();\n-                boolean inter \u003d Intersector.intersectRaySphere(ray, pcenter, p.getRadius(), intersection);\n+                boolean inter \u003d Intersector.intersectRaySphere(ray, vec, p.getRadius(), intersection);\n \n                 if (inter) {\n                     // We found an intersection point\n@@ -259,25 +254,17 @@ private void updateFocusLatLon(int screenX, int screenY) {\n                     localTransformInv.inv();\n                     intersection.mul(localTransformInv);\n \n-                    Vector3d vec \u003d v3dpool.obtain();\n-                    vec.set(intersection);\n-                    Vector3d out \u003d v3dpool.obtain();\n-                    Coordinates.cartesianToSpherical(vec, out);\n+                    in.set(intersection);\n+                    Coordinates.cartesianToSpherical(in, out);\n \n                     double lon \u003d (Math.toDegrees(out.x) + 90) % 360;\n                     double lat \u003d Math.toDegrees(out.y);\n \n                     Logger.debug(\"Lon/lat: \" + lon + \"/\" + lat);\n                     EventManager.instance.post(Events.LON_LAT_UPDATED, lon, lat, screenX, screenY);\n \n-                    v3dpool.free(vec);\n-                    v3dpool.free(out);\n                 }\n \n-                v3pool.free(pcenter);\n-                v3pool.free(v0);\n-                v3pool.free(v1);\n-\n             }\n \n         }"
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/scenegraph/CelestialBody.java",
          "patch": "@@ -118,10 +118,9 @@ public void render(ShaderProgram shader, float alpha, boolean colorTransit, Mesh\n \n         float size \u003d getFuzzyRenderSize(camera);\n \n-        Vector3 aux \u003d v3fpool.obtain();\n+        Vector3 aux \u003d aux3f1.get();\n         shader.setUniformf(\"u_pos\", transform.getTranslationf(aux));\n         shader.setUniformf(\"u_size\", size);\n-        v3fpool.free(aux);\n \n         float[] col \u003d colorTransit ? ccTransit : cc;\n         shader.setUniformf(\"u_color\", col[0], col[1], col[2], alpha * opacity);\n@@ -163,14 +162,13 @@ public void render(SpriteBatch batch, ShaderProgram shader, BitmapFont font3d, B\n         } else {\n             //render2DLabel(batch, shader, font, camera, text(), transform.position);\n             // 3D distance font\n-            Vector3d pos \u003d v3dpool.obtain();\n+            Vector3d pos \u003d aux3d1.get();\n             textPosition(camera, pos);\n             shader.setUniformf(\"a_viewAngle\", (float) viewAngle);\n             shader.setUniformf(\"a_viewAnglePow\", getViewAnglePow());\n             shader.setUniformf(\"a_thOverFactor\", TH_OVER_FACTOR);\n             shader.setUniformf(\"a_thOverFactorScl\", getThOverFactorScl());\n             render3DLabel(batch, shader, font3d, camera, text(), pos, textScale(), textSize(), textColour());\n-            v3dpool.free(pos);\n         }\n \n     }\n@@ -322,7 +320,7 @@ public void textPosition(ICamera cam, Vector3d out) {\n         double len \u003d out.len();\n         out.clamp(0, len - getRadius()).scl(0.8f);\n \n-        Vector3d aux \u003d v3dpool.obtain();\n+        Vector3d aux \u003d aux3d2.get();\n         aux.set(cam.getUp());\n \n         aux.crs(out).nor();\n@@ -333,8 +331,6 @@ public void textPosition(ICamera cam, Vector3d out) {\n \n         out.add(aux);\n \n-        v3dpool.free(aux);\n-\n     }\n \n     @Override"
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/scenegraph/Constellation.java",
          "patch": "@@ -106,9 +106,9 @@ public void render(LineRenderSystem renderer, ICamera camera, float alpha) {\n         constalpha \u003d alpha;\n         alpha *\u003d this.alpha;\n \n-        Vector3 campos \u003d v3fpool.obtain();\n-        Vector3 p1 \u003d v3fpool.obtain();\n-        Vector3 p2 \u003d v3fpool.obtain();\n+        Vector3 campos \u003d aux3f1.get();\n+        Vector3 p1 \u003d aux3f2.get();\n+        Vector3 p2 \u003d aux3f3.get();\n         camera.getPos().setVector3(campos);\n         // Fix, using positions directly\n         for (Vector3[] pair : positions) {\n@@ -118,9 +118,6 @@ public void render(LineRenderSystem renderer, ICamera camera, float alpha) {\n             renderer.addLine(p1.x, p1.y, p1.z, p2.x, p2.y, p2.z, cc[0], cc[1], cc[2], alpha);\n \n         }\n-        v3fpool.free(campos);\n-        v3fpool.free(p1);\n-        v3fpool.free(p2);\n \n     }\n \n@@ -129,12 +126,11 @@ public void render(LineRenderSystem renderer, ICamera camera, float alpha) {\n      */\n     @Override\n     public void render(SpriteBatch batch, ShaderProgram shader, BitmapFont font3d, BitmapFont font2d, ICamera camera) {\n-        Vector3d pos \u003d v3dpool.obtain();\n+        Vector3d pos \u003d aux3d1.get();\n         textPosition(camera, pos);\n         shader.setUniformf(\"a_viewAngle\", 90f);\n         shader.setUniformf(\"a_thOverFactor\", 1f);\n         render3DLabel(batch, shader, font3d, camera, text(), pos, textScale(), textSize(), textColour());\n-        v3dpool.free(pos);\n     }\n \n     @Override"
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/scenegraph/FovCamera.java",
          "patch": "@@ -15,7 +15,6 @@\n import com.badlogic.gdx.scenes.scene2d.utils.Drawable;\n import com.badlogic.gdx.scenes.scene2d.utils.TextureRegionDrawable;\n import com.badlogic.gdx.utils.Align;\n-import com.badlogic.gdx.utils.Pool;\n import com.badlogic.gdx.utils.Scaling;\n import com.badlogic.gdx.utils.viewport.FitViewport;\n import com.badlogic.gdx.utils.viewport.ScalingViewport;\n@@ -30,7 +29,6 @@\n import gaia.cu9.ari.gaiaorbit.util.GlobalResources;\n import gaia.cu9.ari.gaiaorbit.util.I18n;\n import gaia.cu9.ari.gaiaorbit.util.Logger;\n-import gaia.cu9.ari.gaiaorbit.util.MyPools;\n import gaia.cu9.ari.gaiaorbit.util.gaia.GaiaAttitudeServer;\n import gaia.cu9.ari.gaiaorbit.util.gaia.Satellite;\n import gaia.cu9.ari.gaiaorbit.util.math.Matrix4d;\n@@ -68,8 +66,9 @@\n     private Matrix4d trf;\n \n     public long currentTime, lastTime;\n-    private Pool\u003cVector3d\u003e vectorPool;\n-    private Pool\u003cMatrix4d\u003e matrixPool;\n+\n+    private Vector3d dir1, dir2;\n+    private Matrix4d matrix;\n \n     Viewport viewport, viewport2;\n \n@@ -87,8 +86,9 @@ public FovCamera(AssetManager assetManager, CameraManager parent) {\n \n         currentTime \u003d 0l;\n         lastTime \u003d 0l;\n-        vectorPool \u003d MyPools.get(Vector3d.class);\n-        matrixPool \u003d MyPools.get(Matrix4d.class);\n+        dir1 \u003d new Vector3d();\n+        dir2 \u003d new Vector3d();\n+        matrix \u003d new Matrix4d();\n     }\n \n     public void initialize(AssetManager assetManager) {\n@@ -160,7 +160,7 @@ public void update(float dt, ITimeFrameProvider time) {\n \n         /** ORIENTATION - directions and up **/\n         updateDirections(time);\n-        trf \u003d matrixPool.obtain();\n+        trf \u003d matrix;\n         up.mul(trf).nor();\n \n         // Update cameras\n@@ -169,7 +169,6 @@ public void update(float dt, ITimeFrameProvider time) {\n         updateCamera(directions[1], up, camera2);\n \n         dirMiddle.set(0, 0, 1).mul(trf);\n-        matrixPool.free(trf);\n \n         // Return to pool\n         SceneGraphNode ape \u003d fccopy;\n@@ -187,19 +186,14 @@ public void update(float dt, ITimeFrameProvider time) {\n     public void updateDirections(ITimeFrameProvider time) {\n         lastTime \u003d currentTime;\n         currentTime \u003d time.getTime().getTime();\n-        trf \u003d matrixPool.obtain();\n+        trf \u003d matrix;\n         trf.idt();\n         Quaterniond quat \u003d GaiaAttitudeServer.instance.getAttitude(time.getTime()).getQuaternion();\n         trf.rotate(quat).rotate(0, 0, 1, 180);\n         directions[0].set(0, 0, 1).rotate(BAM_2, 0, 1, 0).mul(trf).nor();\n         directions[1].set(0, 0, 1).rotate(-BAM_2, 0, 1, 0).mul(trf).nor();\n-        matrixPool.free(trf);\n \n         /** WORK OUT INTERPOLATED DIRECTIONS IN THE CASE OF FAST SCANNING **/\n-        for (Vector3d[] directions : interpolatedDirections) {\n-            vectorPool.free(directions[0]);\n-            vectorPool.free(directions[1]);\n-        }\n         interpolatedDirections.clear();\n         if (GlobalConf.scene.COMPUTE_GAIA_SCAN) {\n             if (lastTime !\u003d 0 \u0026\u0026 currentTime - lastTime \u003e MAX_OVERLAP_TIME) {\n@@ -220,13 +214,12 @@ public void updateDirections(ITimeFrameProvider time) {\n     }\n \n     public Vector3d[] getDirections(Date d) {\n-        trf \u003d matrixPool.obtain();\n+        trf \u003d matrix;\n         trf.idt();\n         Quaterniond quat \u003d GaiaAttitudeServer.instance.getAttitude(d).getQuaternion();\n         trf.rotate(quat).rotate(0, 0, 1, 180);\n-        Vector3d dir1 \u003d vectorPool.obtain().set(0, 0, 1).rotate(BAM_2, 0, 1, 0).mul(trf).nor();\n-        Vector3d dir2 \u003d vectorPool.obtain().set(0, 0, 1).rotate(-BAM_2, 0, 1, 0).mul(trf).nor();\n-        matrixPool.free(trf);\n+        dir1.set(0, 0, 1).rotate(BAM_2, 0, 1, 0).mul(trf).nor();\n+        dir2.set(0, 0, 1).rotate(-BAM_2, 0, 1, 0).mul(trf).nor();\n         return new Vector3d[] { dir1, dir2 };\n     }\n "
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/scenegraph/Loc.java",
          "patch": "@@ -48,9 +48,8 @@ public void updateLocal(ITimeFrameProvider time, ICamera camera) {\n \n             this.transform.translate(pos);\n \n-            Vector3d aux \u003d v3dpool.obtain();\n+            Vector3d aux \u003d aux3d1.get();\n             this.distToCamera \u003d (float) transform.getTranslation(aux).len();\n-            v3dpool.free(aux);\n             this.viewAngle \u003d (float) Math.atan(size / distToCamera) / camera.getFovFactor();\n             this.viewAngleApparent \u003d this.viewAngle;\n             if (!copy) {\n@@ -89,11 +88,10 @@ public boolean renderText() {\n         if (viewAngle \u003c LOWER_LIMIT || viewAngle \u003e UPPER_LIMIT || !GaiaSky.instance.isOn(ComponentType.Labels)) {\n             return false;\n         }\n-        Vector3d aux \u003d v3dpool.obtain();\n+        Vector3d aux \u003d aux3d1.get();\n         transform.getTranslation(aux).scl(-1);\n \n         double cosalpha \u003d aux.add(location3d.x, location3d.y, location3d.z).nor().dot(GaiaSky.instance.cam.getDirection().nor());\n-        v3dpool.free(aux);\n         return cosalpha \u003c -0.2f;\n     }\n \n@@ -102,12 +100,11 @@ public boolean renderText() {\n      */\n     @Override\n     public void render(SpriteBatch batch, ShaderProgram shader, BitmapFont font3d, BitmapFont font2d, ICamera camera) {\n-        Vector3d pos \u003d v3dpool.obtain();\n+        Vector3d pos \u003d aux3d1.get();\n         textPosition(camera, pos);\n         shader.setUniformf(\"a_viewAngle\", viewAngle * (float) Constants.U_TO_KM);\n         shader.setUniformf(\"a_thOverFactor\", 1f);\n         render3DLabel(batch, shader, font3d, camera, text(), pos, textScale(), textSize(), textColour());\n-        v3dpool.free(pos);\n     }\n \n     @Override"
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/scenegraph/MilkyWay.java",
          "patch": "@@ -85,12 +85,11 @@ public void updateLocal(ITimeFrameProvider time, ICamera camera) {\n         // Directional light comes from up\n         updateLocalTransform();\n         if (mc !\u003d null) {\n-            Vector3 d \u003d v3fpool.obtain();\n+            Vector3 d \u003d aux3f1.get();\n             d.set(0, 1, 0);\n             d.mul(coordinateSystem);\n \n             mc.dlight.direction.set(d);\n-            v3fpool.free(d);\n         }\n \n     }\n@@ -131,12 +130,11 @@ public void render(ModelBatch modelBatch, float alpha, float t) {\n      */\n     @Override\n     public void render(SpriteBatch batch, ShaderProgram shader, BitmapFont font3d, BitmapFont font2d, ICamera camera) {\n-        Vector3d pos \u003d v3dpool.obtain();\n+        Vector3d pos \u003d aux3d1.get();\n         textPosition(camera, pos);\n         shader.setUniformf(\"a_viewAngle\", 90f);\n         shader.setUniformf(\"a_thOverFactor\", 1f);\n         render3DLabel(batch, shader, font3d, camera, text(), pos, textScale(), textSize(), textColour());\n-        v3dpool.free(pos);\n     }\n \n     @Override"
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/scenegraph/MilkyWayReal.java",
          "patch": "@@ -50,7 +50,7 @@ public MilkyWayReal() {\n         super();\n         localTransform \u003d new Matrix4();\n         lowDist \u003d (float) (1e3 * Constants.PC_TO_U);\n-        highDist \u003d (float) (8e3 * Constants.PC_TO_U);\n+        highDist \u003d (float) (5e3 * Constants.PC_TO_U);\n     }\n \n     public void initialize() {\n@@ -135,7 +135,7 @@ public void update(ITimeFrameProvider time, final Transform parentTransform, ICa\n \n     @Override\n     public void update(ITimeFrameProvider time, Transform parentTransform, ICamera camera) {\n-\n+        update(time, parentTransform, camera, 1f);\n     }\n \n     @Override\n@@ -149,12 +149,11 @@ public void updateLocal(ITimeFrameProvider time, ICamera camera) {\n         updateLocalTransform();\n \n         if (mc !\u003d null) {\n-            Vector3 d \u003d v3fpool.obtain();\n+            Vector3 d \u003d aux3f1.get();\n             d.set(0, 1, 0);\n             d.mul(coordinateSystem);\n \n             mc.dlight.direction.set(d);\n-            v3fpool.free(d);\n         }\n \n     }\n@@ -194,12 +193,11 @@ public void render(Object... params) {\n      */\n     @Override\n     public void render(SpriteBatch batch, ShaderProgram shader, BitmapFont font3d, BitmapFont font2d, ICamera camera) {\n-        Vector3d pos \u003d v3dpool.obtain();\n+        Vector3d pos \u003d aux3d1.get();\n         textPosition(camera, pos);\n         shader.setUniformf(\"a_viewAngle\", 90f);\n         shader.setUniformf(\"a_thOverFactor\", 1f);\n         render3DLabel(batch, shader, font3d, camera, text(), pos, textScale(), textSize(), textColour());\n-        v3dpool.free(pos);\n     }\n \n     public void setTransformName(String transformName) {"
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/scenegraph/Particle.java",
          "patch": "@@ -380,18 +380,13 @@ public Object getStars() {\n      */\n     @Override\n     public void render(LineRenderSystem renderer, ICamera camera, float alpha) {\n-        Vector3 campos \u003d v3fpool.obtain();\n-        Vector3 p1 \u003d transform.position.setVector3(v3fpool.obtain());\n-        Vector3 ppm \u003d v3fpool.obtain().set(pm).scl(GlobalConf.scene.PM_LEN_FACTOR);\n-        Vector3 p2 \u003d v3fpool.obtain().set(p1).add(ppm);\n+        Vector3 campos \u003d aux3f1.get();\n+        Vector3 p1 \u003d transform.position.setVector3(aux3f2.get());\n+        Vector3 ppm \u003d aux3f3.get().set(pm).scl(GlobalConf.scene.PM_LEN_FACTOR);\n+        Vector3 p2 \u003d aux3f4.get().set(p1).add(ppm);\n         camera.getPos().setVector3(campos);\n \n         renderer.addLine(p1.x, p1.y, p1.z, p2.x, p2.y, p2.z, 0.65f, 0.65f, 0.0f, alpha);\n-\n-        v3fpool.free(campos);\n-        v3fpool.free(p1);\n-        v3fpool.free(p2);\n-        v3fpool.free(ppm);\n     }\n \n }"
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/scenegraph/Planet.java",
          "patch": "@@ -93,14 +93,13 @@ public void updateLocalValues(ITimeFrameProvider time, ICamera camera) {\n \n     protected void forceUpdateLocalValues(ITimeFrameProvider time, boolean force) {\n         if (time.getDt() !\u003d 0 || force) {\n-            Vector3d aux3 \u003d v3dpool.obtain();\n+            Vector3d aux3 \u003d aux3d1.get();\n             // Load this planet\u0027s spherical ecliptic coordinates into pos\n             coordinates.getEquatorialCartesianCoordinates(time.getTime(), pos);\n \n             // Convert to cartesian coordinates and put them in aux3 vector\n             Coordinates.cartesianToSpherical(pos, aux3);\n             posSph.set((float) (AstroUtils.TO_DEG * aux3.x), (float) (AstroUtils.TO_DEG * aux3.y));\n-            v3dpool.free(aux3);\n             // Update angle\n             rc.update(time);\n         }"
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/scenegraph/SceneGraphNode.java",
          "patch": "@@ -15,7 +15,9 @@\n import gaia.cu9.ari.gaiaorbit.render.SceneGraphRenderer;\n import gaia.cu9.ari.gaiaorbit.scenegraph.octreewrapper.AbstractOctreeWrapper;\n import gaia.cu9.ari.gaiaorbit.util.MyPools;\n+import gaia.cu9.ari.gaiaorbit.util.concurrent.IThreadLocal;\n import gaia.cu9.ari.gaiaorbit.util.concurrent.ThreadIndexer;\n+import gaia.cu9.ari.gaiaorbit.util.concurrent.ThreadLocalFactory;\n import gaia.cu9.ari.gaiaorbit.util.math.Matrix4d;\n import gaia.cu9.ari.gaiaorbit.util.math.Vector2d;\n import gaia.cu9.ari.gaiaorbit.util.math.Vector3d;\n@@ -30,9 +32,12 @@\n public class SceneGraphNode implements ISceneGraphNode, IPosition {\n     public static final String ROOT_NAME \u003d \"Universe\";\n \n-    protected static Pool\u003cVector3d\u003e v3dpool \u003d MyPools.get(Vector3d.class);\n-    protected static Pool\u003cVector3\u003e v3fpool \u003d MyPools.get(Vector3.class);\n-    protected static Pool\u003cVector2d\u003e v2dpool \u003d MyPools.get(Vector2d.class);\n+    @SuppressWarnings(\"unchecked\")\n+    protected static IThreadLocal\u003cVector3d\u003e aux3d1 \u003d ThreadLocalFactory.instance.get(Vector3d.class), aux3d2 \u003d ThreadLocalFactory.instance.get(Vector3d.class), aux3d3 \u003d ThreadLocalFactory.instance.get(Vector3d.class);\n+    @SuppressWarnings(\"unchecked\")\n+    protected static IThreadLocal\u003cVector3\u003e aux3f1 \u003d ThreadLocalFactory.instance.get(Vector3.class), aux3f2 \u003d ThreadLocalFactory.instance.get(Vector3.class), aux3f3 \u003d ThreadLocalFactory.instance.get(Vector3.class), aux3f4 \u003d ThreadLocalFactory.instance.get(Vector3.class);\n+    @SuppressWarnings(\"unchecked\")\n+    protected static IThreadLocal\u003cVector2d\u003e aux2d1 \u003d ThreadLocalFactory.instance.get(Vector2d.class), aux2d2 \u003d ThreadLocalFactory.instance.get(Vector2d.class), aux2d3 \u003d ThreadLocalFactory.instance.get(Vector2d.class);\n \n     /**\n      * Describes to which render group this node belongs at a particular time step."
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/scenegraph/octreewrapper/OctreeWrapperConcurrent.java",
          "patch": "@@ -1,15 +1,14 @@\n package gaia.cu9.ari.gaiaorbit.scenegraph.octreewrapper;\n \n+import java.util.List;\n+\n import gaia.cu9.ari.gaiaorbit.render.system.AbstractRenderSystem;\n import gaia.cu9.ari.gaiaorbit.scenegraph.ICamera;\n import gaia.cu9.ari.gaiaorbit.scenegraph.SceneGraphNode;\n import gaia.cu9.ari.gaiaorbit.scenegraph.Transform;\n-import gaia.cu9.ari.gaiaorbit.util.GlobalConf;\n import gaia.cu9.ari.gaiaorbit.util.time.ITimeFrameProvider;\n import gaia.cu9.ari.gaiaorbit.util.tree.OctreeNode;\n \n-import java.util.List;\n-\n /**\n  * Static Octree wrapper that can be inserted into the scene graph. \n  * This implementation is prepared to work with the {@link gaia.cu9.ari.gaiaorbit.desktop.concurrent.SceneGraphConcurrentOctree},\n@@ -45,14 +44,10 @@ public void update(ITimeFrameProvider time, final Transform parentTransform, ICa\n             // Compute observed octants and fill roulette list\n             root.update(transform, camera, roulette, 1f);\n \n-            if (!GlobalConf.scene.OCTREE_PARTICLE_FADE) {\n-                if (roulette.size() !\u003d lastNumberObjects) {\n-                    // Need to update the points in renderer\n-                    AbstractRenderSystem.POINT_UPDATE_FLAG \u003d true;\n-                    lastNumberObjects \u003d roulette.size();\n-                }\n-            } else {\n+            if (roulette.size() !\u003d lastNumberObjects) {\n+                // Need to update the points in renderer\n                 AbstractRenderSystem.POINT_UPDATE_FLAG \u003d true;\n+                lastNumberObjects \u003d roulette.size();\n             }\n \n             updateLocal(time, camera);"
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/util/MyPools.java",
          "patch": "@@ -14,17 +14,16 @@\n     static public \u003cT\u003e Pool\u003cT\u003e get(Class\u003cT\u003e type, int max) {\n         Pool pool \u003d typePools.get(type.getName());\n         if (pool \u003d\u003d null) {\n-            pool \u003d new SimplePool(type, 10, max);\n+            pool \u003d new SimplePool(type, 1000, max);\n             set(type, pool);\n         }\n \n         return pool;\n     }\n \n-    /** Returns a new or existing pool for the specified type, stored in a Class to {@link Pool} map. The max size of the pool used\n-     * is 100. */\n+    /** Returns a new or existing pool for the specified type, stored in a Class to {@link Pool} map. */\n     static public \u003cT\u003e Pool\u003cT\u003e get(Class\u003cT\u003e type) {\n-        return get(type, 1000);\n+        return get(type, Integer.MAX_VALUE);\n     }\n \n     /** Sets an existing pool for the specified type, stored in a Class to {@link Pool} map. */"
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/util/concurrent/IThreadLocal.java",
          "patch": "@@ -0,0 +1,6 @@\n+package gaia.cu9.ari.gaiaorbit.util.concurrent;\n+\n+public interface IThreadLocal\u003cT\u003e {\n+\n+    public T get();\n+}"
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/util/concurrent/SingleThreadLocal.java",
          "patch": "@@ -0,0 +1,46 @@\n+package gaia.cu9.ari.gaiaorbit.util.concurrent;\n+\n+import com.badlogic.gdx.math.Vector3;\n+\n+import gaia.cu9.ari.gaiaorbit.util.math.Matrix4d;\n+import gaia.cu9.ari.gaiaorbit.util.math.Vector2d;\n+import gaia.cu9.ari.gaiaorbit.util.math.Vector3d;\n+\n+public abstract class SingleThreadLocal {\n+\n+    public static class V3dThreadLocal implements IThreadLocal\u003cVector3d\u003e {\n+        Vector3d value \u003d new Vector3d();\n+\n+        @Override\n+        public Vector3d get() {\n+            return value;\n+        }\n+    }\n+\n+    public static class V3fThreadLocal implements IThreadLocal\u003cVector3\u003e {\n+        Vector3 value \u003d new Vector3();\n+\n+        @Override\n+        public Vector3 get() {\n+            return value;\n+        }\n+    }\n+\n+    public static class V2dThreadLocal implements IThreadLocal\u003cVector2d\u003e {\n+        Vector2d value \u003d new Vector2d();\n+\n+        @Override\n+        public Vector2d get() {\n+            return value;\n+        }\n+    }\n+\n+    public static class M4dThreadLocal implements IThreadLocal\u003cMatrix4d\u003e {\n+        Matrix4d value \u003d new Matrix4d();\n+\n+        @Override\n+        public Matrix4d get() {\n+            return value;\n+        }\n+    }\n+}"
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/util/concurrent/SingleThreadLocalFactory.java",
          "patch": "@@ -0,0 +1,27 @@\n+package gaia.cu9.ari.gaiaorbit.util.concurrent;\n+\n+import java.util.HashMap;\n+\n+import com.badlogic.gdx.math.Vector3;\n+\n+import gaia.cu9.ari.gaiaorbit.util.concurrent.SingleThreadLocal.M4dThreadLocal;\n+import gaia.cu9.ari.gaiaorbit.util.concurrent.SingleThreadLocal.V2dThreadLocal;\n+import gaia.cu9.ari.gaiaorbit.util.concurrent.SingleThreadLocal.V3dThreadLocal;\n+import gaia.cu9.ari.gaiaorbit.util.concurrent.SingleThreadLocal.V3fThreadLocal;\n+import gaia.cu9.ari.gaiaorbit.util.math.Matrix4d;\n+import gaia.cu9.ari.gaiaorbit.util.math.Vector2d;\n+import gaia.cu9.ari.gaiaorbit.util.math.Vector3d;\n+\n+public class SingleThreadLocalFactory extends ThreadLocalFactory {\n+\n+    public SingleThreadLocalFactory() {\n+        super();\n+        map \u003d new HashMap\u003cClass, Class\u003c? extends IThreadLocal\u003e\u003e();\n+\n+        map.put(Vector3d.class, V3dThreadLocal.class);\n+        map.put(Vector3.class, V3fThreadLocal.class);\n+        map.put(Vector2d.class, V2dThreadLocal.class);\n+        map.put(Matrix4d.class, M4dThreadLocal.class);\n+    }\n+\n+}"
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/util/concurrent/ThreadLocalFactory.java",
          "patch": "@@ -0,0 +1,25 @@\n+package gaia.cu9.ari.gaiaorbit.util.concurrent;\n+\n+import java.util.Map;\n+\n+import gaia.cu9.ari.gaiaorbit.util.Logger;\n+\n+public abstract class ThreadLocalFactory {\n+\n+    public static ThreadLocalFactory instance;\n+\n+    protected Map\u003cClass, Class\u003c? extends IThreadLocal\u003e\u003e map;\n+\n+    public static void initialize(ThreadLocalFactory fac) {\n+        instance \u003d fac;\n+    }\n+\n+    public IThreadLocal get(Class clazz) {\n+        try {\n+            return map.get(clazz).newInstance();\n+        } catch (Exception e) {\n+            Logger.error(e);\n+            return null;\n+        }\n+    }\n+}"
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/util/scene2d/TabbedPane.java",
          "patch": "@@ -16,8 +16,6 @@\n \n package gaia.cu9.ari.gaiaorbit.util.scene2d;\n \n-import gaia.cu9.ari.gaiaorbit.util.MyPools;\n-\n import com.badlogic.gdx.graphics.Color;\n import com.badlogic.gdx.graphics.g2d.BitmapFont;\n import com.badlogic.gdx.scenes.scene2d.Actor;\n@@ -229,10 +227,9 @@ private void setSelectedTab(boolean value) {\n     /** Sends a ChangeEvent, with this TabbedPane as the target, to each registered listener. This method is called each time there\n      * is a change to the selected index. */\n     protected void fireStateChanged() {\n-        ChangeEvent changeEvent \u003d MyPools.obtain(ChangeEvent.class);\n+        ChangeEvent changeEvent \u003d new ChangeEvent();\n         changeEvent.setBubbles(false);\n         fire(changeEvent);\n-        MyPools.free(changeEvent);\n     }\n \n     private static class TabTitleButton extends TextButton {"
        },
        {
          "file_name": "core/src/gaia/cu9/ari/gaiaorbit/util/tree/OctreeNode.java",
          "patch": "@@ -18,7 +18,6 @@\n import gaia.cu9.ari.gaiaorbit.scenegraph.Transform;\n import gaia.cu9.ari.gaiaorbit.util.GlobalConf;\n import gaia.cu9.ari.gaiaorbit.util.GlobalResources;\n-import gaia.cu9.ari.gaiaorbit.util.MyPools;\n import gaia.cu9.ari.gaiaorbit.util.Pair;\n import gaia.cu9.ari.gaiaorbit.util.color.ColourUtils;\n import gaia.cu9.ari.gaiaorbit.util.math.BoundingBoxd;\n@@ -45,14 +44,15 @@\n \n     /**\n      * Since OctreeNode is not to be parallelised, these can be static.\n-     * Otherwise, use ThreadLocal\n      **/\n     private static BoundingBoxd boxcopy \u003d new BoundingBoxd(new Vector3d(), new Vector3d());\n     private static Matrix4d boxtransf \u003d new Matrix4d();\n     private static Vector3d auxD1 \u003d new Vector3d(), auxD2 \u003d new Vector3d(), auxD3 \u003d new Vector3d(), auxD4 \u003d new Vector3d();\n     private static Vector3 auxF1 \u003d new Vector3(), auxF2 \u003d new Vector3();\n     private static Rayd ray \u003d new Rayd(new Vector3d(), new Vector3d());\n \n+    private Vector3d aux3d1;\n+\n     /** The load status of this node **/\n     private LoadStatus status;\n     /** The unique page identifier **/\n@@ -114,6 +114,7 @@ public OctreeNode(long pageId, double x, double y, double z, double hsx, double\n         this.centre \u003d new Vector3d(x, y, z);\n         this.size \u003d new Vector3d(hsx * 2, hsy * 2, hsz * 2);\n         this.box \u003d new BoundingBoxd(blf, trb);\n+        this.aux3d1 \u003d new Vector3d();\n         this.depth \u003d depth;\n         this.transform \u003d new Vector3d();\n         this.observed \u003d false;\n@@ -422,7 +423,7 @@ public void update(Transform parentTransform, ICamera cam, List\u003cT\u003e roulette, flo\n             distToCamera \u003d auxD1.set(centre).add(cam.getInversePos()).len();\n             viewAngle \u003d (radius / distToCamera) / cam.getFovFactor();\n \n-            if (viewAngle \u003c GlobalConf.scene.OCTANT_THRESHOLD_0) {\n+            if (viewAngle \u003c GlobalConf.scene.OCTANT_THRESHOLD_0 / cam.getFovFactor()) {\n                 // Stay in current level\n                 addObjectsTo(roulette);\n                 setChildrenObserved(false);\n@@ -589,7 +590,7 @@ public void render(LineRenderSystem sr, ICamera camera, float alpha) {\n         }\n \n         // Camera correction\n-        Vector3d loc \u003d MyPools.get(Vector3d.class).obtain();\n+        Vector3d loc \u003d aux3d1;\n         loc.set(this.blf).add(transform);\n \n         /*\n@@ -624,7 +625,6 @@ public void render(LineRenderSystem sr, ICamera camera, float alpha) {\n         line(sr, loc.x, loc.y + size.y, loc.z + size.z, loc.x + size.x, loc.y + size.y, loc.z + size.z, this.col);\n         line(sr, loc.x + size.x, loc.y + size.y, loc.z, loc.x + size.x, loc.y + size.y, loc.z + size.z, this.col);\n \n-        MyPools.get(Vector3d.class).free(loc);\n     }\n \n     /** Draws a line **/"
        },
        {
          "file_name": "desktop/src/gaia/cu9/ari/gaiaorbit/desktop/GaiaSkyDesktop.java",
          "patch": "@@ -23,6 +23,7 @@\n import gaia.cu9.ari.gaiaorbit.data.DesktopSceneGraphImplementationProvider;\r\n import gaia.cu9.ari.gaiaorbit.data.SceneGraphImplementationProvider;\r\n import gaia.cu9.ari.gaiaorbit.desktop.concurrent.MultiThreadIndexer;\r\n+import gaia.cu9.ari.gaiaorbit.desktop.concurrent.MultiThreadLocalFactory;\r\n import gaia.cu9.ari.gaiaorbit.desktop.concurrent.ThreadPoolManager;\r\n import gaia.cu9.ari.gaiaorbit.desktop.format.DesktopDateFormatFactory;\r\n import gaia.cu9.ari.gaiaorbit.desktop.format.DesktopNumberFormatFactory;\r\n@@ -54,7 +55,9 @@\n import gaia.cu9.ari.gaiaorbit.util.I18n;\r\n import gaia.cu9.ari.gaiaorbit.util.MusicManager;\r\n import gaia.cu9.ari.gaiaorbit.util.concurrent.SingleThreadIndexer;\r\n+import gaia.cu9.ari.gaiaorbit.util.concurrent.SingleThreadLocalFactory;\r\n import gaia.cu9.ari.gaiaorbit.util.concurrent.ThreadIndexer;\r\n+import gaia.cu9.ari.gaiaorbit.util.concurrent.ThreadLocalFactory;\r\n import gaia.cu9.ari.gaiaorbit.util.format.DateFormatFactory;\r\n import gaia.cu9.ari.gaiaorbit.util.format.NumberFormatFactory;\r\n import gaia.cu9.ari.gaiaorbit.util.math.MathUtilsd;\r\n@@ -198,10 +201,14 @@ public void launchMainApp() {\n         if (GlobalConf.performance.MULTITHREADING) {\r\n             ThreadIndexer.initialize(new MultiThreadIndexer());\r\n             ThreadPoolManager.initialize(GlobalConf.performance.NUMBER_THREADS());\r\n+            ThreadLocalFactory.initialize(new MultiThreadLocalFactory());\r\n         } else {\r\n             ThreadIndexer.initialize(new SingleThreadIndexer());\r\n+            ThreadLocalFactory.initialize(new SingleThreadLocalFactory());\r\n         }\r\n \r\n+        // Thread local factory\r\n+\r\n         // Launch app\r\n         new LwjglApplication(new GaiaSky(), cfg);\r\n \r"
        },
        {
          "file_name": "desktop/src/gaia/cu9/ari/gaiaorbit/desktop/GaiaSkyDesktopWebGL.java",
          "patch": "@@ -19,7 +19,9 @@\n import gaia.cu9.ari.gaiaorbit.util.ConfInit;\r\n import gaia.cu9.ari.gaiaorbit.util.GlobalConf;\r\n import gaia.cu9.ari.gaiaorbit.util.concurrent.SingleThreadIndexer;\r\n+import gaia.cu9.ari.gaiaorbit.util.concurrent.SingleThreadLocalFactory;\r\n import gaia.cu9.ari.gaiaorbit.util.concurrent.ThreadIndexer;\r\n+import gaia.cu9.ari.gaiaorbit.util.concurrent.ThreadLocalFactory;\r\n import gaia.cu9.ari.gaiaorbit.util.format.DateFormatFactory;\r\n import gaia.cu9.ari.gaiaorbit.util.format.NumberFormatFactory;\r\n import gaia.cu9.ari.gaiaorbit.util.math.MathUtilsd;\r\n@@ -33,6 +35,7 @@ public static void main(String[] args) throws Exception {\n         ConfInit.initialize(new WebGLConfInitLite());\r\n         PostProcessorFactory.initialize(new WebGLPostProcessorFactory());\r\n         ThreadIndexer.initialize(new SingleThreadIndexer());\r\n+        ThreadLocalFactory.initialize(new SingleThreadLocalFactory());\r\n         SceneGraphImplementationProvider.initialize(new WebGLSceneGraphImplementationProvider());\r\n         NetworkCheckerManager.initialize(new DesktopNetworkChecker());\r\n \r"
        },
        {
          "file_name": "desktop/src/gaia/cu9/ari/gaiaorbit/desktop/concurrent/MultiThreadLocal.java",
          "patch": "@@ -0,0 +1,67 @@\n+package gaia.cu9.ari.gaiaorbit.desktop.concurrent;\n+\n+import com.badlogic.gdx.math.Vector3;\n+\n+import gaia.cu9.ari.gaiaorbit.util.concurrent.IThreadLocal;\n+import gaia.cu9.ari.gaiaorbit.util.math.Matrix4d;\n+import gaia.cu9.ari.gaiaorbit.util.math.Vector2d;\n+import gaia.cu9.ari.gaiaorbit.util.math.Vector3d;\n+\n+public abstract class MultiThreadLocal {\n+\n+    public static class V3dThreadLocal implements IThreadLocal\u003cVector3d\u003e {\n+        ThreadLocal\u003cVector3d\u003e tl \u003d new ThreadLocal\u003cVector3d\u003e() {\n+            @Override\n+            protected Vector3d initialValue() {\n+                return new Vector3d();\n+            }\n+        };\n+\n+        @Override\n+        public Vector3d get() {\n+            return tl.get();\n+        }\n+    }\n+\n+    public static class V3fThreadLocal implements IThreadLocal\u003cVector3\u003e {\n+        ThreadLocal\u003cVector3\u003e tl \u003d new ThreadLocal\u003cVector3\u003e() {\n+            @Override\n+            protected Vector3 initialValue() {\n+                return new Vector3();\n+            }\n+        };\n+\n+        @Override\n+        public Vector3 get() {\n+            return tl.get();\n+        }\n+    }\n+\n+    public static class V2dThreadLocal implements IThreadLocal\u003cVector2d\u003e {\n+        ThreadLocal\u003cVector2d\u003e tl \u003d new ThreadLocal\u003cVector2d\u003e() {\n+            @Override\n+            protected Vector2d initialValue() {\n+                return new Vector2d();\n+            }\n+        };\n+\n+        @Override\n+        public Vector2d get() {\n+            return tl.get();\n+        }\n+    }\n+\n+    public static class M4dThreadLocal implements IThreadLocal\u003cMatrix4d\u003e {\n+        ThreadLocal\u003cMatrix4d\u003e tl \u003d new ThreadLocal\u003cMatrix4d\u003e() {\n+            @Override\n+            protected Matrix4d initialValue() {\n+                return new Matrix4d();\n+            }\n+        };\n+\n+        @Override\n+        public Matrix4d get() {\n+            return tl.get();\n+        }\n+    }\n+}"
        },
        {
          "file_name": "desktop/src/gaia/cu9/ari/gaiaorbit/desktop/concurrent/MultiThreadLocalFactory.java",
          "patch": "@@ -0,0 +1,29 @@\n+package gaia.cu9.ari.gaiaorbit.desktop.concurrent;\n+\n+import java.util.HashMap;\n+\n+import com.badlogic.gdx.math.Vector3;\n+\n+import gaia.cu9.ari.gaiaorbit.desktop.concurrent.MultiThreadLocal.M4dThreadLocal;\n+import gaia.cu9.ari.gaiaorbit.desktop.concurrent.MultiThreadLocal.V2dThreadLocal;\n+import gaia.cu9.ari.gaiaorbit.desktop.concurrent.MultiThreadLocal.V3dThreadLocal;\n+import gaia.cu9.ari.gaiaorbit.desktop.concurrent.MultiThreadLocal.V3fThreadLocal;\n+import gaia.cu9.ari.gaiaorbit.util.concurrent.IThreadLocal;\n+import gaia.cu9.ari.gaiaorbit.util.concurrent.ThreadLocalFactory;\n+import gaia.cu9.ari.gaiaorbit.util.math.Matrix4d;\n+import gaia.cu9.ari.gaiaorbit.util.math.Vector2d;\n+import gaia.cu9.ari.gaiaorbit.util.math.Vector3d;\n+\n+public class MultiThreadLocalFactory extends ThreadLocalFactory {\n+\n+    public MultiThreadLocalFactory() {\n+        super();\n+        map \u003d new HashMap\u003cClass, Class\u003c? extends IThreadLocal\u003e\u003e();\n+\n+        map.put(Vector3d.class, V3dThreadLocal.class);\n+        map.put(Vector3.class, V3fThreadLocal.class);\n+        map.put(Vector2d.class, V2dThreadLocal.class);\n+        map.put(Matrix4d.class, M4dThreadLocal.class);\n+    }\n+\n+}"
        },
        {
          "file_name": "desktop/src/gaia/cu9/ari/gaiaorbit/desktop/concurrent/SceneGraphConcurrentOctree.java",
          "patch": "@@ -49,7 +49,7 @@ public void initialize(List\u003cSceneGraphNode\u003e nodes, ITimeFrameProvider time) {\n \n         pool \u003d ThreadPoolManager.pool;\n         tasks \u003d new ArrayList\u003cUpdaterTask\u003cSceneGraphNode\u003e\u003e(pool.getCorePoolSize());\n-        roulette \u003d new ArrayList\u003cSceneGraphNode\u003e(150000);\n+        roulette \u003d new ArrayList\u003cSceneGraphNode\u003e(1000000);\n \n         Iterator\u003cSceneGraphNode\u003e it \u003d nodes.iterator();\n         while (it.hasNext()) {"
        },
        {
          "file_name": "desktop/src/gaia/cu9/ari/gaiaorbit/desktop/concurrent/UpdaterTask.java",
          "patch": "@@ -29,7 +29,7 @@ public Void call() throws Exception {\n         int size \u003d nodes.size();\n         for (int i \u003d start; i \u003c size; i +\u003d step) {\n             SceneGraphNode node \u003d nodes.get(i);\n-            node.update(time, node.parent.transform, camera);\n+            node.update(time, node.parent.transform, camera, 1f);\n         }\n         return null;\n     }"
        },
        {
          "file_name": "html/src/gaia/cu9/ari/gaiaorbit/client/GaiaSkyWebGL.java",
          "patch": "@@ -24,7 +24,9 @@\n import gaia.cu9.ari.gaiaorbit.util.ConfInit;\r\n import gaia.cu9.ari.gaiaorbit.util.GlobalConf;\r\n import gaia.cu9.ari.gaiaorbit.util.concurrent.SingleThreadIndexer;\r\n+import gaia.cu9.ari.gaiaorbit.util.concurrent.SingleThreadLocalFactory;\r\n import gaia.cu9.ari.gaiaorbit.util.concurrent.ThreadIndexer;\r\n+import gaia.cu9.ari.gaiaorbit.util.concurrent.ThreadLocalFactory;\r\n import gaia.cu9.ari.gaiaorbit.util.format.DateFormatFactory;\r\n import gaia.cu9.ari.gaiaorbit.util.format.NumberFormatFactory;\r\n \r\n@@ -38,6 +40,7 @@ public GwtApplicationConfiguration getConfig() {\n         DateFormatFactory.initialize(new GwtDateFormatFactory());\r\n         ScriptingFactory.initialize(new DummyFactory());\r\n         ThreadIndexer.initialize(new SingleThreadIndexer());\r\n+        ThreadLocalFactory.initialize(new SingleThreadLocalFactory());\r\n         SceneGraphImplementationProvider.initialize(new WebGLSceneGraphImplementationProvider());\r\n         NetworkCheckerManager.initialize(new WebGLNetworkChecker());\r\n \r\n@@ -82,8 +85,8 @@ public void notify(Events event, Object... data) {\n     }\r\n \r\n     protected native void reloadIFrame(Element iframeEl) /*-{\r\n-\t\tiframeEl.contentWindow.location.reload(false);\r\n-    }-*/;\r\n+                                                         iframeEl.contentWindow.location.reload(false);\r\n+                                                         }-*/;\r\n \r\n     @Override\r\n     public ApplicationListener createApplicationListener() {\r"
        }
      ]
    }
  },
  {
    "name": "Null pointer dereference: Gesture.java",
    "url": "https://github.com/modernmaster/katas/issues/18",
    "description": "L23\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/modernmaster/katas/commit/f341151161c8f792d9b50cbe22e26699af064444",
      "files": [
        {
          "file_name": "rock-paper-scissors/src/main/java/uk/co/jamesmcguigan/rockpaperscissors/models/Gesture.java",
          "patch": "@@ -21,6 +21,9 @@ public void setName(final String name) {\n \n     @Override\n     public boolean equals(final Object obj) {\n+        if(obj \u003d\u003d null || obj.getClass() !\u003d Gesture.class) {\n+            return false;\n+        }\n         if (Gesture.class.equals(obj.getClass())) {\n             Gesture gesture \u003d (Gesture) obj;\n             return gesture.name.equals(name);"
        }
      ]
    }
  },
  {
    "name": "Null Pointer on delete of transaction",
    "url": "https://github.com/eFaps/eFapsApp-Products/issues/102",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/eFaps/eFapsApp-Products/commit/eb4041f7130c27d0890f4ef7971584233502db78",
      "files": [
        {
          "file_name": "src/main/efaps/ESJP/org/efaps/esjp/products/Transaction_Base.java",
          "patch": "@@ -413,42 +413,44 @@ public Return verifyDateTrigger(final Parameter _parameter)\n         final Map\u003c?, ?\u003e values \u003d (Map\u003c?, ?\u003e) _parameter.get(ParameterValues.NEW_VALUES);\n         Object storage \u003d null;\n         Object dateObj \u003d null;\n-        for (final Entry\u003c?, ?\u003e entry : values.entrySet()) {\n-            final Attribute attr \u003d (Attribute) entry.getKey();\n-            if (attr.getName().equals(\"Storage\")) {\n-                final Object[] objValues \u003d (Object[]) entry.getValue();\n-                if (objValues !\u003d null) {\n-                    storage \u003d objValues[0];\n+        if (values !\u003d null) {\n+            for (final Entry\u003c?, ?\u003e entry : values.entrySet()) {\n+                final Attribute attr \u003d (Attribute) entry.getKey();\n+                if (attr.getName().equals(\"Storage\")) {\n+                    final Object[] objValues \u003d (Object[]) entry.getValue();\n+                    if (objValues !\u003d null) {\n+                        storage \u003d objValues[0];\n+                    }\n                 }\n-            }\n-            if (attr.getName().equals(\"Date\")) {\n-                final Object[] objValues \u003d (Object[]) entry.getValue();\n-                if (objValues !\u003d null) {\n-                    dateObj \u003d objValues[0];\n+                if (attr.getName().equals(\"Date\")) {\n+                    final Object[] objValues \u003d (Object[]) entry.getValue();\n+                    if (objValues !\u003d null) {\n+                        dateObj \u003d objValues[0];\n+                    }\n                 }\n             }\n-        }\n-        if (storage !\u003d null \u0026\u0026 dateObj !\u003d null) {\n-            Instance storageInst \u003d null;\n-            DateTime date \u003d null;\n-            if (storage instanceof Long) {\n-                final QueryBuilder queryBldr \u003d new QueryBuilder(CIProducts.StorageAbstract);\n-                queryBldr.addWhereAttrEqValue(CIProducts.StorageAbstract.ID, storage);\n-                final CachedInstanceQuery query \u003d queryBldr.getCachedQuery(Storage.CACHE_KEY);\n-                query.executeWithoutAccessCheck();\n-                query.next();\n-                storageInst \u003d query.getCurrentValue();\n-            } else if (storage instanceof Instance) {\n-                storageInst \u003d (Instance) storage;\n-            }\n-            if (dateObj instanceof String) {\n-                date \u003d new DateTime(dateObj);\n-            } else if (dateObj instanceof DateTime) {\n-                date \u003d (DateTime) dateObj;\n-            }\n-            if (!Storage.validateClosureDate(_parameter, storageInst, date)) {\n-                Context.getThreadContext().abort();\n-                throw new EFapsException(Transaction.class, \"InvalidDate\");\n+            if (storage !\u003d null \u0026\u0026 dateObj !\u003d null) {\n+                Instance storageInst \u003d null;\n+                DateTime date \u003d null;\n+                if (storage instanceof Long) {\n+                    final QueryBuilder queryBldr \u003d new QueryBuilder(CIProducts.StorageAbstract);\n+                    queryBldr.addWhereAttrEqValue(CIProducts.StorageAbstract.ID, storage);\n+                    final CachedInstanceQuery query \u003d queryBldr.getCachedQuery(Storage.CACHE_KEY);\n+                    query.executeWithoutAccessCheck();\n+                    query.next();\n+                    storageInst \u003d query.getCurrentValue();\n+                } else if (storage instanceof Instance) {\n+                    storageInst \u003d (Instance) storage;\n+                }\n+                if (dateObj instanceof String) {\n+                    date \u003d new DateTime(dateObj);\n+                } else if (dateObj instanceof DateTime) {\n+                    date \u003d (DateTime) dateObj;\n+                }\n+                if (!Storage.validateClosureDate(_parameter, storageInst, date)) {\n+                    Context.getThreadContext().abort();\n+                    throw new EFapsException(Transaction.class, \"InvalidDate\");\n+                }\n             }\n         }\n         return new Return();"
        }
      ]
    }
  },
  {
    "name": "[CUBRIDQA-40] fix syntax error in script and null pointer exception for none-continue mode",
    "url": "https://github.com/CUBRID/cubrid-testtools/pull/78",
    "description": "@fanzaiqiang \n\nfix syntax error in script and null pointer exception for none-continue mode within run_shell script\n",
    "keywords": [
      "script"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/CUBRID/cubrid-testtools/commit/fdaa532c32d5a24157d08bb1bb9f912d7aef23c6",
      "files": [
        {
          "file_name": "CTP/common/ext/run_shell.sh",
          "patch": "@@ -51,9 +51,9 @@ fi\n function run_shell()\n {\n    if [ -f ${CTP_HOME}/conf/shell_template_for_${BUILD_SCENARIOS}.conf ]; then\n-      shell_config_template\u003d ${CTP_HOME}/conf/shell_template_for_${BUILD_SCENARIOS}.conf\n-   else if [ -f ${CTP_HOME}/conf/shell_template.conf ]; then\n-      shell_config_template\u003d ${CTP_HOME}/conf/shell_template.conf\n+      shell_config_template\u003d${CTP_HOME}/conf/shell_template_for_${BUILD_SCENARIOS}.conf\n+   elif [ -f ${CTP_HOME}/conf/shell_template.conf ]; then\n+      shell_config_template\u003d${CTP_HOME}/conf/shell_template.conf\n    fi\n \n    cp -f ${shell_config_template} ${shell_fm_test_conf}\n@@ -77,6 +77,7 @@ function run_shell()\n    ini.sh -u \"main.coverage.controller.result\u003d$coverage_controller_target_dir\" $shell_fm_test_conf \n    ini.sh -u \"main.feedback.type\u003d$feedback_type\" $shell_fm_test_conf \n    ini.sh -u \"main.testbuild.url\u003d$url\" $shell_fm_test_conf\n+   ini.sh -u \"main.mode.continue\u003dfalse\" $shell_fm_test_conf\n \n    #execute testing\n    ctp.sh shell -c $shell_fm_test_conf | tee $tmplog"
        }
      ]
    }
  },
  {
    "name": "Null pointer when using JunctionTable definition",
    "url": "https://github.com/requery/requery/issues/422",
    "description": "Hi,\r\n\r\nI get a null pointer exception (see below) when upserting an entity with a junction table.\r\n\r\n```Java\r\n@Entity\r\npublic abstract class AbstractPerson implements Parcelable, Persistable {\r\n\r\n  @Key\r\n  int id;\r\n\r\n  @ManyToMany\r\n  @JunctionTable(type \u003d AbstractPersonPicture.class)\r\n  List\u003cAbstractPersonPicture\u003e pictures;\r\n}\r\n```\r\n\r\n```Java\r\n@Entity\r\npublic abstract class AbstractPicture implements Persistable {\r\n  @Key\r\n  int id;\r\n  String url;\r\n}\r\n```\r\n\r\n```Java\r\n```\r\n\r\n```Java\r\n@Entity\r\npublic abstract class AbstractPersonPicture implements Persistable {\r\n\r\n  @Column(name \u003d \"referenced_user\")\r\n  @ForeignKey(\r\n      delete \u003d ReferentialAction.CASCADE,\r\n      update \u003d ReferentialAction.CASCADE,\r\n      references \u003d AbstractPicture.class)\r\n  @Key\r\n  int pictureId;\r\n\r\n  @ForeignKey(\r\n      delete \u003d ReferentialAction.CASCADE,\r\n      update \u003d ReferentialAction.CASCADE,\r\n      references \u003d AbstractPerson.class)\r\n  @Key\r\n  int personId;\r\n\r\n  String additionalField \u003d \"additionalField\";\r\n}\r\n```\r\n\r\n```Java\r\n      Person person \u003d new Person();\r\n      person.setId(1);\r\n      Picture picture \u003d new Picture();\r\n      picture.setId(1);\r\n      person.getPictures().add(picture);\r\n      database.upsert(person).blockingGet();\r\n```\r\n\r\nWhere `database` is a ReactiveEntityStore.\r\n\r\n```Java\r\njava.lang.NullPointerException: Attempt to invoke virtual method \u0027boolean java.lang.Class.isInterface()\u0027 on a null object reference\r\n    at java.lang.Class.isAssignableFrom(Class.java:545)\r\n    at io.requery.sql.EntityWriter.updateAssociation(EntityWriter.java:679)\r\n    at io.requery.sql.EntityWriter.updateAssociations(EntityWriter.java:625)\r\n    at io.requery.sql.EntityWriter.insert(EntityWriter.java:441)\r\n    at io.requery.sql.EntityWriter.upsert(EntityWriter.java:483)\r\n    at io.requery.sql.EntityDataStore.upsert(EntityDataStore.java:280)\r\n    at io.requery.reactivex.WrappedEntityStore$8.call(WrappedEntityStore.java:138)\r\n    at io.reactivex.internal.operators.single.SingleFromCallable.subscribeActual(SingleFromCallable.java:35)\r\n    at io.reactivex.Single.subscribe(Single.java:2517)\r\n    at io.reactivex.Single.blockingGet(Single.java:2001)\r\n```\r\n\r\nI also tried settig `type` to `PersonPicture.class` instead of  `AbstractPersonPicture.class` but this resulted in the compile error \r\n```Java\r\nError:Execution failed for task \u0027:app:compileDebugJavaWithJavac\u0027.\r\n\u003e java.lang.IllegalArgumentException: part \u0027\u003cany?\u003e\u0027 is keyword\r\n```",
    "keywords": [
      "entitywriter",
      "implements",
      "@key",
      "persistable",
      "sql",
      "reactivex",
      "@entity",
      "java",
      "public",
      "lang",
      "class",
      "```java",
      "requery sql",
      "io",
      "cascade",
      "upsert",
      "abstract",
      "picture",
      "int",
      "single",
      "referentialaction",
      "null",
      "referentialaction cascade",
      "person",
      "requery",
      ";"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/requery/requery/commit/3942c905aa06f401b89ad96e8d3e677a3be140bc",
      "files": [
        {
          "file_name": "requery/src/main/java/io/requery/sql/EntityWriter.java",
          "patch": "@@ -676,19 +676,22 @@ private void updateAssociation(Cascade mode, E entity, EntityProxy\u003cE\u003e proxy,\n                 }\n                 break;\n             case MANY_TO_MANY:\n-                Class referencedClass \u003d attribute.getReferencedClass();\n+                final Class referencedClass \u003d attribute.getReferencedClass();\n                 if (referencedClass \u003d\u003d null) {\n                     throw new IllegalStateException(\"Invalid referenced class in \" + attribute);\n                 }\n                 Type\u003c?\u003e referencedType \u003d model.typeOf(referencedClass);\n                 QueryAttribute\u003cS, Object\u003e tKey \u003d null;\n                 QueryAttribute\u003cS, Object\u003e uKey \u003d null;\n                 for (Attribute a : referencedType.getAttributes()) {\n-                    if (entityClass.isAssignableFrom(a.getReferencedClass())) {\n-                        tKey \u003d Attributes.query(a);\n-                    } else if (attribute.getElementClass().isAssignableFrom(\n-                            a.getReferencedClass())) {\n-                        uKey \u003d Attributes.query(a);\n+                    Class\u003c?\u003e referenced \u003d a.getReferencedClass();\n+                    if (referenced !\u003d null) {\n+                        if (entityClass.isAssignableFrom(referenced)) {\n+                            tKey \u003d Attributes.query(a);\n+                        } else if (attribute.getElementClass() !\u003d null \u0026\u0026\n+                                   attribute.getElementClass().isAssignableFrom(referenced)) {\n+                            uKey \u003d Attributes.query(a);\n+                        }\n                     }\n                 }\n                 Objects.requireNotNull(tKey);"
        }
      ]
    }
  },
  {
    "name": "Null pointer when text in message is null",
    "url": "https://github.com/2686747/tagger-bot/issues/30",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/2686747/tagger-bot/commit/7e887790e2c75b2ff26ac4f418e6364fc6340176",
      "files": [
        {
          "file_name": "pom.xml",
          "patch": "@@ -4,7 +4,7 @@\n \t\u003cmodelVersion\u003e4.0.0\u003c/modelVersion\u003e\n \t\u003cgroupId\u003eorg.telegram\u003c/groupId\u003e\n \t\u003cartifactId\u003etaggerbot\u003c/artifactId\u003e\n-\t\u003cversion\u003e0.2016.531.2006-SNAPSHOT\u003c/version\u003e\n+\t\u003cversion\u003e0.2016.601.2340-SNAPSHOT\u003c/version\u003e\n \t\u003cproperties\u003e\n \t\t\u003ctelegrambots.version\u003edev-SNAPSHOT\u003c/telegrambots.version\u003e\n \t\u003c/properties\u003e\n@@ -24,9 +24,9 @@\n \n \t\u003cdependencies\u003e\n \t\t\u003cdependency\u003e\n-\t\t\t\u003cgroupId\u003ecom.github.rubenlagus\u003c/groupId\u003e\n+\t\t\t\u003cgroupId\u003ecom.github.2686747\u003c/groupId\u003e\n \t\t\t\u003cartifactId\u003eTelegramBots\u003c/artifactId\u003e\n-\t\t\t\u003cversion\u003e${telegrambots.version}\u003c/version\u003e\n+\t\t\t\u003cversion\u003efork-dev-SNAPSHOT\u003c/version\u003e\n \t\t\u003c/dependency\u003e\n \t\t\u003cdependency\u003e\n \t\t\t\u003cgroupId\u003ejunit\u003c/groupId\u003e\n@@ -196,7 +196,7 @@\n \t\t\t\t\t\t\u003c/configuration\u003e\n \t\t\t\t\t\t\u003cexecutions\u003e\n \t\t\t\t\t\t\t\u003cexecution\u003e\n-\t\t\t\t\t\t\t\t\u003cid\u003emake-assembly\u003c/id\u003e \n+\t\t\t\t\t\t\t\t\u003cid\u003emake-assembly\u003c/id\u003e\n \t\t\t\t\t\t\t\t\u003cphase\u003epackage\u003c/phase\u003e\n \t\t\t\t\t\t\t\t\u003cgoals\u003e\n \t\t\t\t\t\t\t\t\t\u003cgoal\u003esingle\u003c/goal\u003e"
        },
        {
          "file_name": "src/main/java/org/tlg/bot/mem/MemBot.java",
          "patch": "@@ -10,9 +10,9 @@\n import org.telegram.telegrambots.api.objects.Update;\n import org.telegram.telegrambots.bots.TelegramLongPollingBot;\n import org.tlg.bot.mem.commands.Command;\n+import org.tlg.bot.mem.commands.CommandProcessor;\n import org.tlg.bot.mem.commands.SearchMediaCommand;\n import org.tlg.bot.mem.msg.TextMessage;\n-import org.tlg.bot.mem.proc.CommandProcessor;\n import jersey.repackaged.com.google.common.base.Objects;\n \n public class MemBot extends TelegramLongPollingBot {\n@@ -31,7 +31,7 @@ public MemBot(final String name, final String token) {\n \n     @Override\n     public void onUpdateReceived(final Update update) {\n-        log.debug(\"update:{}\", update);\n+        log.debug(\"update:{}\", update.getJson().toString());\n         // process if this somebody answer\n         if (update.hasMessage()) {\n             if (update.getMessage().hasText()) {\n@@ -97,7 +97,11 @@ void resume(final Command command, final Update update) {\n      * @param command\n      */\n     void execute(final Command command) {\n-        command.execute();\n+        try {\n+            command.execute();\n+        } catch (final TelegramApiException e) {\n+           log.error(e.getApiResponse(), e);\n+        }\n     }\n \n     public void leaveAwaitQueue(final Command command) {"
        },
        {
          "file_name": "src/main/java/org/tlg/bot/mem/commands/Command.java",
          "patch": "@@ -3,6 +3,7 @@\n  */\n package org.tlg.bot.mem.commands;\n \n+import org.telegram.telegrambots.TelegramApiException;\n import org.telegram.telegrambots.api.objects.Update;\n \n /**\n@@ -12,7 +13,7 @@\n  */\n public interface Command {\n \n-    void execute();\n+    void execute() throws TelegramApiException;\n \n     void resume(Update update);\n "
        },
        {
          "file_name": "src/main/java/org/tlg/bot/mem/commands/CommandProcessor.java",
          "patch": "@@ -1,17 +1,13 @@\n /**\n  * \n  */\n-package org.tlg.bot.mem.proc;\n+package org.tlg.bot.mem.commands;\n \n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n import org.telegram.telegrambots.api.objects.Message;\n import org.telegram.telegrambots.api.objects.Update;\n import org.tlg.bot.mem.MemBot;\n-import org.tlg.bot.mem.commands.Command;\n-import org.tlg.bot.mem.commands.HelpCommand;\n-import org.tlg.bot.mem.commands.UploadCommand;\n-import org.tlg.bot.mem.commands.VersionCommand;\n \n /**\n  * Process udpate object and return needed command.\n@@ -47,12 +43,11 @@ public Command command() {\n             return new HelpCommand(this.bot, message.getChatId());\n         }\n         // if this is photo or sticker\n-        if (message.getSticker() !\u003d null || !message.getPhoto().isEmpty()) {\n+        if (message.getSticker() !\u003d null || \n+            (message.getPhoto() !\u003d null \u0026\u0026 !message.getPhoto().isEmpty())) {\n             return new UploadCommand(this.bot, message);\n         }\n-\n-        // if message was not processed\n-        return new HelpCommand(this.bot, this.update.getMessage().getChatId());\n+        return new UnsupportedMediaCommand(this.bot, this.update.getMessage().getChatId());\n \n     }\n "
        },
        {
          "file_name": "src/main/java/org/tlg/bot/mem/commands/UnsupportedMediaCommand.java",
          "patch": "@@ -0,0 +1,35 @@\n+/**\n+ * \n+ */\n+package org.tlg.bot.mem.commands;\n+\n+import org.telegram.telegrambots.TelegramApiException;\n+import org.tlg.bot.mem.MemBot;\n+import org.tlg.bot.mem.msg.TextMessage;\n+\n+/**\n+ * @author \"Maksim Vakhnik\"\n+ *\n+ */\n+public class UnsupportedMediaCommand extends ExecuteCommand implements Command {\n+    final Long chatId;\n+    \n+    protected UnsupportedMediaCommand(final MemBot bot, final Long chatId) {\n+        super(bot);\n+        this.chatId \u003d chatId;\n+    }\n+\n+    /* (non-Javadoc)\n+     * @see org.tlg.bot.mem.commands.Command#execute()\n+     */\n+    @Override\n+    public void execute() throws TelegramApiException {\n+        getBot().sendMessage(\n+            new TextMessage(\n+                this.chatId, \"Sorry, such media type is not supported now\"\n+                )\n+            );\n+\n+    }\n+\n+}"
        },
        {
          "file_name": "src/main/java/org/tlg/bot/mem/commands/VersionCommand.java",
          "patch": "@@ -27,7 +27,7 @@ public void execute() {\n         try {\n             getBot().sendMessage(new VersionMessage(this.chatId));\n         } catch (final TelegramApiException e) {\n-            log.error(\"Can\u0027t send help messagemessage\", e);\n+            log.error(e.getApiResponse(), e);\n         }\n         \n     }"
        },
        {
          "file_name": "src/main/resources/log4j2.xml",
          "patch": "@@ -2,16 +2,29 @@\n \u003cConfiguration status\u003d\"WARN\" monitorInterval\u003d\"30\"\u003e\n \t\u003cAppenders\u003e\n \t\t\u003cConsole name\u003d\"Console\" target\u003d\"SYSTEM_OUT\"\u003e\n-\t\t\t\u003cPatternLayout pattern\u003d\"%d{HH:mm:ss.SSS}{GMT+3} %location %-5level %c{1.} - %msg%n\" /\u003e\n+\t\t\t\u003cPatternLayout\n+\t\t\t\tpattern\u003d\"%d{HH:mm:ss.SSS}{GMT+3} %location %-5level %c{1.} - %msg%n\" /\u003e\n \t\t\u003c/Console\u003e\n \t\t\u003cAsync name\u003d\"AsyncConsole\" includeLocation\u003d\"true\"\u003e\n-\t\t\t\u003cAppenderRef ref\u003d\"Console\"/\u003e\n+\t\t\t\u003cAppenderRef ref\u003d\"Console\" /\u003e\n \t\t\u003c/Async\u003e\n+\t\t\u003cRollingFile name\u003d\"RollingFile\" fileName\u003d\"logs/app.log\"\n+\t\t\tfilePattern\u003d\"logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz\"\u003e\n+\t\t\t\u003cPatternLayout\u003e\n+\t\t\t\t\u003cPattern\u003e%d %p %c{1.} [%t] %m%n\u003c/Pattern\u003e\n+\t\t\t\u003c/PatternLayout\u003e\n+\t\t\t\u003cPolicies\u003e\n+\t\t\t\t\u003cTimeBasedTriggeringPolicy /\u003e\n+\t\t\t\t\u003cSizeBasedTriggeringPolicy size\u003d\"250 MB\" /\u003e\n+\t\t\t\u003c/Policies\u003e\n+\t\t\u003c/RollingFile\u003e\n \t\u003c/Appenders\u003e\n \t\u003cLoggers\u003e\n \t\t\u003c!-- pattern layout actually uses location, so we need to include it --\u003e\n-\t\t\u003cAsyncLogger name\u003d\"org.tlg\" level\u003d\"debug\" additivity\u003d\"false\" includeLocation\u003d\"true\"\u003e\n+\t\t\u003cAsyncLogger name\u003d\"org.tlg\" level\u003d\"debug\" additivity\u003d\"false\"\n+\t\t\tincludeLocation\u003d\"true\"\u003e\n \t\t\t\u003cAppenderRef ref\u003d\"AsyncConsole\" /\u003e\n+\t\t\t\u003cAppenderRef ref\u003d\"RollingFile\" /\u003e\n \t\t\u003c/AsyncLogger\u003e\n \t\t\u003cRoot level\u003d\"error\"\u003e\n \t\t\t\u003cAppenderRef ref\u003d\"AsyncConsole\" /\u003e"
        },
        {
          "file_name": "src/test/java/org/tlg/bot/mem/MemBotTest.java",
          "patch": "@@ -1,5 +1,7 @@\n package org.tlg.bot.mem;\n \n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertTrue;\n import static org.junit.Assert.fail;\n import java.util.concurrent.atomic.AtomicBoolean;\n import org.hamcrest.MatcherAssert;\n@@ -12,6 +14,7 @@\n import org.telegram.telegrambots.api.objects.Update;\n import org.tlg.bot.mem.commands.Command;\n import org.tlg.bot.mem.commands.HelpCommand;\n+import org.tlg.bot.mem.commands.UnsupportedMediaCommand;\n \n public class MemBotTest {\n \n@@ -77,5 +80,48 @@ void execute(final Command command) {\n \t        fail(\"test is not passed\");\n \t    }\n \t}\n+\t\n+\t@Test\n+\tpublic void gifNotSupported() {\n+\t    final AtomicBoolean succ \u003d new AtomicBoolean(false);\n+\t    final Update update \u003d update(\"{\u0027update_id\u0027:76454460,\"\n+\t        + \"\u0027message\u0027:{\u0027date\u0027:1464811207,\"\n+\t        + \"\u0027chat\u0027:{\u0027id\u0027:98470981,\u0027type\u0027:\u0027private\u0027,\u0027first_name\u0027:\u0027Maksim\u0027},\"\n+\t        + \"\u0027document\u0027:{\"\n+\t            + \"\u0027mime_type\u0027:\u0027video/mp4\u0027,\"\n+\t            + \"\u0027thumb\u0027:{\"\n+\t                + \"\u0027file_id\u0027:\u0027AAQEABN-AAAAAAAAAAAAAAAA\u0027,\"\n+\t                + \"\u0027width\u0027:90,\"\n+\t                + \"\u0027file_size\u0027:2233,\"\n+\t                + \"\u0027height\u0027:51},\"\n+                + \"\u0027file_name\u0027:\u0027giphy.mp4\u0027,\"\n+                + \"\u0027file_id\u0027:\u0027AAAAAAAAAAAAAAA\u0027,\"\n+                + \"\u0027file_size\u0027:421608},\"\n+            + \"\u0027message_id\u0027:514,\u0027from\u0027:{\u0027id\u0027:98470981,\u0027first_name\u0027:\u0027Maksim\u0027}}}\");\n+\t    final MemBot bot \u003d new MemBot(\n+            new AppConfig(App.KEY_NAME).value(),\n+            new AppConfig(App.KEY_TOKEN).value()\n+            ) {\n \n+            @Override\n+            void execute(final Command command) {\n+                assertNotNull(\"Command is null\", command);\n+                assertTrue(\n+                    \"Wrong command instance\",\n+                    command instanceof UnsupportedMediaCommand\n+                    );\n+                succ.set(true);\n+            }\n+\n+        };\n+        bot.onUpdateReceived(update);\n+        if (!succ.get()) {\n+            fail(\"test is not passed\");\n+        }\n+\t}\n+\n+\tprivate Update update(final String json) {\n+\t    final JSONObject jo \u003d new JSONObject(json);\n+\t    return new Update(jo);\n+\t}\n }"
        }
      ]
    }
  },
  {
    "name": "NULL pointer exception with \"api/video/seriesinfo\" having artwork dataitem",
    "url": "https://github.com/YAMJ/yamj-v3/issues/173",
    "description": "\"api/video/seriesinfo?id\u003d1\" works OK\n\"api/video/seriesinfo?id\u003d1\u0026dataitems\u003dartwork\" causes NULL pointer exception\n\n---\n\njava.lang.NullPointerException\n    at org.yamj.core.database.dao.ApiDao.getSeriesInfo(ApiDao.java:2235)\n    at org.yamj.core.database.service.JsonApiStorageService.getSeriesInfo(JsonApiStorageService.java:194)\n    at org.yamj.core.database.service.JsonApiStorageService$$FastClassBySpringCGLIB$$145385d0.invoke(\u003cgenerated\u003e)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:717)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:653)\n    at org.yamj.core.database.service.JsonApiStorageService$$EnhancerBySpringCGLIB$$aadc0ce4.getSeriesInfo(\u003cgenerated\u003e)\n    at org.yamj.core.api.json.VideoController.getSeriesInfo(VideoController.java:142)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n.....\n",
    "keywords": [
      "transactioninterceptor",
      "aop",
      "org",
      "reflectivemethodinvocation",
      "api/video/seriesinfo",
      "interceptor",
      "invoke",
      "org springframework",
      "sun",
      "core",
      "database",
      "reflect",
      "framework",
      "service",
      "getseriesinfo",
      "springframework",
      "yamj",
      "transaction",
      "yamj core"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/YAMJ/yamj-v3/commit/61da90fc26ef84406d1e87a44063851e483e0f5f",
      "files": [
        {
          "file_name": "yamj3-core/src/main/java/org/yamj/core/database/dao/ApiDao.java",
          "patch": "@@ -1128,15 +1128,15 @@ public void getPerson(ApiWrapperSingle\u003cApiPersonDTO\u003e wrapper) {\n         if (CollectionUtils.isNotEmpty(results)) {\n             ApiPersonDTO person \u003d results.get(0);\n             if (options.hasDataItem(DataItem.ARTWORK)) {\n-                LOG.info(\"Adding photo for {}\", person.getName());\n+                LOG.info(\"Adding photo for \u0027{}\u0027\", person.getName());\n                 // Add the artwork\n                 Set\u003cString\u003e artworkRequired \u003d Collections.singleton(ArtworkType.PHOTO.toString());\n                 Map\u003cLong, List\u003cApiArtworkDTO\u003e\u003e artworkList \u003d getArtworkForId(MetaDataType.PERSON, person.getId(), artworkRequired);\n                 if (artworkList.containsKey(options.getId())) {\n                     LOG.info(\"Found {} artworks\", artworkList.get(options.getId()).size());\n                     person.setArtwork(artworkList.get(options.getId()));\n                 } else {\n-                    LOG.info(\"No artwork found for Person ID \u0027{}\u0027\", options.getId());\n+                    LOG.info(\"No artwork found for person ID {}\", options.getId());\n                 }\n             }\n \n@@ -1292,14 +1292,14 @@ public void getPerson(ApiWrapperSingle\u003cApiPersonDTO\u003e wrapper) {\n \n     public void getPersonListByVideoType(MetaDataType metaDataType, ApiWrapperList\u003cApiPersonDTO\u003e wrapper) {\n         OptionsId options \u003d (OptionsId) wrapper.getOptions();\n-        LOG.info(\"Getting person list for {} with ID \u0027{}\u0027\", metaDataType, options.getId());\n+        LOG.info(\"Getting person list for {} with ID {}\", metaDataType, options.getId());\n \n         SqlScalars sqlScalars \u003d generateSqlForVideoPerson(metaDataType, options);\n         List\u003cApiPersonDTO\u003e results \u003d executeQueryWithTransform(ApiPersonDTO.class, sqlScalars, wrapper);\n-        LOG.info(\"Found {} results for {} with id \u0027{}\u0027\", results.size(), metaDataType, options.getId());\n+        LOG.info(\"Found {} results for {} with ID {}\", results.size(), metaDataType, options.getId());\n \n         if (options.hasDataItem(DataItem.ARTWORK) \u0026\u0026 !results.isEmpty()) {\n-            LOG.info(\"Looking for person artwork for {} with id \u0027{}\u0027\", metaDataType, options.getId());\n+            LOG.info(\"Looking for person artwork for {} with ID {}\", metaDataType, options.getId());\n \n             Set\u003cString\u003e artworkRequired \u003d Collections.singleton(ArtworkType.PHOTO.toString());\n             Map\u003cLong, List\u003cApiArtworkDTO\u003e\u003e artworkList \u003d getArtworkForId(MetaDataType.PERSON, generateIdList(results), artworkRequired);\n@@ -1309,7 +1309,7 @@ public void getPersonListByVideoType(MetaDataType metaDataType, ApiWrapperList\u003cA\n                 }\n             }\n         } else {\n-            LOG.info(\"No artwork found/requested for {} with id \u0027{}\u0027\", metaDataType, options.getId());\n+            LOG.info(\"No artwork found/requested for {} with ID {}\", metaDataType, options.getId());\n         }\n \n         wrapper.setResults(results);\n@@ -1696,32 +1696,32 @@ public void getSingleVideo(ApiWrapperSingle\u003cApiVideoDTO\u003e wrapper) {\n         params.addScalarParameters(sqlScalars);\n \n         List\u003cApiVideoDTO\u003e queryResults \u003d executeQueryWithTransform(ApiVideoDTO.class, sqlScalars, wrapper);\n-        LOG.debug(\"Found {} results for ID \u0027{}\u0027\", queryResults.size(), params.getId());\n+        LOG.debug(\"Found {} results for ID {}\", queryResults.size(), params.getId());\n         if (CollectionUtils.isNotEmpty(queryResults)) {\n             ApiVideoDTO video \u003d queryResults.get(0);\n \n             if (params.hasDataItem(DataItem.GENRE)) {\n-                LOG.trace(\"Adding genres for ID \u0027{}\u0027\", options.getId());\n+                LOG.trace(\"Adding genres for ID {}\", options.getId());\n                 video.setGenres(getGenresForId(type, options.getId()));\n             }\n \n             if (params.hasDataItem(DataItem.STUDIO)) {\n-                LOG.trace(\"Adding studios for ID \u0027{}\u0027\", options.getId());\n+                LOG.trace(\"Adding studios for ID {}\", options.getId());\n                 video.setStudios(getStudiosForId(type, options.getId()));\n             }\n \n             if (params.hasDataItem(DataItem.CERTIFICATION)) {\n-                LOG.trace(\"Adding certifications for ID \u0027{}\u0027\", options.getId());\n+                LOG.trace(\"Adding certifications for ID {}\", options.getId());\n                 video.setCertifications(getCertificationsForId(type, options.getId()));\n             }\n \n             if (params.hasDataItem(DataItem.RATING)) {\n-                LOG.trace(\"Adding ratings for ID \u0027{}\u0027\", options.getId());\n+                LOG.trace(\"Adding ratings for ID {}\", options.getId());\n                 video.setRatings(getRatingsForId(type, options.getId()));\n             }\n \n             if (params.hasDataItem(DataItem.ARTWORK)) {\n-                LOG.trace(\"Adding artwork for ID \u0027{}\u0027\", options.getId());\n+                LOG.trace(\"Adding artwork for ID {}\", options.getId());\n                 Map\u003cLong, List\u003cApiArtworkDTO\u003e\u003e artworkList;\n                 if (CollectionUtils.isNotEmpty(options.getArtworkTypes())) {\n                     artworkList \u003d getArtworkForId(type, options.getId(), options.getArtworkTypes());\n@@ -1735,13 +1735,13 @@ public void getSingleVideo(ApiWrapperSingle\u003cApiVideoDTO\u003e wrapper) {\n             }\n \n             if (params.hasDataItem(DataItem.FILES)) {\n-                LOG.trace(\"Adding files for ID \u0027{}\u0027\", options.getId());\n+                LOG.trace(\"Adding files for ID {}\", options.getId());\n                 video.setFiles(getFilesForId(type, options.getId()));\n             }\n \n             if (MapUtils.isNotEmpty(options.splitJobs())) {\n                 Set\u003cString\u003e jobs \u003d options.getJobTypesAsSet();\n-                LOG.trace(\"Adding jobs for ID \u0027{}\u0027: {}\", options.getId(), jobs);\n+                LOG.trace(\"Adding jobs for ID {}: {}\", options.getId(), jobs);\n \n                 List\u003cApiPersonDTO\u003e cast \u003d getCastForId(type, options.getId(), options.splitDataItems(), jobs);\n \n@@ -1758,7 +1758,7 @@ public void getSingleVideo(ApiWrapperSingle\u003cApiVideoDTO\u003e wrapper) {\n                     }\n                 }\n             } else if (options.isAllJobTypes()) {\n-                LOG.debug(\"Adding all jobs for ID \u0027{}\u0027\", options.getId());\n+                LOG.debug(\"Adding all jobs for ID {}\", options.getId());\n                 video.setCast(getCastForId(type, options.getId(), params.getDataItems(), null));\n             }\n \n@@ -2125,7 +2125,7 @@ public void getSingleVideo(ApiWrapperSingle\u003cApiVideoDTO\u003e wrapper) {\n      * @return\n      */\n     public Map\u003cLong, List\u003cApiArtworkDTO\u003e\u003e getArtworkForId(MetaDataType type, Object id, Set\u003cString\u003e artworkRequired) {\n-        LOG.trace(\"Artwork required for {} ID \u0027{}\u0027 is {}\", type, id, artworkRequired);\n+        LOG.trace(\"Artwork required for {} ID {} is {}\", type, id, artworkRequired);\n \n         StringBuilder sbSQL \u003d new StringBuilder();\n         sbSQL.append(\"SELECT \u0027\").append(type.toString()).append(\"\u0027 AS sourceString,\");\n@@ -2177,16 +2177,13 @@ public void getSingleVideo(ApiWrapperSingle\u003cApiVideoDTO\u003e wrapper) {\n         sqlScalars.addParameters(\"artworklist\", artworkRequired);\n \n         List\u003cApiArtworkDTO\u003e results \u003d executeQueryWithTransform(ApiArtworkDTO.class, sqlScalars, null);\n-\n-        Map\u003cLong, List\u003cApiArtworkDTO\u003e\u003e artworkList \u003d generateIdMapList(results);\n-\n-        return artworkList;\n+        return generateIdMapList(results);\n     }\n \n     public void getSeriesInfo(ApiWrapperList\u003cApiSeriesInfoDTO\u003e wrapper) {\n         OptionsIdArtwork options \u003d (OptionsIdArtwork) wrapper.getOptions();\n         Long id \u003d options.getId();\n-        LOG.info(\"Getting series information for seriesId \u0027{}\u0027\", id);\n+        LOG.info(\"Getting series information for series ID {}\", id);\n \n         SqlScalars sqlScalars \u003d new SqlScalars();\n         sqlScalars.addToSql(\"SELECT s.id AS seriesId, s.title, s.title_original AS originalTitle, s.start_year AS seriesYear, \");\n@@ -2211,7 +2208,7 @@ public void getSeriesInfo(ApiWrapperList\u003cApiSeriesInfoDTO\u003e wrapper) {\n         sqlScalars.addScalar(WATCHED, BooleanType.INSTANCE);\n \n         List\u003cApiSeriesInfoDTO\u003e seriesResults \u003d executeQueryWithTransform(ApiSeriesInfoDTO.class, sqlScalars, wrapper);\n-        LOG.debug(\"Found {} series for SeriesId \u0027{}\u0027\", seriesResults.size(), id);\n+        LOG.debug(\"Found {} series for ID {}\", seriesResults.size(), id);\n \n         for (ApiSeriesInfoDTO series : seriesResults) {\n             if (options.hasDataItem(DataItem.GENRE)) {\n@@ -2232,8 +2229,12 @@ public void getSeriesInfo(ApiWrapperList\u003cApiSeriesInfoDTO\u003e wrapper) {\n \n             if (options.hasDataItem(DataItem.ARTWORK)) {\n                 Map\u003cLong, List\u003cApiArtworkDTO\u003e\u003e artworkList \u003d getArtworkForId(MetaDataType.SERIES, id, options.getArtworkTypes());\n-                for (ApiArtworkDTO artwork : artworkList.get(id)) {\n-                    series.addArtwork(artwork);\n+                if (artworkList \u003d\u003d null || !artworkList.containsKey(id) || CollectionUtils.isEmpty(artworkList.get(id))) {\n+                    LOG.debug(\"No artwork found for seriesId {}\", id);\n+                } else {\n+                    for (ApiArtworkDTO artwork : artworkList.get(id)) {\n+                        series.addArtwork(artwork);\n+                    }\n                 }\n             }\n             series.setSeasonList(getSeasonInfo(options));\n@@ -2242,9 +2243,9 @@ public void getSeriesInfo(ApiWrapperList\u003cApiSeriesInfoDTO\u003e wrapper) {\n     }\n \n     private List\u003cApiSeasonInfoDTO\u003e getSeasonInfo(OptionsIdArtwork options) {\n-        Long seriesId \u003d options.getId();\n+        Long id \u003d options.getId();\n \n-        LOG.debug(\"Getting season information for seriesId \u0027{}\u0027\", seriesId);\n+        LOG.debug(\"Getting season information for series ID {}\", id);\n         SqlScalars sqlScalars \u003d new SqlScalars();\n         sqlScalars.addToSql(\"SELECT s.series_id AS seriesId, s.id AS seasonId, s.season, s.title, s.title_original AS originalTitle,\");\n         if (options.hasDataItem(DataItem.PLOT)) {\n@@ -2259,7 +2260,7 @@ public void getSeriesInfo(ApiWrapperList\u003cApiSeriesInfoDTO\u003e wrapper) {\n         sqlScalars.addToSql(\"FROM season s\");\n         sqlScalars.addToSql(\"WHERE series_id\u003d:id\");\n         sqlScalars.addToSql(\"ORDER BY series_id, season\");\n-        sqlScalars.addParameters(ID, seriesId);\n+        sqlScalars.addParameters(ID, id);\n \n         sqlScalars.addScalar(SERIES_ID, LongType.INSTANCE);\n         sqlScalars.addScalar(SEASON_ID, LongType.INSTANCE);\n@@ -2269,13 +2270,13 @@ public void getSeriesInfo(ApiWrapperList\u003cApiSeriesInfoDTO\u003e wrapper) {\n         sqlScalars.addScalar(WATCHED, BooleanType.INSTANCE);\n \n         List\u003cApiSeasonInfoDTO\u003e seasonResults \u003d executeQueryWithTransform(ApiSeasonInfoDTO.class, sqlScalars, null);\n-        LOG.debug(\"Found {} seasons for SeriesId \u0027{}\u0027\", seasonResults.size(), seriesId);\n+        LOG.debug(\"Found {} seasons for series ID {}\", seasonResults.size(), id);\n \n         if (options.hasDataItem(DataItem.ARTWORK)) {\n             for (ApiSeasonInfoDTO season : seasonResults) {\n                 Map\u003cLong, List\u003cApiArtworkDTO\u003e\u003e artworkList \u003d getArtworkForId(MetaDataType.SEASON, season.getSeasonId(), options.getArtworkTypes());\n-                if (artworkList \u003d\u003d null || !artworkList.containsKey(seriesId) || CollectionUtils.isEmpty(artworkList.get(seriesId))) {\n-                    LOG.debug(\"No artwork found for seriesId \u0027{}\u0027 season {}\", seriesId, season.getSeason());\n+                if (artworkList \u003d\u003d null || !artworkList.containsKey(season.getSeasonId()) || CollectionUtils.isEmpty(artworkList.get(season.getSeasonId()))) {\n+                    LOG.debug(\"No artwork found for series ID {} and season {}\", id, season.getSeason());\n                 } else {\n                     for (ApiArtworkDTO artwork : artworkList.get(season.getSeasonId())) {\n                         season.addArtwork(artwork);\n@@ -2515,7 +2516,7 @@ public ApiBoxedSetDTO getBoxedSet(ApiWrapperSingle\u003cApiBoxedSetDTO\u003e wrapper) {\n         }\n \n         if (options.hasDataItem(DataItem.ARTWORK)) {\n-            LOG.trace(\"Adding artwork for ID \u0027{}\u0027\", options.getId());\n+            LOG.trace(\"Adding artwork for ID {}\", options.getId());\n             Map\u003cLong, List\u003cApiArtworkDTO\u003e\u003e artworkList;\n             if (CollectionUtils.isNotEmpty(options.getArtworkTypes())) {\n                 artworkList \u003d getArtworkForId(MetaDataType.BOXSET, options.getId(), options.getArtworkTypes());"
        }
      ]
    }
  },
  {
    "name": "Null pointer exception",
    "url": "https://github.com/sd6352051/NiftyNotification/issues/4",
    "description": "Hi,\n\nI just got crash. This is log. Hope it helps\n\n```\n10-24 17:31:12.124: E/AndroidRuntime(23114): FATAL EXCEPTION: main\n10-24 17:31:12.124: E/AndroidRuntime(23114): Process: com.passenger, PID: 23114\n10-24 17:31:12.124: E/AndroidRuntime(23114): java.lang.NullPointerException\n10-24 17:31:12.124: E/AndroidRuntime(23114):    at android.view.ViewConfiguration.get(ViewConfiguration.java:313)\n10-24 17:31:12.124: E/AndroidRuntime(23114):    at android.view.View.\u003cinit\u003e(View.java:3455)\n10-24 17:31:12.124: E/AndroidRuntime(23114):    at android.view.ViewGroup.\u003cinit\u003e(ViewGroup.java:459)\n10-24 17:31:12.124: E/AndroidRuntime(23114):    at android.widget.FrameLayout.\u003cinit\u003e(FrameLayout.java:93)\n10-24 17:31:12.124: E/AndroidRuntime(23114):    at com.gitonway.lee.niftynotification.lib.NiftyNotificationView.initializeCroutonViewGroup(NiftyNotificationView.java:166)\n10-24 17:31:12.124: E/AndroidRuntime(23114):    at com.gitonway.lee.niftynotification.lib.NiftyNotificationView.initializeNotifyView(NiftyNotificationView.java:158)\n10-24 17:31:12.124: E/AndroidRuntime(23114):    at com.gitonway.lee.niftynotification.lib.NiftyNotificationView.getView(NiftyNotificationView.java:150)\n10-24 17:31:12.124: E/AndroidRuntime(23114):    at com.gitonway.lee.niftynotification.lib.Manager.addNotifyToView(Manager.java:167)\n10-24 17:31:12.124: E/AndroidRuntime(23114):    at com.gitonway.lee.niftynotification.lib.Manager.handleMessage(Manager.java:117)\n10-24 17:31:12.124: E/AndroidRuntime(23114):    at android.os.Handler.dispatchMessage(Handler.java:102)\n10-24 17:31:12.124: E/AndroidRuntime(23114):    at android.os.Looper.loop(Looper.java:136)\n10-24 17:31:12.124: E/AndroidRuntime(23114):    at android.app.ActivityThread.main(ActivityThread.java:5146)\n10-24 17:31:12.124: E/AndroidRuntime(23114):    at java.lang.reflect.Method.invokeNative(Native Method)\n10-24 17:31:12.124: E/AndroidRuntime(23114):    at java.lang.reflect.Method.invoke(Method.java:515)\n10-24 17:31:12.124: E/AndroidRuntime(23114):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:732)\n10-24 17:31:12.124: E/AndroidRuntime(23114):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:566)\n10-24 17:31:12.124: E/AndroidRuntime(23114):    at dalvik.system.NativeStart.main(Native Method)\n```\n\nMy code in activity\n\n```\nprivate void displayInternetRequired(boolean connectivityStatus)\n    {\n        mNetworkErrorToast \u003d NiftyToast.newInstance(this, getString(R.string.network_error_msg), R.id.main_frame);\n        if (!connectivityStatus)\n        {\n            mNetworkErrorToast.showSticky();\n        }\n        else\n        {\n            mNetworkErrorToast.removeSticky();\n        }\n    }\n```\n\nMy class:\n\n```\npublic class NiftyToast\n{\n    private static final String TAG \u003d NiftyToast.class.getSimpleName();\n\n    private static NiftyNotificationView mNiftyView \u003d null;\n\n    private NiftyToast()\n    {\n\n    }\n\n    /*\n     * Don\u0027t forget to add .show() at the end of instance in order to display it\n     */\n    public static NiftyNotificationView newInstance (final Activity activity, final String msg,\n            int viewGroupResId)\n    {\n        return NiftyNotificationView.build(activity, msg, Effects.flip, viewGroupResId, getConfig());\n    }\n\n    private static Configuration getConfig()\n    {\n        return new Configuration.Builder()\n                .setAnimDuration(700)\n                .setDispalyDuration(5000) // This setting is not important if showSticky() uses\n                .setBackgroundColor(\"#FFFF0000\")\n                .setTextColor(\"#FFFFFFFF\")\n                .setIconBackgroundColor(\"#FFFFFFFF\")\n                .setTextPadding(5) // dp\n                .setViewHeight(48) // dp\n                .setTextLines(2)\n                .setTextGravity(Gravity.CENTER)\n                .build();\n    }\n}\n```\n",
    "keywords": [
      "com",
      "private static",
      "private",
      "lib",
      "string",
      "activity",
      "17:31:12",
      "android",
      "10-24 17:31:12",
      "main",
      "e/androidruntime",
      "124: e/androidruntime",
      "lee",
      "view",
      "java",
      "gitonway",
      "mnetworkerrortoast",
      "lee niftynotification",
      "lang",
      "class",
      "niftynotification",
      "niftynotificationview",
      "zygoteinit",
      "static",
      "method",
      "os",
      "manager",
      "com gitonway",
      "17:31:12 124",
      "23114",
      "niftytoast",
      "\u003cinit\u003e",
      "lib niftynotificationview",
      "124",
      "23114 ",
      "e/androidruntime 23114",
      "final",
      "10-24",
      ";"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/sd6352051/NiftyNotification/commit/30971efc406c122d8e8b4da42d6f69f41d286355",
      "files": [
        {
          "file_name": "library/src/main/java/com/gitonway/lee/niftynotification/lib/Manager.java",
          "patch": "@@ -22,6 +22,7 @@\n import android.os.Build;\n import android.os.Handler;\n import android.os.Message;\n+import android.util.Log;\n import android.view.View;\n import android.view.ViewGroup;\n import android.view.ViewTreeObserver;\n@@ -67,15 +68,20 @@ void add(NiftyNotificationView crouton,boolean repeat ) {\n \n     }\n     void addSticky(NiftyNotificationView crouton) {\n+        Log.i(\"count\",crouton.getViewGroup().getChildCount()+\"   \"+notifyQueue.size());\n+\n+        if (crouton.getViewGroup().getChildCount()\u003d\u003d0\u0026\u0026notifyQueue.size()\u003d\u003d1){\n+            removeSticky();\n+        }\n+\n         if (notifyQueue.size() \u003c 1) {\n             notifyQueue.add(crouton);\n             displayNotify(true);\n         }\n \n     }\n     void removeSticky(){\n-\n-        NiftyNotificationView notify \u003d notifyQueue.poll();\n+        NiftyNotificationView notify \u003d notifyQueue.peek();\n         if(notify!\u003dnull) {\n             sendMessageDelayed(notify, Messages.REMOVE_NOTIFICATION,\n                     0"
        },
        {
          "file_name": "library/src/main/java/com/gitonway/lee/niftynotification/lib/NiftyNotificationView.java",
          "patch": "@@ -154,11 +154,13 @@ View getView() {\n     }\n \n     private void initializeNotifyView() {\n+        if (this.activity!\u003dnull) {\n \n-        this.notifyView \u003d initializeCroutonViewGroup();\n+            this.notifyView \u003d initializeCroutonViewGroup();\n \n-        RelativeLayout contentView \u003d initializeContentView();\n-        this.notifyView.addView(contentView);\n+            RelativeLayout contentView \u003d initializeContentView();\n+            this.notifyView.addView(contentView);\n+        }\n     }\n \n     private FrameLayout initializeCroutonViewGroup() {"
        }
      ]
    }
  },
  {
    "name": "Running habridge on osmc - Null Pointer Exception when no habridge.conf",
    "url": "https://github.com/bwssytems/ha-bridge/issues/558",
    "description": "Hi.\r\n\r\nI am trying to install habridge on osmc but am unable to get it running.\r\nI have successfully installed and run it on raspbian but I keep getting these errors in the log on osmc\r\nI have installed the latest JDK 1.8 \r\nAny help would be appreciated.\r\n\r\n2017-03-18 02:25:08,727 [main] INFO  com.bwssystems.HABridge.HABridge - HA Bridge (v4.3.0) starting....\r\n2017-03-18 02:25:08,774 [main] INFO  com.bwssystems.HABridge.BridgeSettings - reading from config file: /home/osmc/habridge/data/habridge.config\r\n2017-03-18 02:25:09,280 [main] WARN  com.bwssystems.HABridge.BridgeSettings - Issue loading values from file: file:///home/osmc/habridge/data/habridge.config, Gson convert failed.\r\n2017-03-18 02:25:09,304 [main] INFO  com.bwssystems.HABridge.BridgeSettings - Adding 192.168.1.10 as our default upnp config address.\r\nException in thread \"main\" java.lang.NullPointerException\r\n        at com.bwssystems.HABridge.BridgeSettingsDescriptor.setupInternalTestUser(BridgeSettingsDescriptor.java:438)\r\n        at com.bwssystems.HABridge.BridgeSettings.setupInternalTestUser(BridgeSettings.java:314)\r\n        at com.bwssystems.HABridge.BridgeSettings.buildSettings(BridgeSettings.java:177)\r\n        at com.bwssystems.HABridge.HABridge.main(HABridge.java:49)\r\n\r\n",
    "keywords": [
      "com",
      "com bwssystems",
      "bwssystems",
      "habridge bridgesettings",
      "habridge",
      "[main] info",
      "2017-03-18",
      "config",
      "bridgesettings",
      "osmc",
      "info",
      "[main]"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/bwssytems/ha-bridge/commit/1a402e425eaf962dbd2416e905941869a21bd6a5",
      "files": [
        {
          "file_name": "pom.xml",
          "patch": "@@ -5,7 +5,7 @@\n \n \t\u003cgroupId\u003ecom.bwssystems.HABridge\u003c/groupId\u003e\n \t\u003cartifactId\u003eha-bridge\u003c/artifactId\u003e\n-\t\u003cversion\u003e4.3.0\u003c/version\u003e\n+\t\u003cversion\u003e4.3.1\u003c/version\u003e\n \t\u003cpackaging\u003ejar\u003c/packaging\u003e\n \n \t\u003cname\u003eHA Bridge\u003c/name\u003e"
        },
        {
          "file_name": "src/main/java/com/bwssystems/HABridge/BridgeSettingsDescriptor.java",
          "patch": "@@ -435,11 +435,14 @@ public String getInternalTestUser() {\n \r\n \tpublic void setupInternalTestUser() {\r\n \t\tboolean found \u003d false;\r\n-\t\tfor (String key : whitelist.keySet()) {\r\n-\t\t\tif(key.equals(DEFAULT_INTERNAL_USER))\r\n-\t\t\t\tfound \u003d true;\r\n+\t\tif(whitelist !\u003d null) {\r\n+\t\t\tfor (String key : whitelist.keySet()) {\r\n+\t\t\t\tif(key.equals(DEFAULT_INTERNAL_USER)) {\r\n+\t\t\t\t\tfound \u003d true;\r\n+\t\t\t\t\tbreak;\r\n+\t\t\t\t}\r\n+\t\t\t}\r\n \t\t}\r\n-\t\t\r\n \t\tif(!found) {\r\n \t\t\tnewWhitelistUser(DEFAULT_INTERNAL_USER, DEFAULT_USER_DESCRIPTION);\r\n \t\t}\r"
        }
      ]
    }
  },
  {
    "name": "Simple set match causes null pointer in Interpreter",
    "url": "https://github.com/usethesource/rascal/issues/930",
    "description": "```\nrascal\u003e { \"a\"(1) } :\u003d { \"a\"(1) }\njava.lang.NullPointerException(internal error)  at $shell$(|main://$shell$|)\njava.lang.NullPointerException\n    at org.rascalmpl.interpreter.utils.Names.fullName(Names.java:38)\n    at org.rascalmpl.interpreter.matching.NodePattern.toString(NodePattern.java:344)\n    at org.rascalmpl.interpreter.matching.SetPattern.initMatch(SetPattern.java:409)\n    at org.rascalmpl.interpreter.matching.MatchResult.init(MatchResult.java:54)\n    at org.rascalmpl.semantics.dynamic.Expression.evalBooleanExpression(Expression.java:2942)\n    at org.rascalmpl.semantics.dynamic.Expression.access$0(Expression.java:2940)\n    at org.rascalmpl.semantics.dynamic.Expression$Match.interpret(Expression.java:1654)\n    at org.rascalmpl.semantics.dynamic.Command$Expression.interpret(Command.java:61)\n    at org.rascalmpl.interpreter.Evaluator.eval(Evaluator.java:1084)\n    at org.rascalmpl.interpreter.Evaluator.eval(Evaluator.java:953)\n    at org.rascalmpl.interpreter.Evaluator.eval(Evaluator.java:908)\n    at org.rascalmpl.repl.RascalInterpreterREPL.evalStatement(RascalInterpreterREPL.java:112)\n    at org.rascalmpl.repl.BaseRascalREPL.handleInput(BaseRascalREPL.java:96)\n    at org.rascalmpl.repl.BaseREPL.run(BaseREPL.java:271)\n    at org.rascalmpl.shell.REPLRunner.run(REPLRunner.java:43)\n    at org.rascalmpl.shell.RascalShell.main(RascalShell.java:98)\n\n```\n",
    "keywords": [
      "expression",
      "org",
      "rascalmpl repl",
      "interpreter",
      "evaluator eval",
      "semantics",
      "org rascalmpl",
      "rascalmpl",
      "matching",
      "eval",
      "rascalmpl interpreter",
      "dynamic",
      "repl",
      "evaluator"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/usethesource/rascal/commit/d07ca1da115071af1e764ae3231c64951da336e3",
      "files": [
        {
          "file_name": "src/org/rascalmpl/interpreter/matching/NodePattern.java",
          "patch": "@@ -340,11 +340,15 @@ private boolean nextKeywordParameters() {\n \t@Override\n \tpublic String toString(){\n \t\tint n \u003d patternChildren.size();\n-\t\tif(n \u003d\u003d 1){\n-\t\t\treturn Names.fullName(qName) + \"()\";\n-\t\t}\n \t\tStringBuilder res \u003d new StringBuilder(qName !\u003d null ? Names.fullName(qName) : namePattern.toString());\n+\t\t\n \t\tres.append(\"(\");\n+\t\t\n+\t\tif (n \u003d\u003d 1) {\n+\t\t\tres.append(\")\");\n+\t\t\treturn res.toString() ;\n+\t\t}\n+\t\t\n \t\tString sep \u003d \"\";\n \n \t\tfor (IMatchingResult c : patternChildren){"
        }
      ]
    }
  },
  {
    "name": "Error Manager null pointer exception",
    "url": "https://github.com/Fermat-ORG/fermat-framework/issues/701",
    "description": "Crash en la aplicacin con un null pointer en la siguiente linea que se encuentra en el SubAppActivity:\n\nthis.errorManager.reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN,e);\n\nExactamente se encuentra en la linea 348 en el mtodo onCreateOptionsMenu.\n",
    "keywords": [
      "la",
      "en"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/Fermat-ORG/fermat-framework/commit/6303f1471a6431afacf6838664b2e6bdbf2b52a0",
      "files": [
        {
          "file_name": "fermat-android-core/src/main/java/com/bitdubai/android_core/app/StartActivity.java",
          "patch": "@@ -142,8 +142,8 @@ protected Boolean doInBackground(Object... params) {\n             platform \u003d ApplicationSession.getFermatPlatform();\n \n \n-            StrictMode.ThreadPolicy policy \u003d new StrictMode.ThreadPolicy.Builder().permitAll().build();\n-            StrictMode.setThreadPolicy(policy);\n+            //StrictMode.ThreadPolicy policy \u003d new StrictMode.ThreadPolicy.Builder().permitAll().build();\n+            //StrictMode.setThreadPolicy(policy);\n \n \n             //set Os Addons in platform"
        },
        {
          "file_name": "fermat-android-core/src/main/java/com/bitdubai/android_core/app/SubAppActivity.java",
          "patch": "@@ -86,11 +86,6 @@\n     private SubApp subApp;\n     private Activity activity;\n     private Map\u003cFragments, com.bitdubai.fermat_api.layer.dmp_middleware.app_runtime.Fragment\u003e fragments;\n-    private AppRuntimeManager appRuntimeMiddleware;\n-    private WalletRuntimeManager walletRuntimeMiddleware;\n-    private ErrorManager errorManager;\n-\n-    private CorePlatformContext platformContext;\n \n     private ViewPager pager;\n     private ViewPager pagertabs;\n@@ -104,7 +99,6 @@\n     private boolean firstexecute \u003d true;\n     private Bundle savedInstanceState;\n     private ViewGroup collection;\n-    private Platform platform;\n \n     @Override\n     protected void onCreate(Bundle savedInstanceState) {\n@@ -114,25 +108,14 @@ protected void onCreate(Bundle savedInstanceState) {\n \n \n             this.savedInstanceState \u003d savedInstanceState;\n-            //init runtime app\n-\n-            platform \u003d ApplicationSession.getFermatPlatform();\n-\n-            //get platform object\n-            this.platformContext \u003d platform.getCorePlatformContext();\n-\n-            //get instances of Runtime Middleware object\n-            this.appRuntimeMiddleware \u003d (AppRuntimeManager) platformContext.getPlugin(Plugins.BITDUBAI_APP_RUNTIME_MIDDLEWARE);\n-            this.walletRuntimeMiddleware \u003d (WalletRuntimeManager) platformContext.getPlugin(Plugins.BITDUBAI_WALLET_RUNTIME_MODULE);\n-\n-            this.errorManager \u003d (ErrorManager) platformContext.getAddon(Addons.ERROR_MANAGER);\n \n             NavigateActivity();\n         } catch (Exception e) {\n             // TODO: el errorManager no estaria instanciado aca....\n-            //this.errorManager.reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n-\n+            //this.errorManage.reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n+            ApplicationSession.getErrorManager().reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n             Toast.makeText(getApplicationContext(), \"Error Load RuntimeApp - \" + e.getMessage(), Toast.LENGTH_LONG).show();\n+            //e.printStackTrace();\n         }\n \n \n@@ -157,13 +140,7 @@ private void initialisePaging() {\n                     case CWP_SHELL_LOGIN:\n                         break;\n                     case CWP_WALLET_MANAGER_MAIN:\n-\n-                        //Matias this flag is because this fragment appair two times and when press the back button in a fragment\n-                        //the application crash\n-                      //  if (!flag) {\n                             fragments.add(android.support.v4.app.Fragment.instantiate(this, WalletDesktopFragment.class.getName()));\n-                           // flag \u003d true;\n-                       // }\n                         break;\n                     case CWP_WALLET_MANAGER_SHOP:\n                          break;\n@@ -192,8 +169,7 @@ private void initialisePaging() {\n \n \n         } catch (Exception ex) {\n-            this.errorManager.reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, ex);\n-\n+            ApplicationSession.getErrorManager().reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, ex);\n             Toast.makeText(getApplicationContext(), \"Can\u0027t Load tabs: \" + ex.getMessage(), Toast.LENGTH_LONG).show();\n         }\n     }\n@@ -205,9 +181,9 @@ private void initialisePaging() {\n     // to make the NavigationDrawerFragment verified whether the activity has a SideMenu\n     private void NavigateActivity() {\n         try {\n-            this.app \u003d appRuntimeMiddleware.getLastApp();\n-            this.subApp \u003d appRuntimeMiddleware.getLastSubApp();\n-            this.activity \u003d appRuntimeMiddleware.getLasActivity();\n+            this.app \u003dApplicationSession.getAppRuntime().getLastApp();\n+            this.subApp \u003d ApplicationSession.getAppRuntime().getLastSubApp();\n+            this.activity \u003d ApplicationSession.getAppRuntime().getLasActivity();\n \n             ApplicationSession.setActivityId(activity.getType().getKey());\n \n@@ -304,7 +280,7 @@ private void NavigateActivity() {\n \n             }\n         } catch (Exception e) {\n-            this.errorManager.reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n+            ApplicationSession.getErrorManager().reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n \n             Toast.makeText(getApplicationContext(), \"Error in NavigateActivity \" + e.getMessage(), Toast.LENGTH_LONG).show();\n         }\n@@ -319,7 +295,7 @@ private void NavigateActivity() {\n     // TODO: En definitiva, tenemos que llegar al punto de que la parametrizacin este en el plugin WalletRuntime y APPRuntime y solo ahi.\n \n \n-    /*@Override\n+    @Override\n     public boolean onCreateOptionsMenu(Menu menu) {\n \n         try {\n@@ -345,12 +321,12 @@ public boolean onCreateOptionsMenu(Menu menu) {\n         } catch (Exception e) {\n \n             // TODO:  Error manager null\n-            this.errorManager.reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n+            ApplicationSession.getErrorManager().reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n \n             Toast.makeText(getApplicationContext(), \"Can\u0027t CreateoptionMenu: \" + e.getMessage(), Toast.LENGTH_LONG).show();\n         }\n         return super.onCreateOptionsMenu(menu);\n-    }*/\n+    }\n \n     @Override\n     public boolean onOptionsItemSelected(MenuItem item) {\n@@ -370,7 +346,7 @@ public boolean onOptionsItemSelected(MenuItem item) {\n \n             if (id \u003d\u003d R.id.action_wallet_store) {\n                 ((ApplicationSession) this.getApplication()).setWalletId(0);\n-                this.appRuntimeMiddleware.getActivity(Activities.CWP_WALLET_RUNTIME_STORE_MAIN);\n+                ApplicationSession.getAppRuntime().getActivity(Activities.CWP_WALLET_RUNTIME_STORE_MAIN);\n                 NavigateActivity();\n \n                 return true;\n@@ -386,7 +362,7 @@ public boolean onOptionsItemSelected(MenuItem item) {\n \n \n         } catch (Exception e) {\n-            this.errorManager.reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n+            ApplicationSession.getErrorManager().reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n             //Matias\n             //por ahora lo saco porque no me toma el tag del parametro, vamos a ver como implementarlo\n             //Toast.makeText(getApplicationContext(), \"Error in OptionsItemSelecte \" + e.getMessage(), Toast.LENGTH_LONG).show();\n@@ -459,22 +435,22 @@ public void onItemSelectedClicked(View v) {\n                 case CWP_SUP_APP_ALL_DEVELOPER: //Developer manager\n                     ((ApplicationSession) this.getApplication()).setWalletId(0);\n \n-                    this.activity \u003d this.walletRuntimeMiddleware.getActivity(Activities.CWP_SUP_APP_ALL_DEVELOPER);\n+                    this.activity \u003d ApplicationSession.getwalletRuntime().getActivity(Activities.CWP_SUP_APP_ALL_DEVELOPER);\n                     //execute NavigateWallet to go wallet activity\n                     intent \u003d new Intent(this, com.bitdubai.android_core.app.WalletActivity.class);\n                     startActivity(intent);\n                     break;\n                 case CWP_WALLET_BASIC_ALL_MAIN: //basic Wallet\n                     //go to wallet basic definition\n                     ApplicationSession.setWalletId(4);\n-                    this.walletRuntimeMiddleware.getActivity(Activities.CWP_WALLET_RUNTIME_WALLET_BASIC_WALLET_BITDUBAI_VERSION_1_MAIN);\n+                    ApplicationSession.getwalletRuntime().getActivity(Activities.CWP_WALLET_RUNTIME_WALLET_BASIC_WALLET_BITDUBAI_VERSION_1_MAIN);\n                     intent \u003d new Intent(this, com.bitdubai.android_core.app.WalletActivity.class);\n                     startActivity(intent);\n                     break;\n                 //Bitcoin wallet fragments\n                 case CWP_WALLET_RUNTIME_BITCOIN_ALL_CONTACTS_SEND:\n                     ApplicationSession.setChildId(paramId);\n-                    this.walletRuntimeMiddleware.getActivity(Activities.CWP_WALLET_RUNTIME_BITCOIN_ALL_CONTACTS_SEND);\n+                    ApplicationSession.getwalletRuntime().getActivity(Activities.CWP_WALLET_RUNTIME_BITCOIN_ALL_CONTACTS_SEND);\n                     intent \u003d new Intent(this, com.bitdubai.android_core.app.FragmentActivity.class);\n \n                     startActivity(intent);\n@@ -483,7 +459,7 @@ public void onItemSelectedClicked(View v) {\n                 //wallet factory\n                 case CWP_WALLET_FACTORY_MAIN:\n \n-                    this.appRuntimeMiddleware.getActivity(Activities.CWP_WALLET_FACTORY_MAIN);\n+                    ApplicationSession.getAppRuntime().getActivity(Activities.CWP_WALLET_FACTORY_MAIN);\n \n                     intent \u003d new Intent(this, com.bitdubai.android_core.app.SubAppActivity.class);\n                     startActivity(intent);\n@@ -493,22 +469,22 @@ public void onItemSelectedClicked(View v) {\n                 //wallet publisher\n                 case CWP_WALLET_PUBLISHER_MAIN:\n \n-                    this.appRuntimeMiddleware.getActivity(Activities.CWP_WALLET_PUBLISHER_MAIN);\n+                    ApplicationSession.getAppRuntime().getActivity(Activities.CWP_WALLET_PUBLISHER_MAIN);\n                     intent \u003d new Intent(this, com.bitdubai.android_core.app.SubAppActivity.class);\n                     startActivity(intent);\n \n                     break;\n \n                 case CWP_WALLET_RUNTIME_STORE_MAIN:\n-                    this.appRuntimeMiddleware.getActivity(Activities.CWP_WALLET_RUNTIME_STORE_MAIN);\n+                    ApplicationSession.getAppRuntime().getActivity(Activities.CWP_WALLET_RUNTIME_STORE_MAIN);\n                     intent \u003d new Intent(this, com.bitdubai.android_core.app.SubAppActivity.class);\n                     startActivity(intent);\n \n                     break;\n             }\n \n         } catch (Exception e) {\n-            this.errorManager.reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n+            ApplicationSession.getErrorManager().reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n             //Esto va a habr que cambiarlo porque no me toma el tag, Matias\n             //Toast.makeText(getApplicationContext(), \"Error in OptionsItemSelecte \" + e.getMessage(), Toast.LENGTH_LONG).show();\n         }\n@@ -545,7 +521,7 @@ public void onBackPressed() {\n         ApplicationSession.setActivityId(\"DesktopActivity\");\n         ((ApplicationSession) this.getApplication()).setWalletId(0);\n         if (activity.getType() !\u003d Activities.CWP_WALLET_MANAGER_MAIN) {\n-            activity \u003d this.appRuntimeMiddleware.getActivity(Activities.CWP_WALLET_MANAGER_MAIN);\n+            activity \u003d ApplicationSession.getAppRuntime().getActivity(Activities.CWP_WALLET_MANAGER_MAIN);\n             cleanWindows();\n \n             NavigateActivity();\n@@ -582,7 +558,7 @@ private void cleanWindows() {\n \n             this.PagerAdapter \u003d new PagerAdapter(getSupportFragmentManager(), fragments);\n         } catch (Exception e) {\n-            this.errorManager.reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n+            ApplicationSession.getErrorManager().reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n \n             Toast.makeText(getApplicationContext(), \"Can\u0027t Clean Windows: \" + e.getMessage(),\n                     Toast.LENGTH_LONG).show();\n@@ -690,14 +666,14 @@ public int getCount() {\n                     }\n \n                 } catch (Exception ex) {\n-                    errorManager.reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, ex);\n+                    ApplicationSession.getErrorManager().reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, ex);\n \n                     Toast.makeText(getApplicationContext(), \"Error in PagerAdapter GetItem \" + ex.getMessage(), Toast.LENGTH_LONG).show();\n                 }\n \n                 return currentFragment;\n             } catch (Exception e) {\n-                errorManager.reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n+                ApplicationSession.getErrorManager().reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n \n                 Toast.makeText(getApplicationContext(), \"Can\u0027t getItem PageAdpater: \" + e.getMessage(), Toast.LENGTH_LONG).show();\n                 return null;"
        },
        {
          "file_name": "fermat-android-core/src/main/java/com/bitdubai/android_core/app/WalletActivity.java",
          "patch": "@@ -85,12 +85,6 @@\n     private SubApp subApp;\n     private Activity activity;\n     private Map\u003cFragments, Fragment\u003e fragments;\n-    private AppRuntimeManager appRuntimeMiddleware;\n-    private WalletRuntimeManager walletRuntimeMiddleware;\n-    private ErrorManager errorManager;\n-\n-\n-    private CorePlatformContext platformContext;\n \n \n     private ViewPager pager;\n@@ -106,7 +100,6 @@\n     private TitleBar titleBar; // Comment\n \n     private ViewGroup collection;\n-    private Platform platform;\n     private SearchView mSearchView;\n \n \n@@ -117,22 +110,6 @@ protected void onCreate(Bundle savedInstanceState) {\n \n         try {\n \n-\n-            //init runtime app\n-\n-            //get platform object\n-            platform \u003d ApplicationSession.getFermatPlatform();\n-            this.platformContext \u003d platform.getCorePlatformContext();\n-\n-\n-\n-            Context context \u003d this.getApplicationContext();\n-\n-            // get instances of Runtime middleware object\n-            this.appRuntimeMiddleware \u003d ApplicationSession.getAppRuntime();\n-            this.walletRuntimeMiddleware \u003d ApplicationSession.getwalletRuntime();\n-            this.errorManager \u003d (ErrorManager) platformContext.getAddon(Addons.ERROR_MANAGER);\n-\n             //load wallet UI\n             NavigateWallet();\n \n@@ -151,7 +128,8 @@ private void NavigateWallet() {\n         try\n         {\n             //get actual activity to execute\n-            this.activity \u003d walletRuntimeMiddleware.getLasActivity();\n+\n+            this.activity \u003d  ApplicationSession.getwalletRuntime().getLasActivity();\n \n             ApplicationSession.setActivityId(activity.getType().getKey());\n \n@@ -252,7 +230,7 @@ private void NavigateWallet() {\n             }\n         }\n         catch (Exception e) {\n-            this.errorManager.reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n+            ApplicationSession.getErrorManager().reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n \n             Toast.makeText(getApplicationContext(), \"Error in NavigateWallet \" + e.getMessage(),\n                     Toast.LENGTH_LONG).show();\n@@ -333,7 +311,7 @@ private void initialisePaging() {\n         }\n         catch (Exception e)\n         {\n-            this.errorManager.reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN,e);\n+            ApplicationSession.getErrorManager().reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n \n             Toast.makeText(getApplicationContext(), \"Can\u0027t Create Tabs: \" + e.getMessage(),\n                     Toast.LENGTH_LONG).show();\n@@ -374,7 +352,7 @@ public boolean onCreateOptionsMenu(Menu menu) {\n         }\n         catch (Exception e) {\n \n-            this.errorManager.reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN,e);\n+            ApplicationSession.getErrorManager().reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n \n             Toast.makeText(getApplicationContext(), \"Error in CleanWindows \" + e.getMessage(),\n                     Toast.LENGTH_LONG).show();\n@@ -417,7 +395,7 @@ public boolean onOptionsItemSelected(MenuItem item) {\n \n         }\n         catch (Exception e) {\n-            this.errorManager.reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n+            ApplicationSession.getErrorManager().reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n \n             Toast.makeText(getApplicationContext(), \"Error in OptionsItemSelecte \" + e.getMessage(),\n                     Toast.LENGTH_LONG).show();\n@@ -461,7 +439,7 @@ public void onItemSelectedClicked(View v) {\n \n         }\n         catch (Exception e) {\n-            this.errorManager.reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n+            ApplicationSession.getErrorManager().reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n \n \n             //Toast.makeText(getApplicationContext(), \"Error in OptionsItemSelecte \" + e.getMessage(),\n@@ -506,7 +484,7 @@ protected void onPostResume() {\n         if (returningWithResult)\n         {\n              //Get actual wallet to execute activity result method\n-            Activity wallet \u003d this.walletRuntimeMiddleware.getLasActivity();\n+            Activity wallet \u003d ApplicationSession.getwalletRuntime().getLasActivity();\n \n             if (wallet.getType() \u003d\u003d Activities.CWP_WALLET_RUNTIME_WALLET_BASIC_WALLET_BITDUBAI_VERSION_1_MAIN)\n             {\n@@ -545,7 +523,7 @@ public void onBackPressed() {\n         ApplicationSession.setActivityId(\"DesktopActivity\");\n         ((ApplicationSession) this.getApplication()).setWalletId(0);\n         if (activity.getType() !\u003d Activities.CWP_WALLET_MANAGER_MAIN){\n-            activity \u003d this.appRuntimeMiddleware.getActivity(Activities.CWP_WALLET_MANAGER_MAIN);\n+            activity \u003d ApplicationSession.getAppRuntime().getActivity(Activities.CWP_WALLET_MANAGER_MAIN);\n             cleanWindows();\n \n             Intent intent \u003d new Intent(this, SubAppActivity.class);\n@@ -595,7 +573,7 @@ private void cleanWindows()\n         }\n         catch (Exception e) {\n \n-            this.errorManager.reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN,e);\n+            ApplicationSession.getErrorManager().reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, e);\n \n             Toast.makeText(getApplicationContext(), \"Error in CleanWindows \" + e.getMessage(),\n                     Toast.LENGTH_LONG).show();\n@@ -684,16 +662,16 @@ public int getCount() {\n \n                     case CWP_SUB_APP_DEVELOPER_DATABASE_TOOLS:\n                         developerPlatform \u003d new com.bitdubai.sub_app.developer.fragment.Platform();\n-                        developerPlatform.setErrorManager((ErrorManager) platformContext.getAddon(Addons.ERROR_MANAGER));\n-                        developerPlatform.setToolManager((ToolManager) platformContext.getPlugin(Plugins.BITDUBAI_ACTOR_DEVELOPER));\n+                        developerPlatform.setErrorManager((ErrorManager) ApplicationSession.getFermatPlatform().getCorePlatformContext().getAddon(Addons.ERROR_MANAGER));\n+                        developerPlatform.setToolManager((ToolManager) ApplicationSession.getFermatPlatform().getCorePlatformContext().getPlugin(Plugins.BITDUBAI_ACTOR_DEVELOPER));\n \n                         currentFragment \u003d DatabaseToolsFragment.newInstance(position);\n                         break;\n \n                     case CWP_SUB_APP_DEVELOPER_LOG_TOOLS:\n                         developerPlatform \u003d new com.bitdubai.sub_app.developer.fragment.Platform();\n-                         developerPlatform.setErrorManager((ErrorManager) platformContext.getAddon(Addons.ERROR_MANAGER));\n-                        developerPlatform.setToolManager((ToolManager) platformContext.getPlugin(Plugins.BITDUBAI_ACTOR_DEVELOPER));\n+                         developerPlatform.setErrorManager((ErrorManager) ApplicationSession.getFermatPlatform().getCorePlatformContext().getAddon(Addons.ERROR_MANAGER));\n+                        developerPlatform.setToolManager((ToolManager) ApplicationSession.getFermatPlatform().getCorePlatformContext().getPlugin(Plugins.BITDUBAI_ACTOR_DEVELOPER));\n                         currentFragment \u003d LogToolsFragment.newInstance(0);\n                         break;\n \n@@ -704,34 +682,34 @@ public int getCount() {\n \n                     case CWP_WALLET_RUNTIME_WALLET_BITCOIN_ALL_BITDUBAI_BALANCE:\n                         bitcoinPlatform \u003d new com.bitdubai.reference_niche_wallet.bitcoin_wallet.Platform();\n-                        bitcoinPlatform.setNicheWalletTypeCryptoWalletManager((CryptoWalletManager) platformContext.getPlugin(Plugins.BITDUBAI_CRYPTO_WALLET_NICHE_WALLET_TYPE));\n-                        bitcoinPlatform.setErrorManager((ErrorManager)platformContext.getAddon(Addons.ERROR_MANAGER));\n+                        bitcoinPlatform.setNicheWalletTypeCryptoWalletManager((CryptoWalletManager) ApplicationSession.getFermatPlatform().getCorePlatformContext().getPlugin(Plugins.BITDUBAI_CRYPTO_WALLET_NICHE_WALLET_TYPE));\n+                        bitcoinPlatform.setErrorManager((ErrorManager)ApplicationSession.getFermatPlatform().getCorePlatformContext().getAddon(Addons.ERROR_MANAGER));\n                         currentFragment \u003d  BalanceFragment.newInstance(0);\n                         break;\n                     case CWP_WALLET_RUNTIME_WALLET_BITCOIN_ALL_BITDUBAI_RECEIVE:\n                         bitcoinPlatform \u003d new com.bitdubai.reference_niche_wallet.bitcoin_wallet.Platform();\n-                        bitcoinPlatform.setNicheWalletTypeCryptoWalletManager((CryptoWalletManager) platformContext.getPlugin(Plugins.BITDUBAI_CRYPTO_WALLET_NICHE_WALLET_TYPE));\n-                        bitcoinPlatform.setErrorManager((ErrorManager) platformContext.getAddon(Addons.ERROR_MANAGER));\n+                        bitcoinPlatform.setNicheWalletTypeCryptoWalletManager((CryptoWalletManager) ApplicationSession.getFermatPlatform().getCorePlatformContext().getPlugin(Plugins.BITDUBAI_CRYPTO_WALLET_NICHE_WALLET_TYPE));\n+                        bitcoinPlatform.setErrorManager((ErrorManager) ApplicationSession.getFermatPlatform().getCorePlatformContext().getAddon(Addons.ERROR_MANAGER));\n                         currentFragment \u003d ReceiveFragment.newInstance(0);\n                         break;\n                     case CWP_WALLET_RUNTIME_WALLET_BITCOIN_ALL_BITDUBAI_SEND:\n                         bitcoinPlatform \u003d new com.bitdubai.reference_niche_wallet.bitcoin_wallet.Platform();\n-                        bitcoinPlatform.setNicheWalletTypeCryptoWalletManager((CryptoWalletManager) platformContext.getPlugin(Plugins.BITDUBAI_CRYPTO_WALLET_NICHE_WALLET_TYPE));\n-                        bitcoinPlatform.setErrorManager((ErrorManager) platformContext.getAddon(Addons.ERROR_MANAGER));\n+                        bitcoinPlatform.setNicheWalletTypeCryptoWalletManager((CryptoWalletManager) ApplicationSession.getFermatPlatform().getCorePlatformContext().getPlugin(Plugins.BITDUBAI_CRYPTO_WALLET_NICHE_WALLET_TYPE));\n+                        bitcoinPlatform.setErrorManager((ErrorManager) ApplicationSession.getFermatPlatform().getCorePlatformContext().getAddon(Addons.ERROR_MANAGER));\n                         currentFragment \u003d  SendFragment.newInstance(0);\n                         break;\n \n                     case CWP_WALLET_RUNTIME_WALLET_BITCOIN_ALL_BITDUBAI_TRANSACTIONS:\n                         bitcoinPlatform \u003d new com.bitdubai.reference_niche_wallet.bitcoin_wallet.Platform();\n-                        bitcoinPlatform.setNicheWalletTypeCryptoWalletManager((CryptoWalletManager) platformContext.getPlugin(Plugins.BITDUBAI_CRYPTO_WALLET_NICHE_WALLET_TYPE));\n-                        bitcoinPlatform.setErrorManager((ErrorManager) platformContext.getAddon(Addons.ERROR_MANAGER));\n+                        bitcoinPlatform.setNicheWalletTypeCryptoWalletManager((CryptoWalletManager) ApplicationSession.getFermatPlatform().getCorePlatformContext().getPlugin(Plugins.BITDUBAI_CRYPTO_WALLET_NICHE_WALLET_TYPE));\n+                        bitcoinPlatform.setErrorManager((ErrorManager) ApplicationSession.getFermatPlatform().getCorePlatformContext().getAddon(Addons.ERROR_MANAGER));\n                         currentFragment \u003d  TransactionsFragment.newInstance(0);\n \n                         break;\n                     case CWP_WALLET_RUNTIME_WALLET_BITCOIN_ALL_BITDUBAI_CONTACTS:\n                         bitcoinPlatform \u003d new com.bitdubai.reference_niche_wallet.bitcoin_wallet.Platform();\n-                        bitcoinPlatform.setNicheWalletTypeCryptoWalletManager((CryptoWalletManager) platformContext.getPlugin(Plugins.BITDUBAI_CRYPTO_WALLET_NICHE_WALLET_TYPE));\n-                        bitcoinPlatform.setErrorManager((ErrorManager) platformContext.getAddon(Addons.ERROR_MANAGER));\n+                        bitcoinPlatform.setNicheWalletTypeCryptoWalletManager((CryptoWalletManager) ApplicationSession.getFermatPlatform().getCorePlatformContext().getPlugin(Plugins.BITDUBAI_CRYPTO_WALLET_NICHE_WALLET_TYPE));\n+                        bitcoinPlatform.setErrorManager((ErrorManager) ApplicationSession.getFermatPlatform().getCorePlatformContext().getAddon(Addons.ERROR_MANAGER));\n                         currentFragment \u003d  ContactsFragment.newInstance(0);\n                         break;\n \n@@ -742,7 +720,7 @@ public int getCount() {\n             }\n             catch(Exception ex)\n             {\n-                errorManager.reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, ex);\n+                ApplicationSession.getErrorManager().reportUnexpectedPlatformException(PlatformComponents.PLATFORM, UnexpectedPlatformExceptionSeverity.DISABLES_ONE_PLUGIN, ex);\n \n                 Toast.makeText(getApplicationContext(), \"Error in PagerAdapter GetItem \" + ex.getMessage(),\n                         Toast.LENGTH_LONG).show();"
        }
      ]
    }
  },
  {
    "name": "Type checker: Null pointer error when type checking the \u0027is\u0027 expression",
    "url": "https://github.com/overturetool/overture/issues/504",
    "description": "If you type check the model below it produces a NPE in the type checker.\n\nThe stacktrace is:\n\n```\nava.lang.NullPointerException\n    at org.overture.typechecker.visitor.QualificationVisitor.caseAIsExp(QualificationVisitor.java:67)\n    at org.overture.typechecker.visitor.QualificationVisitor.caseAIsExp(QualificationVisitor.java:43)\n    at org.overture.ast.expressions.AIsExp.apply(AIsExp.java:387)\n    at org.overture.typechecker.visitor.TypeCheckerExpVisitor.caseAAndBooleanBinaryExp(TypeCheckerExpVisitor.java:260)\n    at org.overture.typechecker.visitor.TypeCheckerExpVisitor.caseAAndBooleanBinaryExp(TypeCheckerExpVisitor.java:92)\n    at org.overture.ast.expressions.AAndBooleanBinaryExp.apply(AAndBooleanBinaryExp.java:243)\n    at org.overture.typechecker.visitor.TypeCheckVisitor.defaultPExp(TypeCheckVisitor.java:101)\n    at org.overture.typechecker.visitor.TypeCheckVisitor.defaultPExp(TypeCheckVisitor.java:43)\n    at org.overture.ast.analysis.QuestionAnswerAdaptor.defaultSBinaryExp(QuestionAnswerAdaptor.java:654)\n    at org.overture.ast.analysis.QuestionAnswerAdaptor.defaultSBooleanBinaryExp(QuestionAnswerAdaptor.java:1344)\n    at org.overture.ast.analysis.QuestionAnswerAdaptor.caseAAndBooleanBinaryExp(QuestionAnswerAdaptor.java:1544)\n    at org.overture.ast.expressions.AAndBooleanBinaryExp.apply(AAndBooleanBinaryExp.java:243)\n    at org.overture.typechecker.visitor.TypeCheckerExpVisitor.binaryCheck(TypeCheckerExpVisitor.java:3639)\n    at org.overture.typechecker.visitor.TypeCheckerExpVisitor.defaultSBooleanBinaryExp(TypeCheckerExpVisitor.java:251)\n    at org.overture.typechecker.visitor.TypeCheckerExpVisitor.caseAAndBooleanBinaryExp(TypeCheckerExpVisitor.java:267)\n    at org.overture.typechecker.visitor.TypeCheckerExpVisitor.caseAAndBooleanBinaryExp(TypeCheckerExpVisitor.java:92)\n    at org.overture.ast.expressions.AAndBooleanBinaryExp.apply(AAndBooleanBinaryExp.java:243)\n    at org.overture.typechecker.visitor.TypeCheckVisitor.defaultPExp(TypeCheckVisitor.java:101)\n    at org.overture.typechecker.visitor.TypeCheckVisitor.defaultPExp(TypeCheckVisitor.java:43)\n    at org.overture.ast.analysis.QuestionAnswerAdaptor.defaultSBinaryExp(QuestionAnswerAdaptor.java:654)\n    at org.overture.ast.analysis.QuestionAnswerAdaptor.defaultSBooleanBinaryExp(QuestionAnswerAdaptor.java:1344)\n    at org.overture.ast.analysis.QuestionAnswerAdaptor.caseAAndBooleanBinaryExp(QuestionAnswerAdaptor.java:1544)\n    at org.overture.ast.expressions.AAndBooleanBinaryExp.apply(AAndBooleanBinaryExp.java:243)\n    at org.overture.typechecker.visitor.TypeCheckerDefinitionVisitor.caseAExplicitFunctionDefinition(TypeCheckerDefinitionVisitor.java:358)\n    at org.overture.typechecker.visitor.TypeCheckerDefinitionVisitor.caseAExplicitFunctionDefinition(TypeCheckerDefinitionVisitor.java:107)\n    at org.overture.ast.definitions.AExplicitFunctionDefinition.apply(AExplicitFunctionDefinition.java:531)\n    at org.overture.typechecker.visitor.TypeCheckVisitor.defaultPDefinition(TypeCheckVisitor.java:108)\n    at org.overture.typechecker.visitor.TypeCheckVisitor.defaultPDefinition(TypeCheckVisitor.java:43)\n    at org.overture.ast.analysis.QuestionAnswerAdaptor.defaultSFunctionDefinition(QuestionAnswerAdaptor.java:2634)\n    at org.overture.ast.analysis.QuestionAnswerAdaptor.caseAExplicitFunctionDefinition(QuestionAnswerAdaptor.java:2794)\n    at org.overture.ast.definitions.AExplicitFunctionDefinition.apply(AExplicitFunctionDefinition.java:531)\n    at org.overture.typechecker.ModuleTypeChecker.typeCheck(ModuleTypeChecker.java:235)\n    at org.overture.ide.builders.vdmj.BuilderSl.typeCheck(BuilderSl.java:97)\n    at org.overture.ide.builders.vdmj.VdmjBuilder.buildModel(VdmjBuilder.java:46)\n    at org.overture.ide.builders.vdmj.BuilderSl.buildModel(BuilderSl.java:76)\n    at org.overture.ide.core.builder.AbstractVdmBuilder.buildModel(AbstractVdmBuilder.java:42)\n    at org.overture.ide.core.builder.SafeBuilder$1.run(SafeBuilder.java:105)\n    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)\n    at org.overture.ide.core.builder.SafeBuilder.run(SafeBuilder.java:137)\n```\n\n```\nmodule Test\nexports all\ndefinitions \n\ntypes \nSort \u003d \u003cAgent\u003e | \u003cNumber\u003e | \u003cSeqNumber\u003e | \u003cPublicKey\u003e | \u003cSymmetricKey\u003e | \u003cFunction\u003e | \u003cPurpose\u003e | \u003cUntyped\u003e | \u003cCertified\u003e | \u003cProtocol\u003e;\n\nType \u003d BaseType | CatType; -- | FunType; perhaps\n\nBaseType :: \nsort: Sort\nparametric: bool\n-- only these can be parametric\n-- TODO: not true? \u003cFunction\u003e, and \u003cKeys\u003e can also be parametric by agent\n--inv mk_BaseType(s, p) \u003d\u003d p \u003d\u003e s in set { \u003cNumber\u003e, \u003cAgent\u003e, \u003cSeqNumber\u003e };\ninv mk_BaseType(s, p) \u003d\u003d p \u003d\u003e s in set { \u003cAgent\u003e, \u003cNumber\u003e, \u003cSeqNumber\u003e, \u003cPublicKey\u003e, \u003cSymmetricKey\u003e, \u003cFunction\u003e }; \n\n-- KPS results could be partial when kps_Id is still parametric\nKPSResult \u003d \u003cSuccess\u003e | \u003cPartial\u003e | \u003cFailure\u003e;\n\nCatType ::\ntyps: seq1 of Type;\n\nfunctions \n\nhas_sort: [Type] * Sort -\u003e bool\nhas_sort(x, s) \u003d\u003d x \u003c\u003e nil and is_BasicType(x) and t(x).sort \u003d s;\n\nend Test\n```\n",
    "keywords": [
      "safebuilder",
      "builders",
      "ast",
      "aandbooleanbinaryexp",
      "run",
      "type",
      "org overture",
      "ide builders",
      "definitions",
      "java:243",
      "--",
      "\u003d\u003d",
      "typecheckvisitor",
      "caseaexplicitfunctiondefinition",
      "aexplicitfunctiondefinition",
      "analysis questionansweradaptor",
      "sort",
      "ide",
      "overture typechecker",
      "\u003cseqnumber\u003e",
      "analysis",
      "expressions",
      "caseaandbooleanbinaryexp",
      "core",
      "buildersl",
      "visitor",
      "defaultsbooleanbinaryexp",
      "buildmodel",
      "\u003cagent\u003e",
      "visitor typecheckerexpvisitor",
      "parametric",
      "\u003cnumber\u003e",
      "overture",
      "java:43",
      "typechecker visitor",
      "visitor typecheckvisitor",
      "builder",
      "questionansweradaptor",
      "org",
      "apply",
      "typechecker",
      "overture ast",
      "typecheckerexpvisitor",
      "ast analysis",
      "qualificationvisitor",
      "defaultpexp",
      "p",
      "s",
      "x",
      "vdmj",
      "|",
      "typecheckerdefinitionvisitor",
      "\u003cfunction\u003e"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/overturetool/overture/commit/b497e532f9567177c0c6d19ddd94595aaf866b12",
      "files": [
        {
          "file_name": "core/typechecker/src/main/java/org/overture/typechecker/visitor/QualificationVisitor.java",
          "patch": "@@ -64,7 +64,11 @@\n \t\t\t\t\tif (node.getTypedef() \u003d\u003d null)\n \t\t\t\t\t{\n \t\t\t\t\t\tPDefinition typedef \u003d question.env.findType(node.getTypeName(), node.getLocation().getModule());\n-\t\t\t\t\t\tnode.setTypedef(typedef.clone());\n+\t\t\t\t\t\t\n+\t\t\t\t\t\tif (typedef !\u003d null)\n+\t\t\t\t\t\t{\n+\t\t\t\t\t\t\tnode.setTypedef(typedef.clone());\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n \n \t\t\t\t\tif (node.getTypedef() !\u003d null)"
        }
      ]
    }
  },
  {
    "name": "Null pointer exception on selectedUnitActions.length",
    "url": "https://github.com/IMP1/turn-based-tactics/issues/30",
    "description": "It was in `drawActionWheel`. I had moved one unit (the helicopter) and while it was moving i selected another and selected a place to bring up the action wheel. Does the helicopter change `selectedUnitActions` to null when it gets to its destination?\nIf so, check that the selected unit it itself beforehand.\n",
    "keywords": [
      "selected"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/IMP1/turn-based-tactics/commit/cfd9342e8b34207bdea52740f19a65f4137de5a9",
      "files": [
        {
          "file_name": "src/scn/Battle.java",
          "patch": "@@ -238,9 +238,6 @@ public void update(double dt) {\n \t\tif (playingMovementAnimation) {\n \t\t\tmovingUnit.getOwner().updateVisibility(map); // TODO move this into unit\n \t\t\tif (!movingUnit.isMoving()) {\n-\t\t\t\tif (movingUnit !\u003d selectedUnit) {\n-\t\t\t\t\tselectUnit(selectedUnit); // reselect the selected unit.\n-\t\t\t\t} else { selectUnit(null); }\n \t\t\t\tmovingUnit \u003d null;\n \t\t\t\tplayingMovementAnimation \u003d false;\n \t\t\t\tif (postMoveAction !\u003d null) {"
        }
      ]
    }
  },
  {
    "name": "Null Pointer Exception in getElapsedTimeString",
    "url": "https://github.com/jenkinsci/testrail-plugin/issues/7",
    "description": "If any of the Automation script fails. TestRail plugin fails to execute Post Build step with an **Null Point Exception**.\r\n\r\n```\r\njava.lang.NullPointerException\r\n\tat org.jenkinsci.plugins.testrail.TestRailObjects.Result.getElapsedTimeString(Result.java:48)\r\n\tat org.jenkinsci.plugins.testrail.TestRailClient.addResultsForCases(TestRailClient.java:287)\r\n\tat org.jenkinsci.plugins.testrail.TestRailNotifier.perform(TestRailNotifier.java:141)\r\n\tat hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:20)\r\n\tat hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:779)\r\n\tat hudson.model.AbstractBuild$AbstractBuildExecution.performAllBuildSteps(AbstractBuild.java:720)\r\n\tat hudson.model.Build$BuildExecution.post2(Build.java:186)\r\n\tat hudson.model.AbstractBuild$AbstractBuildExecution.post(AbstractBuild.java:665)\r\n\tat hudson.model.Run.execute(Run.java:1753)\r\n\tat hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:43)\r\n\tat hudson.model.ResourceController.execute(ResourceController.java:98)\r\n\tat hudson.model.Executor.run(Executor.java:405)\r\nBuild step \u0027Notify TestRail\u0027 marked build as failure\r\n```\r\n\r\nHere\u0027s My Test Report\r\n\r\n```\r\n\u003c?xml version\u003d\u00271.0\u0027 encoding\u003d\u0027UTF-8\u0027?\u003e\r\n\u003ctestsuites name\u003d\u0027DaftUITests.xctest\u0027 tests\u003d\u002723\u0027 failures\u003d\u00272\u0027\u003e\r\n  \u003ctestsuite name\u003d\u0027DaftUITests.CaseA\u0027 tests\u003d\u00271\u0027 failures\u003d\u00270\u0027\u003e\r\n    \u003ctestcase classname\u003d\u0027DaftUITests.CaseA\u0027 name\u003d\u0027testCloseOnboardingScreen\u0027 time\u003d\u002718.968\u0027/\u003e\r\n  \u003c/testsuite\u003e\r\n  \u003ctestsuite name\u003d\u0027DaftUITests.City_County\u0027 tests\u003d\u00276\u0027 failures\u003d\u00271\u0027\u003e\r\n    \r\n    \u003ctestcase classname\u003d\u0027DaftUITests.City_County\u0027 name\u003d\u0027testSearchForm_City_County_ResetGeneralAreaOrAreas\u0027\u003e\r\n      \u003cfailure message\u003d\u0027XCTAssertTrue failed - \u0027\u003eCity_County.swift:310\u003c/failure\u003e\r\n    \u003c/testcase\u003e\r\n  \u003c/testsuite\u003e\r\n  \u003ctestsuite name\u003d\u0027DaftUITests.Price\u0027 tests\u003d\u002712\u0027 failures\u003d\u00271\u0027\u003e\r\n    \u003ctestcase classname\u003d\u0027DaftUITests.Price\u0027 name\u003d\u0027testSearchForm_Prices_RandomMin_AnyMax_Category_ToRent_Sharing_Parking\u0027\u003e\r\n      \u003cfailure message\u003d\u0027No matches found for Cell\u0027\u003ePrice.swift:373\u003c/failure\u003e\r\n    \u003c/testcase\u003e\r\n  \u003c/testsuite\u003e\r\n  \r\n\u003c/testsuites\u003e\r\n```\r\n\r\nIf I refactor the XML file without Failure cases it Posts the results on to TestRail. And mark the Tests as **UnTested**.\r\n\r\nAny help here to see the failed test cases as well on TestRail.",
    "keywords": [
      "abstractbuild",
      "org",
      "plugins",
      "perform",
      "\u003ctestcase",
      "run",
      "name\u003d\u0027daftuitests",
      "\u003c/testsuite\u003e",
      "hudson",
      "execute",
      "jenkinsci",
      "\u003ctestsuite",
      "build",
      "testrail",
      "abstractbuild$abstractbuildexecution",
      "hudson model",
      "model",
      "classname\u003d\u0027daftuitests"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/jenkinsci/testrail-plugin/commit/214780de8f6ed2766ddc44773a906032fe9d7db5",
      "files": [
        {
          "file_name": "src/main/java/org/jenkinsci/plugins/testrail/TestRailObjects/Result.java",
          "patch": "@@ -45,6 +45,14 @@ public Result(int caseId, int statusId, String comment, Float elapsed) {\n     public String getComment() { return this.comment; }\n \n     public String getElapsedTimeString() {\n-        return Math.max(1, elapsed.intValue()) + \"s\";\n+        int time;\n+\n+        if (elapsed \u003d\u003d null) {\n+            time \u003d 1;\n+        } else {\n+            time \u003d elapsed.intValue();\n+        }\n+\n+        return time + \"s\";\n     }\n }"
        }
      ]
    }
  },
  {
    "name": "Calling cancel() before request(n) causes null pointer exception",
    "url": "https://github.com/rsocket/rsocket-java/issues/132",
    "description": "While writing the TCK for reactive sockets, my TCK code found the bug mentioned above.\n\n```\nval s4 \u003d requestResponse(\"g\", \"h\")\n    s4 cancel()\n    s4 assertCanceled()\n    s4 assertNoErrors()\n    s4 assertNotCompleted()\n    s4 assertReceivedCount 0\n```\n\nThe line `s4 cancel()` causes the NPE on the client side, as it seems like the current implementation always expects request(n) to be called before cancel.\n",
    "keywords": [
      "cancel",
      "s4"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/rsocket/rsocket-java/commit/ae8937640ce3840c1f74c7e9e83843dd0383a848",
      "files": [
        {
          "file_name": "reactivesocket-core/src/main/java/io/reactivesocket/internal/Requester.java",
          "patch": "@@ -306,6 +306,7 @@ public double availability() {\n         return (Subscriber\u003c? super Payload\u003e child) -\u003e {\n             child.onSubscribe(new Subscription() {\n \n+                private boolean cancelled;\n                 final AtomicBoolean started \u003d new AtomicBoolean(false);\n                 volatile StreamInputSubscriber streamInputSubscriber;\n                 volatile UnicastSubject\u003cFrame\u003e writer;\n@@ -316,6 +317,13 @@ public double availability() {\n \n                 @Override\n                 public void request(long n) {\n+                    synchronized (this) {\n+                        if (cancelled) {\n+                            // It is ok to be cancelled here as cancellations can be happening concurrently.\n+                            return;\n+                        }\n+                    }\n+\n                     if(n \u003c\u003d 0) {\n                         return;\n                     }\n@@ -389,13 +397,25 @@ public void error(Throwable e) {\n \n                 @Override\n                 public void cancel() {\n+                    synchronized (this) {\n+                        if (cancelled) {\n+                            // Multiple cancellations.\n+                            return;\n+                        }\n+                        cancelled \u003d true;\n+                    }\n+\n                     synchronized(Requester.this) {\n                         streamInputMap.remove(streamId);\n                     }\n-                    if (!streamInputSubscriber.terminated.get()) {\n-                        writer.onNext(Frame.Cancel.from(streamId));\n+                    if (streamInputSubscriber !\u003d null) {\n+                        if (!streamInputSubscriber.terminated.get()) {\n+                            writer.onNext(Frame.Cancel.from(streamId));\n+                        }\n+                        if (null !\u003d streamInputSubscriber.parentSubscription) {\n+                            streamInputSubscriber.parentSubscription.cancel();\n+                        };\n                     }\n-                    streamInputSubscriber.parentSubscription.cancel();\n                 }\n \n             });\n@@ -418,6 +438,7 @@ public void cancel() {\n         return (Subscriber\u003c? super Payload\u003e child) -\u003e {\n             child.onSubscribe(new Subscription() {\n \n+                private boolean cancelled;\n                 AtomicBoolean started \u003d new AtomicBoolean(false);\n                 volatile StreamInputSubscriber streamInputSubscriber;\n                 volatile UnicastSubject\u003cFrame\u003e writer;\n@@ -429,6 +450,13 @@ public void cancel() {\n \n                 @Override\n                 public void request(long n) {\n+                    synchronized (this) {\n+                        if (cancelled) {\n+                            // It is ok to be cancelled here as cancellations can be happening concurrently.\n+                            return;\n+                        }\n+                    }\n+\n                     if(n \u003c\u003d 0) {\n                         return;\n                     }\n@@ -593,13 +621,23 @@ public void error(Throwable e) {\n \n                 @Override\n                 public void cancel() {\n+                    synchronized (this) {\n+                        if (cancelled) {\n+                            // Multiple cancellations.\n+                            return;\n+                        }\n+                        cancelled \u003d true;\n+                    }\n+\n                     synchronized(Requester.this) {\n                         streamInputMap.remove(streamId);\n                     }\n-                    if (!streamInputSubscriber.terminated.get()) {\n+                    if (streamInputSubscriber !\u003d null \u0026\u0026 !streamInputSubscriber.terminated.get()) {\n                         writer.onNext(Frame.Cancel.from(streamId));\n+                        if (streamInputSubscriber.parentSubscription !\u003d null) {\n+                            streamInputSubscriber.parentSubscription.cancel();\n+                        }\n                     }\n-                    streamInputSubscriber.parentSubscription.cancel();\n                     if (payloadsSubscription !\u003d null) {\n                         if (!payloadsSubscription.compareAndSet(null, EmptySubscription.INSTANCE)) {\n                             // unsubscribe it if it already exists\n@@ -625,12 +663,19 @@ public void cancel() {\n             child.onSubscribe(new Subscription() {\n \n                 final AtomicBoolean started \u003d new AtomicBoolean(false);\n+                private boolean cancelled;\n                 volatile StreamInputSubscriber streamInputSubscriber;\n-                volatile UnicastSubject\u003cFrame\u003e writer;\n \n                 @Override\n                 public void request(long n) {\n                     if (n \u003e 0 \u0026\u0026 started.compareAndSet(false, true)) {\n+                        synchronized (this) {\n+                            if (cancelled) {\n+                                // It is ok to be cancelled here as cancellations can be happening concurrently.\n+                                return;\n+                            }\n+                        }\n+\n                         // Response frames for this Stream\n                         UnicastSubject\u003cFrame\u003e transportInputSubject \u003d UnicastSubject.create();\n                         synchronized(Requester.this) {\n@@ -641,7 +686,7 @@ public void request(long n) {\n                             0,\n                             null,\n                             null,\n-                            writer,\n+                            null,\n                             child,\n                             this::cancel\n                         );\n@@ -666,7 +711,15 @@ public void error(Throwable e) {\n \n                 @Override\n                 public void cancel() {\n-                    if (!streamInputSubscriber.terminated.get()) {\n+                    synchronized (this) {\n+                        if (cancelled) {\n+                            // Multiple cancellations.\n+                            return;\n+                        }\n+                        cancelled \u003d true;\n+                    }\n+\n+                    if (streamInputSubscriber !\u003d null \u0026\u0026 !streamInputSubscriber.terminated.get()) {\n                         Frame cancelFrame \u003d Frame.Cancel.from(streamId);\n                         connection.addOutput(cancelFrame, new Completable() {\n                             @Override\n@@ -683,7 +736,9 @@ public void error(Throwable e) {\n                     synchronized(Requester.this) {\n                         streamInputMap.remove(streamId);\n                     }\n-                    streamInputSubscriber.parentSubscription.cancel();\n+                    if (streamInputSubscriber !\u003d null \u0026\u0026 streamInputSubscriber.parentSubscription !\u003d null) {\n+                        streamInputSubscriber.parentSubscription.cancel();\n+                    }\n                 }\n             });\n         };"
        },
        {
          "file_name": "reactivesocket-core/src/test/java/io/reactivesocket/internal/RequesterTest.java",
          "patch": "@@ -22,7 +22,6 @@\n \n import java.util.Arrays;\n import java.util.List;\n-import java.util.concurrent.CountDownLatch;\n import java.util.concurrent.TimeUnit;\n import java.util.function.Consumer;\n \n@@ -34,16 +33,53 @@\n import io.reactivesocket.LatchedCompletable;\n import io.reactivesocket.Payload;\n import io.reactivesocket.TestConnection;\n-import io.reactivesocket.rx.Completable;\n import io.reactivex.subscribers.TestSubscriber;\n import io.reactivex.Observable;\n import io.reactivex.subjects.ReplaySubject;\n+import org.reactivestreams.Publisher;\n+import org.reactivestreams.Subscription;\n \n public class RequesterTest\n {\n \tfinal static Consumer\u003cThrowable\u003e ERROR_HANDLER \u003d Throwable::printStackTrace;\n \n \t@Test(timeout\u003d2000)\n+    public void testReqRespCancelBeforeRequestN() throws InterruptedException {\n+        Requester p \u003d createClientRequester();\n+        testCancelBeforeRequestN(p.requestResponse(utf8EncodedPayload(\"hello\", null)));\n+    }\n+\n+    @Test(timeout\u003d2000)\n+    public void testReqSubscriptionCancelBeforeRequestN() throws InterruptedException {\n+        Requester p \u003d createClientRequester();\n+        testCancelBeforeRequestN(p.requestSubscription(utf8EncodedPayload(\"hello\", null)));\n+    }\n+\n+    @Test(timeout\u003d2000)\n+    public void testReqStreamCancelBeforeRequestN() throws InterruptedException {\n+        Requester p \u003d createClientRequester();\n+        testCancelBeforeRequestN(p.requestStream(utf8EncodedPayload(\"hello\", null)));\n+    }\n+\n+    @Test(timeout\u003d2000)\n+    public void testReqChannelCancelBeforeRequestN() throws InterruptedException {\n+        Requester p \u003d createClientRequester();\n+        testCancelBeforeRequestN(p.requestChannel(just(utf8EncodedPayload(\"hello\", null))));\n+    }\n+\n+    @Test(timeout\u003d2000)\n+    public void testReqFnFCancelBeforeRequestN() throws InterruptedException {\n+        Requester p \u003d createClientRequester();\n+        testCancelBeforeRequestN(p.fireAndForget(utf8EncodedPayload(\"hello\", null)));\n+    }\n+\n+    @Test(timeout\u003d2000)\n+    public void testReqMetaPushCancelBeforeRequestN() throws InterruptedException {\n+        Requester p \u003d createClientRequester();\n+        testCancelBeforeRequestN(p.metadataPush(utf8EncodedPayload(\"hello\", null)));\n+    }\n+\n+    @Test(timeout\u003d2000)\n     public void testRequestResponseSuccess() throws InterruptedException {\n         TestConnection conn \u003d establishConnection();\n         ReplaySubject\u003cFrame\u003e requests \u003d captureRequests(conn);\n@@ -62,12 +98,12 @@ public void testRequestResponseSuccess() throws InterruptedException {\n         assertEquals(0, one.getStreamId());// SETUP always happens on 0\n         assertEquals(\"\", byteToString(one.getData()));\n         assertEquals(FrameType.SETUP, one.getType());\n-        \n+\n         Frame two \u003d requested.get(1);\n         assertEquals(2, two.getStreamId());// need to start at 2, not 0\n         assertEquals(\"hello\", byteToString(two.getData()));\n         assertEquals(FrameType.REQUEST_RESPONSE, two.getType());\n-        \n+\n         // now emit a response to ensure the Publisher receives and completes\n         conn.toInput.send(utf8EncodedResponseFrame(2, FrameType.NEXT_COMPLETE, \"world\"));\n \n@@ -262,14 +298,37 @@ public void testRequestStreamRequestNReplenishing() {\n \n     /* **********************************************************************************************/\n \n-\tprivate TestConnection establishConnection() {\n+    private static \u003cT\u003e void testCancelBeforeRequestN(Publisher\u003cT\u003e source) {\n+        TestSubscriber\u003cT\u003e testSubscriber \u003d new CancelBeforeRequestNSubscriber\u003c\u003e();\n+        source.subscribe(testSubscriber);\n+\n+        testSubscriber.assertNoErrors();\n+        testSubscriber.assertNotComplete();\n+    }\n+\n+    private static Requester createClientRequester() throws InterruptedException {\n+        TestConnection conn \u003d establishConnection();\n+        LatchedCompletable rc \u003d new LatchedCompletable(1);\n+        Requester p \u003d Requester.createClientRequester(conn, ConnectionSetupPayload.create(\"UTF-8\", \"UTF-8\", NO_FLAGS), ERROR_HANDLER, rc);\n+        rc.await();\n+        return p;\n+    }\n+\n+\tprivate static TestConnection establishConnection() {\n \t\treturn new TestConnection();\n \t}\n \n-    private ReplaySubject\u003cFrame\u003e captureRequests(TestConnection conn) {\n+    private static ReplaySubject\u003cFrame\u003e captureRequests(TestConnection conn) {\n         ReplaySubject\u003cFrame\u003e rs \u003d ReplaySubject.create();\n         rs.forEach(i -\u003e System.out.println(\"capturedRequest \u003d\u003e \" + i));\n         conn.write.add(rs::onNext);\n         return rs;\n     }\n+\n+    private static class CancelBeforeRequestNSubscriber\u003cT\u003e extends TestSubscriber\u003cT\u003e {\n+        @Override\n+        public void onSubscribe(Subscription s) {\n+            s.cancel();\n+        }\n+    }\n }"
        }
      ]
    }
  },
  {
    "name": "ZestAssignRegexDelimiters fails with Null Pointer Exception",
    "url": "https://github.com/mozilla/zest/issues/70",
    "description": "Executing ZestAssignRegexDelimiters statement, like the one below, fails with null pointer exception.\n\n``` js\n{\n   \"prefix\": \"/DOCTYPE/\",\n   \"postfix\": \"/en/\",\n   \"location\": \"BODY\",\n   \"variableName\": \"rr\",\n   \"index\": 5,\n   \"enabled\": true,\n   \"elementType\": \"ZestAssignRegexDelimiters\"\n}\n```\n##### Result:\n\njava.lang.NullPointerExceptionjava.lang.NullPointerException\n",
    "keywords": [
      "zestassignregexdelimiters"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/mozilla/zest/commit/df72439dcde034f8d4acc36956cc837360ba9d9e",
      "files": [
        {
          "file_name": "src/main/java/org/mozilla/zest/core/v1/ZestAssignRegexDelimiters.java",
          "patch": "@@ -88,9 +88,7 @@ public String getPrefix() {\n \t */\n \tpublic void setPrefix(String prefix) {\n \t\tthis.prefix \u003d prefix;\n-\t\tif (prefix !\u003d null) {\n-\t\t\tthis.prefixPattern \u003d Pattern.compile(prefix);\n-\t\t}\n+\t\tthis.prefixPattern \u003d null;\n \t}\n \n \t/**\n@@ -109,9 +107,7 @@ public String getPostfix() {\n \t */\n \tpublic void setPostfix(String postfix) {\n \t\tthis.postfix \u003d postfix;\n-\t\tif (postfix !\u003d null) {\n-\t\t\tthis.postfixPattern \u003d Pattern.compile(postfix);\n-\t\t}\n+\t\tthis.postfixPattern \u003d null;\n \t}\n \n \t/**\n@@ -154,6 +150,8 @@ public ZestAssignRegexDelimiters deepCopy() {\n \t */\n \tprivate String getTokenValue(String str) {\n \t\tif (str !\u003d null) {\n+\t\t\tcheckPatterns();\n+\t\t\t\n \t\t\tMatcher prefixMatcher \u003d this.prefixPattern.matcher(str);\n \t\t\tif (prefixMatcher.find()) {\n \t\t\t\tint tokenStart \u003d prefixMatcher.end();\n@@ -168,6 +166,19 @@ private String getTokenValue(String str) {\n \t\treturn null;\n \t}\n \n+\t/**\n+\t * Check if the pattern are set.\n+     * They will not be set after a json deserialisation using field reflexion.\n+     */\n+\tprivate void checkPatterns() {\t\t\n+\t\tif (prefixPattern\u003d\u003dnull) {\n+\t\t\tprefixPattern \u003d Pattern.compile(prefix);\n+\t\t}\n+\t\tif (postfixPattern\u003d\u003dnull) {\n+\t\t\tpostfixPattern \u003d Pattern.compile(postfix);\n+\t\t}\n+\t}\n+\n \t\n \t@Override\n \tpublic String assign(ZestResponse response, ZestRuntime runtime) throws ZestAssignFailException {"
        },
        {
          "file_name": "src/test/java/org/mozilla/zest/test/v1/ZestAssignRegexDelimitersUnitTest.java",
          "patch": "@@ -6,10 +6,18 @@\n import static org.junit.Assert.assertEquals;\n import static org.junit.Assert.fail;\n \n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import org.apache.commons.io.IOUtils;\n import org.junit.Test;\n import org.mozilla.zest.core.v1.ZestAssignFailException;\n import org.mozilla.zest.core.v1.ZestAssignRegexDelimiters;\n+import org.mozilla.zest.core.v1.ZestJSON;\n+import org.mozilla.zest.core.v1.ZestRequest;\n import org.mozilla.zest.core.v1.ZestResponse;\n+import org.mozilla.zest.core.v1.ZestScript;\n+import org.mozilla.zest.impl.ZestBasicRunner;\n \n \n /**\n@@ -110,5 +118,26 @@ public void testExceptions() throws Exception {\n \t\t}\n \t\t\n \t}\n+\t\n+\t/**\n+\t * Method testAssignRegexDelimitersZestScript.\n+\t * Test a zest script. Uses ZestJSON and ZestBasicRunner directly as ZestActionInvoke don\u0027t use the ZestResponse now.\n+\t * @throws Exception\n+\t */\n+\t@Test\n+\tpublic void testAssignRegexDelimitersZestScript() throws Exception {\n+\t\tZestResponse resp \u003d new ZestResponse(null, \"Server: Apache-Coyote/1.1\\r\\nLocation: http://some.url.com\\r\\nExpires: Wed, 12 Jul 2017 11:26:32 GMT\", \"Body Prefix54321Postfix\", 302, 0);\n+\t\tZestRequest req \u003d new ZestRequest();\n+\t\treq.setResponse(resp);\n+\t\t\n+\t\tString zestString \u003d IOUtils.toString(getClass().getResource(\"/data/assignRegexDelimiters-script.zest\"));\n+\t\tZestScript zestScript \u003d (ZestScript) ZestJSON.fromString(zestString);\n+\t\t\n+\t\tMap\u003cString, String\u003e map \u003d new HashMap\u003c\u003e();\n+\t\tZestBasicRunner runner \u003d new ZestBasicRunner();\n+\t\tString result \u003d runner.run(zestScript, req, map);\n+\t\t\n+\t\tassertEquals (\"http://some.url.com\", result);\n+\t}\n \n }"
        },
        {
          "file_name": "src/test/resources/data/assignRegexDelimiters-script.zest",
          "patch": "@@ -0,0 +1,32 @@\n+{\n+  \"about\": \"This is a Zest script. For more details about Zest visit https://developer.mozilla.org/en-US/docs/Zest\",\n+  \"zestVersion\": \"0.3\",\n+  \"title\": \"Simple test script\",\n+  \"description\": \"\",\n+  \"prefix\": \"\",\n+  \"type\": \"StandAlone\",\n+  \"parameters\": {\n+    \"tokenStart\": \"{{\",\n+    \"tokenEnd\": \"}}\",\n+    \"tokens\": {},\n+    \"elementType\": \"ZestVariables\"\n+  },\n+  \"statements\": [\n+    {      \n+      \"variableName\": \"test\",\n+      \"index\": 1,\n+      \"elementType\": \"ZestAssignRegexDelimiters\",\n+      \"postfix\": \"[\\r\\n]+\",\n+      \"prefix\": \"Location: \",\n+      \"location\": \"HEAD\"\n+    },\n+    {\n+      \"value\": \"{{test}}\",\n+      \"index\": 2,\n+      \"elementType\": \"ZestControlReturn\"\n+    }\n+  ],\n+  \"authentication\": [],\n+  \"index\": 0,\n+  \"elementType\": \"ZestScript\"\n+}\n\\ No newline at end of file"
        }
      ]
    }
  },
  {
    "name": "Null pointer exception with malformed pattern binds",
    "url": "https://github.com/overturetool/overture/issues/572",
    "description": "While looking at RM36, I found that the following spec raises a null pointer exception:\n\n```\noperations\n    op: nat \u003d\u003d\u003e nat\n    op(n) \u003d\u003d\n        for s in set [1,2,3] in [4,5,6] do skip;   -- NB. set is actually a sequence\n```\n\nIt\u0027s a simple bug in the type chedk of pattern binds.\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/overturetool/overture/commit/fd2c4f29f613b53945bc9ef96962d74a6ebf7d1f",
      "files": [
        {
          "file_name": "core/typechecker/src/main/java/org/overture/typechecker/visitor/TypeCheckerOthersVisitor.java",
          "patch": "@@ -114,11 +114,21 @@ public PType caseADefPatternBind(ADefPatternBind node,\n \t\t\t} else\n \t\t\t{\n \t\t\t\tASetBind setbind \u003d (ASetBind) node.getBind();\n-\t\t\t\tASetType settype \u003d question.assistantFactory.createPTypeAssistant().getSet(setbind.getSet().apply(THIS, question));\n-\t\t\t\tif (!question.assistantFactory.getTypeComparator().compatible(type, settype.getSetof()))\n+\t\t\t\tPType bindtype \u003d setbind.getSet().apply(THIS, question);\n+\t\t\t\t\n+\t\t\t\tif (!question.assistantFactory.createPTypeAssistant().isSet(bindtype))\n \t\t\t\t{\n \t\t\t\t\tTypeCheckerErrors.report(3199, \"Set bind not compatible with expression\", node.getBind().getLocation(), node.getBind());\n-\t\t\t\t\tTypeCheckerErrors.detail2(\"Bind\", settype.getSetof(), \"Exp\", type);\n+\t\t\t\t}\n+\t\t\t\telse\n+\t\t\t\t{\n+    \t\t\t\tASetType settype \u003d question.assistantFactory.createPTypeAssistant().getSet(bindtype);\n+    \t\t\t\t\n+    \t\t\t\tif (!question.assistantFactory.getTypeComparator().compatible(type, settype.getSetof()))\n+    \t\t\t\t{\n+    \t\t\t\t\tTypeCheckerErrors.report(3199, \"Set bind not compatible with expression\", node.getBind().getLocation(), node.getBind());\n+    \t\t\t\t\tTypeCheckerErrors.detail2(\"Bind\", settype.getSetof(), \"Exp\", type);\n+    \t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n "
        }
      ]
    }
  },
  {
    "name": "Fatal Exception: Null Pointer When Returning To a Queued Episode",
    "url": "https://github.com/MythTV-Clients/MythtvPlayerForAndroid/issues/20",
    "description": "To Duplicate:\n\n```\nBegin queuing\nExit the episode back to Watch Recordings\nPress title of queued episode\nPress episode, exception fires\nUnfortunately... message pops up\n```\n\nRunning on 4.0.4 and commit 0f46908\n\n```\n03-29 21:53:56.370  16083-16083/org.mythtv.android E/AndroidRuntime FATAL EXCEPTION: main\n    java.lang.NullPointerException\n            at org.mythtv.android.player.recordings.RecordingDetailsFragment.onLoadFinished(RecordingDetailsFragment.java:84)\n            at org.mythtv.android.player.recordings.RecordingDetailsFragment.onLoadFinished(RecordingDetailsFragment.java:45)\n            at android.app.LoaderManagerImpl$LoaderInfo.callOnLoadFinished(LoaderManager.java:438)\n            at android.app.LoaderManagerImpl$LoaderInfo.onLoadComplete(LoaderManager.java:406)\n            at android.content.Loader.deliverResult(Loader.java:125)\n            at android.content.CursorLoader.deliverResult(CursorLoader.java:88)\n            at android.content.CursorLoader.deliverResult(CursorLoader.java:42)\n            at android.content.AsyncTaskLoader.dispatchOnLoadComplete(AsyncTaskLoader.java:236)\n            at android.content.AsyncTaskLoader$LoadTask.onPostExecute(AsyncTaskLoader.java:76)\n            at android.os.AsyncTask.finish(AsyncTask.java:602)\n            at android.os.AsyncTask.access$600(AsyncTask.java:156)\n            at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)\n            at android.os.Handler.dispatchMessage(Handler.java:99)\n            at android.os.Looper.loop(Looper.java:137)\n            at android.app.ActivityThread.main(ActivityThread.java:4507)\n            at java.lang.reflect.Method.invokeNative(Native Method)\n            at java.lang.reflect.Method.invoke(Method.java:511)\n            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:978)\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:745)\n            at dalvik.system.NativeStart.main(Native Method)\n```\n",
    "keywords": [
      "app",
      "exception",
      "cursorloader",
      "android os",
      "os",
      "asynctask",
      "method",
      "android",
      "main",
      "episode",
      "content",
      "asynctaskloader",
      "java",
      "recordings",
      "deliverresult",
      "lang",
      "mythtv",
      "recordingdetailsfragment",
      "zygoteinit"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/MythTV-Clients/MythtvPlayerForAndroid/commit/12a51f994bc07811a2c110bf449514aa38cfda7f",
      "files": [
        {
          "file_name": "mobile/src/main/res/layout-w820dp/fragment_recording_details.xml",
          "patch": "@@ -72,14 +72,22 @@\n                     android:layout_toRightOf\u003d\"@+id/recording_coverart\"\n                     android:layout_toEndOf\u003d\"@+id/recording_coverart\" /\u003e\n \n-                \u003cTextView\n-                    android:id\u003d\"@+id/hls_percent_complete\"\n-                    android:layout_margin\u003d\"@dimen/margin\"\n-                    android:layout_width\u003d\"wrap_content\"\n+                \u003cProgressBar\n+                    android:id\u003d\"@+id/recording_progress\"\n+                    android:layout_width\u003d\"match_parent\"\n                     android:layout_height\u003d\"wrap_content\"\n-                    android:textColor\u003d\"@android:color/white\"\n-                    android:layout_alignParentEnd\u003d\"true\"\n-                    android:layout_alignParentRight\u003d\"true\" /\u003e\n+                    style\u003d\"?android:attr/progressBarStyleHorizontal\"\n+                    android:layout_below\u003d\"@+id/recording_start_time\"\n+                    android:layout_toRightOf\u003d\"@+id/recording_coverart\"\n+                    android:layout_toEndOf\u003d\"@+id/recording_coverart\"\n+                    android:indeterminate\u003d\"true\"\n+                    android:minHeight\u003d\"10dp\"\n+                    android:maxHeight\u003d\"10dp\"\n+                    android:minWidth\u003d\"100dp\"\n+                    android:maxWidth\u003d\"100dp\"\n+                    android:progress\u003d\"0\"\n+                    android:max\u003d\"100\"\n+                    android:visibility\u003d\"gone\" /\u003e\n \n             \u003c/RelativeLayout\u003e\n "
        },
        {
          "file_name": "mobile/src/main/res/layout/fragment_recording_details.xml",
          "patch": "@@ -92,15 +92,6 @@\n                     android:max\u003d\"100\"\n                     android:visibility\u003d\"gone\" /\u003e\n \n-                \u003cTextView\n-                    android:id\u003d\"@+id/hls_percent_complete\"\n-                    android:layout_margin\u003d\"@dimen/margin\"\n-                    android:layout_width\u003d\"wrap_content\"\n-                    android:layout_height\u003d\"wrap_content\"\n-                    android:textColor\u003d\"@android:color/white\"\n-                    android:layout_alignParentEnd\u003d\"true\"\n-                    android:layout_alignParentRight\u003d\"true\" /\u003e\n-\n             \u003c/RelativeLayout\u003e\n \n             \u003cTextView"
        }
      ]
    }
  },
  {
    "name": "Null pointer in the shutdown thread",
    "url": "https://github.com/Dragovorn/dragon-bot-twitch/issues/19",
    "description": "this is caused by premature shutdown, makes it impossible to close the bot.  \r\nAttempt to close the bot while it\u0027s loading plugins.",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/Dragovorn/dragon-bot-twitch/commit/8a38482844ad425946a26a5e38291a3c63f1b8bd",
      "files": [
        {
          "file_name": "src/main/java/com/dragovorn/dragonbot/bot/DragonBot.java",
          "patch": "@@ -187,7 +187,6 @@ public DragonBot() throws Exception {\n             }\n \n             executorService.shutdown();\n-\n             executorService.awaitTermination(Long.MAX_VALUE, TimeUnit.NANOSECONDS);\n         }\n \n@@ -271,14 +270,19 @@ public void start() throws Exception {\n \n         getLogger().info(\"Enabling \" + this.plugins.size() + \" \" + (this.plugins.size() \u003d\u003d 1 ? \"plugin\" : \"plugins\") +\"...\");\n \n+        ExecutorService executorService \u003d Executors.newCachedThreadPool();\n+\n         this.plugins.forEach(plugin -\u003e {\n             getLogger().info(\"Enabling \" + plugin.getInfo().getName() + \"...\");\n \n-            plugin.onEnable();\n+            executorService.execute(plugin::onEnable);\n \n             getLogger().info(\"Enabled \" + plugin.getInfo().getName() + \" v\" + plugin.getInfo().getVersion() + \"!\");\n         });\n \n+        executorService.shutdown();\n+        executorService.awaitTermination(Long.MAX_VALUE, TimeUnit.NANOSECONDS);\n+\n         getLogger().info(this.plugins.size() + \" plugins enabled!\");\n \n         if (!this.name.equals(\"\") \u0026\u0026 !this.config.getAuth().equals(\"\")) {\n@@ -316,17 +320,24 @@ public void run() {\n \n                 leaveChannel();\n \n-                getLogger().info(\"Disabling plugins...\");\n+                getLogger().info(\"Disabling \" + plugins.size() + \" \" + (plugins.size() \u003d\u003d 1 ? \"plugin\" : \"plugins\") + \"...\");\n \n                 if (plugins !\u003d null) {\n-                    for (BotPlugin plugin : plugins) {\n-                        if (plugin \u003d\u003d null) {\n-                            continue;\n-                        }\n+                    ExecutorService executorService \u003d Executors.newCachedThreadPool();\n \n+                    plugins.forEach(plugin -\u003e {\n                         getLogger().info(\"Disabling \" + plugin.getInfo().getName() + \" \" + plugin.getInfo().getVersion() + \"!\");\n-                        plugin.onDisable();\n+\n+                        executorService.execute(plugin::onDisable);\n+\n                         getLogger().info(plugin.getInfo().getName() + \" \" + plugin.getInfo().getVersion() + \" disabled!\");\n+                    });\n+\n+                    executorService.shutdown();\n+                    try {\n+                        executorService.awaitTermination(Long.MAX_VALUE, TimeUnit.NANOSECONDS);\n+                    } catch (InterruptedException exception) {\n+                        exception.printStackTrace();\n                     }\n                 }\n "
        }
      ]
    }
  },
  {
    "name": "Coverage tool: Null Pointer Exception with inner enum.",
    "url": "https://github.com/jmockit/jmockit1/issues/331",
    "description": "I use JMockit 1.27 for code coverage\nJava 1.8.92\nTestNG 6.9.12\nGuava 19.0.\n\n```\nprivate static final String URL_TO_LOGO_IMAGE \u003d \"http://test.example.com/logo.jpg\";\n\n@Test\npublic void testInitialization() {\n    List\u003cPair\u003cImage.DimensionType, String\u003e\u003e dimensions \u003d Lists.newArrayList();\n    Pair\u003cImage.DimensionType, String\u003e pairL \u003d new ImmutablePair\u003c\u003e(DimensionType.LARGE,\n            URL_TO_LOGO_IMAGE);\n    dimensions.add(pairL);\n    Image image \u003d new Image.ImageBuilder().withDimensions(dimensions).build();\n    assertSame(URL_TO_LOGO_IMAGE, image.getDimensionsMap().get(DimensionType.LARGE));\n}\n```\n\nIn console prints following error\n\n\u003e Gradle suite \u003e Gradle test \u003e com.example.ImageTest.testInitialization FAILED\n\u003e java.lang.NullPointerException\n\u003e   at java.util.EnumMap.\u003cinit\u003e(EnumMap.java:139)\n\u003e   at com.example.Image$ImageBuilder.withDimensions(Image.java:76)\n\u003e   at com.example.ImageTest.testInitialization(ImageTest.java:23)\n\u003e   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\u003e   at java.lang.reflect.Method.invoke(Method.java:498)\n\u003e   at org.gradle.api.internal.tasks.testing.testng.TestNGTestClassProcessor.runTests(TestNGTestClassProcessor.java:133)\n\u003e   at org.gradle.api.internal.tasks.testing.testng.TestNGTestClassProcessor.stop(TestNGTestClassProcessor.java:83)\n\u003e   at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61)\n\u003e   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\u003e   at java.lang.reflect.Method.invoke(Method.java:498)\n\u003e   at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\n\u003e   at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n\u003e   at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)\n\u003e   at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)\n\u003e   at org.gradle.api.internal.tasks.testing.worker.TestWorker.stop(TestWorker.java:120)\n\u003e   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\u003e   at java.lang.reflect.Method.invoke(Method.java:498)\n\u003e   at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\n\u003e   at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n\u003e   at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:377)\n\u003e   at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:54)\n\u003e   at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:40)\n\u003e   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n\u003e   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n\u003e   at java.lang.Thread.run(Thread.java:745)\n\u003e JMockit: Coverage report written to D:\\work\\Idea\\myproject\\build\\reports\\coverage\n\n**Issue is reproduced with this example project [myproject.zip](https://github.com/jmockit/jmockit1/files/459147/myproject.zip)**\n\nTest successfully runs if extract enum as normal (not inner) java class.\nAlso test success when code coverage tool is off.\n\nThank you,\nAlex\n",
    "keywords": [
      "com",
      "threadpoolexecutor",
      "internal",
      "dispatch",
      "concurrent",
      "invoke",
      "run",
      "sun",
      "example",
      "testngtestclassprocessor",
      "reflect",
      "java",
      "native",
      "reflectiondispatch dispatch",
      "imagetest",
      "api",
      "lang",
      "tasks",
      "url_to_logo_image",
      "coverage",
      "image",
      "internal dispatch",
      "method",
      "test",
      "org",
      "testing",
      "org gradle",
      "invoke0",
      "nativemethodaccessorimpl",
      "dimensiontype",
      "gradle",
      "stop",
      "util",
      "testinitialization",
      ";",
      "testng",
      "java:498",
      "reflectiondispatch",
      "\u003e",
      "dimensions"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/jmockit/jmockit1/commit/fdc3969fa4b8c57dd2faf36ddbdff4afd310d927",
      "files": [
        {
          "file_name": "coverageTests/src/integrationTests/ClassWithNestedEnum.java",
          "patch": "@@ -0,0 +1,12 @@\n+package integrationTests;\n+\n+final class ClassWithNestedEnum\n+{\n+   enum NestedEnum {ELEM}\n+\n+   static final class NestedClass\n+   {\n+      static void useEnumFromOuterClass() { NestedEnum.values(); }\n+      @SuppressWarnings(\"unused\") ClassWithNestedEnum getOuter() { return null; }\n+   }\n+}"
        },
        {
          "file_name": "coverageTests/test/integrationTests/ClassWithNestedEnumTest.java",
          "patch": "@@ -0,0 +1,16 @@\n+/*\n+ * Copyright (c) 2006 Rogrio Liesenfeld\n+ * This file is subject to the terms of the MIT license (see LICENSE.txt).\n+ */\n+package integrationTests;\n+\n+import org.junit.*;\n+\n+public final class ClassWithNestedEnumTest\n+{\n+   @Test\n+   public void useNestedEnumFromNestedClass()\n+   {\n+      ClassWithNestedEnum.NestedClass.useEnumFromOuterClass();\n+   }\n+}\n\\ No newline at end of file"
        },
        {
          "file_name": "main/src/mockit/coverage/paths/MethodCoverageData.java",
          "patch": "@@ -32,6 +32,7 @@ public MethodCoverageData()\n       nonShadowedPaths \u003d Collections.emptyList();\n       nodesReached \u003d new ThreadLocal\u003cList\u003cNode\u003e\u003e();\n       previousNodeIndex \u003d new ThreadLocal\u003cInteger\u003e();\n+      clearNodes();\n    }\n \n    public void buildPaths(int lastExecutableLine, @Nonnull NodeBuilder nodeBuilder)"
        }
      ]
    }
  },
  {
    "name": "Fix null pointer exception for empty slot deletion",
    "url": "https://github.com/wso2/andes/pull/274",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/wso2/andes/commit/4150941ff00dd4bd7f91ab31ece875adfc509416",
      "files": [
        {
          "file_name": "modules/andes-core/broker/src/main/java/org/wso2/andes/kernel/slot/SlotDeliveryWorker.java",
          "patch": "@@ -183,7 +183,7 @@ public void run() {\n                                             currentSlot.getDestinationOfMessagesInSlot());\n                                 } else {\n                                     currentSlot.setSlotInActive();\n-                                    deleteSlot(currentSlot);\n+                                    SlotDeletionExecutor.getInstance().executeSlotDeletion(currentSlot);\n                                 }\n                             }\n "
        }
      ]
    }
  },
  {
    "name": "Using the oomKillDisable flag throws a null pointer exception.",
    "url": "https://github.com/docker-java/docker-java/pull/287",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/docker-java/docker-java/commit/4887df03f30544e0f1e224dba5e6a641b239e9ab",
      "files": [
        {
          "file_name": "src/main/java/com/github/dockerjava/core/command/CreateContainerCmdImpl.java",
          "patch": "@@ -631,7 +631,7 @@ public CreateContainerCmd withNetworkMode(String networkMode) {\n     public CreateContainerCmd withOomKillDisable(Boolean oomKillDisable) {\n         checkNotNull(oomKillDisable, \"oomKillDisable was not specified\");\n         this.oomKillDisable \u003d oomKillDisable;\n-        return null;\n+        return this;\n     }\n \n     @Override"
        }
      ]
    }
  },
  {
    "name": "Null pointer exection in Min DFS label calculation",
    "url": "https://github.com/dbs-leipzig/gradoop/issues/377",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/dbs-leipzig/gradoop/commit/e02868a50ac45fc95d1b76af2b24dc7717db4e87",
      "files": [
        {
          "file_name": "gradoop-examples/src/main/java/org/gradoop/examples/biiig/CategoryCharacteristicPatterns.java",
          "patch": "@@ -21,8 +21,8 @@\n import org.apache.flink.api.common.ProgramDescription;\n import org.apache.flink.api.java.ExecutionEnvironment;\n import org.gradoop.examples.utils.ExampleOutput;\n-import org.gradoop.flink.algorithms.fsm.ccs.CategoryCharacteristicSubgraphs;\n-import org.gradoop.flink.algorithms.fsm.common.config.FSMConfig;\n+import org.gradoop.flink.algorithms.fsm.transactional.CategoryCharacteristicSubgraphs;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.FSMConfig;\n import org.gradoop.flink.model.api.functions.VertexAggregateFunction;\n import org.gradoop.flink.model.impl.GraphCollection;\n import org.gradoop.flink.model.impl.LogicalGraph;\n@@ -42,7 +42,7 @@\n import static org.gradoop.flink.algorithms.btgs.BusinessTransactionGraphs.SUPERCLASS_VALUE_MASTER;\n import static org.gradoop.flink.algorithms.btgs.BusinessTransactionGraphs.SUPERCLASS_VALUE_TRANSACTIONAL;\n import static org.gradoop.flink.algorithms.btgs.BusinessTransactionGraphs.SUPERTYPE_KEY;\n-import static org.gradoop.flink.algorithms.fsm.ccs.CategoryCharacteristicSubgraphs.CATEGORY_KEY;\n+import static org.gradoop.flink.algorithms.fsm.transactional.CategoryCharacteristicSubgraphs.CATEGORY_KEY;\n \n /**\n  * Example workflow of paper \"Scalable Business Intelligence with Graph"
        },
        {
          "file_name": "gradoop-examples/src/main/java/org/gradoop/examples/biiig/FrequentLossPatterns.java",
          "patch": "@@ -26,9 +26,9 @@\n import org.gradoop.common.model.impl.properties.PropertyValueUtils;\n import org.gradoop.examples.AbstractRunner;\n import org.gradoop.flink.algorithms.btgs.BusinessTransactionGraphs;\n-import org.gradoop.flink.algorithms.fsm.common.functions.SubgraphDecoder;\n-import org.gradoop.flink.algorithms.fsm.tfsm.TransactionalFSM;\n-import org.gradoop.flink.algorithms.fsm.common.config.FSMConfig;\n+import org.gradoop.flink.algorithms.fsm.transactional.GSpanIterative;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.TFSMConstants;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.FSMConfig;\n import org.gradoop.flink.io.impl.dot.DOTDataSink;\n import org.gradoop.flink.io.impl.json.JSONDataSource;\n import org.gradoop.flink.model.api.functions.TransformationFunction;\n@@ -129,7 +129,7 @@ private static GraphHead addSupportToGraphHead(GraphHead current,\n     GraphHead transformed) {\n \n     BigDecimal support \u003d current\n-      .getPropertyValue(SubgraphDecoder.FREQUENCY_KEY)\n+      .getPropertyValue(TFSMConstants.SUPPORT_KEY)\n       .getBigDecimal().setScale(2, ROUND_HALF_UP);\n \n     String newLabel \u003d current.getLabel() + \" (\" + support + \")\";\n@@ -196,7 +196,7 @@ public static void main(String[] args) throws Exception {\n     FSMConfig fsmConfig \u003d new FSMConfig(0.6f, true);\n \n     GraphCollection frequentSubgraphs \u003d btgs\n-      .callForCollection(new TransactionalFSM(fsmConfig));\n+      .callForCollection(new GSpanIterative(fsmConfig));\n \n     // (7) Check, if frequent subgraph contains master data\n "
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/ccs/CategoryCharacteristicSubgraphs.java",
          "patch": "@@ -1,355 +0,0 @@\n-/*\n- * This file is part of Gradoop.\n- *\n- * Gradoop is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * Gradoop is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n- */\n-\n-package org.gradoop.flink.algorithms.fsm.ccs;\n-\n-import org.apache.flink.api.java.DataSet;\n-import org.apache.flink.api.java.operators.FilterOperator;\n-import org.apache.flink.api.java.operators.IterativeDataSet;\n-import org.apache.flink.api.java.typeutils.TypeExtractor;\n-import org.gradoop.flink.algorithms.fsm.ccs.functions.CCSSingleEdgeEmbeddings;\n-import org.gradoop.flink.algorithms.fsm.ccs.functions.CCSSubgraphDecoder;\n-import org.gradoop.flink.algorithms.fsm.ccs.functions.CCSSubgraphOnly;\n-import org.gradoop.flink.algorithms.fsm.ccs.functions.CCSWrapInSubgraphEmbeddings;\n-import org.gradoop.flink.algorithms.fsm.ccs.functions.CategoryEdgeLabels;\n-import org.gradoop.flink.algorithms.fsm.ccs.functions.CategoryFrequent;\n-import org.gradoop.flink.algorithms.fsm.ccs.functions.CategoryFrequentAndInteresting;\n-import org.gradoop.flink.algorithms.fsm.ccs.functions.CategoryGraphCounts;\n-import org.gradoop.flink.algorithms.fsm.ccs.functions.CategoryMinFrequencies;\n-import org.gradoop.flink.algorithms.fsm.ccs.functions.CategoryVertexLabels;\n-import org.gradoop.flink.algorithms.fsm.ccs.functions.CategoryWithCount;\n-import org.gradoop.flink.algorithms.fsm.ccs.functions.IsCharacteristic;\n-import org.gradoop.flink.algorithms.fsm.ccs.functions.LabelOnly;\n-import org.gradoop.flink.algorithms.fsm.ccs.functions.ToCCSGraph;\n-import org.gradoop.flink.algorithms.fsm.ccs.pojos.CCSGraph;\n-import org.gradoop.flink.algorithms.fsm.ccs.tuples.CCSSubgraph;\n-import org.gradoop.flink.algorithms.fsm.ccs.tuples.CCSSubgraphEmbeddings;\n-import org.gradoop.flink.algorithms.fsm.common.TransactionalFSMBase;\n-import org.gradoop.flink.algorithms.fsm.common.config.Constants;\n-import org.gradoop.flink.algorithms.fsm.common.config.FSMConfig;\n-import org.gradoop.flink.algorithms.fsm.common.config.IterationStrategy;\n-import org.gradoop.flink.algorithms.fsm.common.functions.MinEdgeCount;\n-import org.gradoop.flink.algorithms.fsm.common.functions.WithoutInfrequentEdgeLabels;\n-import org.gradoop.flink.algorithms.fsm.common.functions.WithoutInfrequentVertexLabels;\n-import org.gradoop.flink.algorithms.fsm.common.functions.IsResult;\n-import org.gradoop.flink.model.impl.GraphCollection;\n-import org.gradoop.flink.model.impl.GraphTransactions;\n-import org.gradoop.flink.model.impl.functions.utils.First;\n-import org.gradoop.flink.representation.transactional.GraphTransaction;\n-import org.gradoop.flink.util.GradoopFlinkConfig;\n-\n-import java.util.Map;\n-\n-/**\n- * abstract superclass of different implementations of the gSpan frequent\n- * subgraph mining algorithm as Gradoop operator\n- */\n-public class CategoryCharacteristicSubgraphs\n-  extends TransactionalFSMBase\u003cCCSGraph, CCSSubgraph, CCSSubgraphEmbeddings\u003e {\n-\n-  /**\n-   * Property key to store a category association.\n-   */\n-  public static final String CATEGORY_KEY \u003d \"_category\";\n-\n-  /**\n-   * minimum frequency for subgraphs to be considered to be frequent\n-   */\n-  private DataSet\u003cMap\u003cString, Long\u003e\u003e categoryCounts;\n-\n-  /**\n-   * minimum frequency for subgraphs to be considered to be frequent\n-   */\n-  private DataSet\u003cMap\u003cString, Long\u003e\u003e categoryMinFrequencies;\n-\n-  /**\n-   * interstingness threshold\n-   */\n-  private final float minInterestingness;\n-\n-  /**\n-   * constructor\n-   * @param fsmConfig frequent subgraph mining configuration\n-   * @param minInterestingness minInterestingness threshold\n-   *\n-   */\n-  public CategoryCharacteristicSubgraphs(\n-    FSMConfig fsmConfig, float minInterestingness) {\n-    super(fsmConfig);\n-    this.minInterestingness \u003d minInterestingness;\n-  }\n-\n-  @Override\n-  public GraphCollection execute(GraphCollection collection)  {\n-    GradoopFlinkConfig gradoopFlinkConfig \u003d collection.getConfig();\n-\n-    // create transactions from graph collection\n-    GraphTransactions transactions \u003d collection\n-      .toTransactions();\n-\n-    transactions \u003d execute(transactions);\n-\n-    return GraphCollection.fromTransactions(\n-      new GraphTransactions(\n-        transactions.getTransactions(), gradoopFlinkConfig));\n-  }\n-\n-  /**\n-   * Encodes the search space before executing FSM.\n-   *\n-   * @param transactions search space as Gradoop graph transactions\n-   *\n-   * @return frequent subgraphs as Gradoop graph transactions\n-   */\n-  public GraphTransactions execute(GraphTransactions transactions) {\n-    DataSet\u003cCCSGraph\u003e graphs \u003d transactions\n-      .getTransactions()\n-      .map(new ToCCSGraph())\n-      .returns(TypeExtractor.getForClass(CCSGraph.class));\n-\n-    GradoopFlinkConfig gradoopConfig \u003d transactions.getConfig();\n-\n-    DataSet\u003cGraphTransaction\u003e dataSet \u003d execute(graphs, gradoopConfig);\n-\n-    return new GraphTransactions(dataSet, gradoopConfig);\n-  }\n-\n-  /**\n-   * Core mining method.\n-   *\n-   * @param graphs search space\n-   * @param gradoopConfig Gradoop Flink configuration\n-   *\n-   * @return frequent subgraphs\n-   */\n-  public DataSet\u003cGraphTransaction\u003e execute(\n-    DataSet\u003cCCSGraph\u003e graphs, GradoopFlinkConfig gradoopConfig) {\n-\n-    setCategoryCounts(graphs);\n-\n-    setMinFrequencies();\n-\n-    if (fsmConfig.isPreprocessingEnabled()) {\n-      graphs \u003d preProcess(graphs);\n-    }\n-\n-    DataSet\u003cCCSSubgraphEmbeddings\u003e\n-      embeddings \u003d graphs\n-      .flatMap(new CCSSingleEdgeEmbeddings(fsmConfig));\n-\n-    DataSet\u003cCCSSubgraph\u003e characteristicSubgraphs;\n-\n-    if (fsmConfig.getIterationStrategy() \u003d\u003d IterationStrategy.LOOP_UNROLLING) {\n-      characteristicSubgraphs \u003d mineWithLoopUnrolling(graphs, embeddings);\n-    } else {\n-      characteristicSubgraphs \u003d mineWithBulkIteration(graphs, embeddings);\n-    }\n-\n-    if (fsmConfig.getMinEdgeCount() \u003e 1) {\n-      characteristicSubgraphs \u003d characteristicSubgraphs\n-        .filter(new MinEdgeCount\u003cCCSSubgraph\u003e(fsmConfig));\n-    }\n-\n-    return characteristicSubgraphs\n-      .map(new CCSSubgraphDecoder(gradoopConfig));\n-  }\n-\n-  /**\n-   * Determines the graph count for each category.\n-   *\n-   * @param graphs search space\n-   */\n-  private void setCategoryCounts(DataSet\u003cCCSGraph\u003e graphs) {\n-    categoryCounts \u003d graphs\n-      .map(new CategoryWithCount())\n-      .groupBy(0)\n-      .sum(1)\n-      .reduceGroup(new CategoryGraphCounts());\n-  }\n-\n-  /**\n-   * Determines the min frequency per category based on category graph count\n-   * and support threshold.\n-   **/\n-  private void setMinFrequencies() {\n-    categoryMinFrequencies \u003d categoryCounts\n-      .map(new CategoryMinFrequencies(fsmConfig));\n-  }\n-\n-  /**\n-   * Removes vertices and edges showing labels that are infrequent in all\n-   * categories.\n-   *\n-   * @param graphs graph collection\n-   * @return processed graph collection\n-   */\n-  private DataSet\u003cCCSGraph\u003e preProcess(DataSet\u003cCCSGraph\u003e graphs) {\n-    DataSet\u003cString\u003e frequentVertexLabels \u003d graphs\n-      .flatMap(new CategoryVertexLabels())\n-      .groupBy(0, 1)\n-      .sum(2)\n-      .filter(new CategoryFrequent())\n-      .withBroadcastSet(categoryMinFrequencies, Constants.MIN_FREQUENCY)\n-      .map(new LabelOnly())\n-      .distinct();\n-\n-    graphs \u003d graphs\n-      .map(new WithoutInfrequentVertexLabels\u003cCCSGraph\u003e())\n-      .withBroadcastSet(\n-        frequentVertexLabels, Constants.FREQUENT_VERTEX_LABELS);\n-\n-    DataSet\u003cString\u003e frequentEdgeLabels \u003d graphs\n-      .flatMap(new CategoryEdgeLabels())\n-      .groupBy(0, 1)\n-      .sum(2)\n-      .filter(new CategoryFrequent())\n-      .withBroadcastSet(categoryMinFrequencies, Constants.MIN_FREQUENCY)\n-      .map(new LabelOnly())\n-      .distinct();\n-\n-    graphs \u003d graphs\n-      .map(new WithoutInfrequentEdgeLabels\u003cCCSGraph\u003e())\n-      .withBroadcastSet(frequentEdgeLabels, Constants.FREQUENT_EDGE_LABELS);\n-\n-    return graphs;\n-  }\n-\n-  /**\n-   * Mining core based on loop unrolling.\n-   *\n-   * @param graphs search space\n-   * @param embeddings 1-edge embeddings\n-   * @return frequent subgraphs\n-   */\n-  private DataSet\u003cCCSSubgraph\u003e mineWithLoopUnrolling(DataSet\u003cCCSGraph\u003e graphs,\n-    DataSet\u003cCCSSubgraphEmbeddings\u003e embeddings) {\n-\n-    DataSet\u003cCCSSubgraph\u003e categoryFrequentSubgraphs \u003d\n-      getCategoryFrequentSubgraphs(embeddings);\n-\n-    DataSet\u003cCCSSubgraph\u003e characteristicSubgraphs \u003d\n-      getCharacteristicSubgraphs(categoryFrequentSubgraphs);\n-\n-    if (fsmConfig.getMaxEdgeCount() \u003e 1) {\n-      for (int k \u003d fsmConfig.getMinEdgeCount();\n-           k \u003c fsmConfig.getMaxEdgeCount(); k++) {\n-\n-        DataSet\u003cCCSSubgraph\u003e frequentSubgraphs \u003d categoryFrequentSubgraphs\n-          .groupBy(0)\n-          .reduceGroup(new First\u003cCCSSubgraph\u003e());\n-\n-        embeddings \u003d growEmbeddingsOfFrequentSubgraphs(\n-          graphs, embeddings, frequentSubgraphs);\n-\n-        categoryFrequentSubgraphs \u003d getCategoryFrequentSubgraphs(embeddings);\n-\n-        characteristicSubgraphs \u003d characteristicSubgraphs\n-          .union(getCharacteristicSubgraphs(categoryFrequentSubgraphs));\n-      }\n-\n-    }\n-    return characteristicSubgraphs;\n-  }\n-\n-  /**\n-   * Mining core based on bulk iteration.\n-   *\n-   * @param graphs search space\n-   * @param embeddings 1-edge embeddings\n-   * @return frequent subgraphs\n-   */\n-  private DataSet\u003cCCSSubgraph\u003e mineWithBulkIteration(\n-    DataSet\u003cCCSGraph\u003e graphs, DataSet\u003cCCSSubgraphEmbeddings\u003e embeddings) {\n-\n-    // ITERATION HEAD\n-    IterativeDataSet\u003cCCSSubgraphEmbeddings\u003e iterative \u003d embeddings\n-      .iterate(fsmConfig.getMaxEdgeCount());\n-\n-    // ITERATION BODY\n-\n-    // get frequent subgraphs\n-    DataSet\u003cCCSSubgraphEmbeddings\u003e parentEmbeddings \u003d iterative\n-      .filter(new IsResult\u003cCCSSubgraphEmbeddings\u003e(false));\n-\n-    DataSet\u003cCCSSubgraph\u003e categoryFrequentSubgraphs \u003d\n-      getCategoryFrequentSubgraphs(parentEmbeddings);\n-\n-    DataSet\u003cCCSSubgraph\u003e frequentSubgraphs \u003d categoryFrequentSubgraphs\n-      .groupBy(0)\n-      .reduceGroup(new First\u003cCCSSubgraph\u003e());\n-\n-    parentEmbeddings \u003d\n-      filterByFrequentSubgraphs(parentEmbeddings, frequentSubgraphs);\n-\n-    DataSet\u003cCCSSubgraphEmbeddings\u003e childEmbeddings \u003d\n-      growEmbeddingsOfFrequentSubgraphs(\n-        graphs, parentEmbeddings, frequentSubgraphs\n-      );\n-\n-    DataSet\u003cCCSSubgraphEmbeddings\u003e resultIncrement \u003d\n-      getCharacteristicSubgraphs(categoryFrequentSubgraphs)\n-        .map(new CCSWrapInSubgraphEmbeddings());\n-\n-    DataSet\u003cCCSSubgraphEmbeddings\u003e resultAndEmbeddings \u003d iterative\n-      .filter(new IsResult\u003cCCSSubgraphEmbeddings\u003e(true))\n-      .union(resultIncrement)\n-      .union(childEmbeddings);\n-\n-    // ITERATION FOOTER\n-\n-    return iterative\n-      .closeWith(resultAndEmbeddings, childEmbeddings)\n-      .filter(new IsResult\u003cCCSSubgraphEmbeddings\u003e(true))\n-      .map(new CCSSubgraphOnly());\n-  }\n-\n-  /**\n-   * Returns characteristic from category frequent subgraphs.\n-   *\n-   * @param frequentSubgraphs subgraphs, frequent in at least one category\n-   * @return characteristic subgraphs\n-   */\n-  private FilterOperator\u003cCCSSubgraph\u003e getCharacteristicSubgraphs(\n-    DataSet\u003cCCSSubgraph\u003e frequentSubgraphs) {\n-    return frequentSubgraphs\n-      .filter(new IsCharacteristic());\n-  }\n-\n-  /**\n-   * Determines frequent subgraphs in a set of embeddings.\n-   *\n-   * @param embeddings set of embeddings\n-   * @return frequent subgraphs\n-   */\n-  private DataSet\u003cCCSSubgraph\u003e getCategoryFrequentSubgraphs(\n-    DataSet\u003cCCSSubgraphEmbeddings\u003e embeddings) {\n-    return embeddings\n-      .map(new CCSSubgraphOnly())\n-      .groupBy(0, 3)\n-      .sum(1)\n-      .groupBy(0)\n-      .reduceGroup(new CategoryFrequentAndInteresting(minInterestingness))\n-      .withBroadcastSet(categoryCounts, Constants.GRAPH_COUNT)\n-      .withBroadcastSet(categoryMinFrequencies, Constants.MIN_FREQUENCY);\n-  }\n-\n-  @Override\n-  public String getName() {\n-    return this.getClass().getSimpleName();\n-  }\n-\n-}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/common/TransactionalFSMBase.java",
          "patch": "@@ -1,124 +0,0 @@\n-/*\n- * This file is part of Gradoop.\n- *\n- * Gradoop is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * Gradoop is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n- */\n-\n-package org.gradoop.flink.algorithms.fsm.common;\n-\n-import org.apache.flink.api.java.DataSet;\n-import org.gradoop.flink.algorithms.fsm.common.config.Constants;\n-import org.gradoop.flink.algorithms.fsm.common.config.FSMConfig;\n-import org.gradoop.flink.algorithms.fsm.common.config.FilterStrategy;\n-import org.gradoop.flink.algorithms.fsm.common.config.GrowthStrategy;\n-import org.gradoop.flink.algorithms.fsm.common.functions.CanonicalLabelOnly;\n-import org.gradoop.flink.algorithms.fsm.common.functions.SubgraphIsFrequent;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMGraph;\n-import org.gradoop.flink.algorithms.fsm.common.tuples.Subgraph;\n-import org.gradoop.flink.algorithms.fsm.common.tuples.SubgraphEmbeddings;\n-import org.gradoop.flink.algorithms.fsm.common.functions.GraphId;\n-import org.gradoop.flink.algorithms.fsm.common.functions.MergeEmbeddings;\n-import org.gradoop.flink.algorithms.fsm.common.functions.PatternGrowth;\n-import org.gradoop.flink.model.api.operators.UnaryCollectionToCollectionOperator;\n-import org.gradoop.flink.model.impl.functions.utils.LeftSide;\n-\n-\n-/**\n- * Superclass of transactional FSM and derivatives.\n- *\n- * @param \u003cG\u003e graph type\n- * @param \u003cS\u003e subgraph type\n- * @param \u003cSE\u003e subgraph embeddings type\n- */\n-public abstract class TransactionalFSMBase\n-  \u003cG extends FSMGraph, S extends Subgraph, SE extends SubgraphEmbeddings\u003e\n-  implements UnaryCollectionToCollectionOperator {\n-\n-  /**\n-   * frequent subgraph mining configuration\n-   */\n-  protected final FSMConfig fsmConfig;\n-\n-  /**\n-   * Constructor.\n-   *\n-   * @param fsmConfig FSM configuration\n-   */\n-  public TransactionalFSMBase(FSMConfig fsmConfig) {\n-    this.fsmConfig \u003d fsmConfig;\n-  }\n-\n-  /**\n-   * Grows children of embeddings of frequent subgraphs.\n-   *\n-   * @param graphs search space\n-   * @param parents parent embeddings\n-   * @param frequentSubgraphs frequent subgraphs\n-   * @return child embeddings\n-   */\n-  protected DataSet\u003cSE\u003e growEmbeddingsOfFrequentSubgraphs(\n-    DataSet\u003cG\u003e graphs, DataSet\u003cSE\u003e parents,\n-    DataSet\u003cS\u003e frequentSubgraphs) {\n-    parents \u003d filterByFrequentSubgraphs(parents, frequentSubgraphs);\n-\n-    parents \u003d parents\n-      .groupBy(0)\n-      .reduceGroup(new MergeEmbeddings\u003cSE\u003e());\n-\n-    if (fsmConfig.getGrowthStrategy() \u003d\u003d GrowthStrategy.JOIN) {\n-      parents \u003d parents\n-        .join(graphs)\n-        .where(0).equalTo(new GraphId\u003cG\u003e())\n-        .with(new PatternGrowth\u003cG, SE\u003e(fsmConfig));\n-    } else {\n-      parents \u003d parents\n-        .flatMap(new PatternGrowth\u003cG, SE\u003e(fsmConfig));\n-    }\n-\n-    return parents;\n-  }\n-\n-  /**\n-   * Filter a set of embeddings to such representing a frequent subgraph.\n-   *\n-   * @param embeddings set of embeddings\n-   * @param frequentSubgraphs frequent subgraphs\n-   *\n-   * @return embeddings representing frequent subgraphs\n-   */\n-  protected DataSet\u003cSE\u003e filterByFrequentSubgraphs(\n-    DataSet\u003cSE\u003e embeddings,\n-    DataSet\u003cS\u003e frequentSubgraphs) {\n-\n-    if (fsmConfig.getFilterStrategy() \u003d\u003d FilterStrategy.BROADCAST_FILTER) {\n-      return embeddings\n-        .filter(new SubgraphIsFrequent\u003cSE\u003e())\n-        .withBroadcastSet(\n-          frequentSubgraphs\n-            .map(new CanonicalLabelOnly\u003cS\u003e()),\n-          Constants.FREQUENT_SUBGRAPHS\n-        );\n-    } else if (fsmConfig.getFilterStrategy() \u003d\u003d FilterStrategy.BROADCAST_JOIN) {\n-      return embeddings\n-        .joinWithTiny(frequentSubgraphs)\n-        .where(2).equalTo(0) // on canonical label\n-        .with(new LeftSide\u003cSE, S\u003e());\n-    } else {\n-      return embeddings\n-        .join(frequentSubgraphs)\n-        .where(2).equalTo(0) // on canonical label\n-        .with(new LeftSide\u003cSE, S\u003e());\n-    }\n-  }\n-}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/common/canonicalization/cam/package-info.java",
          "patch": "@@ -1,22 +0,0 @@\n-/*\n- * This file is part of Gradoop.\n- *\n- * Gradoop is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * Gradoop is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n- */\n-\n-/**\n- * classes related canonical adjacency matrix labels\n- */\n-\n-package org.gradoop.flink.algorithms.fsm.common.canonicalization.cam;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/common/canonicalization/gspan/Extension.java",
          "patch": "@@ -1,208 +0,0 @@\n-/*\n- * This file is part of Gradoop.\n- *\n- * Gradoop is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * Gradoop is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n- */\n-\n-package org.gradoop.flink.algorithms.fsm.common.canonicalization.gspan;\n-\n-/**\n- * Extension of an embedding.\n- */\n-public class Extension implements Comparable\u003cExtension\u003e {\n-\n-  /**\n-   * separator between vertex time and label\n-   */\n-  private static final char TIME_LABEL_SEPARATOR \u003d \u0027:\u0027;\n-  /**\n-   * outgoing edge start\n-   */\n-  private static final char OUTGOING_CHAR \u003d \u0027\u003e\u0027;\n-  /**\n-   * incoming edge start\n-   */\n-  private static final char INCOMING_CHAR \u003d \u0027\u003c\u0027;\n-  /**\n-   * edge start of undirected and end of all edges\n-   */\n-  private static final char EDGE_CHAR \u003d \u0027-\u0027;\n-\n-  /**\n-   * extension start time\n-   */\n-  private final int fromTime;\n-  /**\n-   * extension start label\n-   */\n-  private final String fromLabel;\n-  /**\n-   * outgoing or incoming traversal\n-   */\n-  private final boolean outgoing;\n-  /**\n-   * edge label\n-   */\n-  private final String edgeLabel;\n-  /**\n-   * traversal end time\n-   */\n-  private final int toTime;\n-  /**\n-   * traversal end label\n-   */\n-  private final String toLabel;\n-  /**\n-   * directed mode\n-   */\n-  private final boolean directed;\n-\n-  /**\n-   * Constructor\n-   * @param fromTime    extension start time\n-   * @param fromLabel   extension start label\n-   * @param outgoing    outgoing or incoming traversal\n-   * @param edgeLabel   edge label\n-   * @param toTime      traversal end time\n-   * @param toLabel     traversal end label\n-   * @param directed    directed mode\n-   */\n-  public Extension(int fromTime, String fromLabel, boolean outgoing,\n-    String edgeLabel, int toTime, String toLabel, boolean directed) {\n-    this.fromTime \u003d fromTime;\n-    this.fromLabel \u003d fromLabel;\n-    this.outgoing \u003d outgoing;\n-    this.edgeLabel \u003d edgeLabel;\n-    this.toTime \u003d toTime;\n-    this.toLabel \u003d toLabel;\n-    this.directed \u003d directed;\n-  }\n-\n-  @Override\n-  public int compareTo(Extension that) {\n-\n-    int comparison;\n-\n-    boolean thisBackward \u003d this.toTime \u003c\u003d this.fromTime;\n-    boolean thisForward \u003d !thisBackward;\n-    boolean thatBackward \u003d that.toTime \u003c\u003d that.fromTime;\n-    boolean thatForward \u003d !thatBackward;\n-\n-    if (thisBackward \u0026\u0026 thatForward) {\n-      comparison \u003d -1;\n-    } else if (thisForward \u0026\u0026 thatBackward) {\n-      comparison \u003d 1;\n-    } else if (thisBackward) {\n-      // both backward\n-\n-      if (this.toTime \u003c that.toTime) {\n-        comparison \u003d -1;\n-      } else if (this.toTime \u003e that.toTime) {\n-        comparison \u003d 1;\n-      } else {\n-        comparison \u003d compareEdgeDirectionAndLabel(that);\n-      }\n-\n-    } else {\n-      // both forward\n-\n-      if (this.fromTime \u003e that.fromTime) {\n-        comparison \u003d -1;\n-      } else if (this.fromTime \u003c that.fromTime) {\n-        comparison \u003d 1;\n-      } else {\n-        comparison \u003d compareEdgeDirectionAndLabel(that);\n-\n-        if (comparison \u003d\u003d 0) {\n-          comparison \u003d this.toLabel.compareTo(that.toLabel);\n-        }\n-      }\n-    }\n-\n-    return comparison;\n-  }\n-\n-  /**\n-   * compares edge direction and label of two extensions\n-   *\n-   * @param that other extension\n-   *\n-   * @return comparison result\n-   */\n-  private int compareEdgeDirectionAndLabel(Extension that) {\n-    int comparison;\n-\n-    if (!directed || this.outgoing \u003d\u003d that.outgoing) {\n-      comparison \u003d this.edgeLabel.compareTo(that.edgeLabel);\n-    } else if (this.outgoing) {\n-      comparison \u003d -1;\n-    } else {\n-      comparison \u003d 1;\n-    }\n-\n-    return comparison;\n-  }\n-\n-  @Override\n-  public String toString() {\n-    return String.valueOf(fromTime) + TIME_LABEL_SEPARATOR + fromLabel +\n-      (directed ? (outgoing ? OUTGOING_CHAR : INCOMING_CHAR) : EDGE_CHAR) +\n-      edgeLabel + EDGE_CHAR +\n-      toTime + TIME_LABEL_SEPARATOR + toLabel;\n-  }\n-\n-  @Override\n-  public boolean equals(Object o) {\n-    if (this \u003d\u003d o) {\n-      return true;\n-    }\n-    if (o \u003d\u003d null || getClass() !\u003d o.getClass()) {\n-      return false;\n-    }\n-\n-    Extension extension \u003d (Extension) o;\n-\n-    if (fromTime !\u003d extension.fromTime) {\n-      return false;\n-    }\n-    if (outgoing !\u003d extension.outgoing) {\n-      return false;\n-    }\n-    if (toTime !\u003d extension.toTime) {\n-      return false;\n-    }\n-    if (fromLabel !\u003d null ? !fromLabel.equals(extension.fromLabel) :\n-      extension.fromLabel !\u003d null) {\n-      return false;\n-    }\n-    if (edgeLabel !\u003d null ? !edgeLabel.equals(extension.edgeLabel) :\n-      extension.edgeLabel !\u003d null) {\n-      return false;\n-    }\n-    return toLabel !\u003d null ? toLabel.equals(extension.toLabel) :\n-      extension.toLabel \u003d\u003d null;\n-\n-  }\n-\n-  @Override\n-  public int hashCode() {\n-    int result \u003d fromTime;\n-    result \u003d 31 * result + (fromLabel !\u003d null ? fromLabel.hashCode() : 0);\n-    result \u003d 31 * result + (outgoing ? 1 : 0);\n-    result \u003d 31 * result + (edgeLabel !\u003d null ? edgeLabel.hashCode() : 0);\n-    result \u003d 31 * result + toTime;\n-    result \u003d 31 * result + (toLabel !\u003d null ? toLabel.hashCode() : 0);\n-    return result;\n-  }\n-}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/common/canonicalization/gspan/Mapping.java",
          "patch": "@@ -1,181 +0,0 @@\n-/*\n- * This file is part of Gradoop.\n- *\n- * Gradoop is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * Gradoop is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n- */\n-\n-package org.gradoop.flink.algorithms.fsm.common.canonicalization.gspan;\n-\n-import com.google.common.collect.Lists;\n-import com.google.common.collect.Maps;\n-import com.google.common.collect.Sets;\n-\n-import java.util.Collection;\n-import java.util.List;\n-import java.util.Map;\n-\n-/**\n- * Mapping between an embedding and a DFS code.\n- */\n-public class Mapping {\n-\n-  /**\n-   * Initial vertex discovery times.\n-   */\n-  private final Map\u003cInteger, Integer\u003e vertexTimes;\n-  /**\n-   * Rightmost path.\n-   */\n-  private final List\u003cInteger\u003e rightmostPath;\n-  /**\n-   * Included edges.\n-   */\n-  private final Collection\u003cInteger\u003e edgeCoverage;\n-\n-  /**\n-   * Constructor.\n-   *\n-   * @param startVertex first visited vertex\n-   */\n-  public Mapping(Integer startVertex) {\n-    this.vertexTimes \u003d Maps.newHashMap();\n-    this.vertexTimes.put(startVertex, 0);\n-    this.rightmostPath \u003d Lists.newArrayList(startVertex);\n-    this.edgeCoverage \u003d Sets.newHashSet();\n-  }\n-\n-  /**\n-   * Constructor.\n-   *\n-   * @param vertexTimes existing vertex times\n-   * @param rightmostPath existing rightmost path\n-   * @param edgeCoverage existing edge set\n-   */\n-  private Mapping(Map\u003cInteger, Integer\u003e vertexTimes,\n-    List\u003cInteger\u003e rightmostPath, Collection\u003cInteger\u003e edgeCoverage) {\n-\n-    this.vertexTimes \u003d vertexTimes;\n-    this.rightmostPath \u003d rightmostPath;\n-    this.edgeCoverage \u003d edgeCoverage;\n-  }\n-\n-  public int getRightmostVertexId() {\n-    return rightmostPath.get(rightmostPath.size() - 1);\n-  }\n-\n-  /**\n-   * Convenience method to check edge containment.\n-   *\n-   * @param edgeId edge id to check\n-   *\n-   * @return true, if contained\n-   */\n-  public boolean containsEdge(int edgeId) {\n-    return edgeCoverage.contains(edgeId);\n-  }\n-\n-  /**\n-   * Determines the role of a vertex in an embedding.\n-   *\n-   * @param vertexId vertex to check\n-   *\n-   * @return role\n-   */\n-  public int getRole(int vertexId) {\n-    int role;\n-\n-    if (vertexId \u003d\u003d getRightmostVertexId()) {\n-      role \u003d VertexRole.IS_RIGHTMOST;\n-    } else if (rightmostPath.contains(vertexId)) {\n-      role \u003d VertexRole.ON_RIGHTMOST_PATH;\n-    } else if (vertexTimes.containsKey(vertexId)) {\n-      role \u003d VertexRole.CONTAINED;\n-    } else {\n-      role \u003d VertexRole.NOT_CONTAINED;\n-    }\n-\n-    return role;\n-  }\n-\n-  public Map\u003cInteger, Integer\u003e getVertexTimes() {\n-    return vertexTimes;\n-  }\n-\n-  /**\n-   * grow backwards\n-   *\n-   * @param edgeId via edge\n-   * @param toId to vertex\n-   *\n-   * @return grown child\n-   */\n-  public Mapping growBackwards(Integer edgeId, int toId) {\n-    // keep vertex mapping\n-    Map\u003cInteger, Integer\u003e childVertexTimes \u003d Maps.newHashMap(vertexTimes);\n-\n-    // keep rightmost path until backtrace vertex and add rightmost\n-    List\u003cInteger\u003e childRightmostPath \u003d Lists.newArrayList();\n-    for (int vertexId : rightmostPath) {\n-      childRightmostPath.add(vertexId);\n-      if (vertexId \u003d\u003d toId) {\n-        break;\n-      }\n-    }\n-    childRightmostPath.add(getRightmostVertexId());\n-\n-    // add new edge to coverage\n-    Collection\u003cInteger\u003e childEdgeCoverage \u003d Sets.newHashSet(edgeCoverage);\n-    childEdgeCoverage.add(edgeId);\n-\n-    return new Mapping(\n-      childVertexTimes, childRightmostPath, childEdgeCoverage);\n-  }\n-\n-  /**\n-   * grow forwards\n-   *\n-   * @param fromId from vertex\n-   * @param edgeId via edge\n-   * @param toId to vertex\n-   *\n-   * @return grown child\n-   */\n-  public Mapping growForwards(int fromId, int edgeId, int toId) {\n-    // add new vertex to vertex mapping\n-    Map\u003cInteger, Integer\u003e childVertexTimes \u003d Maps.newHashMap(vertexTimes);\n-    childVertexTimes.put(toId, vertexTimes.size());\n-\n-    // keep rightmost path until start vertex and add new vertex\n-    List\u003cInteger\u003e childRightmostPath \u003d Lists.newArrayList();\n-    for (int vertexId : rightmostPath) {\n-      childRightmostPath.add(vertexId);\n-      if (vertexId \u003d\u003d fromId) {\n-        break;\n-      }\n-    }\n-    childRightmostPath.add(toId);\n-\n-    // add new edge to coverage\n-    Collection\u003cInteger\u003e childEdgeCoverage \u003d Sets.newHashSet(edgeCoverage);\n-    childEdgeCoverage.add(edgeId);\n-\n-    return new Mapping(\n-      childVertexTimes, childRightmostPath, childEdgeCoverage);\n-  }\n-\n-  @Override\n-  public String toString() {\n-    return vertexTimes + \"\\n\" + rightmostPath + \"\\n\" + edgeCoverage + \"\\n\";\n-  }\n-}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/common/canonicalization/gspan/MinDFSLabeler.java",
          "patch": "@@ -1,252 +0,0 @@\n-/*\n- * This file is part of Gradoop.\n- *\n- * Gradoop is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * Gradoop is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n- */\n-\n-package org.gradoop.flink.algorithms.fsm.common.canonicalization.gspan;\n-\n-import com.google.common.collect.Lists;\n-import com.google.common.collect.Sets;\n-import org.apache.commons.lang.StringUtils;\n-import org.gradoop.flink.algorithms.fsm.common.canonicalization.api.CanonicalLabeler;\n-\n-import org.gradoop.flink.algorithms.fsm.common.pojos.Embedding;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMEdge;\n-\n-import java.util.Collection;\n-import java.util.List;\n-import java.util.Map;\n-\n-/**\n- * Generates gSpan minimum DFS labels\n- */\n-public class MinDFSLabeler implements CanonicalLabeler {\n-\n-  /**\n-   * separator between traversal steps\n-   */\n-  private static final char STEP_SEPARATOR \u003d \u0027,\u0027;\n-  /**\n-   * directed mode\n-   */\n-  private final boolean directed;\n-\n-  /**\n-   * Constructor.\n-   *\n-   * @param directed directed mode\n-   */\n-  public MinDFSLabeler(boolean directed) {\n-    this.directed \u003d directed;\n-  }\n-\n-  @Override\n-  public String label(Embedding graph) {\n-\n-    String minVertexLabel \u003d null;\n-\n-    Collection\u003cMapping\u003e parents \u003d Lists.newArrayListWithCapacity(0);\n-\n-    for (Map.Entry\u003cInteger, String\u003e vertexEntry :\n-      graph.getVertices().entrySet()) {\n-\n-      String vertexLabel \u003d vertexEntry.getValue();\n-      int minLabelComparison \u003d minVertexLabel \u003d\u003d null ? - 1 :\n-        vertexLabel.compareTo(minVertexLabel);\n-\n-      if (minLabelComparison \u003c 0) {\n-        minVertexLabel \u003d vertexLabel;\n-        parents \u003d Sets.newHashSet(new Mapping(vertexEntry.getKey()));\n-      } else if (minLabelComparison \u003d\u003d 0) {\n-        parents.add(new Mapping(vertexEntry.getKey()));\n-      }\n-    }\n-\n-    List\u003cString\u003e stepStrings \u003d\n-      Lists.newArrayListWithCapacity(graph.getEdges().size());\n-\n-    for (int k \u003d 1; k \u003c\u003d graph.getEdges().size(); k++) {\n-      Collection\u003cMapping\u003e children \u003d Lists.newArrayList();\n-\n-      Extension minExtension \u003d null;\n-\n-      for (Mapping parent : parents) {\n-        for (Map.Entry\u003cInteger, FSMEdge\u003e edgeEntry :\n-          graph.getEdges().entrySet()) {\n-\n-          int edgeId \u003d edgeEntry.getKey();\n-\n-          if (!parent.containsEdge(edgeId)) {\n-            FSMEdge edge \u003d edgeEntry.getValue();\n-\n-            int sourceId \u003d edge.getSourceId();\n-            int targetId \u003d edge.getTargetId();\n-            String edgeLabel \u003d edge.getLabel();\n-\n-            if (sourceId \u003d\u003d targetId) {\n-              if (sourceId \u003d\u003d parent.getRightmostVertexId()) {\n-\n-                int fromTime \u003d parent.getVertexTimes().get(sourceId);\n-                String fromLabel \u003d graph.getVertices().get(sourceId);\n-\n-                Extension extension \u003d new Extension(fromTime, fromLabel,\n-                  true, edgeLabel, fromTime, fromLabel, directed);\n-\n-                int minComparison \u003d minExtension \u003d\u003d null ? -1 :\n-                  extension.compareTo(minExtension);\n-\n-                if (minComparison \u003c\u003d 0) {\n-                  Mapping child \u003d parent.growBackwards(edgeId, sourceId);\n-\n-                  if (minComparison \u003c 0) {\n-                    minExtension \u003d extension;\n-                    children \u003d Lists.newArrayList(child);\n-                  } else if (minComparison \u003d\u003d 0) {\n-                    children.add(child);\n-                  }\n-                }\n-\n-              }\n-            } else {\n-              int sourceRole \u003d parent.getRole(sourceId);\n-              int targetRole \u003d parent.getRole(targetId);\n-\n-              if (sourceRole \u003e\u003d VertexRole.ON_RIGHTMOST_PATH) {\n-\n-                // backward from source\n-                if (sourceRole \u003d\u003d VertexRole.IS_RIGHTMOST \u0026\u0026\n-                  targetRole \u003e\u003d VertexRole.CONTAINED) {\n-\n-                  int fromTime \u003d parent.getVertexTimes().get(sourceId);\n-                  String fromLabel \u003d graph.getVertices().get(sourceId);\n-                  int toTime \u003d parent.getVertexTimes().get(targetId);\n-                  String toLabel \u003d graph.getVertices().get(targetId);\n-\n-                  Extension extension \u003d new Extension(fromTime, fromLabel,\n-                    true, edgeLabel, toTime, toLabel, directed);\n-\n-                  int minComparison \u003d minExtension \u003d\u003d null ? -1 :\n-                    extension.compareTo(minExtension);\n-\n-                  if (minComparison \u003c\u003d 0) {\n-                    Mapping child \u003d parent.growBackwards(edgeId, targetId);\n-\n-                    if (minComparison \u003c 0) {\n-                      minExtension \u003d extension;\n-                      children \u003d Lists.newArrayList(child);\n-                    } else if (minComparison \u003d\u003d 0) {\n-                      children.add(child);\n-                    }\n-                  }\n-\n-                  // forward from source\n-                } else if (targetRole \u003d\u003d VertexRole.NOT_CONTAINED) {\n-\n-                  int fromTime \u003d parent.getVertexTimes().get(sourceId);\n-                  int toTime \u003d parent.getVertexTimes().size();\n-\n-                  String fromLabel \u003d graph.getVertices().get(sourceId);\n-                  String toLabel \u003d graph.getVertices().get(targetId);\n-\n-                  Extension extension \u003d new Extension(fromTime, fromLabel,\n-                    true, edgeLabel, toTime, toLabel, directed);\n-\n-                  int minComparison \u003d minExtension \u003d\u003d null ? -1 :\n-                    extension.compareTo(minExtension);\n-\n-                  if (minComparison \u003c\u003d 0) {\n-                    Mapping child \u003d\n-                      parent.growForwards(sourceId, edgeId, targetId);\n-\n-                    if (minComparison \u003c 0) {\n-                      minExtension \u003d extension;\n-                      children \u003d Lists.newArrayList(child);\n-                    } else if (minComparison \u003d\u003d 0) {\n-                      children.add(child);\n-                    }\n-                  }\n-                }\n-              }\n-\n-              if (targetRole \u003e\u003d VertexRole.ON_RIGHTMOST_PATH) {\n-\n-                // backward from target\n-                if (targetRole \u003d\u003d VertexRole.IS_RIGHTMOST \u0026\u0026\n-                  sourceRole \u003e\u003d VertexRole.CONTAINED) {\n-\n-                  int fromTime \u003d parent.getVertexTimes().get(targetId);\n-                  int toTime \u003d parent.getVertexTimes().get(sourceId);\n-\n-\n-                  String fromLabel \u003d graph.getVertices().get(targetId);\n-                  String toLabel \u003d graph.getVertices().get(sourceId);\n-\n-                  Extension extension \u003d new Extension(fromTime, fromLabel,\n-                    false, edgeLabel, toTime, toLabel, directed);\n-\n-                  int minComparison \u003d minExtension \u003d\u003d null ? -1 :\n-                    extension.compareTo(minExtension);\n-\n-                  if (minComparison \u003c\u003d 0) {\n-                    Mapping child \u003d parent.growBackwards(edgeId, sourceId);\n-\n-                    if (minComparison \u003c 0) {\n-                      minExtension \u003d extension;\n-                      children \u003d Lists.newArrayList(child);\n-                    } else if (minComparison \u003d\u003d 0) {\n-                      children.add(child);\n-                    }\n-                  }\n-\n-                  // forward from target\n-                } else if (sourceRole \u003d\u003d VertexRole.NOT_CONTAINED) {\n-\n-                  int fromTime \u003d parent.getVertexTimes().get(targetId);\n-                  int toTime \u003d parent.getVertexTimes().size();\n-\n-                  String fromLabel \u003d graph.getVertices().get(targetId);\n-                  String toLabel \u003d graph.getVertices().get(sourceId);\n-\n-                  Extension extension \u003d new Extension(fromTime, fromLabel,\n-                    false, edgeLabel, toTime, toLabel, directed);\n-\n-                  int minComparison \u003d minExtension \u003d\u003d null ? -1 :\n-                    extension.compareTo(minExtension);\n-\n-                  if (minComparison \u003c\u003d 0) {\n-                    Mapping child \u003d\n-                      parent.growForwards(targetId, edgeId, sourceId);\n-\n-                    if (minComparison \u003c 0) {\n-                      minExtension \u003d extension;\n-                      children \u003d Lists.newArrayList(child);\n-                    } else if (minComparison \u003d\u003d 0) {\n-                      children.add(child);\n-                    }\n-                  }\n-                }\n-              }\n-            }\n-          }\n-        }\n-      }\n-      stepStrings.add(minExtension.toString());\n-      parents \u003d children;\n-    }\n-\n-    return StringUtils.join(stepStrings, STEP_SEPARATOR);\n-  }\n-\n-}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/common/canonicalization/gspan/VertexRole.java",
          "patch": "@@ -1,40 +0,0 @@\n-/*\n- * This file is part of Gradoop.\n- *\n- * Gradoop is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * Gradoop is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n- */\n-\n-package org.gradoop.flink.algorithms.fsm.common.canonicalization.gspan;\n-\n-/**\n- * Roles of a vertex with regard to an embedding.\n- */\n-public class VertexRole  {\n-  /**\n-   * not contained\n-   */\n-  public static final int NOT_CONTAINED \u003d 0;\n-  /**\n-   * contained\n-   */\n-  public static final int CONTAINED \u003d 1;\n-  /**\n-   * on rightmost path\n-   */\n-  public static final int ON_RIGHTMOST_PATH \u003d 2;\n-  /**\n-   * is rightmost\n-   */\n-  public static final int IS_RIGHTMOST \u003d 3;\n-}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/common/canonicalization/gspan/package-info.java",
          "patch": "@@ -1,22 +0,0 @@\n-/*\n- * This file is part of Gradoop.\n- *\n- * Gradoop is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * Gradoop is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n- */\n-\n-/**\n- * classes related to min DFS canonical labels\n- */\n-\n-package org.gradoop.flink.algorithms.fsm.common.canonicalization.gspan;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/common/config/CanonicalLabel.java",
          "patch": "@@ -1,32 +0,0 @@\n-/*\n- * This file is part of Gradoop.\n- *\n- * Gradoop is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * Gradoop is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n- */\n-\n-package org.gradoop.flink.algorithms.fsm.common.config;\n-\n-/**\n- * FSM canonical labels.\n- */\n-public enum CanonicalLabel {\n-  /**\n-   * gSpan minimum DFS code\n-   */\n-  MIN_DFS,\n-  /**\n-   * canonical adjacency matrix\n-   */\n-  ADJACENCY_MATRIX\n-}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/common/config/FilterStrategy.java",
          "patch": "@@ -1,36 +0,0 @@\n-/*\n- * This file is part of Gradoop.\n- *\n- * Gradoop is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * Gradoop is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n- */\n-\n-package org.gradoop.flink.algorithms.fsm.common.config;\n-\n-/**\n- * Different strategies to filter embeddings by frequent subgraphs.\n- */\n-public enum FilterStrategy {\n-  /**\n-   * embeddings.join(frequentSubgraphs)\n-   */\n-  DEFAULT_JOIN,\n-  /**\n-   * embeddings.joinWithTiny(frequentSubgraphs)\n-   */\n-  BROADCAST_JOIN,\n-  /**\n-   * embeddings.filter(..).withBroadcastSet(frequentSubgraphs,..)\n-   */\n-  BROADCAST_FILTER\n-}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/common/config/GrowthStrategy.java",
          "patch": "@@ -1,32 +0,0 @@\n-/*\n- * This file is part of Gradoop.\n- *\n- * Gradoop is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * Gradoop is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n- */\n-\n-package org.gradoop.flink.algorithms.fsm.common.config;\n-\n-/**\n- * FSM pattern growth strategies.\n- */\n-public enum GrowthStrategy {\n-  /**\n-   * create k+1 edge embeddings by fusion of multiple k edge embeddings\n-   */\n-  FUSION,\n-  /**\n-   * create k+1 edge embeddings by joining k edge ones with the search space\n-   */\n-  JOIN\n-}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/common/config/IterationStrategy.java",
          "patch": "@@ -1,32 +0,0 @@\n-/*\n- * This file is part of Gradoop.\n- *\n- * Gradoop is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * Gradoop is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n- */\n-\n-package org.gradoop.flink.algorithms.fsm.common.config;\n-\n-/**\n- * FSM iteration implementations.\n- */\n-public enum IterationStrategy {\n-  /**\n-   * For loop.\n-   */\n-  LOOP_UNROLLING,\n-  /**\n-   * Flinks\u0027 bulk iteration.\n-   */\n-  BULK_ITERATION\n-}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/common/config/package-info.java",
          "patch": "@@ -1,22 +0,0 @@\n-/*\n- * This file is part of Gradoop.\n- *\n- * Gradoop is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * Gradoop is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n- */\n-\n-/**\n- * Classes related to the configuration of frequent subgraph mining.\n- */\n-\n-package org.gradoop.flink.algorithms.fsm.common.config;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/common/functions/SubgraphIsFrequent.java",
          "patch": "@@ -1,54 +0,0 @@\n-/*\n- * This file is part of Gradoop.\n- *\n- * Gradoop is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * Gradoop is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n- */\n-\n-package org.gradoop.flink.algorithms.fsm.common.functions;\n-\n-import com.google.common.collect.Sets;\n-import org.apache.flink.api.common.functions.RichFilterFunction;\n-import org.apache.flink.configuration.Configuration;\n-import org.gradoop.flink.algorithms.fsm.common.config.Constants;\n-import org.gradoop.flink.algorithms.fsm.common.tuples.SubgraphEmbeddings;\n-\n-import java.util.Collection;\n-\n-/**\n- * Evaluates to true if the subgraph of an embeddings list is frequent.\n- *\n- * @param \u003cS\u003e subgraph embeddings type\n- */\n-public class SubgraphIsFrequent\u003cS extends SubgraphEmbeddings\u003e\n-  extends RichFilterFunction\u003cS\u003e {\n-\n-  /**\n-   * frequent subgraphs received via broadcast\n-   */\n-  private Collection\u003cString\u003e frequentSubgraphs;\n-\n-  @Override\n-  public void open(Configuration parameters) throws Exception {\n-    super.open(parameters);\n-\n-    this.frequentSubgraphs \u003d getRuntimeContext()\n-      .getBroadcastVariable(Constants.FREQUENT_SUBGRAPHS);\n-\n-    this.frequentSubgraphs \u003d Sets.newHashSet(frequentSubgraphs);\n-  }\n-  @Override\n-  public boolean filter(S value) throws Exception {\n-    return frequentSubgraphs.contains(value.getCanonicalLabel());\n-  }\n-}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/tfsm/TransactionalFSM.java",
          "patch": "@@ -1,285 +0,0 @@\n-/*\n- * This file is part of Gradoop.\n- *\n- * Gradoop is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * Gradoop is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n- */\n-\n-package org.gradoop.flink.algorithms.fsm.tfsm;\n-\n-import org.apache.flink.api.java.DataSet;\n-import org.apache.flink.api.java.operators.IterativeDataSet;\n-import org.apache.flink.api.java.typeutils.TypeExtractor;\n-import org.gradoop.flink.algorithms.fsm.common.TransactionalFSMBase;\n-import org.gradoop.flink.algorithms.fsm.common.config.Constants;\n-import org.gradoop.flink.algorithms.fsm.common.config.FSMConfig;\n-import org.gradoop.flink.algorithms.fsm.common.config.IterationStrategy;\n-import org.gradoop.flink.algorithms.fsm.common.functions.EdgeLabels;\n-import org.gradoop.flink.algorithms.fsm.common.functions.Frequent;\n-import org.gradoop.flink.algorithms.fsm.common.functions.MinEdgeCount;\n-import org.gradoop.flink.algorithms.fsm.common.functions.MinFrequency;\n-import org.gradoop.flink.algorithms.fsm.common.functions.VertexLabels;\n-import org.gradoop.flink.algorithms.fsm.common.functions.WithoutInfrequentEdgeLabels;\n-import org.gradoop.flink.algorithms.fsm.common.functions.WithoutInfrequentVertexLabels;\n-import org.gradoop.flink.algorithms.fsm.common.functions.IsResult;\n-import org.gradoop.flink.algorithms.fsm.tfsm.functions.TFSMSingleEdgeEmbeddings;\n-import org.gradoop.flink.algorithms.fsm.tfsm.functions.TFSMSubgraphDecoder;\n-import org.gradoop.flink.algorithms.fsm.tfsm.functions.TFSMSubgraphOnly;\n-import org.gradoop.flink.algorithms.fsm.tfsm.functions.ToTFSMGraph;\n-import org.gradoop.flink.algorithms.fsm.tfsm.functions.TFSMWrapInSubgraphEmbeddings;\n-import org.gradoop.flink.algorithms.fsm.tfsm.pojos.TFSMGraph;\n-import org.gradoop.flink.algorithms.fsm.tfsm.tuples.TFSMSubgraph;\n-import org.gradoop.flink.algorithms.fsm.tfsm.tuples.TFSMSubgraphEmbeddings;\n-import org.gradoop.flink.model.impl.GraphCollection;\n-import org.gradoop.flink.model.impl.GraphTransactions;\n-import org.gradoop.flink.model.impl.functions.tuple.ValueOfWithCount;\n-import org.gradoop.flink.model.impl.operators.count.Count;\n-import org.gradoop.flink.representation.transactional.GraphTransaction;\n-import org.gradoop.flink.model.impl.tuples.WithCount;\n-import org.gradoop.flink.util.GradoopFlinkConfig;\n-\n-/**\n- * abstract superclass of different implementations of the gSpan frequent\n- * subgraph mining algorithm as Gradoop operator\n- */\n-public class TransactionalFSM\n-  extends TransactionalFSMBase\u003cTFSMGraph, TFSMSubgraph, TFSMSubgraphEmbeddings\u003e\n-{\n-\n-  /**\n-   * minimum frequency for subgraphs to be considered to be frequent\n-   */\n-  private DataSet\u003cLong\u003e minFrequency;\n-\n-  /**\n-   * constructor\n-   * @param fsmConfig frequent subgraph mining configuration\n-   *\n-   */\n-  public TransactionalFSM(FSMConfig fsmConfig) {\n-    super(fsmConfig);\n-  }\n-\n-  @Override\n-  public GraphCollection execute(GraphCollection collection)  {\n-    GradoopFlinkConfig gradoopFlinkConfig \u003d collection.getConfig();\n-\n-    // create transactions from graph collection\n-    GraphTransactions transactions \u003d collection\n-      .toTransactions();\n-\n-    transactions \u003d execute(transactions);\n-\n-    return GraphCollection.fromTransactions(\n-      new GraphTransactions(\n-        transactions.getTransactions(), gradoopFlinkConfig));\n-  }\n-\n-  /**\n-   * Encodes the search space before executing FSM.\n-   *\n-   * @param transactions search space as Gradoop graph transactions\n-   *\n-   * @return frequent subgraphs as Gradoop graph transactions\n-   */\n-  public GraphTransactions execute(GraphTransactions transactions) {\n-    DataSet\u003cTFSMGraph\u003e graphs \u003d transactions\n-      .getTransactions()\n-      .map(new ToTFSMGraph())\n-      .returns(TypeExtractor.getForClass(TFSMGraph.class));\n-\n-    GradoopFlinkConfig gradoopConfig \u003d transactions.getConfig();\n-\n-    DataSet\u003cGraphTransaction\u003e dataSet \u003d execute(graphs, gradoopConfig);\n-\n-    return new GraphTransactions(dataSet, gradoopConfig);\n-  }\n-\n-  /**\n-   * Core mining method.\n-   *\n-   * @param graphs search space\n-   * @param gradoopConfig Gradoop Flink configuration\n-   *\n-   * @return frequent subgraphs\n-   */\n-  public DataSet\u003cGraphTransaction\u003e execute(\n-    DataSet\u003cTFSMGraph\u003e graphs, GradoopFlinkConfig gradoopConfig) {\n-\n-    setMinFrequency(graphs);\n-\n-    if (fsmConfig.isPreprocessingEnabled()) {\n-      graphs \u003d preProcess(graphs);\n-    }\n-\n-    DataSet\u003cTFSMSubgraph\u003e allFrequentSubgraphs;\n-\n-    DataSet\u003cTFSMSubgraphEmbeddings\u003e embeddings \u003d graphs\n-      .flatMap(new TFSMSingleEdgeEmbeddings(fsmConfig));\n-\n-    if (fsmConfig.getIterationStrategy() \u003d\u003d IterationStrategy.LOOP_UNROLLING) {\n-      allFrequentSubgraphs \u003d mineWithLoopUnrolling(graphs, embeddings);\n-    } else  {\n-      allFrequentSubgraphs \u003d mineWithBulkIteration(graphs, embeddings);\n-    }\n-\n-    if (fsmConfig.getMinEdgeCount() \u003e 1) {\n-      allFrequentSubgraphs \u003d allFrequentSubgraphs\n-        .filter(new MinEdgeCount\u003cTFSMSubgraph\u003e(fsmConfig));\n-    }\n-\n-    return allFrequentSubgraphs\n-      .map(new TFSMSubgraphDecoder(gradoopConfig));\n-  }\n-\n-  /**\n-   * Determines the min frequency based on graph count and support threshold.\n-   *\n-   * @param graphs search space\n-   */\n-  private void setMinFrequency(DataSet\u003cTFSMGraph\u003e graphs) {\n-    minFrequency \u003d Count\n-      .count(graphs)\n-      .map(new MinFrequency(fsmConfig));\n-  }\n-\n-  /**\n-   * Removes vertices and edges showing infrequent labels.\n-   *\n-   * @param graphs search space\n-   * @return processed search space\n-   */\n-  private DataSet\u003cTFSMGraph\u003e preProcess(DataSet\u003cTFSMGraph\u003e graphs) {\n-    DataSet\u003cString\u003e frequentVertexLabels \u003d graphs\n-      .flatMap(new VertexLabels\u003cTFSMGraph\u003e())\n-      .groupBy(0)\n-      .sum(1)\n-      .filter(new Frequent\u003cWithCount\u003cString\u003e\u003e())\n-      .withBroadcastSet(minFrequency, Constants.MIN_FREQUENCY)\n-      .map(new ValueOfWithCount\u003cString\u003e());\n-\n-    graphs \u003d graphs\n-      .map(new WithoutInfrequentVertexLabels\u003cTFSMGraph\u003e())\n-      .withBroadcastSet(\n-        frequentVertexLabels, Constants.FREQUENT_VERTEX_LABELS);\n-\n-    DataSet\u003cString\u003e frequentEdgeLabels \u003d graphs\n-      .flatMap(new EdgeLabels\u003cTFSMGraph\u003e())\n-      .groupBy(0)\n-      .sum(1)\n-      .filter(new Frequent\u003cWithCount\u003cString\u003e\u003e())\n-      .withBroadcastSet(minFrequency, Constants.MIN_FREQUENCY)\n-      .map(new ValueOfWithCount\u003cString\u003e());\n-\n-    graphs \u003d graphs\n-      .map(new WithoutInfrequentEdgeLabels\u003cTFSMGraph\u003e())\n-      .withBroadcastSet(frequentEdgeLabels, Constants.FREQUENT_EDGE_LABELS);\n-    return graphs;\n-  }\n-\n-  /**\n-   * Mining core based on loop unrolling.\n-   *\n-   * @param graphs search space\n-   * @param embeddings 1-edge embeddings\n-   * @return frequent subgraphs\n-   */\n-  private DataSet\u003cTFSMSubgraph\u003e mineWithLoopUnrolling(\n-    DataSet\u003cTFSMGraph\u003e graphs, DataSet\u003cTFSMSubgraphEmbeddings\u003e embeddings) {\n-\n-    DataSet\u003cTFSMSubgraph\u003e frequentSubgraphs \u003d getFrequentSubgraphs(embeddings);\n-    DataSet\u003cTFSMSubgraph\u003e allFrequentSubgraphs \u003d frequentSubgraphs;\n-\n-    if (fsmConfig.getMaxEdgeCount() \u003e 1) {\n-      for (int k \u003d fsmConfig.getMinEdgeCount();\n-           k \u003c fsmConfig.getMaxEdgeCount(); k++) {\n-\n-        embeddings \u003d growEmbeddingsOfFrequentSubgraphs(\n-          graphs, embeddings, frequentSubgraphs);\n-\n-        frequentSubgraphs \u003d getFrequentSubgraphs(embeddings);\n-        allFrequentSubgraphs \u003d allFrequentSubgraphs.union(frequentSubgraphs);\n-      }\n-    }\n-\n-    return allFrequentSubgraphs;\n-  }\n-\n-  /**\n-   * Mining core based on bulk iteration.\n-   *\n-   * @param graphs search space\n-   * @param embeddings 1-edge embeddings\n-   * @return frequent subgraphs\n-   */\n-  private DataSet\u003cTFSMSubgraph\u003e mineWithBulkIteration(\n-    DataSet\u003cTFSMGraph\u003e graphs, DataSet\u003cTFSMSubgraphEmbeddings\u003e embeddings) {\n-\n-    // ITERATION HEAD\n-    IterativeDataSet\u003cTFSMSubgraphEmbeddings\u003e iterative \u003d embeddings\n-      .iterate(fsmConfig.getMaxEdgeCount());\n-\n-    // ITERATION BODY\n-\n-    // get frequent subgraphs\n-    DataSet\u003cTFSMSubgraphEmbeddings\u003e parentEmbeddings \u003d iterative\n-      .filter(new IsResult\u003cTFSMSubgraphEmbeddings\u003e(false));\n-\n-    DataSet\u003cTFSMSubgraph\u003e frequentSubgraphs \u003d\n-      getFrequentSubgraphs(parentEmbeddings);\n-\n-    parentEmbeddings \u003d\n-      filterByFrequentSubgraphs(parentEmbeddings, frequentSubgraphs);\n-\n-    DataSet\u003cTFSMSubgraphEmbeddings\u003e childEmbeddings \u003d\n-      growEmbeddingsOfFrequentSubgraphs(\n-        graphs, parentEmbeddings, frequentSubgraphs);\n-\n-    DataSet\u003cTFSMSubgraphEmbeddings\u003e resultIncrement \u003d frequentSubgraphs\n-      .map(new TFSMWrapInSubgraphEmbeddings());\n-\n-    DataSet\u003cTFSMSubgraphEmbeddings\u003e resultAndEmbeddings \u003d iterative\n-      .filter(new IsResult\u003cTFSMSubgraphEmbeddings\u003e(true))\n-      .union(resultIncrement)\n-      .union(childEmbeddings);\n-\n-    // ITERATION FOOTER\n-\n-    return iterative\n-      .closeWith(resultAndEmbeddings, childEmbeddings)\n-      .filter(new IsResult\u003cTFSMSubgraphEmbeddings\u003e(true))\n-      .map(new TFSMSubgraphOnly());\n-  }\n-\n-  /**\n-   * Determines frequent subgraphs in a set of embeddings.\n-   *\n-   * @param embeddings set of embeddings\n-   * @return frequent subgraphs\n-   */\n-  private DataSet\u003cTFSMSubgraph\u003e getFrequentSubgraphs(\n-    DataSet\u003cTFSMSubgraphEmbeddings\u003e embeddings) {\n-    return embeddings\n-        .map(new TFSMSubgraphOnly())\n-        .groupBy(0)\n-        .sum(1)\n-        .filter(new Frequent\u003cTFSMSubgraph\u003e())\n-        .withBroadcastSet(minFrequency, Constants.MIN_FREQUENCY);\n-  }\n-\n-  @Override\n-  public String getName() {\n-    return this.getClass().getSimpleName();\n-  }\n-\n-}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/tfsm/functions/package-info.java",
          "patch": "@@ -1,22 +0,0 @@\n-/*\n- * This file is part of Gradoop.\n- *\n- * Gradoop is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * Gradoop is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n- */\n-\n-/**\n- * Flink functions related to transactional frequent subgraph mining.\n- */\n-\n-package org.gradoop.flink.algorithms.fsm.tfsm.functions;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/tfsm/package-info.java",
          "patch": "@@ -1,22 +0,0 @@\n-/*\n- * This file is part of Gradoop.\n- *\n- * Gradoop is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * Gradoop is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n- */\n-\n-/**\n- * classes related to transactional frequent subgraph mining\n- */\n-\n-package org.gradoop.flink.algorithms.fsm.tfsm;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/tfsm/pojos/package-info.java",
          "patch": "@@ -1,22 +0,0 @@\n-/*\n- * This file is part of Gradoop.\n- *\n- * Gradoop is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * Gradoop is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n- */\n-\n-/**\n- * pojos related to transactional frequent subgraph mining\n- */\n-\n-package org.gradoop.flink.algorithms.fsm.tfsm.pojos;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/tfsm/tuples/package-info.java",
          "patch": "@@ -1,22 +0,0 @@\n-/*\n- * This file is part of Gradoop.\n- *\n- * Gradoop is free software: you can redistribute it and/or modify\n- * it under the terms of the GNU General Public License as published by\n- * the Free Software Foundation, either version 3 of the License, or\n- * (at your option) any later version.\n- *\n- * Gradoop is distributed in the hope that it will be useful,\n- * but WITHOUT ANY WARRANTY; without even the implied warranty of\n- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n- * GNU General Public License for more details.\n- *\n- * You should have received a copy of the GNU General Public License\n- * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n- */\n-\n-/**\n- * tuple-types related to transactional frequent subgraph mining\n- */\n-\n-package org.gradoop.flink.algorithms.fsm.tfsm.tuples;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/CategoryCharacteristicSubgraphs.java",
          "patch": "@@ -0,0 +1,257 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional;\n+\n+import org.apache.flink.api.java.DataSet;\n+import org.apache.flink.api.java.operators.FilterOperator;\n+import org.apache.flink.api.java.operators.IterativeDataSet;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.TFSMConstants;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.CCSSingleEdgeEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.CCSSubgraphDecoder;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.CCSSubgraphOnly;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.CCSWrapInSubgraphEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.CategoryEdgeLabels;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.CategoryFrequent;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.CategoryFrequentAndInteresting;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.CategoryGraphCounts;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.CategoryMinFrequencies;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.CategoryVertexLabels;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.CategoryWithCount;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.IsCharacteristic;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.LabelOnly;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.ToCCSGraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.CCSGraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.CCSSubgraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.CCSSubgraphEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.ThinkLikeAnEmbeddingFSMBase;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.FSMConfig;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.MinEdgeCount;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.WithoutInfrequentEdgeLabels;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.WithoutInfrequentVertexLabels;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.IsResult;\n+import org.gradoop.flink.model.impl.functions.utils.First;\n+import org.gradoop.flink.representation.transactional.GraphTransaction;\n+\n+import java.util.Map;\n+\n+/**\n+ * abstract superclass of different implementations of the gSpan frequent\n+ * subgraph mining algorithm as Gradoop operator\n+ */\n+public class CategoryCharacteristicSubgraphs\n+  extends ThinkLikeAnEmbeddingFSMBase\u003cCCSGraph, CCSSubgraph, CCSSubgraphEmbeddings\u003e {\n+\n+  /**\n+   * Property key to store a category association.\n+   */\n+  public static final String CATEGORY_KEY \u003d \"_category\";\n+\n+  /**\n+   * minimum frequency for subgraphs to be considered to be frequent\n+   */\n+  private DataSet\u003cMap\u003cString, Long\u003e\u003e categoryCounts;\n+\n+  /**\n+   * minimum frequency for subgraphs to be considered to be frequent\n+   */\n+  private DataSet\u003cMap\u003cString, Long\u003e\u003e categoryMinFrequencies;\n+\n+  /**\n+   * interstingness threshold\n+   */\n+  private final float minInterestingness;\n+\n+  /**\n+   * constructor\n+   * @param fsmConfig frequent subgraph mining configuration\n+   * @param minInterestingness minInterestingness threshold\n+   *\n+   */\n+  public CategoryCharacteristicSubgraphs(\n+    FSMConfig fsmConfig, float minInterestingness) {\n+    super(fsmConfig);\n+    this.minInterestingness \u003d minInterestingness;\n+  }\n+\n+  /**\n+   * Executes the algorithm based on transactional representation.\n+   *\n+   * @param transactions search space\n+   * @return category characteristic subgraphs\n+   */\n+  public DataSet\u003cGraphTransaction\u003e execute(DataSet\u003cGraphTransaction\u003e transactions) {\n+\n+    DataSet\u003cCCSGraph\u003e  graphs \u003d transactions\n+      .map(new ToCCSGraph());\n+\n+    setCategoryCounts(graphs);\n+\n+    setMinFrequencies();\n+\n+    if (fsmConfig.isPreprocessingEnabled()) {\n+      graphs \u003d preProcessCategories(graphs);\n+    }\n+\n+    DataSet\u003cCCSSubgraphEmbeddings\u003e embeddings \u003d graphs\n+      .flatMap(new CCSSingleEdgeEmbeddings(fsmConfig));\n+\n+    // ITERATION HEAD\n+    IterativeDataSet\u003cCCSSubgraphEmbeddings\u003e iterative \u003d embeddings\n+      .iterate(fsmConfig.getMaxEdgeCount());\n+\n+    // ITERATION BODY\n+\n+    // get frequent subgraphs\n+    DataSet\u003cCCSSubgraphEmbeddings\u003e parentEmbeddings \u003d iterative\n+      .filter(new IsResult\u003c\u003e(false));\n+\n+    DataSet\u003cCCSSubgraph\u003e categoryFrequentSubgraphs \u003d\n+      getCategoryFrequentSubgraphs(parentEmbeddings);\n+\n+    DataSet\u003cCCSSubgraph\u003e frequentSubgraphs \u003d categoryFrequentSubgraphs\n+      .groupBy(0)\n+      .reduceGroup(new First\u003c\u003e());\n+\n+    parentEmbeddings \u003d\n+      filterByFrequentSubgraphs(parentEmbeddings, frequentSubgraphs);\n+\n+    DataSet\u003cCCSSubgraphEmbeddings\u003e childEmbeddings \u003d\n+      growEmbeddingsOfFrequentSubgraphs(parentEmbeddings, frequentSubgraphs\n+      );\n+\n+    DataSet\u003cCCSSubgraphEmbeddings\u003e resultIncrement \u003d\n+      getCharacteristicSubgraphs(categoryFrequentSubgraphs)\n+        .map(new CCSWrapInSubgraphEmbeddings());\n+\n+    DataSet\u003cCCSSubgraphEmbeddings\u003e resultAndEmbeddings \u003d iterative\n+      .filter(new IsResult\u003c\u003e(true))\n+      .union(resultIncrement)\n+      .union(childEmbeddings);\n+\n+    // ITERATION FOOTER\n+\n+    DataSet\u003cCCSSubgraph\u003e characteristicSubgraphs \u003d iterative\n+      .closeWith(resultAndEmbeddings, childEmbeddings)\n+      .filter(new IsResult\u003c\u003e(true))\n+      .map(new CCSSubgraphOnly());\n+\n+    if (fsmConfig.getMinEdgeCount() \u003e 1) {\n+      characteristicSubgraphs \u003d characteristicSubgraphs\n+        .filter(new MinEdgeCount\u003c\u003e(fsmConfig));\n+    }\n+\n+    return characteristicSubgraphs\n+      .map(new CCSSubgraphDecoder(gradoopFlinkConfig));\n+  }\n+\n+  /**\n+   * Determines the graph count for each category.\n+   *\n+   * @param graphs search space\n+   */\n+  private void setCategoryCounts(DataSet\u003cCCSGraph\u003e graphs) {\n+    categoryCounts \u003d graphs\n+      .map(new CategoryWithCount())\n+      .groupBy(0)\n+      .sum(1)\n+      .reduceGroup(new CategoryGraphCounts());\n+  }\n+\n+  /**\n+   * Determines the min frequency per category based on category graph count\n+   * and support threshold.\n+   **/\n+  private void setMinFrequencies() {\n+    categoryMinFrequencies \u003d categoryCounts\n+      .map(new CategoryMinFrequencies(fsmConfig));\n+  }\n+\n+  /**\n+   * Removes vertices and edges showing labels that are infrequent in all\n+   * categories.\n+   *\n+   * @param graphs graph collection\n+   * @return processed graph collection\n+   */\n+  private DataSet\u003cCCSGraph\u003e preProcessCategories(DataSet\u003cCCSGraph\u003e graphs) {\n+    DataSet\u003cString\u003e frequentVertexLabels \u003d graphs\n+      .flatMap(new CategoryVertexLabels())\n+      .groupBy(0, 1)\n+      .sum(2)\n+      .filter(new CategoryFrequent())\n+      .withBroadcastSet(categoryMinFrequencies, TFSMConstants.MIN_FREQUENCY)\n+      .map(new LabelOnly())\n+      .distinct();\n+\n+    graphs \u003d graphs\n+      .map(new WithoutInfrequentVertexLabels\u003cCCSGraph\u003e())\n+      .withBroadcastSet(\n+        frequentVertexLabels, TFSMConstants.FREQUENT_VERTEX_LABELS);\n+\n+    DataSet\u003cString\u003e frequentEdgeLabels \u003d graphs\n+      .flatMap(new CategoryEdgeLabels())\n+      .groupBy(0, 1)\n+      .sum(2)\n+      .filter(new CategoryFrequent())\n+      .withBroadcastSet(categoryMinFrequencies, TFSMConstants.MIN_FREQUENCY)\n+      .map(new LabelOnly())\n+      .distinct();\n+\n+    graphs \u003d graphs\n+      .map(new WithoutInfrequentEdgeLabels\u003cCCSGraph\u003e())\n+      .withBroadcastSet(frequentEdgeLabels, TFSMConstants.FREQUENT_EDGE_LABELS);\n+\n+    return graphs;\n+  }\n+\n+  /**\n+   * Returns characteristic from category frequent subgraphs.\n+   *\n+   * @param frequentSubgraphs subgraphs, frequent in at least one category\n+   * @return characteristic subgraphs\n+   */\n+  private FilterOperator\u003cCCSSubgraph\u003e getCharacteristicSubgraphs(\n+    DataSet\u003cCCSSubgraph\u003e frequentSubgraphs) {\n+    return frequentSubgraphs\n+      .filter(new IsCharacteristic());\n+  }\n+\n+  /**\n+   * Determines frequent subgraphs in a set of embeddings.\n+   *\n+   * @param embeddings set of embeddings\n+   * @return frequent subgraphs\n+   */\n+  private DataSet\u003cCCSSubgraph\u003e getCategoryFrequentSubgraphs(\n+    DataSet\u003cCCSSubgraphEmbeddings\u003e embeddings) {\n+    return embeddings\n+      .map(new CCSSubgraphOnly())\n+      .groupBy(0, 3)\n+      .sum(1)\n+      .groupBy(0)\n+      .reduceGroup(new CategoryFrequentAndInteresting(minInterestingness))\n+      .withBroadcastSet(categoryCounts, TFSMConstants.GRAPH_COUNT)\n+      .withBroadcastSet(categoryMinFrequencies, TFSMConstants.MIN_FREQUENCY);\n+  }\n+\n+  @Override\n+  public String getName() {\n+    return this.getClass().getSimpleName();\n+  }\n+\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/GSpanIterative.java",
          "patch": "@@ -0,0 +1,99 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional;\n+\n+import org.apache.flink.api.java.DataSet;\n+import org.apache.flink.api.java.operators.FlatMapOperator;\n+import org.apache.flink.api.java.operators.IterativeDataSet;\n+import org.gradoop.common.model.impl.id.GradoopId;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.GSpanBase;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.functions.CreateCollector;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.functions.ExpandResult;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.functions.HasEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.functions.IsCollector;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.functions.PatternGrowth;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.TFSMConstants;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.FSMConfig;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.functions.InitSingleEdgeEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.functions.Report;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.tuples.GraphEmbeddingsPair;\n+import org.gradoop.flink.model.impl.tuples.IdWithLabel;\n+import org.gradoop.flink.model.impl.tuples.WithCount;\n+import org.gradoop.flink.representation.transactional.AdjacencyList;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalCode;\n+\n+/**\n+ * abstract superclass of different implementations of the gSpan frequent\n+ * subgraph mining algorithm as Gradoop operator\n+ */\n+public class GSpanIterative extends GSpanBase {\n+\n+  /**\n+   * constructor\n+   * @param fsmConfig frequent subgraph mining configuration\n+   *\n+   */\n+  public GSpanIterative(FSMConfig fsmConfig) {\n+    super(fsmConfig);\n+  }\n+\n+  @Override\n+  protected DataSet\u003cWithCount\u003cTraversalCode\u003cString\u003e\u003e\u003e mine(\n+    DataSet\u003cAdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e\u003e graphs) {\n+\n+    DataSet\u003cGraphEmbeddingsPair\u003e searchSpace \u003d graphs\n+      .map(new InitSingleEdgeEmbeddings(gSpan));\n+\n+    DataSet\u003cGraphEmbeddingsPair\u003e collector \u003d graphs\n+      .getExecutionEnvironment()\n+      .fromElements(true)\n+      .map(new CreateCollector());\n+\n+    searchSpace \u003d searchSpace.union(collector);\n+\n+    // ITERATION HEAD\n+\n+    IterativeDataSet\u003cGraphEmbeddingsPair\u003e iterative \u003d searchSpace\n+      .iterate(fsmConfig.getMaxEdgeCount());\n+\n+    // ITERATION BODY\n+\n+    FlatMapOperator\u003cGraphEmbeddingsPair, WithCount\u003cTraversalCode\u003cString\u003e\u003e\u003e reports \u003d iterative\n+      .flatMap(new Report());\n+\n+    DataSet\u003cWithCount\u003cTraversalCode\u003cString\u003e\u003e\u003e frequentPatterns \u003d getFrequentPatterns(reports);\n+\n+    DataSet\u003cGraphEmbeddingsPair\u003e grownEmbeddings \u003d iterative\n+      .map(new PatternGrowth(gSpan))\n+      .withBroadcastSet(frequentPatterns, TFSMConstants.FREQUENT_PATTERNS)\n+      .filter(new HasEmbeddings());\n+\n+    // ITERATION FOOTER\n+\n+    return iterative\n+      .closeWith(grownEmbeddings, frequentPatterns)\n+      .filter(new IsCollector())\n+      .flatMap(new ExpandResult());\n+  }\n+\n+  @Override\n+  public String getName() {\n+    return this.getClass().getSimpleName();\n+  }\n+\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/ThinkLikeAnEmbeddingTFSM.java",
          "patch": "@@ -0,0 +1,135 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional;\n+\n+import org.apache.flink.api.java.DataSet;\n+import org.apache.flink.api.java.operators.IterativeDataSet;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.TFSMConstants;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.ThinkLikeAnEmbeddingFSMBase;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.FSMConfig;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.Frequent;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.MinEdgeCount;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.IsResult;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.TFSMSingleEdgeEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.TFSMSubgraphDecoder;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.TFSMSubgraphOnly;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.ToTFSMGraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.TFSMWrapInSubgraphEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.TFSMGraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.TFSMSubgraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.TFSMSubgraphEmbeddings;\n+import org.gradoop.flink.representation.transactional.GraphTransaction;\n+\n+/**\n+ * abstract superclass of different implementations of the gSpan frequent\n+ * subgraph mining algorithm as Gradoop operator\n+ */\n+public class ThinkLikeAnEmbeddingTFSM\n+  extends ThinkLikeAnEmbeddingFSMBase\u003cTFSMGraph, TFSMSubgraph, TFSMSubgraphEmbeddings\u003e {\n+\n+  /**\n+   * constructor\n+   * @param fsmConfig frequent subgraph mining configuration\n+   *\n+   */\n+  public ThinkLikeAnEmbeddingTFSM(FSMConfig fsmConfig) {\n+    super(fsmConfig);\n+  }\n+\n+  /**\n+   * Core mining method.\n+   *\n+   * @param transactions search space\n+   *\n+   * @return frequent subgraphs\n+   */\n+  public DataSet\u003cGraphTransaction\u003e execute(DataSet\u003cGraphTransaction\u003e transactions) {\n+\n+    transactions \u003d preProcess(transactions);\n+\n+    DataSet\u003cTFSMGraph\u003e graphs \u003d transactions\n+      .map(new ToTFSMGraph());\n+\n+    DataSet\u003cTFSMSubgraphEmbeddings\u003e embeddings \u003d graphs\n+      .flatMap(new TFSMSingleEdgeEmbeddings(fsmConfig));\n+\n+    // ITERATION HEAD\n+    IterativeDataSet\u003cTFSMSubgraphEmbeddings\u003e iterative \u003d embeddings\n+      .iterate(fsmConfig.getMaxEdgeCount());\n+\n+    // ITERATION BODY\n+\n+    // get frequent subgraphs\n+    DataSet\u003cTFSMSubgraphEmbeddings\u003e parentEmbeddings \u003d iterative\n+      .filter(new IsResult\u003c\u003e(false));\n+\n+    DataSet\u003cTFSMSubgraph\u003e frequentSubgraphs \u003d\n+      getFrequentSubgraphs(parentEmbeddings);\n+\n+    parentEmbeddings \u003d\n+      filterByFrequentSubgraphs(parentEmbeddings, frequentSubgraphs);\n+\n+    DataSet\u003cTFSMSubgraphEmbeddings\u003e childEmbeddings \u003d\n+      growEmbeddingsOfFrequentSubgraphs(parentEmbeddings, frequentSubgraphs);\n+\n+    DataSet\u003cTFSMSubgraphEmbeddings\u003e resultIncrement \u003d frequentSubgraphs\n+      .map(new TFSMWrapInSubgraphEmbeddings());\n+\n+    DataSet\u003cTFSMSubgraphEmbeddings\u003e resultAndEmbeddings \u003d iterative\n+      .filter(new IsResult\u003c\u003e(true))\n+      .union(resultIncrement)\n+      .union(childEmbeddings);\n+\n+    // ITERATION FOOTER\n+\n+    DataSet\u003cTFSMSubgraph\u003e  allFrequentSubgraphs \u003d iterative\n+      .closeWith(resultAndEmbeddings, childEmbeddings)\n+      .filter(new IsResult\u003c\u003e(true))\n+      .map(new TFSMSubgraphOnly());\n+\n+\n+    if (fsmConfig.getMinEdgeCount() \u003e 1) {\n+      allFrequentSubgraphs \u003d allFrequentSubgraphs\n+        .filter(new MinEdgeCount\u003c\u003e(fsmConfig));\n+    }\n+\n+    return allFrequentSubgraphs.map(new TFSMSubgraphDecoder(gradoopFlinkConfig));\n+  }\n+\n+  /**\n+   * Determines frequent subgraphs in a set of embeddings.\n+   *\n+   * @param embeddings set of embeddings\n+   * @return frequent subgraphs\n+   */\n+  private DataSet\u003cTFSMSubgraph\u003e getFrequentSubgraphs(\n+    DataSet\u003cTFSMSubgraphEmbeddings\u003e embeddings) {\n+    return embeddings\n+        .map(new TFSMSubgraphOnly())\n+        .groupBy(0)\n+        .sum(1)\n+        .filter(new Frequent\u003c\u003e())\n+        .withBroadcastSet(minFrequency, TFSMConstants.MIN_FREQUENCY);\n+  }\n+\n+  @Override\n+  public String getName() {\n+    return this.getClass().getSimpleName();\n+  }\n+\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/common/FSMConfig.java",
          "patch": "@@ -15,13 +15,7 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.config;\n-\n-import org.gradoop.flink.algorithms.fsm.common.canonicalization.api.CanonicalLabeler;\n-\n-\n-import org.gradoop.flink.algorithms.fsm.common.canonicalization.cam.CAMLabeler;\n-import org.gradoop.flink.algorithms.fsm.common.canonicalization.gspan.MinDFSLabeler;\n+package org.gradoop.flink.algorithms.fsm.transactional.common;\n \n import java.io.Serializable;\n \n@@ -56,58 +50,26 @@\n   private final boolean preprocessingEnbabled;\n \n   /**\n-   * labeler used to generate canonical labels\n-   */\n-  private final CanonicalLabel canonicalLabel;\n-\n-  /**\n-   * Strategy used to filter embeddings by frequent subgraphs\n-   */\n-  private final FilterStrategy filterStrategy;\n-\n-  /**\n-   * Strategy used to grow children of frequent subgraphs\n-   */\n-  private final GrowthStrategy growthStrategy;\n-\n-  /**\n-   * Strategy for distributed iteration\n-   */\n-  private final IterationStrategy iterationStrategy;\n-\n-  /**\n    * Constructor.\n    *\n    * @param minSupport min support\n    * @param directed true, for directed mode\n    * @param minEdgeCount min number of edges\n    * @param maxEdgeCount max number of edges\n    * @param preprocessingEnbabled true, to enable preprocessingEnbabled\n-   * @param canonicalLabel canonical label\n-   * @param filterStrategy frequent subgraph filter strategy\n-   * @param growthStrategy children growth strategy\n-   * @param iterationStrategy iteration strategy\n    */\n   public FSMConfig(\n     float minSupport,\n     boolean directed,\n     int minEdgeCount,\n     int maxEdgeCount,\n-    boolean preprocessingEnbabled,\n-    CanonicalLabel canonicalLabel,\n-    FilterStrategy filterStrategy,\n-    GrowthStrategy growthStrategy,\n-    IterationStrategy iterationStrategy\n+    boolean preprocessingEnbabled\n   ) {\n     this.minSupport \u003d minSupport;\n     this.directed \u003d directed;\n     this.minEdgeCount \u003d minEdgeCount;\n     this.maxEdgeCount \u003d maxEdgeCount;\n     this.preprocessingEnbabled \u003d preprocessingEnbabled;\n-    this.canonicalLabel \u003d canonicalLabel;\n-    this.filterStrategy \u003d filterStrategy;\n-    this.growthStrategy \u003d growthStrategy;\n-    this.iterationStrategy \u003d iterationStrategy;\n   }\n \n   /**\n@@ -129,10 +91,6 @@ public FSMConfig(\n     this.minEdgeCount \u003d minEdgeCount;\n     this.maxEdgeCount \u003d maxEdgeCount;\n     this.preprocessingEnbabled \u003d true;\n-    this.canonicalLabel \u003d CanonicalLabel.MIN_DFS;\n-    this.filterStrategy \u003d FilterStrategy.BROADCAST_JOIN;\n-    this.growthStrategy \u003d GrowthStrategy.FUSION;\n-    this.iterationStrategy \u003d IterationStrategy.BULK_ITERATION;\n   }\n \n   /**\n@@ -146,10 +104,6 @@ public FSMConfig(float minSupport, boolean directed) {\n     this.minEdgeCount \u003d 1;\n     this.maxEdgeCount \u003d 16;\n     this.preprocessingEnbabled \u003d true;\n-    this.canonicalLabel \u003d CanonicalLabel.MIN_DFS;\n-    this.filterStrategy \u003d FilterStrategy.BROADCAST_JOIN;\n-    this.growthStrategy \u003d GrowthStrategy.FUSION;\n-    this.iterationStrategy \u003d IterationStrategy.BULK_ITERATION;\n   }\n \n   public float getMinSupport() {\n@@ -177,21 +131,4 @@ public boolean isPreprocessingEnabled() {\n     return preprocessingEnbabled;\n   }\n \n-  public CanonicalLabeler getCanonicalLabeler() {\n-    return canonicalLabel \u003d\u003d CanonicalLabel.ADJACENCY_MATRIX ?\n-      new CAMLabeler(directed) : new MinDFSLabeler(directed);\n-  }\n-\n-  public FilterStrategy getFilterStrategy() {\n-    return filterStrategy;\n-  }\n-\n-  public GrowthStrategy getGrowthStrategy() {\n-    return growthStrategy;\n-  }\n-\n-  public IterationStrategy getIterationStrategy() {\n-    return iterationStrategy;\n-  }\n-\n }"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/common/TFSMConstants.java",
          "patch": "@@ -15,12 +15,12 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.config;\n+package org.gradoop.flink.algorithms.fsm.transactional.common;\n \n /**\n  * Collection of broadcast dataset names used for frequent subgraph mining.\n  */\n-public class Constants {\n+public class TFSMConstants {\n \n   /**\n    * Cache counter name for the total number of graphs.\n@@ -33,17 +33,30 @@\n   public static final String MIN_FREQUENCY \u003d \"minFrequency\";\n \n   /**\n-   * vertex label dictionary\n+   * frequent vertex labels\n    */\n-  public static final String FREQUENT_VERTEX_LABELS \u003d \"frequentVertexLabels\";\n+  public static final String FREQUENT_VERTEX_LABELS \u003d \"fvl\";\n \n   /**\n-   * vertex label dictionary\n+   * frequent edge labels\n    */\n-  public static final String FREQUENT_EDGE_LABELS \u003d \"frequentEdgeLabels\";\n+  public static final String FREQUENT_EDGE_LABELS \u003d \"fel\";\n \n   /**\n-   * set of frequent subgraphs\n+   * set of frequent patterns\n    */\n-  public static final String FREQUENT_SUBGRAPHS \u003d \"frequentSubgraphs\";\n+  public static final String FREQUENT_PATTERNS \u003d \"fp\";\n+\n+  /**\n+   * Graph head label of frequent subgraphs\n+   */\n+  public static final String FREQUENT_PATTERN_LABEL \u003d \"FrequentPattern\";\n+  /**\n+   * Property key to store a frequent subgraphs\u0027s frequency.\n+   */\n+  public static final String SUPPORT_KEY \u003d \"frequency\";\n+  /**\n+   * Property key to store the canonical label.\n+   */\n+  public static final String CANONICAL_LABEL_KEY \u003d \"canonicalLabel\";\n }"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/common/functions/DropPropertiesAndGraphContainment.java",
          "patch": "@@ -0,0 +1,46 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.common.functions;\n+\n+import org.apache.flink.api.common.functions.MapFunction;\n+import org.gradoop.common.model.impl.pojo.Edge;\n+import org.gradoop.common.model.impl.pojo.Vertex;\n+import org.gradoop.flink.representation.transactional.GraphTransaction;\n+\n+/**\n+ * drops properties and graph containment of vertices and edges.\n+ */\n+public class DropPropertiesAndGraphContainment\n+  implements MapFunction\u003cGraphTransaction, GraphTransaction\u003e {\n+\n+  @Override\n+  public GraphTransaction map(GraphTransaction transaction) throws Exception {\n+\n+    for (Vertex vertex : transaction.getVertices()) {\n+      vertex.setProperties(null);\n+      vertex.setGraphIds(null);\n+    }\n+\n+    for (Edge edge : transaction.getEdges()) {\n+      edge.setProperties(null);\n+      edge.setGraphIds(null);\n+    }\n+\n+    return transaction;\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/common/functions/EdgeLabels.java",
          "patch": "@@ -15,37 +15,35 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.common.functions;\n \n import com.google.common.collect.Sets;\n import org.apache.flink.api.common.functions.FlatMapFunction;\n import org.apache.flink.util.Collector;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMEdge;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMGraph;\n+import org.gradoop.common.model.impl.pojo.Edge;\n import org.gradoop.flink.model.impl.tuples.WithCount;\n+import org.gradoop.flink.representation.transactional.GraphTransaction;\n \n import java.util.Set;\n \n /**\n- * graph -\u003e (edgeLabel,1L),..\n- *\n- * @param \u003cG\u003e graph type\n+ * transaction -\u003e (edgeLabel,1L),..\n  */\n-public class EdgeLabels\u003cG extends FSMGraph\u003e\n-  implements FlatMapFunction\u003cG, WithCount\u003cString\u003e\u003e {\n+public class EdgeLabels\n+  implements FlatMapFunction\u003cGraphTransaction, WithCount\u003cString\u003e\u003e {\n \n   /**\n    * reuse tuple to avoid instantiations\n    */\n   private WithCount\u003cString\u003e reuseTuple \u003d new WithCount\u003c\u003e(null, 1);\n \n   @Override\n-  public void flatMap(G graph,\n+  public void flatMap(GraphTransaction graph,\n     Collector\u003cWithCount\u003cString\u003e\u003e out) throws Exception {\n \n     Set\u003cString\u003e edgeLabels \u003d Sets.newHashSet();\n \n-    for (FSMEdge edge : graph.getEdges().values()) {\n+    for (Edge edge : graph.getEdges()) {\n       edgeLabels.add(edge.getLabel());\n     }\n "
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/common/functions/FilterEdgesByLabel.java",
          "patch": "@@ -0,0 +1,78 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.common.functions;\n+\n+import com.google.common.collect.Sets;\n+import org.apache.flink.api.common.functions.RichMapFunction;\n+import org.apache.flink.configuration.Configuration;\n+import org.gradoop.common.model.impl.id.GradoopId;\n+import org.gradoop.common.model.impl.pojo.Edge;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.TFSMConstants;\n+import org.gradoop.flink.representation.transactional.GraphTransaction;\n+\n+import java.util.Collection;\n+import java.util.Iterator;\n+import java.util.Set;\n+\n+/**\n+ * Drops edges with infrequent labels and isolated vertices.\n+ */\n+public class FilterEdgesByLabel extends RichMapFunction\u003cGraphTransaction, GraphTransaction\u003e {\n+\n+  /**\n+   * frequent edge labels\n+   */\n+  private Collection\u003cString\u003e frequentEdgeLabels;\n+\n+  @Override\n+  public void open(Configuration parameters) throws Exception {\n+    super.open(parameters);\n+\n+    Collection\u003cString\u003e broadcast \u003d getRuntimeContext()\n+      .getBroadcastVariable(TFSMConstants.FREQUENT_EDGE_LABELS);\n+\n+    this.frequentEdgeLabels \u003d Sets.newHashSet(broadcast);\n+  }\n+\n+  @Override\n+  public GraphTransaction map(GraphTransaction transaction) throws Exception {\n+\n+    Set\u003cGradoopId\u003e referenceEdgeIds \u003d Sets.newHashSet();\n+\n+    // drop edges with infrequent labels\n+\n+    Iterator\u003cEdge\u003e edgeIterator \u003d transaction.getEdges().iterator();\n+\n+    while (edgeIterator.hasNext()) {\n+      Edge next \u003d edgeIterator.next();\n+\n+      if (frequentEdgeLabels.contains(next.getLabel())) {\n+        referenceEdgeIds.add(next.getSourceId());\n+        referenceEdgeIds.add(next.getTargetId());\n+      } else {\n+        edgeIterator.remove();\n+      }\n+    }\n+\n+    // drop vertex without any edges\n+\n+    transaction.getVertices().removeIf(next -\u003e !referenceEdgeIds.contains(next.getId()));\n+\n+    return transaction;\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/common/functions/FilterVerticesByLabel.java",
          "patch": "@@ -0,0 +1,78 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.common.functions;\n+\n+import com.google.common.collect.Sets;\n+import org.apache.flink.api.common.functions.RichMapFunction;\n+import org.apache.flink.configuration.Configuration;\n+import org.gradoop.common.model.impl.id.GradoopId;\n+import org.gradoop.common.model.impl.pojo.Vertex;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.TFSMConstants;\n+import org.gradoop.flink.representation.transactional.GraphTransaction;\n+\n+import java.util.Collection;\n+import java.util.Iterator;\n+import java.util.Set;\n+\n+/**\n+ * Drops vertices with infrequent labels and their incident edges.\n+ */\n+public class FilterVerticesByLabel extends RichMapFunction\u003cGraphTransaction, GraphTransaction\u003e {\n+\n+  /**\n+   * frequent vertex labels\n+   */\n+  private Collection\u003cString\u003e frequentVertexLabels;\n+\n+  @Override\n+  public void open(Configuration parameters) throws Exception {\n+    super.open(parameters);\n+\n+    Collection\u003cString\u003e broadcast \u003d getRuntimeContext()\n+      .getBroadcastVariable(TFSMConstants.FREQUENT_VERTEX_LABELS);\n+\n+    this.frequentVertexLabels \u003d Sets.newHashSet(broadcast);\n+  }\n+\n+  @Override\n+  public GraphTransaction map(GraphTransaction transaction) throws Exception {\n+\n+    Set\u003cGradoopId\u003e keptVertexIds \u003d Sets.newHashSet();\n+\n+    // drop vertices with infrequent labels\n+\n+    Iterator\u003cVertex\u003e vertexIterator \u003d transaction.getVertices().iterator();\n+\n+    while (vertexIterator.hasNext()) {\n+      Vertex next \u003d vertexIterator.next();\n+\n+      if (frequentVertexLabels.contains(next.getLabel())) {\n+        keptVertexIds.add(next.getId());\n+      } else {\n+        vertexIterator.remove();\n+      }\n+    }\n+\n+    // drop inconsistent edges\n+\n+    transaction.getEdges().removeIf(next -\u003e\n+      !keptVertexIds.contains(next.getSourceId()) || !keptVertexIds.contains(next.getTargetId()));\n+\n+    return transaction;\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/common/functions/NotEmpty.java",
          "patch": "@@ -15,21 +15,18 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.common.functions;\n \n-import org.apache.flink.api.common.functions.MapFunction;\n-import org.gradoop.flink.algorithms.fsm.common.tuples.Subgraph;\n+import org.apache.flink.api.common.functions.FilterFunction;\n+import org.gradoop.flink.representation.transactional.GraphTransaction;\n \n /**\n- * subgraph \u003d\u003e canonicalLabel\n- *\n- * @param \u003cS\u003e subgraph type\n+ * (g, V, E) \u003d\u003e true, if E not empty\n  */\n-public class CanonicalLabelOnly\u003cS extends Subgraph\u003e\n-  implements MapFunction\u003cS, String\u003e {\n+public class NotEmpty implements FilterFunction\u003cGraphTransaction\u003e {\n \n   @Override\n-  public String map(S value) throws Exception {\n-    return value.getCanonicalLabel();\n+  public boolean filter(GraphTransaction graphTransaction) throws Exception {\n+    return !graphTransaction.getEdges().isEmpty();\n   }\n }"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/common/functions/SortedDictionary.java",
          "patch": "@@ -0,0 +1,63 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.common.functions;\n+\n+import com.google.common.collect.Maps;\n+import org.apache.flink.api.common.functions.GroupReduceFunction;\n+import org.apache.flink.util.Collector;\n+import org.gradoop.flink.model.impl.tuples.WithCount;\n+\n+import java.util.Collection;\n+import java.util.Map;\n+import java.util.TreeSet;\n+\n+/**\n+ * (label, frequency),.. \u003d\u003e label-\u003etranslation\n+ * higher frequency leads to lower label\n+ */\n+public class SortedDictionary\n+  implements GroupReduceFunction\u003cWithCount\u003cString\u003e, Map\u003cString, Integer\u003e\u003e {\n+\n+  @Override\n+  public void reduce(Iterable\u003cWithCount\u003cString\u003e\u003e iterable,\n+    Collector\u003cMap\u003cString, Integer\u003e\u003e collector) throws Exception {\n+\n+    Map\u003cString, Integer\u003e dictionary \u003d Maps.newHashMap();\n+    Map\u003cLong, Collection\u003cString\u003e\u003e sortedLabels \u003d Maps.newTreeMap();\n+\n+    for (WithCount\u003cString\u003e labelFrequency : iterable) {\n+\n+      String label \u003d labelFrequency.getObject();\n+      Long frequency \u003d labelFrequency.getCount();\n+\n+      Collection\u003cString\u003e siblings \u003d sortedLabels.computeIfAbsent(frequency, k -\u003e new TreeSet\u003c\u003e());\n+\n+      siblings.add(label);\n+    }\n+\n+    int translation \u003d 0;\n+    for (Collection\u003cString\u003e siblings : sortedLabels.values()) {\n+      for (String label : siblings) {\n+        dictionary.put(label, translation);\n+        translation++;\n+      }\n+    }\n+\n+    collector.collect(dictionary);\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/common/functions/ToDirectedAdjacencyList.java",
          "patch": "@@ -0,0 +1,88 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.common.functions;\n+\n+import com.google.common.collect.Maps;\n+import org.apache.flink.api.common.functions.MapFunction;\n+import org.gradoop.common.model.impl.id.GradoopId;\n+import org.gradoop.common.model.impl.pojo.Edge;\n+import org.gradoop.common.model.impl.pojo.Vertex;\n+import org.gradoop.flink.model.impl.tuples.IdWithLabel;\n+import org.gradoop.flink.representation.common.adjacencylist.AdjacencyListCell;\n+import org.gradoop.flink.representation.common.adjacencylist.AdjacencyListRow;\n+import org.gradoop.flink.representation.transactional.AdjacencyList;\n+import org.gradoop.flink.representation.transactional.GraphTransaction;\n+\n+import java.util.Map;\n+import java.util.Set;\n+\n+/**\n+ * (g, V, E) \u003d\u003e adjacencyList\n+ * for directed graph\n+ */\n+public class ToDirectedAdjacencyList implements\n+  MapFunction\u003cGraphTransaction, AdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e\u003e {\n+\n+  @Override\n+  public AdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e map(\n+    GraphTransaction transaction) throws Exception {\n+\n+    Set\u003cVertex\u003e vertices \u003d transaction.getVertices();\n+    Set\u003cEdge\u003e edges \u003d transaction.getEdges();\n+\n+    int vertexCount \u003d vertices.size();\n+\n+    Map\u003cGradoopId, AdjacencyListRow\u003cIdWithLabel, IdWithLabel\u003e\u003e outgoingRows \u003d\n+      Maps.newHashMapWithExpectedSize(vertexCount);\n+\n+    Map\u003cGradoopId, AdjacencyListRow\u003cIdWithLabel, IdWithLabel\u003e\u003e incomingRows \u003d\n+      Maps.newHashMapWithExpectedSize(vertexCount);\n+\n+    Map\u003cGradoopId, String\u003e labels \u003d Maps.newHashMapWithExpectedSize(vertexCount);\n+\n+    // VERTICES\n+    for (Vertex vertex : vertices) {\n+      labels.put(vertex.getId(), vertex.getLabel());\n+    }\n+\n+    // EDGES\n+\n+    for (Edge edge : edges) {\n+      GradoopId sourceId \u003d edge.getSourceId();\n+\n+      AdjacencyListRow\u003cIdWithLabel, IdWithLabel\u003e outgoingRow \u003d\n+        outgoingRows.computeIfAbsent(sourceId, k -\u003e new AdjacencyListRow\u003c\u003e());\n+\n+      IdWithLabel sourceData \u003d new IdWithLabel(sourceId, labels.get(sourceId));\n+\n+      GradoopId targetId \u003d edge.getTargetId();\n+      AdjacencyListRow\u003cIdWithLabel, IdWithLabel\u003e incomingRow \u003d\n+        incomingRows.computeIfAbsent(targetId, k -\u003e new AdjacencyListRow\u003c\u003e());\n+\n+      IdWithLabel targetData \u003d new IdWithLabel(targetId, labels.get(targetId));\n+\n+      IdWithLabel edgeData \u003d new IdWithLabel(edge.getId(), edge.getLabel());\n+\n+      outgoingRow.getCells().add(new AdjacencyListCell\u003c\u003e(edgeData, targetData));\n+      incomingRow.getCells().add(new AdjacencyListCell\u003c\u003e(edgeData, sourceData));\n+    }\n+\n+    return new AdjacencyList\u003c\u003e(\n+      transaction.getGraphHead(), labels, null, outgoingRows, incomingRows);\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/common/functions/ToUndirectedAdjacencyList.java",
          "patch": "@@ -0,0 +1,87 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.common.functions;\n+\n+import com.google.common.collect.Maps;\n+import org.apache.flink.api.common.functions.MapFunction;\n+import org.gradoop.common.model.impl.id.GradoopId;\n+import org.gradoop.common.model.impl.pojo.Edge;\n+import org.gradoop.common.model.impl.pojo.Vertex;\n+import org.gradoop.flink.model.impl.tuples.IdWithLabel;\n+import org.gradoop.flink.representation.common.adjacencylist.AdjacencyListCell;\n+import org.gradoop.flink.representation.common.adjacencylist.AdjacencyListRow;\n+import org.gradoop.flink.representation.transactional.AdjacencyList;\n+import org.gradoop.flink.representation.transactional.GraphTransaction;\n+\n+import java.util.Map;\n+import java.util.Set;\n+\n+/**\n+ * (g, V, E) \u003d\u003e adjacencyList\n+ * for undirected graph\n+ */\n+public class ToUndirectedAdjacencyList implements\n+  MapFunction\u003cGraphTransaction, AdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e\u003e {\n+\n+  @Override\n+  public AdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e map(\n+    GraphTransaction transaction) throws Exception {\n+\n+    Set\u003cVertex\u003e vertices \u003d transaction.getVertices();\n+    Set\u003cEdge\u003e edges \u003d transaction.getEdges();\n+\n+    int vertexCount \u003d vertices.size();\n+\n+    Map\u003cGradoopId, AdjacencyListRow\u003cIdWithLabel, IdWithLabel\u003e\u003e rows \u003d\n+      Maps.newHashMapWithExpectedSize(vertexCount);\n+\n+    Map\u003cGradoopId, String\u003e labels \u003d Maps.newHashMapWithExpectedSize(vertexCount);\n+\n+    // VERTICES\n+    for (Vertex vertex : vertices) {\n+      labels.put(vertex.getId(), vertex.getLabel());\n+    }\n+\n+    // EDGES\n+\n+    for (Edge edge : edges) {\n+      GradoopId sourceId \u003d edge.getSourceId();\n+      GradoopId targetId \u003d edge.getTargetId();\n+\n+      AdjacencyListRow\u003cIdWithLabel, IdWithLabel\u003e sourceRow \u003d\n+        rows.computeIfAbsent(sourceId, k -\u003e new AdjacencyListRow\u003c\u003e());\n+\n+      IdWithLabel edgeData \u003d new IdWithLabel(edge.getId(), edge.getLabel());\n+      IdWithLabel targetData \u003d new IdWithLabel(targetId, labels.get(targetId));\n+\n+      sourceRow.getCells().add(new AdjacencyListCell\u003c\u003e(edgeData, targetData));\n+\n+      if (! sourceId.equals(targetId)) {\n+        IdWithLabel sourceData \u003d new IdWithLabel(sourceId, labels.get(sourceId));\n+\n+        AdjacencyListRow\u003cIdWithLabel, IdWithLabel\u003e targetRow \u003d\n+          rows.computeIfAbsent(targetId, k -\u003e new AdjacencyListRow\u003c\u003e());\n+\n+        targetRow.getCells().add(new AdjacencyListCell\u003c\u003e(edgeData, sourceData));\n+      }\n+    }\n+\n+    return new AdjacencyList\u003c\u003e(\n+      transaction.getGraphHead(), labels, null, rows, Maps.newHashMap());\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/common/functions/VertexLabels.java",
          "patch": "@@ -15,34 +15,37 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.common.functions;\n \n import com.google.common.collect.Sets;\n import org.apache.flink.api.common.functions.FlatMapFunction;\n import org.apache.flink.util.Collector;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMGraph;\n+import org.gradoop.common.model.impl.pojo.Vertex;\n import org.gradoop.flink.model.impl.tuples.WithCount;\n+import org.gradoop.flink.representation.transactional.GraphTransaction;\n \n import java.util.Set;\n \n /**\n- * graph -\u003e (vertexLabel,1L),..\n- *\n- * @param \u003cG\u003e graph type\n+ * transaction -\u003e (vertexLabel,1L),..\n  */\n-public class VertexLabels\u003cG extends FSMGraph\u003e\n-  implements FlatMapFunction\u003cG, WithCount\u003cString\u003e\u003e {\n+public class VertexLabels\n+  implements FlatMapFunction\u003cGraphTransaction, WithCount\u003cString\u003e\u003e {\n \n   /**\n    * reuse tuple to avoid instantiations\n    */\n   private WithCount\u003cString\u003e reuseTuple \u003d new WithCount\u003c\u003e(null, 1);\n \n   @Override\n-  public void flatMap(G graph,\n+  public void flatMap(GraphTransaction graph,\n     Collector\u003cWithCount\u003cString\u003e\u003e out) throws Exception {\n \n-    Set\u003cString\u003e vertexLabels \u003d Sets.newHashSet(graph.getVertices().values());\n+    Set\u003cString\u003e vertexLabels \u003d Sets.newHashSet();\n+\n+    for (Vertex vertex : graph.getVertices()) {\n+      vertexLabels.add(vertex.getLabel());\n+    }\n \n     for (String label : vertexLabels) {\n       reuseTuple.setObject(label);"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/common/functions/package-info.java",
          "patch": "@@ -0,0 +1,21 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+/**\n+ * Flink functions related to different variants of transactional frequent subgraph mining.\n+ */\n+package org.gradoop.flink.algorithms.fsm.transactional.common.functions;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/common/package-info.java",
          "patch": "@@ -0,0 +1,21 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+/**\n+ * Classes related to different variants of transactional frequent subgraph mining.\n+ */\n+package org.gradoop.flink.algorithms.fsm.transactional.common;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/gspan/GSpanBase.java",
          "patch": "@@ -0,0 +1,112 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.gspan;\n+\n+import org.apache.flink.api.java.DataSet;\n+import org.apache.flink.api.java.operators.FlatMapOperator;\n+import org.gradoop.common.model.impl.id.GradoopId;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.functions.ToUndirectedAdjacencyList;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.TransactionalFSMBase;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.algorithm.DirectedGSpanKernel;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.algorithm.GSpanKernel;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.algorithm.UndirectedGSpanKernel;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.TFSMConstants;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.FSMConfig;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.Frequent;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.functions.ToDirectedAdjacencyList;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.functions.ToGraphTransaction;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.functions.Validate;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.tuples.GraphEmbeddingsPair;\n+import org.gradoop.flink.model.impl.tuples.IdWithLabel;\n+import org.gradoop.flink.model.impl.tuples.WithCount;\n+\n+import org.gradoop.flink.representation.transactional.AdjacencyList;\n+import org.gradoop.flink.representation.transactional.GraphTransaction;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalCode;\n+\n+/**\n+ * Superclass of gSpan implementations.\n+ */\n+public abstract class GSpanBase extends TransactionalFSMBase {\n+\n+  /**\n+   * mining logic\n+   */\n+  protected final GSpanKernel gSpan;\n+\n+  /**\n+   * Constructor.\n+   *\n+   * @param fsmConfig FSM configuration\n+   */\n+  public GSpanBase(FSMConfig fsmConfig) {\n+    super(fsmConfig);\n+    gSpan \u003d fsmConfig.isDirected() ? new DirectedGSpanKernel() : new UndirectedGSpanKernel();\n+  }\n+\n+  /**\n+   * Encodes the search space before executing FSM.\n+   *\n+   * @param transactions search space as Gradoop graph transactions\n+   *\n+   * @return frequent patterns as Gradoop graph transactions\n+   */\n+  @Override\n+  public DataSet\u003cGraphTransaction\u003e execute(DataSet\u003cGraphTransaction\u003e transactions) {\n+\n+    transactions \u003d preProcess(transactions);\n+\n+    DataSet\u003cAdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e\u003e adjacencyLists \u003d\n+      transactions\n+        .map(fsmConfig.isDirected() ?\n+          new ToDirectedAdjacencyList() : new ToUndirectedAdjacencyList());\n+\n+    DataSet\u003cWithCount\u003cTraversalCode\u003cString\u003e\u003e\u003e allFrequentPatterns \u003d mine(adjacencyLists);\n+\n+    return allFrequentPatterns\n+      .map(new ToGraphTransaction())\n+      .withBroadcastSet(this.graphCount, TFSMConstants.GRAPH_COUNT);\n+  }\n+\n+  /**\n+   * Executes the actual mining process.\n+   *\n+   * @param graphs search space\n+   * @return frequent patterns\n+   */\n+  protected abstract DataSet\u003cWithCount\u003cTraversalCode\u003cString\u003e\u003e\u003e mine(\n+    DataSet\u003cAdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e\u003e graphs);\n+\n+  /**\n+   * Identifies valid frequent patterns from a dataset of reported patterns.\n+   *\n+   * @param patterns reported patterns\n+   * @return valid frequent patterns\n+   */\n+  protected DataSet\u003cWithCount\u003cTraversalCode\u003cString\u003e\u003e\u003e getFrequentPatterns(\n+    FlatMapOperator\u003cGraphEmbeddingsPair, WithCount\u003cTraversalCode\u003cString\u003e\u003e\u003e patterns) {\n+    return patterns\n+        .groupBy(0)\n+        .combineGroup(sumPartition())\n+        .filter(new Validate(gSpan))\n+        .groupBy(0)\n+        .sum(1)\n+        .filter(new Frequent\u003c\u003e())\n+        .withBroadcastSet(minFrequency, TFSMConstants.MIN_FREQUENCY);\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/gspan/algorithm/DirectedGSpanKernel.java",
          "patch": "@@ -0,0 +1,211 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.gspan.algorithm;\n+\n+import com.google.common.collect.Lists;\n+import com.google.common.collect.Maps;\n+import org.apache.commons.lang3.tuple.ImmutablePair;\n+import org.apache.commons.lang3.tuple.Pair;\n+import org.gradoop.common.model.impl.id.GradoopId;\n+import org.gradoop.flink.model.impl.tuples.IdWithLabel;\n+import org.gradoop.flink.representation.common.adjacencylist.AdjacencyListCell;\n+import org.gradoop.flink.representation.common.adjacencylist.AdjacencyListRow;\n+import org.gradoop.flink.representation.transactional.AdjacencyList;\n+import org.gradoop.flink.representation.transactional.traversalcode.Traversal;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalCode;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalEmbedding;\n+\n+import java.util.Map;\n+\n+/**\n+ * Provides methods for logic related to the gSpan algorithm in directed mode.\n+ */\n+public class DirectedGSpanKernel extends GSpanKernelBase {\n+\n+  @Override\n+  protected Pair\u003cTraversal\u003cString\u003e, TraversalEmbedding\u003e getTraversalEmbedding(\n+    GradoopId sourceId, String sourceLabel, AdjacencyListCell\u003cIdWithLabel, IdWithLabel\u003e cell) {\n+\n+    GradoopId targetId \u003d cell.getVertexData().getId();\n+    String targetLabel \u003d cell.getVertexData().getLabel();\n+\n+    GradoopId edgeId \u003d cell.getEdgeData().getId();\n+    String edgeLabel \u003d cell.getEdgeData().getLabel();\n+\n+    Traversal\u003cString\u003e traversal;\n+    TraversalEmbedding embedding;\n+\n+    // LOOP\n+    if (sourceId.equals(targetId)) {\n+      traversal \u003d new Traversal\u003c\u003e(\n+        0, sourceLabel, true, edgeLabel, 0, targetLabel);\n+\n+      embedding \u003d new TraversalEmbedding(\n+        Lists.newArrayList(sourceId), Lists.newArrayList(edgeId));\n+\n+      // OUTGOING\n+    } else if (sourceLabel.compareTo(targetLabel) \u003c\u003d 0) {\n+      traversal \u003d new Traversal\u003c\u003e(\n+        0, sourceLabel, true, edgeLabel, 1, targetLabel);\n+\n+      embedding \u003d new TraversalEmbedding(\n+        Lists.newArrayList(sourceId, targetId), Lists.newArrayList(edgeId));\n+\n+      // INCOMING\n+    } else {\n+      traversal \u003d new Traversal\u003c\u003e(\n+        0, targetLabel, false, edgeLabel, 1, sourceLabel);\n+\n+      embedding \u003d new TraversalEmbedding(\n+        Lists.newArrayList(targetId, sourceId), Lists.newArrayList(edgeId));\n+    }\n+\n+    return new ImmutablePair\u003c\u003e(traversal, embedding);\n+  }\n+\n+  @Override\n+  protected boolean validBranch(Traversal\u003cString\u003e firstExtension, String fromLabel,\n+    boolean outgoing, boolean loop, String edgeLabel, String toLabel) {\n+\n+    String filterFromLabel \u003d firstExtension.getFromValue();\n+    String filterEdgeLabel \u003d firstExtension.getEdgeValue();\n+    String filterToLabel \u003d firstExtension.getToValue();\n+\n+    int labelComparison \u003d fromLabel.compareTo(toLabel);\n+    boolean flip \u003d labelComparison \u003e 0 || labelComparison \u003d\u003d 0 \u0026\u0026 !outgoing;\n+\n+    if (flip) {\n+      String oldFromLabel \u003d fromLabel;\n+      fromLabel \u003d toLabel;\n+      toLabel \u003d oldFromLabel;\n+      outgoing \u003d !outgoing;\n+    }\n+\n+    boolean valid;\n+\n+    int fromLabelComparison \u003d filterFromLabel.compareTo(fromLabel);\n+\n+    if (fromLabelComparison \u003c 0) {\n+      valid \u003d true;\n+\n+    } else if (fromLabelComparison \u003e 0) {\n+      valid \u003d false;\n+\n+    } else {\n+\n+      boolean filterLoop \u003d firstExtension.isLoop();\n+      if (filterLoop \u003d\u003d loop) {\n+\n+        boolean filterOutgoing \u003d firstExtension.isOutgoing();\n+        if (filterOutgoing \u003d\u003d outgoing) {\n+          int edgeLabelComparison \u003d filterEdgeLabel.compareTo(edgeLabel);\n+\n+          if (edgeLabelComparison \u003c 0) {\n+            valid \u003d true;\n+\n+          } else if (edgeLabelComparison \u003e 0) {\n+            valid \u003d false;\n+\n+          } else {\n+\n+            int toLabelComparison \u003d filterToLabel.compareTo(toLabel);\n+\n+            if (toLabelComparison \u003c\u003d 0) {\n+              valid \u003d true;\n+\n+            } else {\n+              valid \u003d false;\n+            }\n+          }\n+        } else if (filterOutgoing) {\n+          valid \u003d true;\n+\n+        } else {\n+          valid \u003d false;\n+\n+        }\n+      } else if (filterLoop) {\n+        valid \u003d true;\n+\n+      } else {\n+        valid \u003d false;\n+\n+      }\n+    }\n+\n+    return valid;\n+  }\n+\n+  @Override\n+  public AdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e getAdjacencyList(\n+    TraversalCode\u003cString\u003e pattern) {\n+\n+    Map\u003cGradoopId, String\u003e labels \u003d Maps.newHashMap();\n+\n+    Map\u003cGradoopId, AdjacencyListRow\u003cIdWithLabel, IdWithLabel\u003e\u003e outgoingRows \u003d Maps.newHashMap();\n+    Map\u003cGradoopId, AdjacencyListRow\u003cIdWithLabel, IdWithLabel\u003e\u003e incomingRows \u003d Maps.newHashMap();\n+\n+    Map\u003cInteger, GradoopId\u003e timeVertexMap \u003d Maps.newHashMap();\n+\n+    // EDGES\n+    for (Traversal\u003cString\u003e traversal : pattern.getTraversals()) {\n+\n+      int sourceTime;\n+      String sourceLabel;\n+      int targetTime;\n+      String targetLabel;\n+\n+      if (traversal.isOutgoing()) {\n+        sourceTime \u003d traversal.getFromTime();\n+        sourceLabel \u003d traversal.getFromValue();\n+        targetTime \u003d traversal.getToTime();\n+        targetLabel \u003d traversal.getToValue();\n+      } else {\n+        sourceTime \u003d traversal.getToTime();\n+        sourceLabel \u003d traversal.getToValue();\n+        targetTime \u003d traversal.getFromTime();\n+        targetLabel \u003d traversal.getFromValue();\n+      }\n+\n+      GradoopId sourceId \u003d timeVertexMap.computeIfAbsent(sourceTime, k -\u003e GradoopId.get());\n+      labels.putIfAbsent(sourceId, sourceLabel);\n+      IdWithLabel sourceData \u003d new IdWithLabel(sourceId, sourceLabel);\n+\n+      GradoopId targetId \u003d timeVertexMap.computeIfAbsent(targetTime, k -\u003e GradoopId.get());\n+      labels.putIfAbsent(targetId, targetLabel);\n+      IdWithLabel targetData \u003d new IdWithLabel(targetId, targetLabel);\n+\n+      GradoopId edgeId \u003d GradoopId.get();\n+      String edgeLabel \u003d traversal.getEdgeValue();\n+      labels.put(edgeId, edgeLabel);\n+      IdWithLabel edgeData \u003d new IdWithLabel(edgeId, edgeLabel);\n+\n+      AdjacencyListRow\u003cIdWithLabel, IdWithLabel\u003e sourceRow \u003d\n+        outgoingRows.computeIfAbsent(sourceId, k -\u003e new AdjacencyListRow\u003c\u003e());\n+\n+      sourceRow.getCells().add(new AdjacencyListCell\u003c\u003e(edgeData, targetData));\n+\n+      AdjacencyListRow\u003cIdWithLabel, IdWithLabel\u003e targetRow \u003d\n+        incomingRows.computeIfAbsent(targetId, k -\u003e new AdjacencyListRow\u003c\u003e());\n+\n+      targetRow.getCells().add(new AdjacencyListCell\u003c\u003e(edgeData, sourceData));\n+    }\n+\n+    return new AdjacencyList\u003c\u003e(null, labels, null, outgoingRows, incomingRows);\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/gspan/algorithm/GSpanKernel.java",
          "patch": "@@ -0,0 +1,62 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.gspan.algorithm;\n+\n+import org.gradoop.common.model.impl.id.GradoopId;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.tuples.GraphEmbeddingsPair;\n+import org.gradoop.flink.model.impl.tuples.IdWithLabel;\n+import org.gradoop.flink.representation.transactional.AdjacencyList;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalCode;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalEmbedding;\n+\n+import java.util.Collection;\n+import java.util.Map;\n+\n+/**\n+ * Common functionality of directed and undirected gSpan implementations.\n+ */\n+public interface GSpanKernel {\n+\n+  /**\n+   * Finds all 1-edge patterns and their embeddings in a given graph.\n+   *\n+   * @param graph graph\n+   * @return pattern -\u003e embeddings\n+   */\n+  Map\u003cTraversalCode\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e getSingleEdgePatternEmbeddings(\n+    AdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e graph);\n+\n+  /**\n+   * Grows children of supported frequent patterns in a graph.\n+   *\n+   * @param graphEmbeddingsPair (graph, pattern -\u003e embeddings)\n+   * @param frequentPatterns [frequentPattern,..]\n+   */\n+  void growChildren(GraphEmbeddingsPair graphEmbeddingsPair,\n+    Collection\u003cTraversalCode\u003cString\u003e\u003e frequentPatterns);\n+\n+  /**\n+   * Checks if a pattern in DFS-code representation\n+   * is minimal according to gSpan lexicographic order.\n+   *\n+   * @param pattern pattern\n+   * @return true, if minimal\n+   */\n+  boolean isMinimal(TraversalCode\u003cString\u003e pattern);\n+\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/gspan/algorithm/GSpanKernelBase.java",
          "patch": "@@ -0,0 +1,450 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.gspan.algorithm;\n+\n+import com.google.common.collect.Lists;\n+import com.google.common.collect.Maps;\n+import com.google.common.collect.Sets;\n+import org.apache.commons.lang3.tuple.Pair;\n+import org.gradoop.common.model.impl.id.GradoopId;\n+import org.gradoop.common.model.impl.id.GradoopIdSet;\n+import org.gradoop.common.model.impl.pojo.Edge;\n+import org.gradoop.common.model.impl.pojo.GraphHead;\n+import org.gradoop.common.model.impl.pojo.Vertex;\n+import org.gradoop.common.model.impl.properties.Properties;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.TFSMConstants;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.tuples.GraphEmbeddingsPair;\n+import org.gradoop.flink.model.impl.tuples.IdWithLabel;\n+import org.gradoop.flink.model.impl.tuples.WithCount;\n+import org.gradoop.flink.representation.common.adjacencylist.AdjacencyListCell;\n+import org.gradoop.flink.representation.common.adjacencylist.AdjacencyListRow;\n+import org.gradoop.flink.representation.transactional.AdjacencyList;\n+import org.gradoop.flink.representation.transactional.GraphTransaction;\n+import org.gradoop.flink.representation.transactional.traversalcode.Traversal;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalCode;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalEmbedding;\n+\n+import java.io.Serializable;\n+import java.util.Collection;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+\n+/**\n+ * Superclass of gpan implementations.\n+ */\n+public abstract class GSpanKernelBase implements GSpanKernel, Serializable {\n+\n+  @Override\n+  public Map\u003cTraversalCode\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e getSingleEdgePatternEmbeddings(\n+    AdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e graph) {\n+\n+    Map\u003cTraversal\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e traversalEmbeddings \u003d\n+      getSingleEdgeTraversalEmbeddings(graph);\n+\n+    Map\u003cTraversalCode\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e codeEmbeddings \u003d\n+      Maps.newHashMapWithExpectedSize(traversalEmbeddings.size());\n+\n+    for (Map.Entry\u003cTraversal\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e entry :\n+      traversalEmbeddings.entrySet()) {\n+\n+      codeEmbeddings.put(new TraversalCode\u003c\u003e(entry.getKey()), entry.getValue());\n+    }\n+\n+    return codeEmbeddings;\n+  }\n+\n+\n+  @Override\n+  public void growChildren(GraphEmbeddingsPair graphEmbeddingsPair,\n+    Collection\u003cTraversalCode\u003cString\u003e\u003e frequentPatterns) {\n+\n+    AdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e adjacencyList \u003d\n+      graphEmbeddingsPair.getAdjacencyList();\n+\n+    Map\u003cTraversalCode\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e childEmbeddings \u003d\n+      Maps.newHashMap();\n+\n+    // FOR EACH FREQUENT SUBGRAPH\n+    for (TraversalCode\u003cString\u003e parentPattern : frequentPatterns) {\n+\n+      Collection\u003cTraversalEmbedding\u003e parentEmbeddings \u003d\n+        graphEmbeddingsPair.getPatternEmbeddings().get(parentPattern);\n+\n+      // IF GRAPH CONTAINS FREQUENT SUBGRAPH\n+      if (parentEmbeddings !\u003d null) {\n+        Map\u003cTraversal\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e extensionEmbeddings \u003d\n+          getValidExtensions(adjacencyList, parentPattern, parentEmbeddings);\n+\n+        for (Map.Entry\u003cTraversal\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e entry :\n+          extensionEmbeddings.entrySet()) {\n+\n+          TraversalCode\u003cString\u003e childCode \u003d new TraversalCode\u003c\u003e(parentPattern);\n+\n+          childCode.getTraversals().add(entry.getKey());\n+\n+          childEmbeddings.put(childCode, entry.getValue());\n+        }\n+      }\n+    }\n+\n+    graphEmbeddingsPair.setPatternEmbeddings(childEmbeddings);\n+  }\n+\n+  @Override\n+  public boolean isMinimal(TraversalCode\u003cString\u003e pattern) {\n+\n+    AdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e adjacencyList \u003d\n+      getAdjacencyList(pattern);\n+\n+    Map\u003cTraversal\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e traversalEmbeddings \u003d\n+      getSingleEdgeTraversalEmbeddings(adjacencyList);\n+\n+    Iterator\u003cTraversal\u003cString\u003e\u003e iterator \u003d pattern.getTraversals().iterator();\n+\n+    Traversal\u003cString\u003e minTraversal \u003d iterator.next();\n+    TraversalCode\u003cString\u003e minCode \u003d new TraversalCode\u003c\u003e(minTraversal);\n+    Collection\u003cTraversalEmbedding\u003e minEmbeddings \u003d traversalEmbeddings.get(minTraversal);\n+\n+    boolean minimal \u003d true;\n+\n+    while (minimal \u0026\u0026 iterator.hasNext()) {\n+      Map\u003cTraversal\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e extensionOptions \u003d\n+        getValidExtensions(adjacencyList, minCode, minEmbeddings);\n+\n+      Traversal\u003cString\u003e inputExtension \u003d iterator.next();\n+\n+      for (Map.Entry\u003cTraversal\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e extensionOption :\n+        extensionOptions.entrySet()) {\n+        int comparison \u003d inputExtension.compareTo(extensionOption.getKey());\n+\n+        if (comparison \u003d\u003d 0) {\n+          minEmbeddings \u003d extensionOption.getValue();\n+        } else if (comparison \u003e 0) {\n+          minimal \u003d false;\n+        }\n+      }\n+\n+      if (minimal) {\n+        minCode.getTraversals().add(inputExtension);\n+      }\n+    }\n+\n+    return minimal;\n+  }\n+\n+  /**\n+   * Finds all 1-edge patterns and embeddings of a graph.\n+   *\n+   * @param graph graph\n+   * @return 1-edge patterns and embeddings\n+   */\n+  protected Map\u003cTraversal\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e getSingleEdgeTraversalEmbeddings(\n+    AdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e graph) {\n+\n+    Map\u003cTraversal\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e traversalEmbeddings \u003d Maps.newHashMap();\n+\n+    // FOR EACH VERTEX\n+    for (Map.Entry\u003cGradoopId, AdjacencyListRow\u003cIdWithLabel, IdWithLabel\u003e\u003e outgoingRow :\n+      graph.getOutgoingRows().entrySet()) {\n+\n+      GradoopId fromId \u003d outgoingRow.getKey();\n+      String fromLabel \u003d graph.getLabel(fromId);\n+\n+      AdjacencyListRow\u003cIdWithLabel, IdWithLabel\u003e row \u003d outgoingRow.getValue();\n+\n+      // FOR EACH OUTGOING EDGE\n+      for (AdjacencyListCell\u003cIdWithLabel, IdWithLabel\u003e cell : row.getCells()) {\n+\n+        Pair\u003cTraversal\u003cString\u003e, TraversalEmbedding\u003e traversalEmbedding \u003d\n+          getTraversalEmbedding(fromId, fromLabel, cell);\n+\n+        Collection\u003cTraversalEmbedding\u003e embeddings \u003d traversalEmbeddings\n+          .get(traversalEmbedding.getKey());\n+\n+        if (embeddings \u003d\u003d null) {\n+          traversalEmbeddings.put(traversalEmbedding.getKey(), Lists.newArrayList\n+            (traversalEmbedding.getValue()));\n+        } else {\n+          embeddings.add(traversalEmbedding.getValue());\n+        }\n+      }\n+    }\n+    return traversalEmbeddings;\n+  }\n+\n+  /**\n+   * Creates a traversal-embedding pair of vertex id, vertex label and an outgoing adjacency row\n+   * cell.\n+   *\n+   * @param sourceId vertex id\n+   * @param sourceLabel vertex label\n+   * @param cell outgoing adjacency row cell\n+   *\n+   * @return traversal-embedding pair\n+   */\n+  protected abstract Pair\u003cTraversal\u003cString\u003e, TraversalEmbedding\u003e getTraversalEmbedding(\n+    GradoopId sourceId, String sourceLabel, AdjacencyListCell\u003cIdWithLabel, IdWithLabel\u003e cell);\n+\n+  /**\n+   * Finds all valid extensions of a parent pattern.\n+   *\n+   * @param graph graph\n+   * @param parentPattern pattern that should be extended\n+   * @param parentEmbeddings embeddings of the pattern\n+   *\n+   * @return childPattern-\u003echildEmbeddings\n+   */\n+  protected Map\u003cTraversal\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e getValidExtensions(\n+    AdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e graph,\n+    TraversalCode\u003cString\u003e parentPattern, Collection\u003cTraversalEmbedding\u003e parentEmbeddings) {\n+\n+    Map\u003cTraversal\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e extensionEmbeddings \u003d\n+      Maps.newHashMap();\n+\n+    Traversal\u003cString\u003e firstTraversal \u003d parentPattern.getTraversals().get(0);\n+\n+    // DETERMINE RIGHTMOST PATH\n+\n+    List\u003cInteger\u003e rightmostPathTimes \u003d getRightmostPathTimes(parentPattern);\n+\n+    int rightmostTime \u003d rightmostPathTimes.get(0);\n+\n+    // FOR EACH EMBEDDING\n+    for (TraversalEmbedding parentEmbedding : parentEmbeddings) {\n+\n+      Set\u003cGradoopId\u003e vertexIds \u003d Sets.newHashSet(parentEmbedding.getVertexIds());\n+      Set\u003cGradoopId\u003e edgeIds \u003d Sets.newHashSet(parentEmbedding.getEdgeIds());\n+\n+      int forwardTime \u003d vertexIds.size();\n+\n+      // FOR EACH VERTEX ON RIGHTMOST PATH\n+      for (int fromTime : rightmostPathTimes) {\n+        boolean rightmost \u003d fromTime \u003d\u003d rightmostTime;\n+\n+        GradoopId fromId \u003d parentEmbedding.getVertexIds().get(fromTime);\n+        String fromLabel \u003d graph.getLabel(fromId);\n+\n+        AdjacencyListRow\u003cIdWithLabel, IdWithLabel\u003e outgoingRow \u003d\n+          graph.getOutgoingRows().get(fromId);\n+\n+        AdjacencyListRow\u003cIdWithLabel, IdWithLabel\u003e incomingRow \u003d\n+          graph.getIncomingRows().get(fromId);\n+\n+        boolean outgoing;\n+        Iterator\u003cAdjacencyListCell\u003cIdWithLabel, IdWithLabel\u003e\u003e iterator;\n+\n+        if (outgoingRow !\u003d null) {\n+          outgoing \u003d true;\n+          iterator \u003d outgoingRow.getCells().iterator();\n+        } else {\n+          outgoing \u003d false;\n+          iterator \u003d incomingRow.getCells().iterator();\n+        }\n+\n+        // FOR EACH INCIDENT EDGE\n+        while (iterator.hasNext()) {\n+          AdjacencyListCell\u003cIdWithLabel, IdWithLabel\u003e cell \u003d iterator.next();\n+\n+          GradoopId toId \u003d cell.getVertexData().getId();\n+\n+          boolean loop \u003d fromId.equals(toId);\n+\n+          // loop is always backwards\n+          if (!loop || rightmost) {\n+\n+            GradoopId edgeId \u003d cell.getEdgeData().getId();\n+\n+            // edge not already contained\n+            if (!edgeIds.contains(edgeId)) {\n+\n+              boolean backwards \u003d loop || vertexIds.contains(toId);\n+\n+              // forwards or backwards from rightmost\n+              if (!backwards || rightmost) {\n+\n+                String edgeLabel \u003d cell.getEdgeData().getLabel();\n+                String toLabel \u003d cell.getVertexData().getLabel();\n+\n+                // valid branch by lexicographical order\n+                if (validBranch(firstTraversal, fromLabel, outgoing, loop, edgeLabel, toLabel)) {\n+\n+                  int toTime \u003d backwards ?\n+                    parentEmbedding.getVertexIds().indexOf(toId) : forwardTime;\n+\n+                  Traversal\u003cString\u003e extension \u003d new Traversal\u003c\u003e(\n+                    fromTime, fromLabel, outgoing, edgeLabel, toTime, toLabel);\n+\n+                  TraversalEmbedding childEmbedding \u003d new TraversalEmbedding(parentEmbedding);\n+                  childEmbedding.getEdgeIds().add(edgeId);\n+\n+                  if (!backwards) {\n+                    childEmbedding.getVertexIds().add(toId);\n+                  }\n+\n+                  Collection\u003cTraversalEmbedding\u003e embeddings \u003d extensionEmbeddings.get(extension);\n+\n+                  if (embeddings \u003d\u003d null) {\n+                    extensionEmbeddings.put(extension, Lists.newArrayList(childEmbedding));\n+                  } else {\n+                    embeddings.add(childEmbedding);\n+                  }\n+                }\n+              }\n+            }\n+          }\n+\n+          if (!iterator.hasNext() \u0026\u0026 outgoing \u0026\u0026 incomingRow !\u003d null) {\n+            outgoing \u003d false;\n+            iterator \u003d incomingRow.getCells().iterator();\n+          }\n+        }\n+      }\n+    }\n+    return extensionEmbeddings;\n+  }\n+\n+  /**\n+   * Calculates the rightmost path of a given pattern.\n+   *\n+   * @param pattern input pattern\n+   * @return rightmost path (vertex times)\n+   */\n+  protected List\u003cInteger\u003e getRightmostPathTimes(TraversalCode\u003cString\u003e pattern) {\n+\n+    List\u003cInteger\u003e rightmostPathTimes;\n+\n+    List\u003cTraversal\u003cString\u003e\u003e traversals \u003d pattern.getTraversals();\n+\n+    if (traversals.size() \u003d\u003d 1) {\n+      if (traversals.get(0).isLoop()) {\n+        rightmostPathTimes \u003d Lists.newArrayList(0);\n+      } else {\n+        rightmostPathTimes \u003d Lists.newArrayList(1, 0);\n+      }\n+    } else {\n+      rightmostPathTimes \u003d Lists.newArrayList();\n+\n+      for (int edgeTime \u003d traversals.size() - 1; edgeTime \u003e\u003d 0; edgeTime--) {\n+        Traversal\u003cString\u003e traversal \u003d traversals.get(edgeTime);\n+\n+        if (traversal.isForwards()) {\n+          if (rightmostPathTimes.isEmpty()) {\n+            rightmostPathTimes.add(traversal.getToTime());\n+            rightmostPathTimes.add(traversal.getFromTime());\n+          } else if (rightmostPathTimes.contains(traversal.getToTime())) {\n+            rightmostPathTimes.add(traversal.getFromTime());\n+          }\n+        } else if (rightmostPathTimes.isEmpty() \u0026\u0026 traversal.isLoop()) {\n+          rightmostPathTimes.add(0);\n+        }\n+      }\n+    }\n+\n+    return rightmostPathTimes;\n+  }\n+\n+  /**\n+   * Checks, if an extension will be valid according to vertex and edge labels.\n+   *\n+   * @param firstExtension initial extension of a pattern.\n+   * @param fromLabel current extension start vertex label\n+   * @param outgoing true, if current extension is outgoing\n+   * @param loop true, if current extension is a loop\n+   *\n+   * @param edgeLabel current extension edge label\n+   * @param toLabel current extension end vertex label\n+   * @return true, if the current extension will be valid according to vertex and edge labels\n+   */\n+  protected abstract boolean validBranch(Traversal\u003cString\u003e firstExtension,\n+    String fromLabel, boolean outgoing, boolean loop, String edgeLabel, String toLabel);\n+\n+  /**\n+   * Creates a graph transaction based on a given pattern.\n+   *\n+   * @param patternWithFrequency pattern (DFS code) with frequency\n+   * @param graphCount search space size\n+   *\n+   * @return graph transaction\n+   */\n+  public static GraphTransaction createGraphTransaction(\n+    WithCount\u003cTraversalCode\u003cString\u003e\u003e patternWithFrequency, long graphCount) {\n+\n+    TraversalCode\u003cString\u003e pattern \u003d patternWithFrequency.getObject();\n+\n+    float frequency \u003d ((float) patternWithFrequency.getCount()) / graphCount;\n+\n+    String graphLabel \u003d TFSMConstants.FREQUENT_PATTERN_LABEL;\n+    Properties graphProperties \u003d new Properties();\n+\n+    graphProperties.set(TFSMConstants.SUPPORT_KEY, frequency);\n+    graphProperties.set(TFSMConstants.CANONICAL_LABEL_KEY, pattern.toString());\n+\n+    GraphHead graphHead \u003d new GraphHead(GradoopId.get(), graphLabel, graphProperties);\n+\n+    GradoopIdSet graphIds \u003d GradoopIdSet.fromExisting(graphHead.getId());\n+\n+    Map\u003cInteger, GradoopId\u003e vertexIdMap \u003d Maps.newHashMap();\n+\n+    Set\u003cVertex\u003e vertices \u003d Sets.newHashSet();\n+    Set\u003cEdge\u003e edges \u003d Sets.newHashSet();\n+\n+    for (Traversal\u003cString\u003e traversal : pattern.getTraversals()) {\n+      Integer fromTime \u003d traversal.getFromTime();\n+      GradoopId fromId \u003d vertexIdMap.get(fromTime);\n+\n+      if (fromId \u003d\u003d null) {\n+        Vertex fromVertex \u003d\n+          new Vertex(GradoopId.get(), traversal.getFromValue(), null, graphIds);\n+        fromId \u003d fromVertex.getId();\n+        vertexIdMap.put(fromTime, fromId);\n+        vertices.add(fromVertex);\n+      }\n+\n+      Integer toTime \u003d traversal.getToTime();\n+      GradoopId toId \u003d vertexIdMap.get(toTime);\n+\n+      if (toId \u003d\u003d null) {\n+        Vertex toVertex \u003d\n+          new Vertex(GradoopId.get(), traversal.getToValue(), null, graphIds);\n+        toId \u003d toVertex.getId();\n+        vertexIdMap.put(toTime, toId);\n+        vertices.add(toVertex);\n+      }\n+\n+      GradoopId sourceId \u003d traversal.isOutgoing() ? fromId : toId;\n+      GradoopId targetId \u003d traversal.isOutgoing() ? toId : fromId;\n+\n+      edges.add(new Edge(\n+        GradoopId.get(), traversal.getEdgeValue(), sourceId, targetId, null, graphIds));\n+    }\n+\n+    return new GraphTransaction(graphHead, vertices, edges);\n+  }\n+\n+  /**\n+   * Turns a pattern into a graph transaction in adjacency list representation.\n+   *\n+   * @param pattern pattern\n+   *\n+   * @return adjacency list\n+   */\n+  public abstract AdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e getAdjacencyList(\n+    TraversalCode\u003cString\u003e pattern);\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/gspan/algorithm/UndirectedGSpanKernel.java",
          "patch": "@@ -0,0 +1,186 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.gspan.algorithm;\n+\n+import com.google.common.collect.Lists;\n+import com.google.common.collect.Maps;\n+import org.apache.commons.lang3.tuple.ImmutablePair;\n+import org.apache.commons.lang3.tuple.Pair;\n+import org.gradoop.common.model.impl.id.GradoopId;\n+import org.gradoop.flink.model.impl.tuples.IdWithLabel;\n+import org.gradoop.flink.representation.common.adjacencylist.AdjacencyListCell;\n+import org.gradoop.flink.representation.common.adjacencylist.AdjacencyListRow;\n+import org.gradoop.flink.representation.transactional.AdjacencyList;\n+import org.gradoop.flink.representation.transactional.traversalcode.Traversal;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalCode;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalEmbedding;\n+\n+import java.util.Map;\n+\n+/**\n+ * Provides methods for logic related to the gSpan algorithm in undirected mode.\n+ */\n+public class UndirectedGSpanKernel extends GSpanKernelBase {\n+\n+  @Override\n+  protected Pair\u003cTraversal\u003cString\u003e, TraversalEmbedding\u003e getTraversalEmbedding(\n+    GradoopId sourceId, String sourceLabel, AdjacencyListCell\u003cIdWithLabel, IdWithLabel\u003e cell) {\n+\n+    GradoopId toId \u003d cell.getVertexData().getId();\n+    String toLabel \u003d cell.getVertexData().getLabel();\n+\n+    boolean loop \u003d sourceId.equals(toId);\n+\n+    GradoopId edgeId \u003d cell.getEdgeData().getId();\n+    String edgeLabel \u003d cell.getEdgeData().getLabel();\n+\n+    Pair\u003cTraversal\u003cString\u003e, TraversalEmbedding\u003e traversalEmbedding \u003d null;\n+    Traversal\u003cString\u003e traversal;\n+    TraversalEmbedding embedding;\n+\n+    if (loop) {\n+      traversal \u003d new Traversal\u003c\u003e(\n+        0, sourceLabel, true, edgeLabel, 0, toLabel);\n+\n+      embedding \u003d new TraversalEmbedding(\n+        Lists.newArrayList(sourceId), Lists.newArrayList(edgeId));\n+\n+      traversalEmbedding \u003d new ImmutablePair\u003c\u003e(traversal, embedding);\n+    } else if (sourceLabel.compareTo(toLabel) \u003c\u003d 0) {\n+      traversal \u003d new Traversal\u003c\u003e(\n+        0, sourceLabel, true, edgeLabel, 1, toLabel);\n+\n+      embedding \u003d new TraversalEmbedding(\n+        Lists.newArrayList(sourceId, toId), Lists.newArrayList(edgeId));\n+\n+      traversalEmbedding \u003d new ImmutablePair\u003c\u003e(traversal, embedding);\n+    }\n+\n+    return traversalEmbedding;\n+  }\n+\n+  @Override\n+  protected boolean validBranch(Traversal\u003cString\u003e firstExtension, String fromLabel,\n+    boolean outgoing, boolean loop, String edgeLabel, String toLabel) {\n+\n+    String filterFromLabel \u003d firstExtension.getFromValue();\n+    String filterEdgeLabel \u003d firstExtension.getEdgeValue();\n+    String filterToLabel \u003d firstExtension.getToValue();\n+\n+    int labelComparison \u003d fromLabel.compareTo(toLabel);\n+    boolean flipActual \u003d labelComparison \u003e 0;\n+\n+    if (flipActual) {\n+      String oldFromLabel \u003d fromLabel;\n+      fromLabel \u003d toLabel;\n+      toLabel \u003d oldFromLabel;\n+    }\n+\n+    boolean valid;\n+\n+    int fromLabelComparison \u003d filterFromLabel.compareTo(fromLabel);\n+\n+    if (fromLabelComparison \u003c 0) {\n+      valid \u003d true;\n+\n+    } else if (fromLabelComparison \u003e 0) {\n+      valid \u003d false;\n+\n+    } else {\n+\n+      boolean filterLoop \u003d firstExtension.isLoop();\n+      if (filterLoop \u003d\u003d loop) {\n+        int edgeLabelComparison \u003d filterEdgeLabel.compareTo(edgeLabel);\n+\n+        if (edgeLabelComparison \u003c 0) {\n+          valid \u003d true;\n+\n+        } else if (edgeLabelComparison \u003e 0) {\n+          valid \u003d false;\n+\n+        } else {\n+\n+          int toLabelComparison \u003d filterToLabel.compareTo(toLabel);\n+\n+          if (toLabelComparison \u003c\u003d 0) {\n+            valid \u003d true;\n+\n+          } else  {\n+            valid \u003d false;\n+          }\n+        }\n+      } else if (filterLoop) {\n+        valid \u003d true;\n+\n+      } else {\n+        valid \u003d false;\n+\n+      }\n+    }\n+\n+    return valid;\n+  }\n+\n+  @Override\n+  public AdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e getAdjacencyList(\n+    TraversalCode\u003cString\u003e pattern) {\n+\n+    Map\u003cGradoopId, String\u003e labels \u003d Maps.newHashMap();\n+\n+    Map\u003cGradoopId, AdjacencyListRow\u003cIdWithLabel, IdWithLabel\u003e\u003e rows \u003d Maps.newHashMap();\n+\n+    Map\u003cInteger, GradoopId\u003e timeVertexMap \u003d Maps.newHashMap();\n+\n+    // EDGES\n+    for (Traversal\u003cString\u003e traversal : pattern.getTraversals()) {\n+\n+      int fromTime \u003d traversal.getFromTime();\n+      String fromLabel \u003d traversal.getFromValue();\n+      int toTime \u003d traversal.getToTime();\n+      String toLabel \u003d traversal.getToValue();\n+\n+      GradoopId fromId \u003d timeVertexMap.computeIfAbsent(fromTime, k -\u003e GradoopId.get());\n+      labels.putIfAbsent(fromId, fromLabel);\n+\n+      GradoopId toId \u003d timeVertexMap.computeIfAbsent(toTime, k -\u003e GradoopId.get());\n+      labels.putIfAbsent(toId, toLabel);\n+      IdWithLabel toData \u003d new IdWithLabel(toId, toLabel);\n+\n+      GradoopId edgeId \u003d GradoopId.get();\n+      String edgeLabel \u003d traversal.getEdgeValue();\n+      labels.put(edgeId, edgeLabel);\n+      IdWithLabel edgeData \u003d new IdWithLabel(edgeId, edgeLabel);\n+\n+      AdjacencyListRow\u003cIdWithLabel, IdWithLabel\u003e fromRow \u003d\n+        rows.computeIfAbsent(fromId, k -\u003e new AdjacencyListRow\u003c\u003e());\n+\n+      fromRow.getCells().add(new AdjacencyListCell\u003c\u003e(edgeData, toData));\n+\n+      if (! traversal.isLoop()) {\n+        IdWithLabel fromData \u003d new IdWithLabel(fromId, fromLabel);\n+\n+        AdjacencyListRow\u003cIdWithLabel, IdWithLabel\u003e targetRow \u003d\n+          rows.computeIfAbsent(toId, k -\u003e new AdjacencyListRow\u003c\u003e());\n+\n+        targetRow.getCells().add(new AdjacencyListCell\u003c\u003e(edgeData, fromData));\n+      }\n+    }\n+\n+    return new AdjacencyList\u003c\u003e(null, labels, null, rows, Maps.newHashMap());\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/gspan/algorithm/package-info.java",
          "patch": "@@ -0,0 +1,21 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+/**\n+ * Classes related to the algorithmic logic of the gSpan algorithm.\n+ */\n+package org.gradoop.flink.algorithms.fsm.transactional.gspan.algorithm;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/gspan/functions/CreateCollector.java",
          "patch": "@@ -0,0 +1,53 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.gspan.functions;\n+\n+import com.google.common.collect.Maps;\n+import org.apache.flink.api.common.functions.MapFunction;\n+import org.gradoop.common.model.impl.id.GradoopId;\n+import org.gradoop.common.model.impl.pojo.GraphHead;\n+import org.gradoop.common.model.impl.properties.Properties;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.tuples.GraphEmbeddingsPair;\n+import org.gradoop.flink.model.impl.tuples.IdWithLabel;\n+import org.gradoop.flink.representation.common.adjacencylist.AdjacencyListRow;\n+import org.gradoop.flink.representation.transactional.AdjacencyList;\n+\n+import java.util.Map;\n+\n+/**\n+ * bool \u003d\u003e (graph, pattern -\u003e embeddings)\n+ * workaround for bulk iteration intermediate results\n+ * graph and map are empty\n+ */\n+public class CreateCollector implements MapFunction\u003cBoolean, GraphEmbeddingsPair\u003e {\n+\n+  @Override\n+  public GraphEmbeddingsPair map(Boolean aBoolean) throws Exception {\n+\n+    Map\u003cGradoopId, String\u003e labels \u003d Maps.newHashMapWithExpectedSize(0);\n+    Map\u003cGradoopId, Properties\u003e properties \u003d Maps.newHashMapWithExpectedSize(0);\n+    Map\u003cGradoopId, AdjacencyListRow\u003cIdWithLabel, IdWithLabel\u003e\u003e rows \u003d\n+      Maps.newHashMapWithExpectedSize(0);\n+\n+\n+    AdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e adjacencyList \u003d\n+      new AdjacencyList\u003c\u003e(new GraphHead(), labels, properties, rows, rows);\n+\n+    return new GraphEmbeddingsPair(adjacencyList, Maps.newHashMap());\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/gspan/functions/ExpandResult.java",
          "patch": "@@ -0,0 +1,46 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.gspan.functions;\n+\n+import org.apache.flink.api.common.functions.FlatMapFunction;\n+import org.apache.flink.util.Collector;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.tuples.GraphEmbeddingsPair;\n+import org.gradoop.flink.model.impl.tuples.WithCount;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalCode;\n+\n+/**\n+ * (graph, pattern -\u003e embedding) \u003d\u003e pattern, ...\n+ */\n+public class ExpandResult\n+  implements FlatMapFunction\u003cGraphEmbeddingsPair, WithCount\u003cTraversalCode\u003cString\u003e\u003e\u003e {\n+\n+  @Override\n+  public void flatMap(GraphEmbeddingsPair graphEmbeddingsPair,\n+    Collector\u003cWithCount\u003cTraversalCode\u003cString\u003e\u003e\u003e collector) throws Exception {\n+\n+    for (TraversalCode\u003cString\u003e code : graphEmbeddingsPair.getPatternEmbeddings().keySet()) {\n+\n+      int frequencyIndex \u003d code.getTraversals().size() - 1;\n+      long frequency \u003d code.getTraversals().get(frequencyIndex).getFromTime();\n+\n+      code.getTraversals().remove(frequencyIndex);\n+\n+      collector.collect(new WithCount\u003c\u003e(code, frequency));\n+    }\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/gspan/functions/HasEmbeddings.java",
          "patch": "@@ -0,0 +1,31 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.gspan.functions;\n+\n+import org.apache.flink.api.common.functions.FilterFunction;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.tuples.GraphEmbeddingsPair;\n+\n+/**\n+ * (graph, pattern-\u003eembeddings) \u003d\u003e true, if pattern-\u003eembeddings is empty\n+ */\n+public class HasEmbeddings implements FilterFunction\u003cGraphEmbeddingsPair\u003e {\n+  @Override\n+  public boolean filter(GraphEmbeddingsPair graphEmbeddingsPair) throws Exception {\n+    return !graphEmbeddingsPair.getPatternEmbeddings().isEmpty();\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/gspan/functions/InitSingleEdgeEmbeddings.java",
          "patch": "@@ -0,0 +1,62 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.gspan.functions;\n+\n+import org.apache.flink.api.common.functions.MapFunction;\n+import org.gradoop.common.model.impl.id.GradoopId;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.algorithm.GSpanKernel;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.tuples.GraphEmbeddingsPair;\n+import org.gradoop.flink.model.impl.tuples.IdWithLabel;\n+import org.gradoop.flink.representation.transactional.AdjacencyList;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalCode;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalEmbedding;\n+\n+import java.util.Collection;\n+import java.util.Map;\n+\n+/**\n+ * graph \u003d\u003e (graph, 1-edge pattern -\u003e embeddings)\n+ */\n+public class InitSingleEdgeEmbeddings implements\n+  MapFunction\u003cAdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e, GraphEmbeddingsPair\u003e {\n+\n+  /**\n+   * pattern generation logic\n+   */\n+  private final GSpanKernel gSpan;\n+\n+  /**\n+   * Constructor.\n+   *\n+   * @param gSpan pattern generation logic\n+   */\n+  public InitSingleEdgeEmbeddings(GSpanKernel gSpan) {\n+    this.gSpan \u003d gSpan;\n+  }\n+\n+  @Override\n+  public GraphEmbeddingsPair map(\n+    AdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e graph) throws Exception {\n+\n+    Map\u003cTraversalCode\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e codeEmbeddings \u003d\n+      gSpan.getSingleEdgePatternEmbeddings(graph);\n+\n+    return new GraphEmbeddingsPair(graph, codeEmbeddings);\n+  }\n+\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/gspan/functions/IsCollector.java",
          "patch": "@@ -0,0 +1,32 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.gspan.functions;\n+\n+import org.apache.flink.api.common.functions.FilterFunction;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.tuples.GraphEmbeddingsPair;\n+\n+/**\n+ * (graph, pattern-\u003eembeddings) \u003d\u003e true, if graph is empty\n+ */\n+public class IsCollector implements FilterFunction\u003cGraphEmbeddingsPair\u003e {\n+\n+  @Override\n+  public boolean filter(GraphEmbeddingsPair graphEmbeddingsPair) throws Exception {\n+    return graphEmbeddingsPair.getAdjacencyList().getOutgoingRows().isEmpty();\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/gspan/functions/PatternGrowth.java",
          "patch": "@@ -0,0 +1,103 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.gspan.functions;\n+\n+import com.google.common.collect.Lists;\n+import org.apache.flink.api.common.functions.RichMapFunction;\n+import org.apache.flink.configuration.Configuration;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.algorithm.GSpanKernel;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.TFSMConstants;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.tuples.GraphEmbeddingsPair;\n+import org.gradoop.flink.model.impl.tuples.WithCount;\n+import org.gradoop.flink.representation.transactional.traversalcode.Traversal;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalCode;\n+\n+import java.util.Collection;\n+\n+/**\n+ * (graph, k-edge pattern -\u003e embeddings) \u003d\u003e (graph, k+1-edge pattern -\u003e embeddings)\n+ */\n+public class PatternGrowth extends RichMapFunction\u003cGraphEmbeddingsPair, GraphEmbeddingsPair\u003e {\n+\n+  /**\n+   * k-edge frequent patterns\n+   */\n+  private Collection\u003cTraversalCode\u003cString\u003e\u003e frequentPatterns;\n+\n+  /**\n+   * k-edge frequent patterns with frequency\n+   */\n+  private Collection\u003cWithCount\u003cTraversalCode\u003cString\u003e\u003e\u003e frequentPatternsWithFrequency;\n+  /**\n+   * pattern growth logic\n+   */\n+  private final GSpanKernel gSpan;\n+\n+  /**\n+   * Constructor.\n+   *\n+   * @param gSpan pattern growth logic\n+   */\n+  public PatternGrowth(GSpanKernel gSpan) {\n+    this.gSpan \u003d gSpan;\n+  }\n+\n+  @Override\n+  public void open(Configuration parameters) throws Exception {\n+    super.open(parameters);\n+\n+    this.frequentPatternsWithFrequency \u003d getRuntimeContext()\n+      .getBroadcastVariable(TFSMConstants.FREQUENT_PATTERNS);\n+\n+    frequentPatterns \u003d Lists.newArrayListWithExpectedSize(frequentPatternsWithFrequency.size());\n+\n+    for (WithCount\u003cTraversalCode\u003cString\u003e\u003e patternWithFrequency : frequentPatternsWithFrequency) {\n+      frequentPatterns.add(patternWithFrequency.getObject());\n+    }\n+  }\n+\n+  @Override\n+  public GraphEmbeddingsPair map(GraphEmbeddingsPair graphEmbeddingsPair) throws Exception {\n+\n+    if (graphEmbeddingsPair.getAdjacencyList().getOutgoingRows().isEmpty()) {\n+\n+      // BULK ITERATION WORKAROUND\n+\n+      for (WithCount\u003cTraversalCode\u003cString\u003e\u003e patternWithFrequency : frequentPatternsWithFrequency) {\n+        TraversalCode\u003cString\u003e pattern \u003d patternWithFrequency.getObject();\n+\n+        pattern \u003d new TraversalCode\u003c\u003e(pattern);\n+\n+        int frequency \u003d (int) patternWithFrequency.getCount();\n+\n+        String fromValue \u003d \"\";\n+        String edgeValue \u003d \"\";\n+        String toValue \u003d \"\";\n+\n+        pattern.getTraversals()\n+          .add(new Traversal\u003c\u003e(frequency, fromValue, true, edgeValue, 0, toValue));\n+\n+        graphEmbeddingsPair.getPatternEmbeddings().put(pattern, null);\n+      }\n+    } else {\n+      gSpan.growChildren(graphEmbeddingsPair, frequentPatterns);\n+    }\n+\n+    return graphEmbeddingsPair;\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/gspan/functions/Report.java",
          "patch": "@@ -0,0 +1,42 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.gspan.functions;\n+\n+import org.apache.flink.api.common.functions.FlatMapFunction;\n+import org.apache.flink.util.Collector;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.tuples.GraphEmbeddingsPair;\n+import org.gradoop.flink.model.impl.tuples.WithCount;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalCode;\n+\n+/**\n+ * (graph, pattern-\u003eembeddings) \u003d\u003e (pattern, 1),..\n+ */\n+public class Report\n+  implements FlatMapFunction\u003cGraphEmbeddingsPair, WithCount\u003cTraversalCode\u003cString\u003e\u003e\u003e {\n+\n+  @Override\n+  public void flatMap(GraphEmbeddingsPair graphEmbeddings,\n+    Collector\u003cWithCount\u003cTraversalCode\u003cString\u003e\u003e\u003e collector) throws Exception {\n+\n+    if (!graphEmbeddings.getAdjacencyList().getOutgoingRows().isEmpty()) {\n+      for (TraversalCode\u003cString\u003e code : graphEmbeddings.getPatternEmbeddings().keySet()) {\n+        collector.collect(new WithCount\u003c\u003e(code));\n+      }\n+    }\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/gspan/functions/ToGraphTransaction.java",
          "patch": "@@ -0,0 +1,51 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.gspan.functions;\n+\n+import org.apache.flink.api.common.functions.RichMapFunction;\n+import org.apache.flink.configuration.Configuration;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.TFSMConstants;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.algorithm.GSpanKernelBase;\n+import org.gradoop.flink.model.impl.tuples.WithCount;\n+import org.gradoop.flink.representation.transactional.GraphTransaction;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalCode;\n+\n+/**\n+ * DFS-code \u003d\u003e (g, V, E)\n+ */\n+public class ToGraphTransaction\n+  extends RichMapFunction\u003cWithCount\u003cTraversalCode\u003cString\u003e\u003e, GraphTransaction\u003e {\n+\n+  /**\n+   * graph count\n+   */\n+  private long graphCount;\n+\n+  @Override\n+  public void open(Configuration parameters) throws Exception {\n+    super.open(parameters);\n+\n+    this.graphCount \u003d getRuntimeContext()\n+      .\u003cLong\u003egetBroadcastVariable(TFSMConstants.GRAPH_COUNT).get(0);\n+  }\n+\n+  @Override\n+  public GraphTransaction map(WithCount\u003cTraversalCode\u003cString\u003e\u003e patternWithCount) throws Exception {\n+    return GSpanKernelBase.createGraphTransaction(patternWithCount, graphCount);\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/gspan/functions/Validate.java",
          "patch": "@@ -0,0 +1,55 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.gspan.functions;\n+\n+import org.apache.flink.api.common.functions.FilterFunction;\n+import org.gradoop.flink.algorithms.fsm.transactional.gspan.algorithm.GSpanKernel;\n+import org.gradoop.flink.model.impl.tuples.WithCount;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalCode;\n+\n+/**\n+ * DFS code \u003d\u003e true, if minimal\n+ */\n+public class Validate implements FilterFunction\u003cWithCount\u003cTraversalCode\u003cString\u003e\u003e\u003e {\n+\n+  /**\n+   * validation logic\n+   */\n+  private final GSpanKernel gSpan;\n+\n+  /**\n+   * Constructor.\n+   *\n+   * @param gSpan validation logic\n+   */\n+  public Validate(GSpanKernel gSpan) {\n+    this.gSpan \u003d gSpan;\n+  }\n+\n+  @Override\n+  public boolean filter(WithCount\u003cTraversalCode\u003cString\u003e\u003e traversalCodeWithCount) throws Exception {\n+    TraversalCode\u003cString\u003e code \u003d traversalCodeWithCount.getObject();\n+\n+    boolean valid \u003d true;\n+\n+    if (code.getTraversals().size() \u003e 1) {\n+      valid \u003d gSpan.isMinimal(code);\n+    }\n+    return valid;\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/gspan/functions/package-info.java",
          "patch": "@@ -16,7 +16,6 @@\n  */\n \n /**\n- * interfaces related to canonical labels of graphs\n+ * Flink functions related to the gSpan algorithm.\n  */\n-\n-package org.gradoop.flink.algorithms.fsm.common.canonicalization.api;\n+package org.gradoop.flink.algorithms.fsm.transactional.gspan.functions;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/gspan/package-info.java",
          "patch": "@@ -16,7 +16,6 @@\n  */\n \n /**\n- * tuple-types related to frequent subgraph mining\n+ * Classes related to the gSpan algorithm.\n  */\n-\n-package org.gradoop.flink.algorithms.fsm.ccs.tuples;\n+package org.gradoop.flink.algorithms.fsm.transactional.gspan;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/gspan/tuples/GraphEmbeddingsPair.java",
          "patch": "@@ -0,0 +1,66 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.gspan.tuples;\n+\n+import org.apache.flink.api.java.tuple.Tuple2;\n+import org.gradoop.common.model.impl.id.GradoopId;\n+import org.gradoop.flink.model.impl.tuples.IdWithLabel;\n+import org.gradoop.flink.representation.transactional.AdjacencyList;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalCode;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalEmbedding;\n+\n+import java.util.Collection;\n+import java.util.Map;\n+\n+/**\n+ * (graph, pattern-\u003eembeddings)\n+ */\n+public class GraphEmbeddingsPair extends\n+  Tuple2\u003cAdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e,\n+    Map\u003cTraversalCode\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e\u003e {\n+\n+  /**\n+   * Default constructor.\n+   */\n+  public GraphEmbeddingsPair() {\n+  }\n+\n+  /**\n+   * Constructor.\n+   *\n+   * @param graph graph\n+   * @param patternEmbeddings pattern-\u003eembeddings\n+   */\n+  public GraphEmbeddingsPair(AdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e graph,\n+    Map\u003cTraversalCode\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e patternEmbeddings) {\n+    super(graph, patternEmbeddings);\n+  }\n+\n+  public AdjacencyList\u003cGradoopId, String, IdWithLabel, IdWithLabel\u003e getAdjacencyList() {\n+    return f0;\n+  }\n+\n+  public Map\u003cTraversalCode\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e getPatternEmbeddings() {\n+    return f1;\n+  }\n+\n+  public void setPatternEmbeddings(\n+    Map\u003cTraversalCode\u003cString\u003e, Collection\u003cTraversalEmbedding\u003e\u003e patternEmbeddings) {\n+    this.f1 \u003d patternEmbeddings;\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/gspan/tuples/package-info.java",
          "patch": "@@ -16,7 +16,6 @@\n  */\n \n /**\n- * classes related to category characteristic subgraph mining\n+ * Flink tuple children related to the gSpan algorithm.\n  */\n-\n-package org.gradoop.flink.algorithms.fsm.ccs;\n+package org.gradoop.flink.algorithms.fsm.transactional.gspan.tuples;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/package-info.java",
          "patch": "@@ -16,7 +16,6 @@\n  */\n \n /**\n- * flink functions related to category characteristic subgraph mining\n+ * Contains frequent subgraph mining algorithms in the graph-transaction setting.\n  */\n-\n-package org.gradoop.flink.algorithms.fsm.ccs.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/ThinkLikeAnEmbeddingFSMBase.java",
          "patch": "@@ -0,0 +1,87 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.tle;\n+\n+import org.apache.flink.api.java.DataSet;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.FSMConfig;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.MergeEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.JoinEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.FSMGraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.Subgraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.SubgraphEmbeddings;\n+import org.gradoop.flink.model.impl.functions.utils.LeftSide;\n+\n+\n+/**\n+ * Superclass of transactional FSM and derivatives.\n+ *\n+ * @param \u003cG\u003e graph type\n+ * @param \u003cS\u003e subgraph type\n+ * @param \u003cSE\u003e subgraph embeddings type\n+ */\n+public abstract class ThinkLikeAnEmbeddingFSMBase\n+  \u003cG extends FSMGraph, S extends Subgraph, SE extends SubgraphEmbeddings\u003e\n+  extends TransactionalFSMBase {\n+\n+  /**\n+   * Constructor.\n+   *\n+   * @param fsmConfig FSM configuration\n+   */\n+  public ThinkLikeAnEmbeddingFSMBase(FSMConfig fsmConfig) {\n+    super(fsmConfig);\n+  }\n+\n+  /**\n+   * Grows children of embeddings of frequent subgraphs.\n+   *\n+   * @param parents parent embeddings\n+   * @param frequentSubgraphs frequent subgraphs\n+   * @return child embeddings\n+   */\n+  protected DataSet\u003cSE\u003e growEmbeddingsOfFrequentSubgraphs(\n+    DataSet\u003cSE\u003e parents,  DataSet\u003cS\u003e frequentSubgraphs) {\n+\n+    parents \u003d filterByFrequentSubgraphs(parents, frequentSubgraphs);\n+\n+    parents \u003d parents\n+      .groupBy(0)\n+      .reduceGroup(new MergeEmbeddings\u003c\u003e());\n+\n+    return parents\n+      .flatMap(new JoinEmbeddings\u003c\u003e(fsmConfig));\n+  }\n+\n+  /**\n+   * Filter a set of embeddings to such representing a frequent subgraph.\n+   *\n+   * @param embeddings set of embeddings\n+   * @param frequentSubgraphs frequent subgraphs\n+   *\n+   * @return embeddings representing frequent subgraphs\n+   */\n+  protected DataSet\u003cSE\u003e filterByFrequentSubgraphs(\n+    DataSet\u003cSE\u003e embeddings,\n+    DataSet\u003cS\u003e frequentSubgraphs) {\n+\n+    return embeddings\n+      .joinWithTiny(frequentSubgraphs)\n+      .where(2).equalTo(0) // on canonical label\n+      .with(new LeftSide\u003c\u003e());\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/TransactionalFSMBase.java",
          "patch": "@@ -0,0 +1,176 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.algorithms.fsm.transactional.tle;\n+\n+import org.apache.flink.api.common.functions.GroupCombineFunction;\n+import org.apache.flink.api.java.DataSet;\n+import org.apache.flink.api.java.aggregation.SumAggregationFunction;\n+import org.apache.flink.api.java.operators.AggregateOperator;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.TFSMConstants;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.FSMConfig;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.functions.DropPropertiesAndGraphContainment;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.functions.EdgeLabels;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.functions.FilterEdgesByLabel;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.functions.FilterVerticesByLabel;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.functions.NotEmpty;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.functions.VertexLabels;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.Frequent;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.functions.MinFrequency;\n+import org.gradoop.flink.model.api.operators.UnaryCollectionToCollectionOperator;\n+import org.gradoop.flink.model.impl.GraphCollection;\n+import org.gradoop.flink.model.impl.GraphTransactions;\n+import org.gradoop.flink.model.impl.functions.tuple.ValueOfWithCount;\n+import org.gradoop.flink.model.impl.operators.count.Count;\n+import org.gradoop.flink.model.impl.tuples.WithCount;\n+import org.gradoop.flink.representation.transactional.GraphTransaction;\n+import org.gradoop.flink.representation.transactional.traversalcode.TraversalCode;\n+import org.gradoop.flink.util.GradoopFlinkConfig;\n+\n+/**\n+ * Superclass of frequent subgraph implementations in the graph transaction setting.\n+ */\n+public abstract class TransactionalFSMBase implements UnaryCollectionToCollectionOperator {\n+\n+  /**\n+   * FSM configuration\n+   */\n+  protected final FSMConfig fsmConfig;\n+\n+  /**\n+   * search space size\n+   */\n+  protected DataSet\u003cLong\u003e graphCount;\n+\n+  /**\n+   * minimum frequency for patterns to be considered to be frequent\n+   */\n+  protected DataSet\u003cLong\u003e minFrequency;\n+\n+  /**\n+   * Gradoop configuration\n+   */\n+  protected GradoopFlinkConfig gradoopFlinkConfig;\n+\n+  /**\n+   * Constructor.\n+   *\n+   * @param fsmConfig FSM configuration\n+   */\n+  public TransactionalFSMBase(FSMConfig fsmConfig) {\n+    this.fsmConfig \u003d fsmConfig;\n+  }\n+\n+  @Override\n+  public GraphCollection execute(GraphCollection collection)  {\n+    gradoopFlinkConfig \u003d collection.getConfig();\n+\n+    DataSet\u003cGraphTransaction\u003e input \u003d collection\n+      .toTransactions()\n+      .getTransactions();\n+\n+    DataSet\u003cGraphTransaction\u003e output \u003d execute(input);\n+\n+    return GraphCollection.fromTransactions(new GraphTransactions(output, gradoopFlinkConfig));\n+  }\n+\n+  /**\n+   * Executes the algorithm for graphs in Gradoop transactional representation.\n+   *\n+   * @param transactions graphs in transactional representation\n+   *\n+   * @return frequent patterns in transactional representation\n+   */\n+  public GraphTransactions execute(GraphTransactions transactions) {\n+    this.gradoopFlinkConfig \u003d transactions.getConfig();\n+\n+    DataSet\u003cGraphTransaction\u003e input \u003d transactions.getTransactions();\n+    DataSet\u003cGraphTransaction\u003e output \u003d execute(input);\n+\n+    return new GraphTransactions(output, gradoopFlinkConfig);\n+  }\n+\n+  /**\n+   * Executes the algorithm for a dataset of graphs in transactional representation.\n+   *\n+   * @param transactions dataset of graphs\n+   *\n+   * @return frequent patterns as dataset of graphs\n+   */\n+  protected abstract DataSet\u003cGraphTransaction\u003e execute(DataSet\u003cGraphTransaction\u003e transactions);\n+\n+  /**\n+   * Triggers the label-frequency base preprocessing\n+   *\n+   * @param transactions input\n+   * @return preprocessed input\n+   */\n+  protected DataSet\u003cGraphTransaction\u003e preProcess(DataSet\u003cGraphTransaction\u003e transactions) {\n+    transactions \u003d transactions\n+      .map(new DropPropertiesAndGraphContainment());\n+\n+    this.graphCount \u003d Count\n+      .count(transactions);\n+\n+    this.minFrequency \u003d graphCount\n+      .map(new MinFrequency(fsmConfig));\n+\n+    DataSet\u003cString\u003e frequentVertexLabels \u003d transactions\n+      .flatMap(new VertexLabels())\n+      .groupBy(0)\n+      .sum(1)\n+      .filter(new Frequent\u003c\u003e())\n+      .withBroadcastSet(minFrequency, TFSMConstants.MIN_FREQUENCY)\n+      .map(new ValueOfWithCount\u003c\u003e());\n+\n+    transactions \u003d transactions\n+      .map(new FilterVerticesByLabel())\n+      .withBroadcastSet(frequentVertexLabels, TFSMConstants.FREQUENT_VERTEX_LABELS);\n+\n+    DataSet\u003cString\u003e frequentEdgeLabels \u003d transactions\n+      .flatMap(new EdgeLabels())\n+      .groupBy(0)\n+      .sum(1)\n+      .filter(new Frequent\u003c\u003e())\n+      .withBroadcastSet(minFrequency, TFSMConstants.MIN_FREQUENCY)\n+      .map(new ValueOfWithCount\u003c\u003e());\n+\n+    transactions \u003d transactions\n+      .map(new FilterEdgesByLabel())\n+      .withBroadcastSet(frequentEdgeLabels, TFSMConstants.FREQUENT_EDGE_LABELS);\n+\n+    transactions \u003d transactions\n+      .filter(new NotEmpty());\n+\n+    return transactions;\n+  }\n+\n+  /**\n+   * Creates a Flink sum aggregate function that can be applied in group combine operations.\n+   *\n+   * @return sum group combine function\n+   */\n+  protected GroupCombineFunction\u003cWithCount\u003cTraversalCode\u003cString\u003e\u003e, WithCount\u003cTraversalCode\u003cString\u003e\u003e\u003e\n+  sumPartition() {\n+\n+    SumAggregationFunction.LongSumAgg[] sum \u003d { new SumAggregationFunction.LongSumAgg() };\n+\n+    int[] fields \u003d { 1 };\n+\n+    return new AggregateOperator.AggregatingUdf(sum, fields);\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/canonicalization/CanonicalLabeler.java",
          "patch": "@@ -15,16 +15,16 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.canonicalization.cam;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.canonicalization;\n \n import com.google.common.collect.Lists;\n import com.google.common.collect.Maps;\n import com.google.common.collect.Sets;\n import org.apache.commons.lang.StringUtils;\n-import org.gradoop.flink.algorithms.fsm.common.canonicalization.api.CanonicalLabeler;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.Embedding;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMEdge;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.Embedding;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.FSMEdge;\n \n+import java.io.Serializable;\n import java.util.Collections;\n import java.util.List;\n import java.util.Map;\n@@ -34,7 +34,7 @@\n  * Creates a canonical label for a given graph embedding that represents its\n  * adjacency matrix.\n  */\n-public class CAMLabeler implements CanonicalLabeler {\n+public class CanonicalLabeler implements Serializable {\n \n   /**\n    * separator among adjacency lists\n@@ -72,11 +72,17 @@\n    *\n    * @param directed true for directed mode\n    */\n-  public CAMLabeler(boolean directed) {\n+  public CanonicalLabeler(boolean directed) {\n     this.directed \u003d directed;\n   }\n \n-  @Override\n+  /**\n+   * Creates a canonical subgraph graph label\n+   *\n+   * @param embedding subgraph\n+   *\n+   * @return canonical label\n+   */\n   public String label(Embedding embedding) {\n \n     Map\u003cInteger, String\u003e vertices \u003d embedding.getVertices();"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/canonicalization/package-info.java",
          "patch": "@@ -19,4 +19,4 @@\n  * classes related to canonical labels of graphs\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.canonicalization;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.canonicalization;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/CCSSingleEdgeEmbeddings.java",
          "patch": "@@ -15,15 +15,14 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import org.apache.flink.api.common.functions.FlatMapFunction;\n import org.apache.flink.util.Collector;\n-import org.gradoop.flink.algorithms.fsm.ccs.pojos.CCSGraph;\n-import org.gradoop.flink.algorithms.fsm.ccs.tuples.CCSSubgraphEmbeddings;\n-import org.gradoop.flink.algorithms.fsm.common.config.FSMConfig;\n-import org.gradoop.flink.algorithms.fsm.common.functions.SingleEdgeEmbeddings;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.Embedding;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.CCSGraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.CCSSubgraphEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.FSMConfig;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.Embedding;\n \n import java.util.List;\n import java.util.Map;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/CCSSubgraphDecoder.java",
          "patch": "@@ -15,12 +15,11 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import org.apache.flink.api.common.functions.MapFunction;\n-import org.gradoop.flink.algorithms.fsm.ccs.CategoryCharacteristicSubgraphs;\n-import org.gradoop.flink.algorithms.fsm.ccs.tuples.CCSSubgraph;\n-import org.gradoop.flink.algorithms.fsm.common.functions.SubgraphDecoder;\n+import org.gradoop.flink.algorithms.fsm.transactional.CategoryCharacteristicSubgraphs;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.CCSSubgraph;\n import org.gradoop.flink.representation.transactional.GraphTransaction;\n import org.gradoop.flink.util.GradoopFlinkConfig;\n "
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/CCSSubgraphOnly.java",
          "patch": "@@ -15,11 +15,11 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import org.apache.flink.api.common.functions.MapFunction;\n-import org.gradoop.flink.algorithms.fsm.ccs.tuples.CCSSubgraph;\n-import org.gradoop.flink.algorithms.fsm.ccs.tuples.CCSSubgraphEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.CCSSubgraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.CCSSubgraphEmbeddings;\n \n /**\n  * (graphId, size, canonicalLabel, embeddings)"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/CCSWrapInSubgraphEmbeddings.java",
          "patch": "@@ -15,13 +15,13 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import com.google.common.collect.Lists;\n import org.apache.flink.api.common.functions.MapFunction;\n import org.gradoop.common.model.impl.id.GradoopId;\n-import org.gradoop.flink.algorithms.fsm.ccs.tuples.CCSSubgraph;\n-import org.gradoop.flink.algorithms.fsm.ccs.tuples.CCSSubgraphEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.CCSSubgraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.CCSSubgraphEmbeddings;\n \n /**\n  * subgraphWithSampleEmbedding \u003d\u003e subgraphWithEmbeddings"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/CategoryEdgeLabels.java",
          "patch": "@@ -15,14 +15,14 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import com.google.common.collect.Sets;\n import org.apache.flink.api.common.functions.FlatMapFunction;\n import org.apache.flink.util.Collector;\n-import org.gradoop.flink.algorithms.fsm.ccs.pojos.CCSGraph;\n-import org.gradoop.flink.algorithms.fsm.ccs.tuples.CategoryCountableLabel;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMEdge;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.CCSGraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.CategoryCountableLabel;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.FSMEdge;\n \n import java.util.Set;\n "
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/CategoryFrequent.java",
          "patch": "@@ -15,12 +15,12 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import org.apache.flink.api.common.functions.RichFilterFunction;\n import org.apache.flink.configuration.Configuration;\n-import org.gradoop.flink.algorithms.fsm.ccs.tuples.CategoryCountableLabel;\n-import org.gradoop.flink.algorithms.fsm.common.config.Constants;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.CategoryCountableLabel;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.TFSMConstants;\n \n import java.util.Map;\n \n@@ -40,7 +40,7 @@ public void open(Configuration parameters) throws Exception {\n     super.open(parameters);\n \n     this.categoryMinFrequencies \u003d getRuntimeContext()\n-      .\u003cMap\u003cString, Long\u003e\u003egetBroadcastVariable(Constants.MIN_FREQUENCY).get(0);\n+      .\u003cMap\u003cString, Long\u003e\u003egetBroadcastVariable(TFSMConstants.MIN_FREQUENCY).get(0);\n   }\n \n   @Override"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/CategoryFrequentAndInteresting.java",
          "patch": "@@ -15,16 +15,16 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import com.google.common.collect.Lists;\n import com.google.common.collect.Maps;\n import org.apache.flink.api.common.functions.RichGroupReduceFunction;\n import org.apache.flink.configuration.Configuration;\n import org.apache.flink.util.Collector;\n-import org.gradoop.flink.algorithms.fsm.ccs.interestingness.Interestingness;\n-import org.gradoop.flink.algorithms.fsm.ccs.tuples.CCSSubgraph;\n-import org.gradoop.flink.algorithms.fsm.common.config.Constants;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.TFSMConstants;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.interestingness.Interestingness;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.CCSSubgraph;\n \n import java.util.Collection;\n import java.util.Map;\n@@ -65,10 +65,10 @@ public void open(Configuration parameters) throws Exception {\n     super.open(parameters);\n \n     this.categoryMinFrequencies \u003d getRuntimeContext()\n-      .\u003cMap\u003cString, Long\u003e\u003egetBroadcastVariable(Constants.MIN_FREQUENCY).get(0);\n+      .\u003cMap\u003cString, Long\u003e\u003egetBroadcastVariable(TFSMConstants.MIN_FREQUENCY).get(0);\n \n     this.categoryCounts \u003d getRuntimeContext()\n-      .\u003cMap\u003cString, Long\u003e\u003egetBroadcastVariable(Constants.GRAPH_COUNT).get(0);\n+      .\u003cMap\u003cString, Long\u003e\u003egetBroadcastVariable(TFSMConstants.GRAPH_COUNT).get(0);\n   }\n \n   @Override"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/CategoryGraphCounts.java",
          "patch": "@@ -15,7 +15,7 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import org.apache.flink.api.common.functions.GroupReduceFunction;\n import org.apache.flink.hadoop.shaded.com.google.common.collect.Maps;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/CategoryMinFrequencies.java",
          "patch": "@@ -15,11 +15,10 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import org.apache.flink.api.common.functions.MapFunction;\n-import org.gradoop.flink.algorithms.fsm.common.config.FSMConfig;\n-import org.gradoop.flink.algorithms.fsm.common.functions.MinFrequency;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.FSMConfig;\n \n import java.util.Map;\n "
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/CategoryVertexLabels.java",
          "patch": "@@ -15,13 +15,13 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import com.google.common.collect.Sets;\n import org.apache.flink.api.common.functions.FlatMapFunction;\n import org.apache.flink.util.Collector;\n-import org.gradoop.flink.algorithms.fsm.ccs.pojos.CCSGraph;\n-import org.gradoop.flink.algorithms.fsm.ccs.tuples.CategoryCountableLabel;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.CCSGraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.CategoryCountableLabel;\n \n import java.util.Set;\n "
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/CategoryWithCount.java",
          "patch": "@@ -15,10 +15,10 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import org.apache.flink.api.common.functions.MapFunction;\n-import org.gradoop.flink.algorithms.fsm.ccs.pojos.CCSGraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.CCSGraph;\n import org.gradoop.flink.model.impl.tuples.WithCount;\n \n /**"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/Frequent.java",
          "patch": "@@ -15,11 +15,11 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import org.apache.flink.api.common.functions.RichFilterFunction;\n import org.apache.flink.configuration.Configuration;\n-import org.gradoop.flink.algorithms.fsm.common.config.Constants;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.TFSMConstants;\n import org.gradoop.flink.model.api.tuples.Countable;\n \n /**\n@@ -39,7 +39,7 @@ public void open(Configuration parameters) throws Exception {\n     super.open(parameters);\n \n     this.minFrequency \u003d getRuntimeContext()\n-      .\u003cLong\u003egetBroadcastVariable(Constants.MIN_FREQUENCY).get(0);\n+      .\u003cLong\u003egetBroadcastVariable(TFSMConstants.MIN_FREQUENCY).get(0);\n   }\n \n   @Override"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/GraphId.java",
          "patch": "@@ -15,11 +15,11 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import org.apache.flink.api.java.functions.KeySelector;\n import org.gradoop.common.model.impl.id.GradoopId;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMGraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.FSMGraph;\n \n /**\n  * graph \u003d\u003e id"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/IsCharacteristic.java",
          "patch": "@@ -15,10 +15,10 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import org.apache.flink.api.common.functions.FilterFunction;\n-import org.gradoop.flink.algorithms.fsm.ccs.tuples.CCSSubgraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.CCSSubgraph;\n \n /**\n  * Filters characteristic subgraphs."
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/IsResult.java",
          "patch": "@@ -15,11 +15,11 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import org.apache.flink.api.common.functions.FilterFunction;\n import org.gradoop.common.model.impl.id.GradoopId;\n-import org.gradoop.flink.algorithms.fsm.common.tuples.SubgraphEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.SubgraphEmbeddings;\n \n /**\n  * Filters embeddings or collected results."
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/JoinEmbeddings.java",
          "patch": "@@ -15,20 +15,20 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import com.google.common.collect.Lists;\n import com.google.common.collect.Maps;\n import com.google.common.collect.Sets;\n import org.apache.flink.api.common.functions.FlatJoinFunction;\n import org.apache.flink.api.common.functions.FlatMapFunction;\n import org.apache.flink.util.Collector;\n-import org.gradoop.flink.algorithms.fsm.common.canonicalization.api.CanonicalLabeler;\n-import org.gradoop.flink.algorithms.fsm.common.config.FSMConfig;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.Embedding;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMEdge;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMGraph;\n-import org.gradoop.flink.algorithms.fsm.common.tuples.SubgraphEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.FSMConfig;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.canonicalization.CanonicalLabeler;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.Embedding;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.FSMEdge;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.FSMGraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.SubgraphEmbeddings;\n \n import java.util.Collection;\n import java.util.List;\n@@ -42,7 +42,7 @@\n  * @param \u003cG\u003e graph type\n  * @param \u003cSE\u003e subgraph type\n  */\n-public class PatternGrowth\u003cG extends FSMGraph, SE extends SubgraphEmbeddings\u003e\n+public class JoinEmbeddings\u003cG extends FSMGraph, SE extends SubgraphEmbeddings\u003e\n   implements FlatJoinFunction\u003cSE, G, SE\u003e, FlatMapFunction\u003cSE, SE\u003e {\n \n   /**\n@@ -55,8 +55,8 @@\n    *\n    * @param fsmConfig FSM configuration.\n    */\n-  public PatternGrowth(FSMConfig fsmConfig) {\n-    this.canonicalLabeler \u003d fsmConfig.getCanonicalLabeler();\n+  public JoinEmbeddings(FSMConfig fsmConfig) {\n+    this.canonicalLabeler \u003d new CanonicalLabeler(fsmConfig.isDirected());\n   }\n \n   @Override"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/LabelOnly.java",
          "patch": "@@ -15,10 +15,10 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import org.apache.flink.api.common.functions.MapFunction;\n-import org.gradoop.flink.algorithms.fsm.ccs.tuples.CategoryCountableLabel;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.CategoryCountableLabel;\n \n /**\n  * (category, label, frequency) \u003d\u003e label"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/MergeEmbeddings.java",
          "patch": "@@ -15,11 +15,11 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import org.apache.flink.api.common.functions.GroupReduceFunction;\n import org.apache.flink.util.Collector;\n-import org.gradoop.flink.algorithms.fsm.common.tuples.SubgraphEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.SubgraphEmbeddings;\n \n import java.util.Iterator;\n "
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/MinEdgeCount.java",
          "patch": "@@ -15,11 +15,11 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import org.apache.flink.api.common.functions.FilterFunction;\n-import org.gradoop.flink.algorithms.fsm.common.config.FSMConfig;\n-import org.gradoop.flink.algorithms.fsm.common.tuples.Subgraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.FSMConfig;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.Subgraph;\n \n /**\n  * Filters a subgraph by minimum edge count."
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/MinFrequency.java",
          "patch": "@@ -15,10 +15,10 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import org.apache.flink.api.common.functions.MapFunction;\n-import org.gradoop.flink.algorithms.fsm.common.config.FSMConfig;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.FSMConfig;\n \n /**\n  * Calculates the min frequency based on a configured min support."
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/SingleEdgeEmbeddings.java",
          "patch": "@@ -15,15 +15,15 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import com.google.common.collect.Lists;\n import com.google.common.collect.Maps;\n-import org.gradoop.flink.algorithms.fsm.common.canonicalization.api.CanonicalLabeler;\n-import org.gradoop.flink.algorithms.fsm.common.config.FSMConfig;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.Embedding;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMEdge;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMGraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.FSMConfig;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.canonicalization.CanonicalLabeler;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.Embedding;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.FSMEdge;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.FSMGraph;\n \n import java.io.Serializable;\n import java.util.List;\n@@ -46,7 +46,7 @@\n    * @param fsmConfig FSM configuration\n    */\n   public SingleEdgeEmbeddings(FSMConfig fsmConfig) {\n-    canonicalLabeler \u003d fsmConfig.getCanonicalLabeler();\n+    canonicalLabeler \u003d new CanonicalLabeler(fsmConfig.isDirected());\n   }\n \n   /**"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/SubgraphDecoder.java",
          "patch": "@@ -15,7 +15,7 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import com.google.common.collect.Maps;\n import com.google.common.collect.Sets;\n@@ -28,8 +28,9 @@\n import org.gradoop.common.model.impl.pojo.Vertex;\n import org.gradoop.common.model.impl.pojo.VertexFactory;\n import org.gradoop.common.model.impl.properties.Properties;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMEdge;\n-import org.gradoop.flink.algorithms.fsm.common.tuples.Subgraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.TFSMConstants;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.FSMEdge;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.Subgraph;\n import org.gradoop.flink.representation.transactional.GraphTransaction;\n import org.gradoop.flink.util.GradoopFlinkConfig;\n \n@@ -45,14 +46,6 @@\n public abstract class SubgraphDecoder implements Serializable {\n \n   /**\n-   * Property key to store a frequent subgraphs\u0027s frequency.\n-   */\n-  public static final String FREQUENCY_KEY \u003d \"frequency\";\n-  /**\n-   * Property key to store the canonical label.\n-   */\n-  public static final String CANONICAL_LABEL_KEY \u003d \"canonicalLabel\";\n-  /**\n    * graph Head Factory\n    */\n   protected final GraphHeadFactory graphHeadFactory;\n@@ -90,8 +83,8 @@ protected GraphTransaction createTransaction(\n \n     Properties properties \u003d new Properties();\n \n-    properties.set(FREQUENCY_KEY, subgraph.getCount());\n-    properties.set(CANONICAL_LABEL_KEY, subgraph.getCanonicalLabel());\n+    properties.set(TFSMConstants.SUPPORT_KEY, subgraph.getCount());\n+    properties.set(TFSMConstants.CANONICAL_LABEL_KEY, subgraph.getCanonicalLabel());\n \n     GraphHead epgmGraphHead \u003d graphHeadFactory\n       .createGraphHead(canonicalLabel, properties);"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/TFSMSingleEdgeEmbeddings.java",
          "patch": "@@ -15,15 +15,14 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.tfsm.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import org.apache.flink.api.common.functions.FlatMapFunction;\n import org.apache.flink.util.Collector;\n-import org.gradoop.flink.algorithms.fsm.common.config.FSMConfig;\n-import org.gradoop.flink.algorithms.fsm.common.functions.SingleEdgeEmbeddings;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.Embedding;\n-import org.gradoop.flink.algorithms.fsm.tfsm.pojos.TFSMGraph;\n-import org.gradoop.flink.algorithms.fsm.tfsm.tuples.TFSMSubgraphEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.FSMConfig;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.Embedding;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.TFSMGraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.TFSMSubgraphEmbeddings;\n \n import java.util.List;\n import java.util.Map;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/TFSMSubgraphDecoder.java",
          "patch": "@@ -15,12 +15,12 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.tfsm.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import org.apache.flink.api.common.functions.MapFunction;\n-import org.gradoop.flink.algorithms.fsm.common.functions.SubgraphDecoder;\n-import org.gradoop.flink.algorithms.fsm.tfsm.tuples.TFSMSubgraph;\n+\n import org.gradoop.flink.representation.transactional.GraphTransaction;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.TFSMSubgraph;\n import org.gradoop.flink.util.GradoopFlinkConfig;\n \n /**"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/TFSMSubgraphOnly.java",
          "patch": "@@ -15,11 +15,11 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.tfsm.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import org.apache.flink.api.common.functions.MapFunction;\n-import org.gradoop.flink.algorithms.fsm.tfsm.tuples.TFSMSubgraph;\n-import org.gradoop.flink.algorithms.fsm.tfsm.tuples.TFSMSubgraphEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.TFSMSubgraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.TFSMSubgraphEmbeddings;\n \n /**\n  * (graphId, size, canonicalLabel, embeddings)"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/TFSMWrapInSubgraphEmbeddings.java",
          "patch": "@@ -15,13 +15,13 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.tfsm.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import com.google.common.collect.Lists;\n import org.apache.flink.api.common.functions.MapFunction;\n import org.gradoop.common.model.impl.id.GradoopId;\n-import org.gradoop.flink.algorithms.fsm.tfsm.tuples.TFSMSubgraph;\n-import org.gradoop.flink.algorithms.fsm.tfsm.tuples.TFSMSubgraphEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.TFSMSubgraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.tuples.TFSMSubgraphEmbeddings;\n \n /**\n  * subgraphWithSampleEmbedding \u003d\u003e subgraphWithEmbeddings"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/ToCCSGraph.java",
          "patch": "@@ -15,16 +15,15 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import com.google.common.collect.Maps;\n import org.apache.flink.api.common.functions.MapFunction;\n import org.gradoop.common.model.impl.id.GradoopId;\n-import org.gradoop.flink.algorithms.fsm.ccs.CategoryCharacteristicSubgraphs;\n-import org.gradoop.flink.algorithms.fsm.ccs.pojos.CCSGraph;\n-import org.gradoop.flink.algorithms.fsm.common.functions.ToFSMGraph;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMEdge;\n import org.gradoop.flink.representation.transactional.GraphTransaction;\n+import org.gradoop.flink.algorithms.fsm.transactional.CategoryCharacteristicSubgraphs;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.CCSGraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.FSMEdge;\n \n import java.util.Map;\n "
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/ToFSMGraph.java",
          "patch": "@@ -15,13 +15,13 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import com.google.common.collect.Maps;\n import org.gradoop.common.model.impl.id.GradoopId;\n import org.gradoop.common.model.impl.pojo.Edge;\n import org.gradoop.common.model.impl.pojo.Vertex;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMEdge;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.FSMEdge;\n import org.gradoop.flink.representation.transactional.GraphTransaction;\n \n import java.util.Map;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/ToTFSMGraph.java",
          "patch": "@@ -15,15 +15,14 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.tfsm.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import com.google.common.collect.Maps;\n import org.apache.flink.api.common.functions.MapFunction;\n import org.gradoop.common.model.impl.id.GradoopId;\n-import org.gradoop.flink.algorithms.fsm.common.functions.ToFSMGraph;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMEdge;\n-import org.gradoop.flink.algorithms.fsm.tfsm.pojos.TFSMGraph;\n import org.gradoop.flink.representation.transactional.GraphTransaction;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.FSMEdge;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.TFSMGraph;\n \n import java.util.Map;\n "
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/WithoutInfrequentEdgeLabels.java",
          "patch": "@@ -15,14 +15,14 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import com.google.common.collect.Sets;\n import org.apache.flink.api.common.functions.RichMapFunction;\n import org.apache.flink.configuration.Configuration;\n-import org.gradoop.flink.algorithms.fsm.common.config.Constants;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMEdge;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMGraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.TFSMConstants;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.FSMEdge;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.FSMGraph;\n \n import java.util.Collection;\n import java.util.Iterator;\n@@ -47,7 +47,7 @@ public void open(Configuration parameters) throws Exception {\n     super.open(parameters);\n \n     this.frequentEdgeLabels \u003d getRuntimeContext()\n-      .getBroadcastVariable(Constants.FREQUENT_EDGE_LABELS);\n+      .getBroadcastVariable(TFSMConstants.FREQUENT_EDGE_LABELS);\n \n     this.frequentEdgeLabels \u003d Sets.newHashSet(frequentEdgeLabels);\n   }"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/WithoutInfrequentVertexLabels.java",
          "patch": "@@ -15,14 +15,14 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;\n \n import com.google.common.collect.Sets;\n import org.apache.flink.api.common.functions.RichMapFunction;\n import org.apache.flink.configuration.Configuration;\n-import org.gradoop.flink.algorithms.fsm.common.config.Constants;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMEdge;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMGraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.TFSMConstants;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.FSMEdge;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.FSMGraph;\n \n import java.util.Collection;\n import java.util.Iterator;\n@@ -48,7 +48,7 @@ public void open(Configuration parameters) throws Exception {\n     super.open(parameters);\n \n     this.frequentVertexLabels \u003d getRuntimeContext()\n-      .getBroadcastVariable(Constants.FREQUENT_VERTEX_LABELS);\n+      .getBroadcastVariable(TFSMConstants.FREQUENT_VERTEX_LABELS);\n \n     this.frequentVertexLabels \u003d Sets.newHashSet(frequentVertexLabels);\n   }"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/functions/package-info.java",
          "patch": "@@ -19,4 +19,4 @@\n  * Flink functions related to frequent subgraph mining.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.functions;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.functions;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/interestingness/Interestingness.java",
          "patch": "@@ -15,7 +15,7 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.interestingness;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.interestingness;\n \n import java.io.Serializable;\n "
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/interestingness/package-info.java",
          "patch": "@@ -19,4 +19,4 @@\n  * classes related to characterizing interestingness measures.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.interestingness;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.interestingness;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/package-info.java",
          "patch": "@@ -19,4 +19,4 @@\n  * classes related to frequent subgraph mining\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/pojos/CCSGraph.java",
          "patch": "@@ -15,11 +15,9 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.pojos;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.pojos;\n \n import org.gradoop.common.model.impl.id.GradoopId;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMEdge;\n-import org.gradoop.flink.algorithms.fsm.tfsm.pojos.TFSMGraph;\n \n import java.util.Map;\n "
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/pojos/Embedding.java",
          "patch": "@@ -15,7 +15,7 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.pojos;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.pojos;\n \n import com.google.common.collect.Maps;\n "
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/pojos/FSMEdge.java",
          "patch": "@@ -15,7 +15,7 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.pojos;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.pojos;\n \n /**\n  * Represents an edge within Subgraph embeddings."
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/pojos/FSMGraph.java",
          "patch": "@@ -15,7 +15,7 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.pojos;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.pojos;\n \n import org.gradoop.common.model.impl.id.GradoopId;\n "
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/pojos/TFSMGraph.java",
          "patch": "@@ -15,12 +15,9 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.tfsm.pojos;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.pojos;\n \n import org.gradoop.common.model.impl.id.GradoopId;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.Embedding;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMEdge;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMGraph;\n \n import java.util.Map;\n "
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/pojos/package-info.java",
          "patch": "@@ -19,4 +19,4 @@\n  * pojos related to frequent subgraph mining\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.pojos;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.pojos;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/tuples/CCSSubgraph.java",
          "patch": "@@ -15,11 +15,10 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.tuples;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.tuples;\n \n import org.apache.flink.api.java.tuple.Tuple5;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.Embedding;\n-import org.gradoop.flink.algorithms.fsm.common.tuples.Subgraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.Embedding;\n \n /**\n  * Representation of a subgraph."
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/tuples/CCSSubgraphEmbeddings.java",
          "patch": "@@ -15,12 +15,11 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.tuples;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.tuples;\n \n import org.apache.flink.api.java.tuple.Tuple5;\n import org.gradoop.common.model.impl.id.GradoopId;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.Embedding;\n-import org.gradoop.flink.algorithms.fsm.common.tuples.SubgraphEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.Embedding;\n \n import java.util.List;\n "
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/tuples/Categorizable.java",
          "patch": "@@ -15,7 +15,7 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.tuples;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.tuples;\n \n /**\n  * Describes something categorizable."
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/tuples/CategoryCountableLabel.java",
          "patch": "@@ -15,7 +15,7 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.ccs.tuples;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.tuples;\n \n import org.apache.flink.api.java.tuple.Tuple3;\n import org.gradoop.flink.model.api.tuples.Countable;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/tuples/Subgraph.java",
          "patch": "@@ -15,9 +15,9 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.tuples;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.tuples;\n \n-import org.gradoop.flink.algorithms.fsm.common.pojos.Embedding;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.Embedding;\n import org.gradoop.flink.model.api.tuples.Countable;\n \n import java.io.Serializable;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/tuples/SubgraphEmbeddings.java",
          "patch": "@@ -15,10 +15,10 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.tuples;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.tuples;\n \n import org.gradoop.common.model.impl.id.GradoopId;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.Embedding;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.Embedding;\n \n import java.util.List;\n "
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/tuples/TFSMSubgraph.java",
          "patch": "@@ -15,11 +15,10 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.tfsm.tuples;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.tuples;\n \n import org.apache.flink.api.java.tuple.Tuple3;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.Embedding;\n-import org.gradoop.flink.algorithms.fsm.common.tuples.Subgraph;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.Embedding;\n \n /**\n  * Representation of a subgraph."
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/tuples/TFSMSubgraphEmbeddings.java",
          "patch": "@@ -15,12 +15,11 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n-package org.gradoop.flink.algorithms.fsm.tfsm.tuples;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.tuples;\n \n import org.apache.flink.api.java.tuple.Tuple4;\n import org.gradoop.common.model.impl.id.GradoopId;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.Embedding;\n-import org.gradoop.flink.algorithms.fsm.common.tuples.SubgraphEmbeddings;\n+import org.gradoop.flink.algorithms.fsm.transactional.tle.pojos.Embedding;\n \n import java.util.List;\n "
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/algorithms/fsm/transactional/tle/tuples/package-info.java",
          "patch": "@@ -19,4 +19,4 @@\n  * tuple-types related to frequent subgraph mining\n  */\n \n-package org.gradoop.flink.algorithms.fsm.common.tuples;\n+package org.gradoop.flink.algorithms.fsm.transactional.tle.tuples;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/model/impl/comparators/ElementIdComparator.java",
          "patch": "@@ -15,23 +15,20 @@\n  * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n  */\n \n+package org.gradoop.flink.model.impl.comparators;\n \n-package org.gradoop.flink.algorithms.fsm.common.canonicalization.api;\n-\n-import org.gradoop.flink.algorithms.fsm.common.pojos.Embedding;\n+import org.gradoop.common.model.api.entities.EPGMElement;\n \n import java.io.Serializable;\n+import java.util.Comparator;\n \n /**\n- * Represents object that can derive a canonical label from an embedding.\n+ * Id based EPGM element comparator.\n  */\n-public interface CanonicalLabeler extends Serializable {\n+public class ElementIdComparator implements Comparator\u003cEPGMElement\u003e, Serializable {\n \n-  /**\n-   * Labelling method.\n-   *\n-   * @param embedding input embedding\n-   * @return canonical label\n-   */\n-  String label(Embedding embedding);\n+  @Override\n+  public int compare(EPGMElement a, EPGMElement b) {\n+    return a.getId().compareTo(b.getId());\n+  }\n }"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/model/impl/comparators/package-info.java",
          "patch": "@@ -0,0 +1,21 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+/**\n+ * Comparators related to the EPGM data model.\n+ */\n+package org.gradoop.flink.model.impl.comparators;"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/model/impl/functions/tuple/ToIdWithLabel.java",
          "patch": "@@ -30,15 +30,16 @@\n @FunctionAnnotation.ForwardedFields(\"id-\u003ef0;label-\u003ef1\")\n public class ToIdWithLabel\u003cEL extends Element\u003e implements MapFunction\u003cEL, IdWithLabel\u003e {\n \n-  /**\n-   * Reuse tuple\n-   */\n-  private final IdWithLabel reuseTuple \u003d new IdWithLabel();\n+//  /**\n+//   * Reuse tuple\n+//   */\n+//  private final IdWithLabel reuseTuple \u003d new IdWithLabel();\n \n   @Override\n   public IdWithLabel map(EL element) {\n-    reuseTuple.f0 \u003d element.getId();\n-    reuseTuple.f1 \u003d element.getLabel();\n-    return reuseTuple;\n+//    reuseTuple.f0 \u003d element.getId();\n+//    reuseTuple.f1 \u003d element.getLabel();\n+//    return reuseTuple;\n+    return new IdWithLabel(element.getId(), element.getLabel());\n   }\n }"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/model/impl/tuples/IdWithLabel.java",
          "patch": "@@ -44,4 +44,8 @@ public IdWithLabel() {\n   public GradoopId getId() {\n     return f0;\n   }\n+\n+  public String getLabel() {\n+    return f1;\n+  }\n }"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/representation/transactional/AdjacencyList.java",
          "patch": "@@ -64,11 +64,7 @@ public AdjacencyList() {\n   public AdjacencyList(GraphHead graphHead, Map\u003cID, L\u003e labels, Map\u003cID, Properties\u003e properties,\n     Map\u003cID, AdjacencyListRow\u003cED, VD\u003e\u003e outgoingRows, Map\u003cID, AdjacencyListRow\u003cED, VD\u003e\u003e incomingRows)\n   {\n-    this.f0 \u003d graphHead;\n-    this.f1 \u003d labels;\n-    this.f2 \u003d properties;\n-    this.f3 \u003d outgoingRows;\n-    this.f4 \u003d incomingRows;\n+    super(graphHead, labels, properties, outgoingRows, incomingRows);\n   }\n \n   /**\n@@ -105,6 +101,6 @@ public void setGraphHead(GraphHead graphId) {\n   }\n \n   public Map\u003cID, AdjacencyListRow\u003cED, VD\u003e\u003e getIncomingRows() {\n-    return f3;\n+    return f4;\n   }\n }"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/representation/transactional/RepresentationConverters.java",
          "patch": "@@ -57,51 +57,55 @@\n     MapFunction\u003cVertex, VD\u003e vertexDataFactory\n   ) throws Exception {\n \n-    GraphHead graphHead \u003d transaction.getGraphHead();\n     Set\u003cVertex\u003e vertices \u003d transaction.getVertices();\n     Set\u003cEdge\u003e edges \u003d transaction.getEdges();\n \n+    int vertexCount \u003d vertices.size();\n+\n     Map\u003cGradoopId, String\u003e labels \u003d\n-      Maps.newHashMapWithExpectedSize(1 + vertices.size() + edges.size());\n+      Maps.newHashMapWithExpectedSize(1 + vertexCount + edges.size());\n \n     Map\u003cGradoopId, Properties\u003e properties \u003d\n       Maps.newHashMap();\n \n     Map\u003cGradoopId, AdjacencyListRow\u003cED, VD\u003e\u003e outgoingRows \u003d\n-      Maps.newHashMapWithExpectedSize(vertices.size());\n+      Maps.newHashMapWithExpectedSize(vertexCount);\n \n     Map\u003cGradoopId, AdjacencyListRow\u003cED, VD\u003e\u003e incomingRows \u003d\n-      Maps.newHashMapWithExpectedSize(vertices.size());\n+      Maps.newHashMapWithExpectedSize(vertexCount);\n \n-    Map\u003cGradoopId, Vertex\u003e vertexIndex \u003d\n-      Maps.newHashMapWithExpectedSize(vertices.size());\n+    Map\u003cGradoopId, Vertex\u003e vertexIndex \u003d Maps.newHashMapWithExpectedSize(vertexCount);\n \n     // VERTICES\n     for (Vertex vertex : vertices) {\n       addLabelsAndProperties(vertex, labels, properties);\n       vertexIndex.put(vertex.getId(), vertex);\n-      outgoingRows.put(vertex.getId(), new AdjacencyListRow\u003c\u003e());\n-      incomingRows.put(vertex.getId(), new AdjacencyListRow\u003c\u003e());\n     }\n \n     // EDGES\n+\n     for (Edge edge : edges) {\n       addLabelsAndProperties(edge, labels, properties);\n \n       Vertex source \u003d vertexIndex.get(edge.getSourceId());\n-      AdjacencyListRow\u003cED, VD\u003e sourceRows \u003d outgoingRows.get(source.getId());\n+      AdjacencyListRow\u003cED, VD\u003e outgoingRow \u003d\n+        outgoingRows.computeIfAbsent(source.getId(), k -\u003e new AdjacencyListRow\u003c\u003e());\n+\n+      VD sourceData \u003d vertexDataFactory.map(source);\n \n       Vertex target \u003d vertexIndex.get(edge.getTargetId());\n-      AdjacencyListRow\u003cED, VD\u003e targetRows \u003d incomingRows.get(target.getId());\n+      AdjacencyListRow\u003cED, VD\u003e incomingRow \u003d\n+        incomingRows.computeIfAbsent(target.getId(), k -\u003e new AdjacencyListRow\u003c\u003e());\n+      VD targetData \u003d vertexDataFactory.map(target);\n \n-      sourceRows.getCells().add(new AdjacencyListCell\u003c\u003e(\n-        edgeDataFactory.map(edge), vertexDataFactory.map(target)));\n+      ED edgeData \u003d edgeDataFactory.map(edge);\n \n-      targetRows.getCells().add(new AdjacencyListCell\u003c\u003e(\n-        edgeDataFactory.map(edge), vertexDataFactory.map(source)));\n+      outgoingRow.getCells().add(new AdjacencyListCell\u003c\u003e(edgeData, targetData));\n+      incomingRow.getCells().add(new AdjacencyListCell\u003c\u003e(edgeData, sourceData));\n     }\n \n-    return new AdjacencyList\u003c\u003e(graphHead, labels, properties, outgoingRows, incomingRows);\n+    return new AdjacencyList\u003c\u003e(\n+      transaction.getGraphHead(), labels, properties, outgoingRows, incomingRows);\n   }\n \n   /**"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/representation/transactional/traversalcode/Traversal.java",
          "patch": "@@ -0,0 +1,245 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.representation.transactional.traversalcode;\n+\n+import java.io.Serializable;\n+\n+/**\n+ * DFSStep of an embedding.\n+ *\n+ * @param \u003cC\u003e vertex and edge value type\n+ */\n+public class Traversal\u003cC extends Comparable\u003cC\u003e\u003e\n+  implements Serializable, Comparable\u003cTraversal\u003cC\u003e\u003e {\n+\n+  /**\n+   * separator between vertex time and label\n+   */\n+  private static final char TIME_LABEL_SEPARATOR \u003d \u0027:\u0027;\n+  /**\n+   * outgoing edge start\n+   */\n+  private static final char OUTGOING_CHAR \u003d \u0027\u003e\u0027;\n+  /**\n+   * incoming edge start\n+   */\n+  private static final char INCOMING_CHAR \u003d \u0027\u003c\u0027;\n+  /**\n+   * edge start of undirected and end of all edges\n+   */\n+  private static final char EDGE_CHAR \u003d \u0027-\u0027;\n+\n+  /**\n+   * extension start time\n+   */\n+  private final int fromTime;\n+  /**\n+   * extension start label\n+   */\n+  private final C fromValue;\n+  /**\n+   * outgoing or incoming traversal\n+   */\n+  private final boolean outgoing;\n+  /**\n+   * edge label\n+   */\n+  private final C edgeValue;\n+  /**\n+   * traversal end time\n+   */\n+  private final int toTime;\n+  /**\n+   * traversal end label\n+   */\n+  private final C toValue;\n+\n+  /**\n+   * Constructor\n+   * @param fromTime    extension start time\n+   * @param fromValue   extension start label\n+   * @param outgoing    outgoing or incoming traversal\n+   * @param edgeValue   edge label\n+   * @param toTime      traversal end time\n+   * @param toValue     traversal end label\n+   */\n+  public Traversal(\n+    int fromTime, C fromValue, boolean outgoing, C edgeValue, int toTime,  C toValue) {\n+    this.fromTime \u003d fromTime;\n+    this.fromValue \u003d fromValue;\n+    this.outgoing \u003d outgoing;\n+    this.edgeValue \u003d edgeValue;\n+    this.toTime \u003d toTime;\n+    this.toValue \u003d toValue;\n+  }\n+\n+  public boolean isBackwards() {\n+    return toTime \u003c\u003d fromTime;\n+  }\n+\n+  public boolean isLoop() {\n+    return fromTime \u003d\u003d toTime;\n+  }\n+\n+  public int getFromTime() {\n+    return fromTime;\n+  }\n+\n+  public C getFromValue() {\n+    return fromValue;\n+  }\n+\n+  public boolean isOutgoing() {\n+    return outgoing;\n+  }\n+\n+  public C getEdgeValue() {\n+    return edgeValue;\n+  }\n+\n+  public int getToTime() {\n+    return toTime;\n+  }\n+\n+  public C getToValue() {\n+    return toValue;\n+  }\n+\n+  @Override\n+  public String toString() {\n+    return String.valueOf(fromTime) + TIME_LABEL_SEPARATOR + fromValue +\n+      (outgoing ? OUTGOING_CHAR : INCOMING_CHAR) + edgeValue + EDGE_CHAR +\n+      toTime + TIME_LABEL_SEPARATOR + toValue;\n+  }\n+\n+  @Override\n+  public boolean equals(Object o) {\n+    if (this \u003d\u003d o) {\n+      return true;\n+    }\n+    if (o \u003d\u003d null || getClass() !\u003d o.getClass()) {\n+      return false;\n+    }\n+\n+    Traversal\u003c?\u003e that \u003d (Traversal\u003c?\u003e) o;\n+\n+    if (fromTime !\u003d that.fromTime) {\n+      return false;\n+    }\n+    if (outgoing !\u003d that.outgoing) {\n+      return false;\n+    }\n+    if (toTime !\u003d that.toTime) {\n+      return false;\n+    }\n+    if (!fromValue.equals(that.fromValue)) {\n+      return false;\n+    }\n+    if (!edgeValue.equals(that.edgeValue)) {\n+      return false;\n+    }\n+    return toValue.equals(that.toValue);\n+\n+  }\n+\n+  @Override\n+  public int hashCode() {\n+    int result \u003d fromTime;\n+    result \u003d 31 * result + fromValue.hashCode();\n+    result \u003d 31 * result + (outgoing ? 1 : 0);\n+    result \u003d 31 * result + edgeValue.hashCode();\n+    result \u003d 31 * result + toTime;\n+    result \u003d 31 * result + toValue.hashCode();\n+    return result;\n+  }\n+\n+  /**\n+   * Comparison according to gSpan lexicographic order.\n+   *\n+   * @param that other extension\n+   * @return comparison result\n+   */\n+  @Override\n+  public int compareTo(Traversal\u003cC\u003e that) {\n+\n+    int comparison;\n+\n+    // no difference is times\n+    if (this.fromTime \u003d\u003d that.fromTime \u0026\u0026 this.toTime \u003d\u003d that.toTime) {\n+\n+      // compare from values\n+      comparison \u003d this.fromValue.compareTo(that.fromValue);\n+\n+      if (comparison \u003d\u003d 0) {\n+\n+        // compare direction\n+        boolean thisIsOutgoing \u003d this.isOutgoing();\n+        boolean thatIsOutgoing \u003d that.isOutgoing();\n+\n+        if (thisIsOutgoing \u0026\u0026 !thatIsOutgoing) {\n+          comparison \u003d -1;\n+        } else if (thatIsOutgoing \u0026\u0026 !thisIsOutgoing) {\n+          comparison \u003d 1;\n+        } else {\n+\n+          // compare edge values\n+          comparison \u003d this.edgeValue.compareTo(that.edgeValue);\n+\n+          if (comparison \u003d\u003d 0) {\n+\n+            // compare to values\n+            comparison \u003d this.toValue.compareTo(that.toValue);\n+          }\n+        }\n+      }\n+\n+      // time differences\n+    } else {\n+\n+      // compare backtracking\n+      boolean thisIsBacktrack \u003d this.isBackwards();\n+      boolean thatIsBacktrack \u003d that.isBackwards();\n+\n+      if (thisIsBacktrack \u0026\u0026 !thatIsBacktrack) {\n+        comparison \u003d -1;\n+      } else if (thatIsBacktrack \u0026\u0026 !thisIsBacktrack) {\n+        comparison \u003d 1;\n+      } else {\n+\n+        // both forwards\n+        if (thatIsBacktrack) {\n+\n+          // back to earlier vertex is smaller\n+          comparison \u003d this.toTime - that.toTime;\n+\n+          // both backwards\n+        } else {\n+\n+          // forwards from later vertex is smaller\n+          comparison \u003d that.fromTime - this.fromTime;\n+        }\n+      }\n+    }\n+\n+    return comparison;\n+  }\n+\n+  public boolean isForwards() {\n+    return !isBackwards();\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/representation/transactional/traversalcode/TraversalCode.java",
          "patch": "@@ -0,0 +1,137 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.representation.transactional.traversalcode;\n+\n+import com.google.common.collect.Lists;\n+import org.apache.commons.lang3.StringUtils;\n+\n+import java.io.Serializable;\n+import java.util.Iterator;\n+import java.util.List;\n+\n+/**\n+ * Represents a graph by the log of a depth first search.\n+ *\n+ * @param \u003cC\u003e vertex and edge value type\n+ */\n+public class TraversalCode\u003cC extends Comparable\u003cC\u003e\u003e implements Serializable, Comparable\u003cTraversalCode\u003cC\u003e\u003e {\n+\n+  /**\n+   * Included edges.\n+   */\n+  private final List\u003cTraversal\u003cC\u003e\u003e traversals;\n+\n+  /**\n+   * Default constructor.\n+   */\n+  public TraversalCode() {\n+    this.traversals \u003d Lists.newArrayList();\n+  }\n+\n+  /**\n+   * Constructor.\n+   *\n+   * @param traversal initial traversals\n+   */\n+  public TraversalCode(Traversal\u003cC\u003e traversal) {\n+    this.traversals \u003d Lists.newArrayListWithExpectedSize(1);\n+    this.traversals.add(traversal);\n+  }\n+\n+  /**\n+   * Constructor.\n+   *\n+   * @param parent parent DFS-code\n+   */\n+  public TraversalCode(TraversalCode\u003cC\u003e parent) {\n+    this.traversals \u003d Lists.newArrayList(parent.getTraversals());\n+  }\n+\n+  public List\u003cTraversal\u003cC\u003e\u003e getTraversals() {\n+    return traversals;\n+  }\n+\n+  @Override\n+  public String toString() {\n+    return StringUtils.join(traversals, \u0027,\u0027);\n+  }\n+\n+  @Override\n+  public boolean equals(Object o) {\n+    if (this \u003d\u003d o) {\n+      return true;\n+    }\n+    if (o \u003d\u003d null || getClass() !\u003d o.getClass()) {\n+      return false;\n+    }\n+\n+    TraversalCode code \u003d (TraversalCode) o;\n+\n+    return traversals.equals(code.traversals);\n+  }\n+\n+  @Override\n+  public int hashCode() {\n+    return traversals.hashCode();\n+  }\n+\n+  @Override\n+  public int compareTo(TraversalCode\u003cC\u003e that) {\n+\n+    int comparison;\n+\n+    boolean thisIsRoot \u003d this.getTraversals().isEmpty();\n+    boolean thatIsRoot \u003d that.getTraversals().isEmpty();\n+\n+    if (thisIsRoot \u0026\u0026 ! thatIsRoot) {\n+      comparison \u003d -1;\n+\n+    } else if (thatIsRoot \u0026\u0026 !thisIsRoot) {\n+      comparison \u003d 1;\n+\n+    } else {\n+      comparison \u003d 0;\n+\n+      Iterator\u003cTraversal\u003cC\u003e\u003e thisIterator \u003d this.getTraversals().iterator();\n+      Iterator\u003cTraversal\u003cC\u003e\u003e thatIterator \u003d that.getTraversals().iterator();\n+\n+      // if two DFS-Codes share initial traversals,\n+      // the first different traversal will decide about comparison\n+      while (comparison \u003d\u003d 0 \u0026\u0026 thisIterator.hasNext() \u0026\u0026 thatIterator.hasNext())\n+      {\n+        comparison \u003d thisIterator.next().compareTo(thatIterator.next());\n+      }\n+\n+      // DFS-Codes are equal or one is parent of other\n+      if (comparison \u003d\u003d 0) {\n+\n+        // this is child, cause it has further traversals\n+        if (thisIterator.hasNext()) {\n+          comparison \u003d 1;\n+\n+          // that is child, cause it has further traversals\n+        } else if (thatIterator.hasNext()) {\n+          comparison \u003d -1;\n+\n+        }\n+      }\n+    }\n+\n+    return comparison;\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/representation/transactional/traversalcode/TraversalEmbedding.java",
          "patch": "@@ -0,0 +1,81 @@\n+/*\n+ * This file is part of Gradoop.\n+ *\n+ * Gradoop is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * Gradoop is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with Gradoop. If not, see \u003chttp://www.gnu.org/licenses/\u003e.\n+ */\n+\n+package org.gradoop.flink.representation.transactional.traversalcode;\n+\n+import com.google.common.collect.Lists;\n+import org.gradoop.common.model.impl.id.GradoopId;\n+\n+import java.util.List;\n+\n+/**\n+ * Mapping between an embedding and a DFS code.\n+ */\n+public class TraversalEmbedding {\n+\n+  /**\n+   * Initial vertex discovery times.\n+   */\n+  private final List\u003cGradoopId\u003e vertexIds;\n+\n+  /**\n+   * Included edges.\n+   */\n+  private final List\u003cGradoopId\u003e edgeIds;\n+\n+  /**\n+   * Constructor.\n+   *\n+   * @param vertexIds vertex ids\n+   * @param edgeIds edge ids\n+   */\n+  public TraversalEmbedding(List\u003cGradoopId\u003e vertexIds, List\u003cGradoopId\u003e edgeIds) {\n+    this.vertexIds \u003d vertexIds;\n+    this.edgeIds \u003d edgeIds;\n+  }\n+\n+  /**\n+   * Default constructor.\n+   */\n+  public TraversalEmbedding() {\n+    this.vertexIds \u003d Lists.newArrayList();\n+    this.edgeIds \u003d Lists.newArrayList();\n+  }\n+\n+  /**\n+   * Constructor.\n+   *\n+   * @param parent parent embedding\n+   */\n+  public TraversalEmbedding(TraversalEmbedding parent) {\n+    this.vertexIds \u003d Lists.newArrayList(parent.getVertexIds());\n+    this.edgeIds \u003d Lists.newArrayList(parent.getEdgeIds());\n+  }\n+\n+  public List\u003cGradoopId\u003e getEdgeIds() {\n+    return edgeIds;\n+  }\n+\n+  public List\u003cGradoopId\u003e getVertexIds() {\n+    return vertexIds;\n+  }\n+\n+  @Override\n+  public String toString() {\n+    return vertexIds + \";\" + edgeIds;\n+  }\n+}"
        },
        {
          "file_name": "gradoop-flink/src/main/java/org/gradoop/flink/representation/transactional/traversalcode/package-info.java",
          "patch": "@@ -16,7 +16,6 @@\n  */\n \n /**\n- * pojos related to category characteristic subgraph mining\n+ * Classes related to DFS code graph representation.\n  */\n-\n-package org.gradoop.flink.algorithms.fsm.ccs.pojos;\n+package org.gradoop.flink.representation.transactional.traversalcode;"
        },
        {
          "file_name": "gradoop-flink/src/test/java/org/gradoop/flink/algorithms/fsm/CategoryCharacteristicSubgraphsTest.java",
          "patch": "@@ -4,8 +4,8 @@\n import org.apache.flink.api.java.tuple.Tuple2;\n import org.apache.flink.util.Collector;\n import org.gradoop.common.model.impl.pojo.Element;\n-import org.gradoop.flink.algorithms.fsm.ccs.CategoryCharacteristicSubgraphs;\n-import org.gradoop.flink.algorithms.fsm.common.config.FSMConfig;\n+import org.gradoop.flink.algorithms.fsm.transactional.CategoryCharacteristicSubgraphs;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.FSMConfig;\n import org.gradoop.flink.datagen.transactions.predictable.PredictableTransactionsGenerator;\n import org.gradoop.flink.model.GradoopFlinkTestBase;\n import org.gradoop.flink.model.api.functions.TransformationFunction;\n@@ -24,7 +24,7 @@\n \n import java.util.List;\n \n-import static org.gradoop.flink.algorithms.fsm.ccs.CategoryCharacteristicSubgraphs.CATEGORY_KEY;\n+import static org.gradoop.flink.algorithms.fsm.transactional.CategoryCharacteristicSubgraphs.CATEGORY_KEY;\n import static org.junit.Assert.assertEquals;\n \n public class CategoryCharacteristicSubgraphsTest extends GradoopFlinkTestBase {"
        },
        {
          "file_name": "gradoop-flink/src/test/java/org/gradoop/flink/algorithms/fsm/MinDFSLabelerTest.java",
          "patch": "@@ -1,227 +0,0 @@\n-package org.gradoop.flink.algorithms.fsm;\n-\n-import com.google.common.collect.Maps;\n-import org.gradoop.flink.algorithms.fsm.common.canonicalization.api\n-  .CanonicalLabeler;\n-import org.gradoop.flink.algorithms.fsm.common.canonicalization.cam.CAMLabeler;\n-import org.gradoop.flink.algorithms.fsm.common.canonicalization.gspan\n-  .MinDFSLabeler;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.Embedding;\n-import org.gradoop.flink.algorithms.fsm.common.pojos.FSMEdge;\n-import org.junit.Test;\n-\n-import java.util.Map;\n-\n-import static org.junit.Assert.*;\n-\n-public class MinDFSLabelerTest {\n-\n-  @Test\n-  public void testDiamond() throws Exception {\n-\n-    Map\u003cInteger, String\u003e vertices \u003d Maps.newHashMap();\n-\n-    vertices.put(0, \"A\");\n-    vertices.put(1, \"A\");\n-    vertices.put(2, \"A\");\n-    vertices.put(3, \"A\");\n-\n-    Map\u003cInteger, FSMEdge\u003e edges \u003d Maps.newHashMap();\n-\n-    edges.put(0, new FSMEdge(0, \"a\", 1));\n-    edges.put(1, new FSMEdge(1, \"a\", 2));\n-    edges.put(2, new FSMEdge(0, \"a\", 3));\n-    edges.put(3, new FSMEdge(3, \"a\", 2));\n-\n-    Embedding embedding \u003d new Embedding(vertices, edges);\n-\n-    CanonicalLabeler labeler \u003d new MinDFSLabeler(true);\n-\n-    String expectation \u003d \"0:A\u003ea-1:A,1:A\u003ea-2:A,2:A\u003ca-3:A,3:A\u003ca-0:A\";\n-    String label \u003d labeler.label(embedding);\n-\n-    assertEquals(expectation, label);\n-\n-    labeler \u003d new MinDFSLabeler(false);\n-\n-    expectation \u003d \"0:A-a-1:A,1:A-a-2:A,2:A-a-3:A,3:A-a-0:A\";\n-    label \u003d labeler.label(embedding);\n-\n-    assertEquals(expectation, label);\n-  }\n-\n-  @Test\n-  public void testMultiEdge() throws Exception {\n-\n-    Map\u003cInteger, String\u003e vertices \u003d Maps.newHashMap();\n-\n-    vertices.put(0, \"A\");\n-    vertices.put(1, \"A\");\n-    vertices.put(2, \"A\");\n-\n-    Map\u003cInteger, FSMEdge\u003e edges \u003d Maps.newHashMap();\n-\n-    edges.put(0, new FSMEdge(0, \"a\", 1));\n-    edges.put(1, new FSMEdge(0, \"a\", 1));\n-    edges.put(2, new FSMEdge(1, \"a\", 2));\n-    edges.put(3, new FSMEdge(1, \"a\", 2));\n-\n-    Embedding embedding \u003d new Embedding(vertices, edges);\n-\n-    CanonicalLabeler labeler \u003d new MinDFSLabeler(true);\n-\n-    String expectation \u003d \"0:A\u003ea-1:A,1:A\u003ca-0:A,1:A\u003ea-2:A,2:A\u003ca-1:A\";\n-    String label \u003d labeler.label(embedding);\n-\n-    assertEquals(expectation, label);\n-\n-    labeler \u003d new MinDFSLabeler(false);\n-\n-    expectation \u003d \"0:A-a-1:A,1:A-a-0:A,1:A-a-2:A,2:A-a-1:A\";\n-    label \u003d labeler.label(embedding);\n-\n-    assertEquals(expectation, label);\n-  }\n-\n-  @Test\n-  public void testLoop() throws Exception {\n-\n-    Map\u003cInteger, String\u003e vertices \u003d Maps.newHashMap();\n-\n-    vertices.put(0, \"A\");\n-    vertices.put(1, \"A\");\n-    vertices.put(2, \"A\");\n-\n-    Map\u003cInteger, FSMEdge\u003e edges \u003d Maps.newHashMap();\n-\n-    edges.put(0, new FSMEdge(0, \"a\", 0));\n-    edges.put(1, new FSMEdge(0, \"a\", 1));\n-    edges.put(2, new FSMEdge(0, \"a\", 2));\n-    edges.put(3, new FSMEdge(1, \"a\", 2));\n-\n-    Embedding embedding \u003d new Embedding(vertices, edges);\n-\n-    CanonicalLabeler labeler \u003d new MinDFSLabeler(true);\n-\n-    String expectation \u003d \"0:A\u003ea-0:A,0:A\u003ea-1:A,1:A\u003ea-2:A,2:A\u003ca-0:A\";\n-    String label \u003d labeler.label(embedding);\n-\n-    assertEquals(expectation, label);\n-\n-    labeler \u003d new MinDFSLabeler(false);\n-\n-    expectation \u003d \"0:A-a-0:A,0:A-a-1:A,1:A-a-2:A,2:A-a-0:A\";\n-    label \u003d labeler.label(embedding);\n-\n-    assertEquals(expectation, label);\n-  }\n-\n-  @Test\n-  public void testCircleWithBranch() throws Exception {\n-\n-    Map\u003cInteger, String\u003e vertices \u003d Maps.newHashMap();\n-\n-    vertices.put(0, \"A\");\n-    vertices.put(1, \"A\");\n-    vertices.put(2, \"A\");\n-    vertices.put(3, \"B\");\n-\n-    Map\u003cInteger, FSMEdge\u003e edges \u003d Maps.newHashMap();\n-\n-    edges.put(0, new FSMEdge(0, \"a\", 1));\n-    edges.put(1, new FSMEdge(1, \"a\", 2));\n-    edges.put(2, new FSMEdge(2, \"a\", 0));\n-    edges.put(3, new FSMEdge(2, \"b\", 3));\n-\n-    Embedding embedding \u003d new Embedding(vertices, edges);\n-\n-    CanonicalLabeler labeler \u003d new MinDFSLabeler(true);\n-\n-    String expectation \u003d \"0:A\u003ea-1:A,1:A\u003ea-2:A,2:A\u003ea-0:A,2:A\u003eb-3:B\";\n-    String label \u003d labeler.label(embedding);\n-\n-    assertEquals(expectation, label);\n-\n-    labeler \u003d new MinDFSLabeler(false);\n-\n-    expectation \u003d \"0:A-a-1:A,1:A-a-2:A,2:A-a-0:A,2:A-b-3:B\";\n-    label \u003d labeler.label(embedding);\n-\n-    assertEquals(expectation, label);\n-  }\n-\n-  @Test\n-  public void testDirectedVsUndirected() throws Exception {\n-\n-    Map\u003cInteger, String\u003e vertices \u003d Maps.newHashMap();\n-\n-    vertices.put(0, \"A\");\n-    vertices.put(1, \"B\");\n-\n-    Map\u003cInteger, FSMEdge\u003e edges \u003d Maps.newHashMap();\n-\n-    edges.put(0, new FSMEdge(0, \"b\", 1));\n-    edges.put(1, new FSMEdge(1, \"a\", 0));\n-\n-\n-    Embedding embedding \u003d new Embedding(vertices, edges);\n-\n-    CanonicalLabeler labeler \u003d new MinDFSLabeler(true);\n-\n-    String expectation \u003d \"0:A\u003eb-1:B,1:B\u003ea-0:A\";\n-    String label \u003d labeler.label(embedding);\n-\n-    assertEquals(expectation, label);\n-\n-    labeler \u003d new MinDFSLabeler(false);\n-\n-    expectation \u003d \"0:A-a-1:B,1:B-b-0:A\";\n-    label \u003d labeler.label(embedding);\n-\n-    assertEquals(expectation, label);\n-  }\n-\n-  /**\n-   * Creation of paper examples\n-   */\n-//  @Test\n-//  public void test() {\n-//    Map\u003cInteger, String\u003e vertices \u003d Maps.newHashMap();\n-//\n-//    vertices.put(0, \"A\");\n-//    vertices.put(1, \"A\");\n-//    vertices.put(2, \"A\");\n-//\n-//    Map\u003cInteger, FSMEdge\u003e edges \u003d Maps.newHashMap();\n-//\n-//    edges.put(0, new FSMEdge(0, \"a\", 1));\n-//    edges.put(1, new FSMEdge(0, \"a\", 1));\n-//    edges.put(2, new FSMEdge(1, \"a\", 2));\n-//    edges.put(3, new FSMEdge(1, \"a\", 2));\n-//\n-//    Embedding embedding \u003d new Embedding(vertices, edges);\n-//\n-//    System.out.println(new MinDFSLabeler(true).label(embedding));\n-//    System.out.println(new MinDFSLabeler(false).label(embedding));\n-//    System.out.println(new CAMLabeler(true).label(embedding));\n-//    System.out.println(new CAMLabeler(false).label(embedding));\n-//\n-//    vertices \u003d Maps.newHashMap();\n-//\n-//    vertices.put(0, \"A\");\n-//    vertices.put(1, \"B\");\n-//\n-//    edges \u003d Maps.newHashMap();\n-//\n-//    edges.put(0, new FSMEdge(0, \"b\", 1));\n-//    edges.put(1, new FSMEdge(0, \"b\", 1));\n-//    edges.put(2, new FSMEdge(1, \"a\", 0));\n-//\n-//    embedding \u003d new Embedding(vertices, edges);\n-//\n-//    System.out.println(new MinDFSLabeler(true).label(embedding));\n-//    System.out.println(new MinDFSLabeler(false).label(embedding));\n-//    System.out.println(new CAMLabeler(true).label(embedding));\n-//    System.out.println(new CAMLabeler(false).label(embedding));\n-//  }\n-}\n\\ No newline at end of file"
        },
        {
          "file_name": "gradoop-flink/src/test/java/org/gradoop/flink/algorithms/fsm/PredictableGeneratorCorrectnessTest.java",
          "patch": "@@ -1,10 +1,9 @@\n package org.gradoop.flink.algorithms.fsm;\n \n import org.apache.flink.api.java.DataSet;\n-import org.gradoop.flink.algorithms.fsm.common.config.FSMConfig;\n-import org.gradoop.flink.algorithms.fsm.tfsm.TransactionalFSM;\n-import org.gradoop.flink.datagen.transactions.predictable\n-  .PredictableTransactionsGenerator;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.FSMConfig;\n+import org.gradoop.flink.algorithms.fsm.transactional.GSpanIterative;\n+import org.gradoop.flink.datagen.transactions.predictable.PredictableTransactionsGenerator;\n import org.gradoop.flink.model.GradoopFlinkTestBase;\n import org.gradoop.flink.model.impl.GraphTransactions;\n import org.gradoop.flink.representation.transactional.GraphTransaction;\n@@ -31,10 +30,9 @@ private void mineDirected(\n \n     FSMConfig fsmConfig \u003d new FSMConfig(threshold, true);\n \n-    DataSet\u003cGraphTransaction\u003e frequentSubgraphs \u003d\n-      new TransactionalFSM(fsmConfig)\n-        .execute(transactions)\n-        .getTransactions();\n+    DataSet\u003cGraphTransaction\u003e frequentSubgraphs \u003d new GSpanIterative(fsmConfig)\n+      .execute(transactions)\n+      .getTransactions();\n \n     Assert.assertEquals(\n       PredictableTransactionsGenerator\n@@ -58,10 +56,9 @@ private void mineUndirected(\n \n     FSMConfig fsmConfig \u003d new FSMConfig(threshold, false);\n \n-    DataSet\u003cGraphTransaction\u003e frequentSubgraphs \u003d\n-      new TransactionalFSM(fsmConfig)\n-        .execute(transactions)\n-        .getTransactions();\n+    DataSet\u003cGraphTransaction\u003e frequentSubgraphs \u003d new GSpanIterative(fsmConfig)\n+      .execute(transactions)\n+      .getTransactions();\n \n     Assert.assertEquals(\n       PredictableTransactionsGenerator"
        },
        {
          "file_name": "gradoop-flink/src/test/java/org/gradoop/flink/algorithms/fsm/TransactionalFSMTest.java",
          "patch": "@@ -1,7 +1,7 @@\n package org.gradoop.flink.algorithms.fsm;\n \n-import org.gradoop.flink.algorithms.fsm.common.config.FSMConfig;\n-import org.gradoop.flink.algorithms.fsm.tfsm.TransactionalFSM;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.FSMConfig;\n+import org.gradoop.flink.algorithms.fsm.transactional.GSpanIterative;\n import org.gradoop.flink.model.GradoopFlinkTestBase;\n import org.gradoop.flink.model.api.operators.UnaryCollectionToCollectionOperator;\n import org.gradoop.flink.model.impl.GraphCollection;\n@@ -24,7 +24,7 @@ public void testSingleEdges() throws Exception {\n     String[] searchSpaceVariables \u003d {\"g1\", \"g2\", \"g3\", \"g4\"};\n     String[] expectedResultVariables \u003d {\"s1\"};\n \n-    TransactionalFSM transactionalFSM \u003d new TransactionalFSM(\n+    GSpanIterative transactionalFSM \u003d new GSpanIterative(\n       fsmConfig);\n \n     compareExpectationAndResult(transactionalFSM,\n@@ -48,7 +48,7 @@ public void testSimpleGraphs() throws Exception {\n     String[] searchSpaceVariables \u003d {\"g1\", \"g2\", \"g3\"};\n     String[] expectedResultVariables \u003d {\"s1\", \"s2\", \"s3\", \"s4\", \"s5\"};\n \n-    TransactionalFSM transactionalFSM \u003d new TransactionalFSM(fsmConfig);\n+    GSpanIterative transactionalFSM \u003d new GSpanIterative(fsmConfig);\n \n     compareExpectationAndResult(transactionalFSM,\n       asciiGraphs, searchSpaceVariables, expectedResultVariables);\n@@ -68,7 +68,7 @@ public void testParallelEdges() throws Exception {\n     String[] searchSpaceVariables \u003d {\"g1\", \"g2\", \"g3\"};\n     String[] expectedResultVariables \u003d {\"s1\", \"s2\"};\n \n-    TransactionalFSM transactionalFSM \u003d new TransactionalFSM(\n+    GSpanIterative transactionalFSM \u003d new GSpanIterative(\n       fsmConfig);\n \n     compareExpectationAndResult(transactionalFSM,\n@@ -91,7 +91,7 @@ public void testLoop() throws Exception {\n     String[] searchSpaceVariables \u003d {\"g1\", \"g2\", \"g3\", \"g4\"};\n     String[] expectedResultVariables \u003d {\"s1\", \"s2\", \"s3\"};\n \n-    TransactionalFSM transactionalFSM \u003d new TransactionalFSM(\n+    GSpanIterative transactionalFSM \u003d new GSpanIterative(\n       fsmConfig);\n \n     compareExpectationAndResult(transactionalFSM,\n@@ -121,7 +121,7 @@ public void testDiamond() throws Exception {\n       {\"s1\", \"s2\", \"s3\", \"s4\", \"s5\", \"s6\", \"s7\"};\n \n \n-    TransactionalFSM transactionalFSM \u003d new TransactionalFSM(\n+    GSpanIterative transactionalFSM \u003d new GSpanIterative(\n       fsmConfig);\n \n     compareExpectationAndResult(transactionalFSM,\n@@ -155,7 +155,7 @@ public void testCircleWithBranch() throws Exception {\n     String[] expectedResultVariables \u003d\n       {\"s11\", \"s12\", \"s21\", \"s22\", \"s23\", \"s31\", \"s32\", \"s33\", \"s34\", \"s41\"};\n \n-    TransactionalFSM transactionalFSM \u003d new TransactionalFSM(\n+    GSpanIterative transactionalFSM \u003d new GSpanIterative(\n       fsmConfig);\n \n     compareExpectationAndResult(transactionalFSM,"
        },
        {
          "file_name": "gradoop-flink/src/test/java/org/gradoop/flink/algorithms/fsm/TransactionalFSMTestTLE.java",
          "patch": "@@ -0,0 +1,182 @@\n+package org.gradoop.flink.algorithms.fsm;\n+\n+import org.gradoop.flink.algorithms.fsm.transactional.ThinkLikeAnEmbeddingTFSM;\n+import org.gradoop.flink.algorithms.fsm.transactional.common.FSMConfig;\n+import org.gradoop.flink.model.GradoopFlinkTestBase;\n+import org.gradoop.flink.model.api.operators.UnaryCollectionToCollectionOperator;\n+import org.gradoop.flink.model.impl.GraphCollection;\n+import org.gradoop.flink.util.FlinkAsciiGraphLoader;\n+import org.junit.Test;\n+\n+public class TransactionalFSMTestTLE extends GradoopFlinkTestBase {\n+\n+  @Test\n+  public void testSingleEdges() throws Exception {\n+    FSMConfig fsmConfig \u003d new FSMConfig(0.7f, true);\n+\n+    String asciiGraphs \u003d \"\" +\n+      \"g1[(v1:A)-[e1:a]-\u003e(v2:A)]\" +\n+      \"g2[(v1)-[e1]-\u003e(v2)]\" +\n+      \"g3[(:A)-[:a]-\u003e(:A),(:B)-[:b]-\u003e(:B),(:B)-[:b]-\u003e(:B)]\" +\n+      \"g4[(:A)-[:b]-\u003e(:A),(:A)-[:b]-\u003e(:A),(:A)-[:b]-\u003e(:A)]\" +\n+      \"s1[(:A)-[:a]-\u003e(:A)]\";\n+\n+    String[] searchSpaceVariables \u003d {\"g1\", \"g2\", \"g3\", \"g4\"};\n+    String[] expectedResultVariables \u003d {\"s1\"};\n+\n+    ThinkLikeAnEmbeddingTFSM transactionalFSM \u003d new ThinkLikeAnEmbeddingTFSM(fsmConfig);\n+\n+    compareExpectationAndResult(transactionalFSM,\n+      asciiGraphs, searchSpaceVariables, expectedResultVariables);\n+  }\n+\n+  @Test\n+  public void testSimpleGraphs() throws Exception {\n+    FSMConfig fsmConfig \u003d new FSMConfig(0.7f, true);\n+\n+    String asciiGraphs \u003d \"\" +\n+      \"g1[(:A)-[:a]-\u003e(v1:B)-[:b]-\u003e(:C),(v1)-[:c]-\u003e(:D)]\" +\n+      \"g2[(:A)-[:a]-\u003e(v2:B)-[:b]-\u003e(:C),(v2)-[:c]-\u003e(:E)]\" +\n+      \"g3[(:A)-[:a]-\u003e(v3:B)-[:d]-\u003e(:C),(v3)-[:c]-\u003e(:E)]\" +\n+      \"s1[(:A)-[:a]-\u003e(:B)]\" +\n+      \"s2[(:B)-[:b]-\u003e(:C)]\" +\n+      \"s3[(:B)-[:c]-\u003e(:E)]\" +\n+      \"s4[(:A)-[:a]-\u003e(:B)-[:b]-\u003e(:C)]\" +\n+      \"s5[(:A)-[:a]-\u003e(:B)-[:c]-\u003e(:E)]\";\n+\n+    String[] searchSpaceVariables \u003d {\"g1\", \"g2\", \"g3\"};\n+    String[] expectedResultVariables \u003d {\"s1\", \"s2\", \"s3\", \"s4\", \"s5\"};\n+\n+    ThinkLikeAnEmbeddingTFSM transactionalFSM \u003d new ThinkLikeAnEmbeddingTFSM(fsmConfig);\n+\n+    compareExpectationAndResult(transactionalFSM,\n+      asciiGraphs, searchSpaceVariables, expectedResultVariables);\n+  }\n+\n+  @Test\n+  public void testParallelEdges() throws Exception {\n+    FSMConfig fsmConfig \u003d new FSMConfig(0.7f, true);\n+\n+    String asciiGraphs \u003d \"\" +\n+      \"g1[(v1:A)-[:a]-\u003e(:A)-[:a]-\u003e(v1:A)]\" +\n+      \"g2[(v2:A)-[:a]-\u003e(:A)-[:a]-\u003e(v2:A)]\" +\n+      \"g3[(:A)-[:a]-\u003e(:A)-[:a]-\u003e(:A)]\" +\n+      \"s1[(:A)-[:a]-\u003e(:A)]\" +\n+      \"s2[(v3:A)-[:a]-\u003e(:A)-[:a]-\u003e(v3:A)]\";\n+\n+    String[] searchSpaceVariables \u003d {\"g1\", \"g2\", \"g3\"};\n+    String[] expectedResultVariables \u003d {\"s1\", \"s2\"};\n+\n+    ThinkLikeAnEmbeddingTFSM transactionalFSM \u003d new ThinkLikeAnEmbeddingTFSM(\n+      fsmConfig);\n+\n+    compareExpectationAndResult(transactionalFSM,\n+      asciiGraphs, searchSpaceVariables, expectedResultVariables);\n+  }\n+\n+  @Test\n+  public void testLoop() throws Exception {\n+    FSMConfig fsmConfig \u003d new FSMConfig(0.7f, true);\n+\n+    String asciiGraphs \u003d \"\" +\n+      \"g1[(v1:A)-[:a]-\u003e(v1)-[:a]-\u003e(:A)]\" +\n+      \"g2[(v2:A)-[:a]-\u003e(v2)-[:a]-\u003e(:A)]\" +\n+      \"g3[(v3:A)-[:a]-\u003e(v3)-[:a]-\u003e(:A)]\" +\n+      \"g4[(:A)-[:a]-\u003e(:A)-[:a]-\u003e(:A)]\" +\n+      \"s1[(:A)-[:a]-\u003e(:A)]\" +\n+      \"s2[(v3:A)-[:a]-\u003e(v3)]\" +\n+      \"s3[(v4:A)-[:a]-\u003e(v4)-[:a]-\u003e(:A)]\";\n+\n+    String[] searchSpaceVariables \u003d {\"g1\", \"g2\", \"g3\", \"g4\"};\n+    String[] expectedResultVariables \u003d {\"s1\", \"s2\", \"s3\"};\n+\n+    ThinkLikeAnEmbeddingTFSM transactionalFSM \u003d new ThinkLikeAnEmbeddingTFSM(\n+      fsmConfig);\n+\n+    compareExpectationAndResult(transactionalFSM,\n+      asciiGraphs, searchSpaceVariables, expectedResultVariables);\n+  }\n+\n+  @Test\n+  public void testDiamond() throws Exception {\n+    FSMConfig fsmConfig \u003d new FSMConfig(0.7f, true);\n+\n+    String asciiGraphs \u003d \"\" +\n+      \"g1[(v1:A)-[:a]-\u003e(v2:A)-[:a]-\u003e(v4:A),(v1:A)-[:a]-\u003e(v3:A)-[:a]-\u003e(v4:A)]\" +\n+      \"g2[(v1:A)-[:a]-\u003e(v2:A)-[:a]-\u003e(v4:A),(v1:A)-[:a]-\u003e(v3:A)-[:a]-\u003e(v4:A)]\" +\n+      \"g3[(v1:A)-[:a]-\u003e(v2:A)-[:a]-\u003e(v4:A),(v1:A)-[:a]-\u003e(v3:A)-[:a]-\u003e(v4:A)]\" +\n+\n+      \"s1[(v1:A)-[:a]-\u003e(v2:A)-[:a]-\u003e(v4:A),(v1:A)-[:a]-\u003e(v3:A)-[:a]-\u003e(v4:A)]\" +\n+\n+      \"s2[(v1:A)-[:a]-\u003e(v2:A)-[:a]-\u003e(v4:A),(v1:A)-[:a]-\u003e(v3:A)             ]\" +\n+      \"s3[(v1:A)-[:a]-\u003e(v2:A)-[:a]-\u003e(v4:A),             (v3:A)-[:a]-\u003e(v4:A)]\" +\n+      \"s4[(v1:A)-[:a]-\u003e(v2:A)-[:a]-\u003e(v4:A)                                 ]\" +\n+      \"s5[(v1:A)-[:a]-\u003e(v2:A)             ,(v1:A)-[:a]-\u003e(v3:A)             ]\" +\n+      \"s6[             (v2:A)-[:a]-\u003e(v4:A),             (v3:A)-[:a]-\u003e(v4:A)]\" +\n+      \"s7[(v1:A)-[:a]-\u003e(v2:A)                                              ]\";\n+\n+    String[] searchSpaceVariables \u003d {\"g1\", \"g2\", \"g3\"};\n+    String[] expectedResultVariables \u003d\n+      {\"s1\", \"s2\", \"s3\", \"s4\", \"s5\", \"s6\", \"s7\"};\n+\n+\n+    ThinkLikeAnEmbeddingTFSM transactionalFSM \u003d new ThinkLikeAnEmbeddingTFSM(\n+      fsmConfig);\n+\n+    compareExpectationAndResult(transactionalFSM,\n+      asciiGraphs, searchSpaceVariables, expectedResultVariables);\n+  }\n+\n+  @Test\n+  public void testCircleWithBranch() throws Exception {\n+    FSMConfig fsmConfig \u003d new FSMConfig(0.7f, true);\n+\n+    String asciiGraphs \u003d \"\" +\n+      \"g1[(v1:A)-[:a]-\u003e(:A)-[:a]-\u003e(:A)-[:a]-\u003e(v1)-[:b]-\u003e(:B)]\" +\n+      \"g2[(v1:A)-[:a]-\u003e(:A)-[:a]-\u003e(:A)-[:a]-\u003e(v1)-[:b]-\u003e(:B)]\" +\n+      \"g3[(v1:A)-[:a]-\u003e(:A)-[:a]-\u003e(:A)-[:a]-\u003e(v1)-[:b]-\u003e(:B)]\" +\n+\n+      \"s41[(v1:A)-[:a]-\u003e(:A)-[:a]-\u003e(:A)-[:a]-\u003e(v1)-[:b]-\u003e(:B)]\" +\n+      \"s31[(v1:A)-[:a]-\u003e(:A)-[:a]-\u003e(:A)-[:a]-\u003e(v1)           ]\" +\n+      \"s32[(v1:A)-[:a]-\u003e(:A)-[:a]-\u003e(:A)       (v1)-[:b]-\u003e(:B)]\" +\n+      \"s33[(v1:A)-[:a]-\u003e(:A)       (:A)-[:a]-\u003e(v1)-[:b]-\u003e(:B)]\" +\n+      \"s34[             (:A)-[:a]-\u003e(:A)-[:a]-\u003e(v1:A)-[:b]-\u003e(:B)]\" +\n+\n+      \"s21[(:A)-[:a]-\u003e(:A)-[:a]-\u003e(:A)]\" +\n+      \"s22[(:A)-[:a]-\u003e(:A)-[:b]-\u003e(:B)]\" +\n+      \"s23[(:A)\u003c-[:a]-(:A)-[:b]-\u003e(:B)]\" +\n+\n+      \"s11[(:A)-[:a]-\u003e(:A)]\" +\n+      \"s12[(:A)-[:b]-\u003e(:B)]\";\n+\n+    String[] searchSpaceVariables \u003d {\"g1\", \"g2\", \"g3\"};\n+\n+    String[] expectedResultVariables \u003d\n+      {\"s11\", \"s12\", \"s21\", \"s22\", \"s23\", \"s31\", \"s32\", \"s33\", \"s34\", \"s41\"};\n+\n+    ThinkLikeAnEmbeddingTFSM transactionalFSM \u003d new ThinkLikeAnEmbeddingTFSM(\n+      fsmConfig);\n+\n+    compareExpectationAndResult(transactionalFSM,\n+      asciiGraphs, searchSpaceVariables, expectedResultVariables);\n+  }\n+\n+  private void compareExpectationAndResult(\n+    UnaryCollectionToCollectionOperator gSpan, String asciiGraphs,\n+    String[] searchSpaceVariables, String[] expectedResultVariables) throws\n+    Exception {\n+    FlinkAsciiGraphLoader loader \u003d\n+      getLoaderFromString(asciiGraphs);\n+\n+    GraphCollection searchSpace \u003d\n+      loader.getGraphCollectionByVariables(searchSpaceVariables);\n+\n+    GraphCollection expectation \u003d\n+      loader.getGraphCollectionByVariables(expectedResultVariables);\n+\n+    GraphCollection result \u003d\n+      gSpan.execute(searchSpace);\n+\n+    collectAndAssertTrue(expectation.equalsByGraphElementData(result));\n+  }\n+}\n\\ No newline at end of file"
        },
        {
          "file_name": "gradoop-flink/src/test/java/org/gradoop/flink/model/impl/GradoopFlinkTestUtils.java",
          "patch": "@@ -179,7 +179,7 @@ public static void assertEquals(AdjacencyList\u003cGradoopId, String, GradoopId, Grad\n \n       List\u003cAdjacencyListCell\u003cGradoopId, GradoopId\u003e\u003e aCells \u003d\n         Lists.newArrayList(aRows.get(vertexId).getCells());\n-      \n+\n       List\u003cAdjacencyListCell\u003cGradoopId, GradoopId\u003e\u003e bCells \u003d\n         Lists.newArrayList(aRows.get(vertexId).getCells());\n \n@@ -200,9 +200,9 @@ public static void assertEquals(AdjacencyList\u003cGradoopId, String, GradoopId, Grad\n       Properties aProperties \u003d a.getProperties(id);\n       Properties bProperties \u003d b.getProperties(id);\n \n-      assertTrue(aProperties \u003d\u003d null \u0026\u0026 bProperties \u003d\u003d null \n+      assertTrue(aProperties \u003d\u003d null \u0026\u0026 bProperties \u003d\u003d null\n         || aProperties.equals(bProperties));\n \n     }\n   }\n-}\n+}\n\\ No newline at end of file"
        },
        {
          "file_name": "gradoop-flink/src/test/java/org/gradoop/flink/model/impl/operators/matching/single/PatternMatchingTest.java",
          "patch": "@@ -12,7 +12,7 @@\n  * Base class for Pattern Matching Tests.\n  */\n @RunWith(Parameterized.class)\n-public abstract class PatternMatchingTest extends GradoopFlinkTestBase {\n+public abstract class  PatternMatchingTest extends GradoopFlinkTestBase {\n \n   private final String testName;\n "
        }
      ]
    }
  },
  {
    "name": "Null pointer exceptions when empty spaces are interacted with",
    "url": "https://github.com/fwumdesoft/Cosmic-Circuitry/issues/56",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/fwumdesoft/Cosmic-Circuitry/commit/3e84c7cbff3a67599973e0f558bb14c76ea84266",
      "files": [
        {
          "file_name": "core/src/com/fwumdesoft/project8/CircuitInput.java",
          "patch": "@@ -130,6 +130,8 @@ private void edit(int cursorX, int cursorY)\n \r\n \tprivate void interact(int cursorX, int cursorY)\r\n \t{\r\n+\t\tif(cursorY \u003c 0 || cursorX \u003c 0 || cursorY \u003e\u003d circuit.grid.length || cursorX \u003e\u003d circuit.grid[cursorY].length || circuit.grid[cursorY][cursorX] \u003d\u003d null)\r\n+\t\t\treturn;\r\n \t\tif (Gdx.input.isKeyJustPressed(Keys.SPACE))\r\n \t\t{\r\n \t\t\tif (!(cursorY \u003e\u003d 0 \u0026\u0026 cursorY \u003c circuit.grid.length \u0026\u0026 cursorX \u003e\u003d 0\r"
        }
      ]
    }
  },
  {
    "name": "fix null pointer exception in toString if column name is empty",
    "url": "https://github.com/cardillo/joinery/pull/45",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/cardillo/joinery/commit/6342052dcfb840e7ffb5a4dfb666e77022cb141e",
      "files": [
        {
          "file_name": "src/main/java/joinery/impl/Serialization.java",
          "patch": "@@ -80,10 +80,11 @@ public static String toString(final DataFrame\u003c?\u003e df, final int limit) {\n         // determine index width\n         width.put(INDEX_KEY, 0);\n         for (final Object row : df.index()) {\n+            Class\u003c? extends Object\u003e rowClass \u003d row \u003d\u003d null ? null : row.getClass();\n             width.put(INDEX_KEY, clamp(\n                     width.get(INDEX_KEY),\n                     MAX_COLUMN_WIDTH,\n-                    fmt(row.getClass(), row).length()));\n+                    fmt(rowClass, row).length()));\n         }\n \n         // determine column widths\n@@ -113,7 +114,8 @@ public static String toString(final DataFrame\u003c?\u003e df, final int limit) {\n             // output row name\n             int w \u003d width.get(INDEX_KEY);\n             final Object row \u003d names.hasNext() ? names.next() : r;\n-            sb.append(truncate(lpad(fmt(row.getClass(), row), w), w));\n+            Class\u003c? extends Object\u003e rowClass \u003d row \u003d\u003d null ? null : row.getClass();\n+            sb.append(truncate(lpad(fmt(rowClass, row), w), w));\n \n             // output rows\n             for (int c \u003d 0; c \u003c df.size(); c++) {\n@@ -176,6 +178,7 @@ private static final String truncate(final Object o, final int w) {\n     }\n \n     private static final String fmt(final Class\u003c?\u003e cls, final Object o) {\n+        if(cls\u003d\u003dnull) return \"null\";\n         String s;\n         if (o instanceof Number) {\n             if (Short.class.equals(cls) || Integer.class.equals(cls) ||"
        },
        {
          "file_name": "src/test/java/joinery/DataFrameSerializationTest.java",
          "patch": "@@ -267,5 +267,11 @@ public void testToString() {\n                 df.toString().split(\"\\n\").length\n             );\n     }\n+    \n+    @Test\n+    public void testToStringEmptyHeader() throws IOException {\n+        DataFrame\u003cObject\u003e dfEmptyHeader \u003d DataFrame.readCsv(ClassLoader.getSystemResourceAsStream(\"serialization_empty_header.csv\"));\n+        dfEmptyHeader.transpose().toString();\n+    }\n \n }"
        },
        {
          "file_name": "src/test/resources/serialization_empty_header.csv",
          "patch": "@@ -0,0 +1,8 @@\n+\"\", name,value\n+a,alpha,1\n+a,bravo,2\n+b,charlie,3\n+b,delta,4\n+c,echo,5\n+c,foxtrot,6\n+"
        }
      ]
    }
  },
  {
    "name": "Interpreter: Null pointer when executing .. caseReplicated",
    "url": "https://github.com/symphonytool/symphony/issues/237",
    "description": "The following model were not possible to execute due to a null pointer: \n\n```\nchannels\na:nat\n\nprocess Test \u003d\nbegin\n\nstate\nnumbersToSend:set of nat :\u003d {1,2}\n\noperations\n\nop:nat \u003d\u003d\u003e()\nop(i)\u003d\u003d numbersToSend :\u003d numbersToSend\\{i}\n\nactions\n\n  sendNumber \u003d  ([]i in set numbersToSend @  a.i-\u003e(op(i));loop)\n   loop \u003d  (sendNumber [] ([card numbersToSend \u003d0]\u0026Skip))  \n@ loop \nend\n```\n\nA cut down version of this looks like:\n\n```\nchannels\n    a:nat\n\nprocess Test \u003d\nbegin\n\nactions\n\n  sendNumber \u003d ([]i in set {1} @  a.1-\u003eSkip;sendNumber;sendNumber)\n\n@ sendNumber \nend\n```\n\nit gived the following exception: \n\n```\njava.lang.NullPointerException\n    at eu.compassresearch.core.interpreter.CommonInspectionVisitor.caseASequentialComposition(CommonInspectionVisitor.java:1061)\n    at eu.compassresearch.core.interpreter.ActionInspectionVisitor.caseASequentialCompositionAction(ActionInspectionVisitor.java:709)\n    at eu.compassresearch.core.interpreter.ActionInspectionVisitor.caseASequentialCompositionAction(ActionInspectionVisitor.java:1)\n    at eu.compassresearch.ast.actions.ASequentialCompositionAction.apply(ASequentialCompositionAction.java:335)\n    at eu.compassresearch.core.interpreter.CmlInspectionVisitor.defaultPAction(CmlInspectionVisitor.java:45)\n    at eu.compassresearch.core.interpreter.CmlInspectionVisitor.defaultPAction(CmlInspectionVisitor.java:1)\n    at eu.compassresearch.ast.analysis.QuestionAnswerCMLAdaptor.caseASequentialCompositionAction(QuestionAnswerCMLAdaptor.java:916)\n    at eu.compassresearch.ast.actions.ASequentialCompositionAction.apply(ASequentialCompositionAction.java:335)\n    at eu.compassresearch.core.interpreter.ConcreteCmlBehaviour.performInspection(ConcreteCmlBehaviour.java:357)\n    at eu.compassresearch.core.interpreter.ConcreteCmlBehaviour.inspect(ConcreteCmlBehaviour.java:378)\n    at eu.compassresearch.core.interpreter.VanillaCmlInterpreter.inspect(VanillaCmlInterpreter.java:321)\n    at eu.compassresearch.core.interpreter.VanillaCmlInterpreter.executeTopProcess(VanillaCmlInterpreter.java:292)\n    at eu.compassresearch.core.interpreter.VanillaCmlInterpreter.execute(VanillaCmlInterpreter.java:214)\n    at eu.compassresearch.core.interpreter.InterpretAllCmlFilesTest.execute(InterpretAllCmlFilesTest.java:167)\n    at ...\nTest failed in : testInterpretCmlFile[11 : action\\action-state.cml] : src\\test\\resources\\standard\\action\\action-state.cml\njava.lang.AssertionError: The test threw an unexpected exception : java.lang.NullPointerException\n```\n",
    "keywords": [
      "@",
      "caseasequentialcompositionaction",
      "ast",
      "concretecmlbehaviour",
      "test",
      "interpreter",
      "execute",
      "eu",
      "core",
      "eu compassresearch",
      "compassresearch",
      "java",
      "vanillacmlinterpreter",
      "compassresearch core",
      "sendnumber",
      "cmlinspectionvisitor",
      "numberstosend",
      "lang",
      "actioninspectionvisitor",
      "asequentialcompositionaction",
      "actions",
      "core interpreter"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/symphonytool/symphony/commit/5a161820f57e84e6e28892401e387148fdcda5bc",
      "files": [
        {
          "file_name": "core/interpreter/src/main/behaviour/eu/compassresearch/core/interpreter/CommonSetupVisitor.java",
          "patch": "@@ -299,7 +299,10 @@ INode getReplicatedNode()\n \t\tif (!itQuantifiers.hasNext() \u0026\u0026 firstRun)\n \t\t{\n \t\t\tnextNode \u003d factory.getReplicatedNode();\n-\t\t\treturn new Pair\u003cINode, Context\u003e(nextNode, factory.createReplicationChildContext(nextValue, nextNode, question));\n+\t\t\t\n+\t\t\tfinal Context replicationChildContext \u003d factory.createReplicationChildContext(nextValue, nextNode, question);\n+\t\t\tsetLeftChild(nextNode, replicationChildContext);\n+\t\t\treturn new Pair\u003cINode, Context\u003e(nextNode, replicationChildContext);\n \t\t}\n \t\t/*\n \t\t * if no more rep values exists and this is NOT the first run then we created the context for the left side"
        },
        {
          "file_name": "core/interpreter/src/test/java/eu/compassresearch/core/interpreter/InterpretAllCmlFilesTest.java",
          "patch": "@@ -216,8 +216,13 @@ private void checkResult(ExpectedTestResult testResult,\n \t@Parameters(name \u003d \"{index} : {1}\")\n \tpublic static Collection\u003cObject[]\u003e getCmlfilePaths()\n \t{\n-\n \t\tfinal String initialPath \u003d \"src/test/resources/standard\";\n+\t\treturn collectTests(initialPath);\n+\t}\n+\n+\tprotected static Collection\u003cObject[]\u003e collectTests(String initialPath)\n+\t{\n+\t\t\n \t\tList\u003cObject[]\u003e paths \u003d findAllCmlFiles(initialPath);\n \n \t\t// List\u003cObject[]\u003e paths \u003d findAllCmlFiles(\"src/test/resources/action/parallel-composition\");"
        },
        {
          "file_name": "core/interpreter/src/test/java/eu/compassresearch/core/interpreter/IssuesTest.java",
          "patch": "@@ -0,0 +1,25 @@\n+package eu.compassresearch.core.interpreter;\n+\n+import java.util.Collection;\n+\n+import org.junit.runner.RunWith;\n+import org.junit.runners.Parameterized;\n+import org.junit.runners.Parameterized.Parameters;\n+\n+@RunWith(Parameterized.class)\n+public class IssuesTest extends InterpretAllCmlFilesTest\n+{\n+\n+\tpublic IssuesTest(String filePath, String name)\n+\t{\n+\t\tsuper(filePath, name);\n+\t}\n+\t\n+\t@Parameters(name \u003d \"{index} : {1}\")\n+\tpublic static Collection\u003cObject[]\u003e getCmlfilePaths()\n+\t{\n+\t\tfinal String initialPath \u003d \"src/test/resources/issues\";\n+\t\treturn collectTests(initialPath);\n+\t}\n+\n+}"
        },
        {
          "file_name": "core/interpreter/src/test/resources/issues/issue-237-action-state.cml",
          "patch": "@@ -0,0 +1,36 @@\n+/*channels\n+\ta:nat\n+\n+process Test \u003d\n+begin\n+\n+actions\n+ \n+  sendNumber \u003d  ([]i in set {1} @  a.1-\u003eSkip;sendNumber;sendNumber)\n+  \n+@ sendNumber \n+end*/\n+\n+\n+\n+\n+channels\n+a:nat\n+\n+process Test \u003d\n+begin\n+\n+state\n+numbersToSend:set of nat :\u003d {1,2}\n+\n+operations\n+\n+op:nat \u003d\u003d\u003e()\n+op(i)\u003d\u003d numbersToSend :\u003d numbersToSend\\{i}\n+\n+actions\n+ \n+  sendNumber \u003d  ([]i in set numbersToSend @  a.i-\u003e(op(i));loop)\n+   loop \u003d  (sendNumber [] ([card numbersToSend \u003d0]\u0026Skip))  \n+@ loop \n+end"
        },
        {
          "file_name": "core/interpreter/src/test/resources/issues/issue-237-action-state.result",
          "patch": "@@ -0,0 +1,8 @@\n+\u003c?xml version\u003d\u00271.0\u0027 encoding\u003d\u0027UTF-8\u0027?\u003e\n+\u003ctestResult\u003e\n+  \u003cexception/\u003e\n+  \u003cinterpreterState\u003eFINISHED\u003c/interpreterState\u003e\n+  \u003ctrace\u003e\n+    \u003cevents\u003ea.2,a.1\u003c/events\u003e\n+  \u003c/trace\u003e\n+\u003c/testResult\u003e"
        }
      ]
    }
  },
  {
    "name": "Possible null pointer exception at ChordGeneric\u0027s toString",
    "url": "https://github.com/vluksas/HarmonizeMelody/issues/2",
    "description": "Calling ChordGeneric\u0027s toString method without setting the notes array (notes \u003d null) results in java.lang.NullPointerException being thrown.\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/vluksas/HarmonizeMelody/commit/5fd397d62c7f71acd349ea347d91f61eb716e743",
      "files": [
        {
          "file_name": "src/harmonizator/Chords/ChordGeneric.java",
          "patch": "@@ -78,6 +78,9 @@ public Note getNote(int number){\n \t\n \tpublic String toString(){\n \t\tString result \u003d \"\";\n+\t\tif(notes \u003d\u003d null){\n+\t\t\treturn \"\";\n+\t\t}\n \t\tfor(Note n: notes){\n \t\t\tresult +\u003d n.getNoteLetterName() + Integer.toString(n.getOctNameNumeric()) + \";\";\n \t\t}"
        }
      ]
    }
  },
  {
    "name": "Null pointer exception when using location tag on wilderness",
    "url": "https://github.com/DenizenScript/Depenizen/issues/46",
    "description": "[19:01:27 INFO]: Cr0at issued server command: /ex narrate \u003cplayer.location.town||null\u003e\n[19:01:27 INFO]:  Starting InstantQueue \u0027EXCOMMAND_AdvertisersSerumDx\u0027... \n[19:01:27 INFO]:  Queue \u0027EXCOMMAND_AdvertisersSerumDx\u0027 Executing: NARRATE \n                   \"\u003cplayer.location.town||null\u003e\" \n[19:01:27 INFO]: +- Executing dCommand: NARRATE/p@Cr0at ---------+ \n[19:01:27 INFO]:  ERROR! Internal exception was thrown! \n\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at java.lang.reflect.Method.invoke(Method.java:606)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.aufdemrand.denizencore.tags.TagManager.fireEvent(TagManager.java:75)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.aufdemrand.denizencore.tags.TagManager.readSingleTag(TagManager.java:242)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.aufdemrand.denizencore.tags.TagManager.tag(TagManager.java:274)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.aufdemrand.denizencore.tags.TagManager.fillArguments(TagManager.java:323)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.aufdemrand.denizencore.scripts.commands.CommandExecuter.execute(CommandExecuter.java:203)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.aufdemrand.denizencore.scripts.queues.ScriptEngine.revolve(ScriptEngine.java:51)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.aufdemrand.denizencore.scripts.queues.ScriptQueue.revolve(ScriptQueue.java:660)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.aufdemrand.denizencore.scripts.queues.core.InstantQueue.onStart(InstantQueue.java:53)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.aufdemrand.denizencore.scripts.queues.ScriptQueue.start(ScriptQueue.java:519)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.aufdemrand.denizen.Denizen.onCommand(Denizen.java:1018)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at org.bukkit.command.PluginCommand.execute(PluginCommand.java:44)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:141)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at org.bukkit.craftbukkit.v1_8_R1.CraftServer.dispatchCommand(CraftServer.java:645)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.minecraft.server.v1_8_R1.PlayerConnection.handleCommand(PlayerConnection.java:1115)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.minecraft.server.v1_8_R1.PlayerConnection.a(PlayerConnection.java:950)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.minecraft.server.v1_8_R1.PacketPlayInChat.a(PacketPlayInChat.java:26)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.minecraft.server.v1_8_R1.PacketPlayInChat.a(PacketPlayInChat.java:53)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.minecraft.server.v1_8_R1.PacketHandleTask.run(SourceFile:13)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at java.util.concurrent.FutureTask.run(FutureTask.java:262)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.minecraft.server.v1_8_R1.MinecraftServer.z(MinecraftServer.java:683)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.minecraft.server.v1_8_R1.DedicatedServer.z(DedicatedServer.java:316)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.minecraft.server.v1_8_R1.MinecraftServer.y(MinecraftServer.java:623)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.minecraft.server.v1_8_R1.MinecraftServer.run(MinecraftServer.java:526)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at java.lang.Thread.run(Thread.java:745)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException): Caused by: java.lang.NullPointerException\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at com.palmergames.bukkit.util.NameValidation.filterName(NameValidation.java:122)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at com.palmergames.bukkit.util.NameValidation.checkAndFilterName(NameValidation.java:32)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at com.palmergames.bukkit.towny.db.TownyDatabaseHandler.getTown(TownyDatabaseHandler.java:133)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.gnomeffinway.depenizen.extensions.towny.TownyLocationExtension.getAttribute(TownyLocationExtension.java:56)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.aufdemrand.denizen.objects.dLocation.getAttribute(dLocation.java:1538)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.aufdemrand.denizen.objects.dEntity.getAttribute(dEntity.java:1617)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.aufdemrand.denizen.objects.dPlayer.getAttribute(dPlayer.java:1674)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    at net.aufdemrand.denizen.tags.core.PlayerTags.playerTags(PlayerTags.java:79)\n[19:01:27 WARN](java.lang.reflect.InvocationTargetException):    ... 29 more\n[19:01:27 INFO]:  Filled tag \u003cplayer.location.town||null\u003e with \u0027null\u0027. \n[19:01:27 INFO]: +\u003e Executing \u0027NARRATE\u0027: Narrating\u003d\u0027null\u0027  Targets\u003d\u0027[p@Cr0at]\u0027 \n[19:01:27 INFO]:  Completing queue \u0027EXCOMMAND_AdvertisersSerumDx\u0027 in 5ms. \n",
    "keywords": [
      "com",
      "playertags",
      "[19:01:27",
      "bukkit",
      "objects",
      "[19:01:27 warn]",
      "invoke",
      "run",
      "invocationtargetexception",
      "executing",
      "lang reflect",
      "instantqueue",
      "reflect",
      "reflect invocationtargetexception",
      "java",
      "info]",
      "minecraft server",
      "palmergames",
      "tag",
      "net",
      "[19:01:27 info]",
      "method",
      "scripts queues",
      "denizencore",
      "\u003cplayer",
      "town||null\u003e",
      "warn]",
      "denizen",
      "tags",
      "util",
      "scriptqueue",
      "v1_8_r1",
      "minecraft",
      "server",
      "net aufdemrand",
      "getattribute",
      "tagmanager",
      "server v1_8_r1",
      "denizencore tags",
      "net minecraft",
      "invocationtargetexception ",
      "aufdemrand denizencore",
      "sun",
      "\u0027excommand_advertisersserumdx\u0027",
      "minecraftserver",
      "scripts",
      "lang",
      "org",
      "warn] java",
      "denizen objects",
      "java lang",
      "command",
      "nativemethodaccessorimpl",
      "aufdemrand",
      "\u003cplayer location",
      "namevalidation",
      "playerconnection",
      "queues",
      "com palmergames",
      "location",
      "packetplayinchat"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/DenizenScript/Depenizen/commit/560930d4192155419c4f24ae10c6a845e9b9665f",
      "files": [
        {
          "file_name": "src/main/java/net/gnomeffinway/depenizen/extensions/towny/TownyLocationExtension.java",
          "patch": "@@ -53,7 +53,11 @@ public String getAttribute(Attribute attribute) {\n         // --\u003e\n         if (attribute.startsWith(\"town\")) {\n             try {\n-                return new dTown(TownyUniverse.getDataSource().getTown(TownyUniverse.getTownName(location)))\n+                String town \u003d TownyUniverse.getTownName(location);\n+                if (town \u003d\u003d null) {\n+                    return null;\n+                }\n+                return new dTown(TownyUniverse.getDataSource().getTown(town))\n                         .getAttribute(attribute.fulfill(1));\n             }\n             catch (NotRegisteredException ex) {"
        }
      ]
    }
  },
  {
    "name": "Possible null pointer exception at Tetrachord\u0027s getSeventhIndex",
    "url": "https://github.com/vluksas/HarmonizeMelody/issues/1",
    "description": "Tetrachord objects\u0027 getSeventhIndex method will result in java.lang.NullPointerException being thrown when called without notePositions array set properly.\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/vluksas/HarmonizeMelody/commit/6b788537a6314b3e2e1c1aa042f62cf9753234f6",
      "files": [
        {
          "file_name": "src/harmonizator/Chords/Tetrachord.java",
          "patch": "@@ -162,7 +162,11 @@ public ScaleDegree getScDeg() {\n \t}\n \t\n \tpublic int getSeventhIndex(){\n-\t\treturn getNoteIndexByPosition(ChordPosition.Seventh);\n+\t\tif(notePositions !\u003d null){\n+\t\t\treturn getNoteIndexByPosition(ChordPosition.Seventh);\n+\t\t}else{\n+\t\t\treturn -1;\n+\t\t}\n \t}\n \t\n \tpublic void bassUp(){"
        }
      ]
    }
  },
  {
    "name": "Fix null pointer",
    "url": "https://github.com/Coolerfall/Android-HttpDownloadManager/pull/29",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/Coolerfall/Android-HttpDownloadManager/commit/3c6850cd0234d62f0b47879808fb486a6d2c1fcb",
      "files": [
        {
          "file_name": "library/src/main/java/com/coolerfall/download/DownloadManager.java",
          "patch": "@@ -46,7 +46,9 @@ public int add(DownloadRequest request) {\n \t\t}\n \n \t\trequest.setContext(context);\n-\t\trequest.setDownloader(downloader.copy());\n+\t\tif (downloader !\u003d null) {\n+\t\t\trequest.setDownloader(downloader.copy());\n+\t\t}\n \n \t\t/* add download request into download request queue */\n \t\treturn downloadRequestQueue.add(request) ? request.downloadId() : -1;"
        }
      ]
    }
  },
  {
    "name": "Null pointer when I try to run post analysis",
    "url": "https://github.com/BaderLab/EnrichmentMapApp/issues/99",
    "description": "with code from revision r5a6539d (on Windows, haven\u0027t tried it on my Mac with cytoscape 3.2.1) \nCreate EM\nRun post analysis with gmt file (containing one gs) with default selections [It works if I change the selection to Hypergeometric but does not work with mann whitney]\n\njava.lang.NullPointerException\n        at org.baderlab.csplugins.enrichmentmap.task.BuildDiseaseSignatureTask.m\nannWhitney(BuildDiseaseSignatureTask.java:587)\n        at org.baderlab.csplugins.enrichmentmap.task.BuildDiseaseSignatureTask.b\nuildDiseaseSignature(BuildDiseaseSignatureTask.java:313)\n        at org.baderlab.csplugins.enrichmentmap.task.BuildDiseaseSignatureTask.r\nun(BuildDiseaseSignatureTask.java:664)\n        at org.cytoscape.work.internal.task.JDialogTaskManager$TaskRunnable.inne\nrRun(JDialogTaskManager.java:321)\n        at org.cytoscape.work.internal.task.JDialogTaskManager$TaskRunnable.run(\nJDialogTaskManager.java:350)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:47\n1)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:262)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.\njava:1145)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor\n.java:615)\n        at java.lang.Thread.run(Thread.java:745)\n",
    "keywords": [
      "threadpoolexecutor",
      "baderlab",
      "org",
      "work",
      "concurrent",
      "run",
      "enrichmentmap",
      "cytoscape",
      "task",
      "builddiseasesignaturetask",
      "java",
      "csplugins",
      "util",
      "util concurrent"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/BaderLab/EnrichmentMapApp/commit/21af5349520ce71d579d13138059ced47190f21c",
      "files": [
        {
          "file_name": "EnrichmentMapPlugin/src/main/java/org/baderlab/csplugins/enrichmentmap/model/GenesetSimilarity.java",
          "patch": "@@ -76,7 +76,9 @@\n     \r\n     // Mann-Whitney U\r\n     private double mann_whit_pvalue;\r\n-\r\n+    // flag that indicates if either of the gene sets has no ranks (and therefore we cannot calculated mann-whit\r\n+    private boolean mann_whit_missing_ranks \u003d false; \r\n+    \r\n     //set of genes in common to both gene sets.\r\n     private Set\u003cInteger\u003e overlapping_genes;\r\n \r\n@@ -85,7 +87,7 @@\n     //if it is zero the similarity applies to both sets.\r\n     private int enrichment_set;\r\n     \r\n-    private boolean sensitivity;\r\n+    \r\n \r\n     /**\r\n      * Class constructor\r\n@@ -105,7 +107,6 @@ public GenesetSimilarity(String geneset1_Name, String geneset2_Name, double simi\n         this.hypergeom_pvalue \u003d -1.0;\r\n         this.interaction_type \u003d interaction_type;\r\n         this.enrichment_set \u003d enrichment_set;\r\n-        this.setSensitivity(false);\r\n      }\r\n \r\n \r\n@@ -126,7 +127,6 @@ public GenesetSimilarity(String geneset1_Name, String geneset2_Name, double simi\n         this.hypergeom_pvalue \u003d -1.0;\r\n         this.interaction_type \u003d interaction_type;\r\n         this.enrichment_set \u003d 0;\r\n-        this.setSensitivity(false);\r\n      }\r\n \r\n     /**\r\n@@ -149,7 +149,6 @@ public GenesetSimilarity(String geneset1_Name, String geneset2_Name, double simi\n         this.interaction_type \u003d interaction_type;\r\n \r\n         this.enrichment_set \u003d 0;\r\n-        this.setSensitivity(false);\r\n     }\r\n \r\n \r\n@@ -344,19 +343,14 @@ public void setMann_Whit_pValue(double mann_whit_pvalue) {\n \t}\r\n \r\n \r\n-\t/**\r\n-\t * @return the sensitivity\r\n-\t */\r\n-\tpublic boolean getSensitivity() {\r\n-\t\treturn sensitivity;\r\n+\tpublic boolean isMannWhitMissingRanks() {\r\n+\t\treturn mann_whit_missing_ranks;\r\n \t}\r\n \r\n \r\n-\t/**\r\n-\t * @param sensitivity the sensitivity to set\r\n-\t */\r\n-\tpublic void setSensitivity(boolean sensitivity) {\r\n-\t\tthis.sensitivity \u003d sensitivity;\r\n+\tpublic void setMannWhitMissingRanks(boolean mann_whit_missing_ranks) {\r\n+\t\tthis.mann_whit_missing_ranks \u003d mann_whit_missing_ranks;\r\n \t}\r\n \r\n+\r\n }\n\\ No newline at end of file"
        },
        {
          "file_name": "EnrichmentMapPlugin/src/main/java/org/baderlab/csplugins/enrichmentmap/task/BuildDiseaseSignatureTask.java",
          "patch": "@@ -45,6 +45,7 @@\n \n \n import java.util.ArrayList;\n+import java.util.Arrays;\n import java.util.Collections;\n import java.util.HashMap;\n import java.util.HashSet;\n@@ -86,7 +87,6 @@\n  * Cytoscape-Task to perform  Disease-Signature Post-Analysis\n  */\n public class BuildDiseaseSignatureTask extends AbstractTask implements ObservableTask {\n-\tprivate final CySwingApplication swingApplication;\n \tprivate final CyApplicationManager applicationManager;\n     private final CyEventHelper eventHelper;\n     \n@@ -117,7 +117,6 @@ public BuildDiseaseSignatureTask(EnrichmentMap map, PostAnalysisParameters paPar\n     \tthis.map \u003d map;\n     \tthis.applicationManager \u003d applicationManager;\n     \tthis.eventHelper \u003d eventHelper;\n-    \tthis.swingApplication \u003d swingApplication;\n \n     \tHashMap\u003cString, DataSet\u003e data_sets \u003d this.map.getDatasets();\n     \tDataSet dataset \u003d data_sets.get(paParams.getSignature_dataSet());\n@@ -172,7 +171,6 @@ else if(EnrichmentMap.DATASET2.equals(paParams.getSignature_dataSet())) {\n \n     \n \n-    @SuppressWarnings(\"incomplete-switch\")\n \tpublic void buildDiseaseSignature(TaskMonitor taskMonitor) {\n \n         /* **************************************************\n@@ -364,7 +362,7 @@ private boolean passesCutoff(String edge_name) {\n \t\t\tcase HYPERGEOM:\n \t\t\t\treturn similarity.getHypergeom_pvalue() \u003c\u003d filterParams.getValue(FilterType.HYPERGEOM);\n \t\t\tcase MANN_WHIT:\n-\t\t\t\treturn similarity.getSensitivity() || similarity.getMann_Whit_pValue() \u003c\u003d filterParams.getValue(FilterType.MANN_WHIT);\n+\t\t\t\treturn !similarity.isMannWhitMissingRanks() \u0026\u0026 similarity.getMann_Whit_pValue() \u003c\u003d filterParams.getValue(FilterType.MANN_WHIT);\n \t\t\tcase NUMBER:\n \t\t\t\treturn similarity.getSizeOfOverlap() \u003e\u003d filterParams.getValue(FilterType.NUMBER);\n \t\t\tcase PERCENT:\n@@ -565,21 +563,32 @@ private void mannWhitney(Set\u003cInteger\u003e intersection, GenesetSimilarity comparison\n \t\tMap\u003cInteger, Double\u003e gene2score \u003d ranks.getGene2Score();\n \t\tif (gene2score \u003d\u003d null || gene2score.isEmpty()) {\n \t\t\tcomparison.setMann_Whit_pValue(1.5);\n+\t\t\tcomparison.setMannWhitMissingRanks(true);\n \t\t} else {\n \t\t\t// Calculate Mann-Whitney U pValue for Overlap\n             Integer[] overlap_gene_ids \u003d intersection.toArray(new Integer[intersection.size()]);\n-            double[] overlap_gene_scores \u003d new double[overlap_gene_ids.length];\n             \n-            // Get the scores for the overlap\n-            for (int k \u003d 0; k \u003c overlap_gene_ids.length; k++) {\n-            \toverlap_gene_scores[k] \u003d gene2score.get(overlap_gene_ids[k]);\n+            double[] overlap_gene_scores \u003d new double[overlap_gene_ids.length];\n+            int j \u003d 0;\n+            for(Integer gene_id : overlap_gene_ids) {\n+            \tDouble score \u003d gene2score.get(gene_id);\n+            \tif(score !\u003d null) {\n+            \t\toverlap_gene_scores[j++] \u003d score; // unbox\n+            \t}\n             }\n             \n+            overlap_gene_scores \u003d Arrays.copyOf(overlap_gene_scores, j);\n             double[] scores \u003d ranks.getScores();\n-            MannWhitneyUTest mann_whit \u003d new MannWhitneyUTest();\n-\t\t\tdouble mannPval \u003d mann_whit.mannWhitneyUTest(overlap_gene_scores, scores);\n-    \t\t// Set Mann-Whitney U Parameters\n-    \t\tcomparison.setMann_Whit_pValue(mannPval);\n+            \n+            if(scores.length \u003d\u003d 0 || overlap_gene_scores.length \u003d\u003d 0) {\n+            \tcomparison.setMann_Whit_pValue(1.5); // avoid NoDataException\n+            \tcomparison.setMannWhitMissingRanks(true);\n+            }\n+            else {\n+\t            MannWhitneyUTest mann_whit \u003d new MannWhitneyUTest();\n+\t\t\t\tdouble mannPval \u003d mann_whit.mannWhitneyUTest(overlap_gene_scores, scores);\n+\t    \t\tcomparison.setMann_Whit_pValue(mannPval);\n+            }\n \t\t}\n \t}\n "
        }
      ]
    }
  },
  {
    "name": "CDAP-4785 protected against null pointer exception in upgrade",
    "url": "https://github.com/caskdata/cdap/pull/5100",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/caskdata/cdap/commit/c9b9f1318aa4f6bcd3dd583d4d39af32ef29e5f6",
      "files": [
        {
          "file_name": "cdap-master/src/main/java/co/cask/cdap/data/tools/DatasetSpecificationUpgrader.java",
          "patch": "@@ -98,6 +98,12 @@ public void upgrade() throws Exception {\n               for (Map.Entry\u003cLong, byte[]\u003e columnEntry : columnMap.getValue().entrySet()) {\n                 Long timeStamp \u003d columnEntry.getKey();\n                 byte[] colVal \u003d columnEntry.getValue();\n+                // a deleted dataset can still show up here since BufferingTable doesn\u0027t actually delete, but\n+                // writes a null value. The fact that we need to know that implementation detail here is bad.\n+                // If we could use Table here instead of HTable, this would be hidden from us.\n+                if (colVal \u003d\u003d null || colVal.length \u003d\u003d 0) {\n+                  continue;\n+                }\n                 String specEntry \u003d Bytes.toString(colVal);\n                 DatasetSpecification specification \u003d GSON.fromJson(specEntry, DatasetSpecification.class);\n                 DatasetSpecification updatedSpec \u003d updateTTLInSpecification(specification, null);\n@@ -106,7 +112,10 @@ public void upgrade() throws Exception {\n               }\n             }\n           }\n-          specTable.put(put);\n+          // might not need to put anything if all columns were skipped because they are delete markers.\n+          if (put.size() \u003e 0) {\n+            specTable.put(put);\n+          }\n         }\n       }\n     } finally {"
        }
      ]
    }
  },
  {
    "name": "null pointer on invalid keyspace",
    "url": "https://github.com/doanduyhai/Achilles/issues/230",
    "description": "Step to reproduce :\n- create manager without default keyspace\n- add wrong keyspace name in Entity\n\nrun :\n\n```\nCaused by: java.lang.NullPointerException\n    at info.archinnov.achilles.internals.metamodel.AbstractEntityProperty.validateSchema(AbstractEntityProperty.java:330)\n    at info.archinnov.achilles.internals.runtime.AbstractManagerFactory.lambda$validateSchema$389(AbstractManagerFactory.java:127)\n    at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\n    at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\n    at java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\n    at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\n    at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\n    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\n    at info.archinnov.achilles.internals.runtime.AbstractManagerFactory.validateSchema(AbstractManagerFactory.java:127)\n    at info.archinnov.achilles.internals.runtime.AbstractManagerFactory.bootstrap(AbstractManagerFactory.java:104)\n    at info.archinnov.achilles.generated.ManagerFactory.\u003cinit\u003e(ManagerFactory.java:25)\n    at info.archinnov.achilles.generated.ManagerFactoryBuilder.build(ManagerFactoryBuilder.java:38)\n\n```\n",
    "keywords": [
      "util stream",
      "referencepipeline",
      "abstractpipeline",
      "abstractmanagerfactory",
      "java util",
      "runtime",
      "archinnov",
      "internals",
      "keyspace",
      "java",
      "util",
      "stream",
      "archinnov achilles",
      "achilles",
      "info archinnov",
      "foreachops",
      "info"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/doanduyhai/Achilles/commit/5765671e152a75ffc5dd230e1b8890884e0d0207",
      "files": [
        {
          "file_name": "achilles-core/src/main/java/info/archinnov/achilles/internals/metamodel/AbstractEntityProperty.java",
          "patch": "@@ -19,6 +19,7 @@\n import static info.archinnov.achilles.internals.schema.SchemaValidator.validateColumns;\n import static info.archinnov.achilles.internals.schema.SchemaValidator.validateDefaultTTL;\n import static info.archinnov.achilles.internals.statements.PreparedStatementGenerator.*;\n+import static info.archinnov.achilles.validation.Validator.validateNotNull;\n import static java.lang.String.format;\n import static java.util.stream.Collectors.toList;\n \n@@ -30,10 +31,7 @@\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n-import com.datastax.driver.core.ConsistencyLevel;\n-import com.datastax.driver.core.Row;\n-import com.datastax.driver.core.Session;\n-import com.datastax.driver.core.TableMetadata;\n+import com.datastax.driver.core.*;\n import com.datastax.driver.core.querybuilder.QueryBuilder;\n import com.fasterxml.jackson.databind.ObjectMapper;\n import com.google.common.collect.BiMap;\n@@ -321,11 +319,16 @@ public void validateSchema(ConfigurationContext configContext) {\n         Validator.validateNotBlank(keyspace,\n                 \"Current keyspace not provided neither in configuration nor on entity \u0027%s\u0027 annotation\", entityClass.getCanonicalName());\n \n-        final TableMetadata tableMetadata \u003d configContext\n+        final KeyspaceMetadata keyspaceMetadata \u003d configContext\n                 .getSession()\n                 .getCluster()\n                 .getMetadata()\n-                .getKeyspace(keyspace)\n+                .getKeyspace(keyspace);\n+\n+        validateNotNull(keyspaceMetadata,\"The keyspace {} defined on entity {} does not exist in Cassandra\",\n+                keyspace, entityClass.getCanonicalName());\n+\n+        final TableMetadata tableMetadata \u003d keyspaceMetadata\n                 .getTable(getTableName());\n \n         validateDefaultTTL(tableMetadata, staticTTL, entityClass);"
        },
        {
          "file_name": "integration-test/src/main/java/info/archinnov/achilles/internals/entities/EntityWithNonExistingKeyspace.java",
          "patch": "@@ -0,0 +1,31 @@\n+package info.archinnov.achilles.internals.entities;\n+\n+import info.archinnov.achilles.annotations.Column;\n+import info.archinnov.achilles.annotations.Entity;\n+import info.archinnov.achilles.annotations.PartitionKey;\n+\n+@Entity(keyspace \u003d \"non_existing\", table \u003d \"test_table\")\n+public class EntityWithNonExistingKeyspace {\n+\n+    @PartitionKey\n+    private Long id;\n+\n+    @Column\n+    private String value;\n+\n+    public Long getId() {\n+        return id;\n+    }\n+\n+    public void setId(Long id) {\n+        this.id \u003d id;\n+    }\n+\n+    public String getValue() {\n+        return value;\n+    }\n+\n+    public void setValue(String value) {\n+        this.value \u003d value;\n+    }\n+}"
        },
        {
          "file_name": "integration-test/src/test/java/info/archinnov/achilles/it/bugs/EntityWithNonExistingKeyspaceIT.java",
          "patch": "@@ -0,0 +1,50 @@\n+package info.archinnov.achilles.it.bugs;\n+\n+\n+import static info.archinnov.achilles.embedded.CassandraEmbeddedConfigParameters.DEFAULT_CASSANDRA_EMBEDDED_KEYSPACE_NAME;\n+import static java.lang.String.format;\n+\n+\n+import org.junit.Rule;\n+import org.junit.Test;\n+import org.junit.rules.ExpectedException;\n+import org.junit.runner.RunWith;\n+import org.mockito.runners.MockitoJUnitRunner;\n+\n+import com.datastax.driver.core.Cluster;\n+\n+import info.archinnov.achilles.embedded.CassandraEmbeddedServerBuilder;\n+import info.archinnov.achilles.exception.AchillesException;\n+import info.archinnov.achilles.generated.ManagerFactoryBuilder;\n+import info.archinnov.achilles.internals.entities.EntityWithNonExistingKeyspace;\n+\n+@RunWith(MockitoJUnitRunner.class)\n+public class EntityWithNonExistingKeyspaceIT {\n+\n+    @Rule\n+    public ExpectedException expectException \u003d ExpectedException.none();\n+\n+    @Test\n+    public void should_fail_if_entity_keyspace_does_not_exist() throws Exception {\n+        //Given\n+        final Cluster cluster \u003d CassandraEmbeddedServerBuilder\n+                .builder()\n+                .buildNativeCluster();\n+\n+        //When\n+\n+        expectException.expect(AchillesException.class);\n+        expectException.expectMessage(format(\"The keyspace {} defined on entity {} \" +\n+                \"does not exist in Cassandra\", \"non_existing\", EntityWithNonExistingKeyspace.class.getCanonicalName()));\n+\n+        ManagerFactoryBuilder\n+                .builder(cluster)\n+                .withManagedEntityClasses(EntityWithNonExistingKeyspace.class)\n+                .doForceSchemaCreation(false)\n+                .withDefaultKeyspaceName(DEFAULT_CASSANDRA_EMBEDDED_KEYSPACE_NAME)\n+                .build();\n+\n+\n+    }\n+\n+}"
        }
      ]
    }
  },
  {
    "name": "Null Pointer Exception with Password during Validation",
    "url": "https://github.com/bpjoshi/SpringBootProject/issues/12",
    "description": "Make the validation work",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/bpjoshi/SpringBootProject/commit/2754e8c1a6914824b73fcecfb2ae08690119027e",
      "files": [
        {
          "file_name": "src/main/java/com/bpjoshi/paharinetwork/model/EndUser.java",
          "patch": "@@ -12,6 +12,7 @@\n import org.hibernate.validator.constraints.Email;\r\n import org.hibernate.validator.constraints.NotBlank;\r\n import org.springframework.beans.factory.annotation.Autowired;\r\n+import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\n import org.springframework.security.crypto.password.PasswordEncoder;\r\n \r\n import com.bpjoshi.paharinetwork.validations.PasswordMatcher;\r\n@@ -23,7 +24,7 @@\n  */\r\n @Entity\r\n @Table(name\u003d\"end_user\")\r\n-@PasswordMatcher(message\u003d\"{register.password.mismatch}\")\r\n+@PasswordMatcher(message\u003d\"{register.repeatpassword.mismatch}\")\r\n public class EndUser {\r\n @Id\r\n @GeneratedValue(strategy\u003dGenerationType.AUTO)\r\n@@ -33,18 +34,15 @@\n @NotBlank(message\u003d\"{register.email.invalid}\")\r\n @Column(name\u003d\"user_email\", unique\u003dtrue)\r\n private String userEmail;\r\n-@Size(min\u003d5, max\u003d15, message\u003d\"{register.password.invalid}\")\r\n @Transient\r\n+@Size(min\u003d5, max\u003d15, message\u003d\"{register.password.invalid}\")\r\n private String plainPassword;\r\n @Transient\r\n private String repeatPassword;\r\n @Column(name\u003d\"user_password\", length\u003d60)\r\n private String userPassword;\r\n @Column(name\u003d\"user_role\", length\u003d20)\r\n private String userRole;\r\n-@Autowired\r\n-@Transient\r\n-private PasswordEncoder passwordEncoder;\r\n \r\n public String getUserRole() {\r\n \treturn userRole;\r\n@@ -76,20 +74,15 @@ public String getPlainPassword() {\n }\r\n public void setPlainPassword(String plainPassword) {\r\n \tthis.plainPassword \u003d plainPassword;\r\n-\tthis.setUserPassword(passwordEncoder.encode(plainPassword));\r\n+\tthis.setUserPassword(new BCryptPasswordEncoder().encode(plainPassword));\r\n }\r\n public String getRepeatPassword() {\r\n \treturn repeatPassword;\r\n }\r\n public void setRepeatPassword(String repeatPassword) {\r\n \tthis.repeatPassword \u003d repeatPassword;\r\n }\r\n-public PasswordEncoder getPasswordEncoder() {\r\n-\treturn passwordEncoder;\r\n-}\r\n-public void setPasswordEncoder(PasswordEncoder passwordEncoder) {\r\n-\tthis.passwordEncoder \u003d passwordEncoder;\r\n-}\r\n+\r\n \r\n \r\n \r"
        }
      ]
    }
  },
  {
    "name": "Null Pointer exception bei Verbindungsaufbau mit DAPNET-Core",
    "url": "https://github.com/rwth-afu/SDRPager/issues/5",
    "description": "![bug1](https://cloud.githubusercontent.com/assets/16710361/19739825/bc59c82c-9bbc-11e6-8e20-be4fb9171c63.PNG)\nSobald der DAPNET-Core die Verbindung zum SDRPager aufbaut kommt diese Fehlermeldung. Status ist laut Java-GUI \"verbunden\", aber der DAPNET-Core sagt weiterhin offline. \n![bug2](https://cloud.githubusercontent.com/assets/16710361/19739908/03251c7a-9bbd-11e6-96b6-518a87bda085.PNG)\n",
    "keywords": [
      "dapnet-core"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/rwth-afu/SDRPager/commit/963ecd94057a2ec2e479f12ff50c10330868d81a",
      "files": [
        {
          "file_name": "sources/src/funkrufSlave/FunkrufProtocol.java",
          "patch": "@@ -3,13 +3,11 @@\n import java.io.PrintWriter;\n \n public class FunkrufProtocol {\n-\t\n \tpublic MessageQueue messageQueue \u003d null;\n \tpublic static final int E_SUCCESS \u003d 0, E_ERROR \u003d -1, E_RETRY \u003d 1;\n \n \tprivate Log log \u003d null;\n \t\n-\t\n \tprivate void log(String message, int type) {\n \t\tlog(message, type, Log.DEBUG_TCP);\n \t}\n@@ -21,14 +19,11 @@ private void log(String message, int type, int logLevel) {\n \t}\n \t\n \tpublic FunkrufProtocol(MessageQueue messageQueue, Log log) {\n-\t\t\n \t\tthis.messageQueue \u003d messageQueue;\n \t\tthis.log \u003d log;\n-\t\t\n \t}\n \t\n \tpublic void handle(String msg, PrintWriter pw, TimeSlots timeSlots) {\n-\t\n \t\tint errorState \u003d E_SUCCESS;\n \t\t\n \t\tString [] parts \u003d msg.split(\":\", 5);\n@@ -39,36 +34,31 @@ public void handle(String msg, PrintWriter pw, TimeSlots timeSlots) {\n \t\tswitch(type) {\n \t\t\tcase \u0027#\u0027:\n \t\t\t\t// Funkrufe\n-\t\t\t\t\n \t\t\t\ttry {\n \t\t\t\t\tint messageID \u003d Integer.parseInt(parts[0].substring(1, 3), 16);\n \t\t\t\t\tthis.messageQueue.push(new Message(parts));\n \t\t\t\t\t\n \t\t\t\t\tmessageID \u003d (messageID + 1) % 256;\n \t\t\t\t\t\n \t\t\t\t\tsend(String.format(\"#%02x +\", messageID), pw);\n-\t\t\t\t\t\n \t\t\t\t} catch(NumberFormatException e) {\n \t\t\t\t\tlog(\"FunkrufProtocol: handle# (#) NumberFormatException\", Log.ERROR);\n \t\t\t\t\terrorState \u003d E_ERROR;\n \t\t\t\t\t\n \t\t\t\t}\n \t\t\t\t\n \t\t\t\tbreak;\n-\t\t\t\t\n \t\t\tcase \u00272\u0027:\n-\n \t\t\t\tString ident \u003d parts[1];\n+\t\t\t\tif (Main.scheduler \u003d\u003d null) log(\"Scheduler ist null!\", Log.ERROR);\n \t\t\t\tint time \u003d Main.scheduler.getTime();\n \t\t\t\t\n \t\t\t\tsend(String.format(\"2:%s:%04x\", ident, time), pw);\n \t\t\t\tack(errorState, pw);\n \t\t\t\t\n \t\t\t\tbreak;\n-\t\t\t\t\n \t\t\tcase \u00273\u0027:\n \t\t\t\t// correct system time\n-\t\t\t\t\n \t\t\t\ttry {\n \t\t\t\t\tint delay;\n \t\t\t\t\t\n@@ -80,20 +70,16 @@ public void handle(String msg, PrintWriter pw, TimeSlots timeSlots) {\n \t\t\t\t\t\tdelay \u003d -Integer.parseInt(parts[1], 16);\n \t\t\t\t\t}\t\t\t\t\t\n \t\t\t\t\t\n-\t\t\t\t\t\n+\t\t\t\t\tif (Main.scheduler \u003d\u003d null) log(\"Scheduler ist null!\", Log.ERROR);\n \t\t\t\t\tMain.scheduler.correctTime(delay);\n-\t\t\t\t\t\n \t\t\t\t} catch(NumberFormatException e) {\n \t\t\t\t\tlog(\"FunkrufProtocol: handle# (3) NumberFormatException\", Log.ERROR);\n-\t\t\t\t\t\n \t\t\t\t\terrorState \u003d E_ERROR;\n \t\t\t\t}\n-\t\t\t\t\n \n \t\t\t\tack(errorState, pw);\n \t\t\t\t\n \t\t\t\tbreak;\n-\t\t\t\t\n \t\t\tcase \u00274\u0027:\n \t\t\t\t// set slots\n \t\t\t\ttimeSlots.setSlots(parts[1]);\n@@ -103,7 +89,6 @@ public void handle(String msg, PrintWriter pw, TimeSlots timeSlots) {\n \t\t\t\tack(errorState, pw);\n \t\t\t\t\n \t\t\t\tbreak;\n-\t\t\t\t\n \t\t\tdefault:\n \t\t\t\tlog(\"FunkrufProtocol: handle# unknown type\", Log.ERROR);\n \t\t\t\terrorState \u003d E_ERROR;\n@@ -140,5 +125,4 @@ public void send(String answer, PrintWriter pw) {\n \t\n \t\tpw.printf(\"%s\\r\\n\", answer);\n \t}\n-\t\n-}\n+}\n\\ No newline at end of file"
        },
        {
          "file_name": "sources/src/funkrufSlave/Main.java",
          "patch": "@@ -223,6 +223,12 @@ public static boolean initGpioPortComm() {\n \t\t\tgpioPortComm \u003d new GpioPortComm(Main.config.getGpioPin(), Main.config.getInvert(), log);\n \t\t\treturn true;\n \t\t}\n+\t\t\n+\t\tlog(\"startServer # GPIO-Schnittstelle konnte nicht initialisiert werden!\", Log.ERROR);\n+\n+\t\tif (mainWindow !\u003d null) {\n+\t\t\tmainWindow.showError(\"Server starten\", \"GPIO-Schnittstelle konnte nicht initialisiert werden!\");\n+\t\t}\n \t\treturn false;\n \t}\n \n@@ -250,7 +256,7 @@ public static void startScheduler(boolean searching) {\n \t\t\t}\n \t\t\treturn;\n \t\t}\n-\n+\t\t\n \t\ttimer.schedule(scheduler, 100, 100);\n \t}\n \n@@ -290,16 +296,6 @@ public static void startServer(boolean join) {\n \t\t\tserver \u003d new ServerThread(config.getPort(), messageQueue, log);\n \t\t}\n \n-\t\tif (!initSerialPortComm()) {\n-\t\t\tstopServer(true);\n-\t\t\treturn;\n-\t\t}\n-\n-\t\tif (!initGpioPortComm()) {\n-\t\t\tstopServer(true);\n-\t\t\treturn;\n-\t\t}\n-\n \t\t// start scheduler (not searching)\n \t\tstartScheduler(false);\n "
        },
        {
          "file_name": "sources/src/funkrufSlave/SocketThread.java",
          "patch": "@@ -62,7 +62,6 @@ public void halt() {\n \t// \"main\"\n \t@Override\n \tpublic void run() {\n-\t\t\n \t\ttry {\n \t\t\t// open writer and reader\n \t\t\tthis.pw \u003d new PrintWriter(this.socket.getOutputStream(), true);\n@@ -77,12 +76,10 @@ public void run() {\n \t\t\t\n \t\t\t// if thread is running, wait for input\n \t\t\twhile(this.running \u0026\u0026 (inputBuffer \u003d this.reader.readLine()) !\u003d null) {\n-\t\t\t\t\n \t\t\t\tlog(\"SocketThread: inputBuffer# \" + inputBuffer, Log.MS);\n \t\t\t\t\n \t\t\t\t// handle received input\n \t\t\t\tthis.protocol.handle(inputBuffer, this.pw, Main.timeSlots);\n-\n \t\t\t}\n \t\t\t\n \t\t\t// close writer, reader and socket\n@@ -94,15 +91,11 @@ public void run() {\n \t\t\tthis.running \u003d false;\n \t\t\t\n \t\t\tlog(\"SocketThread: connection lost\", Log.COMMUNICATION);\n-\t\t\t\n \t\t} catch(IOException e) {\n-\t\t\t\n \t\t\te.printStackTrace();\n-\t\t\t\n \t\t}\n \t\t\t\t\n \t\t// remove thread from thread list\n \t\tMain.removeSocketThread(this);\n \t}\n-\t\n }"
        }
      ]
    }
  },
  {
    "name": "avoid null pointer if crs is not supported but throw OWSException",
    "url": "https://github.com/deegree/deegree3/pull/150",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/deegree/deegree3/commit/c43462b0037e490a891b18a463ac78d104c9f440",
      "files": [
        {
          "file_name": "deegree-layers/deegree-layers-tile/src/main/java/org/deegree/layer/persistence/tile/TileLayer.java",
          "patch": "@@ -92,9 +92,10 @@ public TileLayerData mapQuery( LayerQuery query, List\u003cString\u003e headers )\n \n         String tds \u003d coordinateSystems.get( crs );\n         if ( tds \u003d\u003d null ) {\n-            LOG.debug( \"Tile layer {} does not offer the coordinate system {}.\", getMetadata().getName(),\n-                       crs.getAlias() );\n-            return null;\n+            String msg \u003d \"Tile layer \" + getMetadata().getName() + \" does not offer the coordinate system \"\n+                         + crs.getAlias();\n+            LOG.debug( msg );\n+            throw new OWSException( msg, OWSException.INVALID_CRS );\n         }\n         TileDataSet data \u003d tileDataSets.get( tds );\n "
        }
      ]
    }
  },
  {
    "name": "Null Pointer Exception for usecase: LWP +Embedded Id",
    "url": "https://github.com/doanduyhai/Achilles/issues/207",
    "description": "If given table has compoundKey which requires to create EmbeddedKey in Achilles-library.\nNow, for given EmbeddedKey, we create below PropertyMeta object\nand propertyMeta.getCQLColumnName() \u003d NULL for any embeddedKey.\nIn that case, it is throwing Null-Pointer Exception.\nIt means, somehow we should ignore PropertyMeta check for EmbeddedKey.\n\nhttps://github.com/doanduyhai/Achilles/blob/master/achilles-core/src/main/java/info/archinnov/achilles/internal/metadata/holder/EntityMetaTranscoder.java#L57\n\n private PropertyMeta findPropertyMetaByCQLName(String cqlName) {\n        for (PropertyMeta propertyMeta : meta.getAllMetasExceptCounters()) {\n            if (propertyMeta.getCQLColumnName().equals(cqlName) ) {\n                return propertyMeta;\n            }\n        }\n",
    "keywords": [
      "propertymeta",
      "embeddedkey"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/doanduyhai/Achilles/commit/31a30b3c1d8e8ab70a2032c634db942d3c160d43",
      "files": [
        {
          "file_name": "achilles-core/src/main/java/info/archinnov/achilles/internal/metadata/holder/AbstractComponentProperties.java",
          "patch": "@@ -95,6 +95,9 @@ protected static boolean isCompatibleClass(Class\u003c?\u003e expected, Class\u003c?\u003e given)\n     @Override\n \tpublic String toString() {\n \t\treturn Objects.toStringHelper(this.getClass()).add(\"propertyMetas\", propertyMetas).toString();\n-\n \t}\n+\n+    public List\u003cPropertyMeta\u003e getPropertyMetas() {\n+        return propertyMetas;\n+    }\n }"
        },
        {
          "file_name": "achilles-core/src/main/java/info/archinnov/achilles/internal/metadata/holder/EntityMetaTranscoder.java",
          "patch": "@@ -52,10 +52,23 @@ private Object encodeValueForProperty(String columnName, Object rawValue) {\n         return encodedValue;\n     }\n \n-    private PropertyMeta findPropertyMetaByCQLName(String cqlName) {\n+    PropertyMeta findPropertyMetaByCQLName(String cqlName) {\n         for (PropertyMeta propertyMeta : meta.getAllMetasExceptCounters()) {\n-            if (propertyMeta.getCQLColumnName().equals(cqlName) ) {\n-                return propertyMeta;\n+            if (propertyMeta.type() \u003d\u003d PropertyType.COMPOUND_PRIMARY_KEY) {\n+                for (PropertyMeta partitionMeta : propertyMeta.getCompoundPKProperties().getPartitionComponents().getPropertyMetas()) {\n+                    if (partitionMeta.getCQLColumnName().equals(cqlName)) {\n+                        return partitionMeta;\n+                    }\n+                }\n+                for (PropertyMeta clusteringMeta : propertyMeta.getCompoundPKProperties().getClusteringComponents().getPropertyMetas()) {\n+                    if (clusteringMeta.getCQLColumnName().equals(cqlName)) {\n+                        return clusteringMeta;\n+                    }\n+                }\n+            } else {\n+                if (propertyMeta.getCQLColumnName().equals(cqlName)) {\n+                    return propertyMeta;\n+                }\n             }\n         }\n         throw new AchillesException(String.format(\"Cannot find matching property meta for the cql field %s\", cqlName));"
        },
        {
          "file_name": "achilles-core/src/test/java/info/archinnov/achilles/internal/metadata/holder/EntityMetaTranscoderTest.java",
          "patch": "@@ -13,6 +13,8 @@\n import org.mockito.Mock;\n import org.mockito.runners.MockitoJUnitRunner;\n \n+import java.util.ArrayList;\n+\n @RunWith(MockitoJUnitRunner.class)\n public class EntityMetaTranscoderTest {\n \n@@ -63,4 +65,44 @@ public void should_encode_index_condition_value() throws Exception {\n         assertThat(encoded).isEqualTo(\"DuyHai\");\n         verify(indexCondition).encodedValue(\"DuyHai\");\n     }\n+\n+    @Test\n+    public void should_find_cql_name_for_partition_key() throws Exception {\n+        //Given\n+        PropertyMeta compoundPKMeta \u003d mock(PropertyMeta.class, RETURNS_DEEP_STUBS);\n+        PropertyMeta partitionKeyMeta \u003d mock(PropertyMeta.class, RETURNS_DEEP_STUBS);\n+\n+        when(meta.getAllMetasExceptCounters()).thenReturn(asList(compoundPKMeta));\n+        when(compoundPKMeta.type()).thenReturn(PropertyType.COMPOUND_PRIMARY_KEY);\n+\n+        when(compoundPKMeta.getCompoundPKProperties().getPartitionComponents().getPropertyMetas()).thenReturn(asList(partitionKeyMeta));\n+        when(compoundPKMeta.getCompoundPKProperties().getClusteringComponents().getPropertyMetas()).thenReturn(new ArrayList\u003cPropertyMeta\u003e());\n+        when(partitionKeyMeta.getCQLColumnName()).thenReturn(\"partitionKey\");\n+\n+        //When\n+        final PropertyMeta found \u003d view.findPropertyMetaByCQLName(\"partitionKey\");\n+\n+        //Then\n+        assertThat(found).isSameAs(partitionKeyMeta);\n+    }\n+\n+    @Test\n+    public void should_find_cql_name_for_clustering_key() throws Exception {\n+        //Given\n+        PropertyMeta compoundPKMeta \u003d mock(PropertyMeta.class, RETURNS_DEEP_STUBS);\n+        PropertyMeta clusteringColumnMeta \u003d mock(PropertyMeta.class, RETURNS_DEEP_STUBS);\n+\n+        when(meta.getAllMetasExceptCounters()).thenReturn(asList(compoundPKMeta));\n+        when(compoundPKMeta.type()).thenReturn(PropertyType.COMPOUND_PRIMARY_KEY);\n+\n+        when(compoundPKMeta.getCompoundPKProperties().getPartitionComponents().getPropertyMetas()).thenReturn(new ArrayList\u003cPropertyMeta\u003e());\n+        when(compoundPKMeta.getCompoundPKProperties().getClusteringComponents().getPropertyMetas()).thenReturn(asList(clusteringColumnMeta));\n+        when(clusteringColumnMeta.getCQLColumnName()).thenReturn(\"clusteringColumn\");\n+\n+        //When\n+        final PropertyMeta found \u003d view.findPropertyMetaByCQLName(\"clusteringColumn\");\n+\n+        //Then\n+        assertThat(found).isSameAs(clusteringColumnMeta);\n+    }\n }\n\\ No newline at end of file"
        }
      ]
    }
  },
  {
    "name": "Null pointer on parent nodes are causing many crashes in apps with custom Views",
    "url": "https://github.com/KomodoOpenLab/tecla-framework/issues/258",
    "description": "For example, Tecla Next crashes very often when navigating Netflix\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/KomodoOpenLab/tecla-framework/commit/ae7622bd0f87bc39b42bf803cbb1cc38dbb02b70",
      "files": [
        {
          "file_name": "java/src/ca/idrc/tecla/framework/Persistence.java",
          "patch": "@@ -26,7 +26,7 @@\n \n \tprivate boolean is_ime_running;\n \tprivate boolean is_ime_showing;\n-\tprivate boolean is_hud_cancelled;\n+//\tprivate boolean is_hud_cancelled;\n \t//\tprivate boolean is_framework_ready;\n \n \tprivate int mScanDelay;\n@@ -103,18 +103,23 @@ public boolean isIMEShowing() {\n \t\treturn is_ime_showing;\n \t}\n \n-\tpublic void setHUDCancelled(boolean bool) {\n-\t\tis_hud_cancelled \u003d bool;\n-\t}\n+//\tpublic void setHUDCancelled(boolean bool) {\n+//\t\tis_hud_cancelled \u003d bool;\n+//\t}\n \n-\tpublic boolean isHUDCancelled() {\n-\t\treturn is_hud_cancelled;\n-\t}\n+//\tpublic boolean isHUDCancelled() {\n+//\t\treturn is_hud_cancelled;\n+//\t}\n \n \tpublic boolean isFullscreenEnabled() {\n \t\treturn shared_prefs.getBoolean(PREF_FULLSCREEN_MODE, false);\n \t}\n \n+\tpublic void setFullscreenEnabled(boolean value) {\n+\t\tprefs_editor.putBoolean(PREF_FULLSCREEN_MODE, value);\n+\t\tprefs_editor.commit();\n+\t}\n+\n \t// TODO: This method depends only on full-screen mode now, but will likely depend on other preferences later on\n \tpublic boolean shouldShowHUD() {\n \t\treturn shared_prefs.getBoolean(PREF_FULLSCREEN_MODE, false);"
        },
        {
          "file_name": "package/tecla/addon/SingleSwitchTouchInterface.java",
          "patch": "@@ -83,8 +83,8 @@ public void onClick(View v) {\n \t\t@Override\n \t\tpublic boolean onLongClick(View v) {\n \t\t\tTeclaStatic.logV(CLASS_TAG, \"Long clicked.  \");\n-\t\t\tTeclaApp.persistence.setHUDCancelled(true);\n-\t\t\tTeclaApp.a11yservice.shutdownInfrastructure();\n+\t\t\tTeclaApp.persistence.setFullscreenEnabled(false);\n+\t\t\tTeclaApp.getInstance().turnFullscreenOff();\n \t\t\treturn true;\n \t\t}\n \t};"
        },
        {
          "file_name": "package/tecla/addon/TeclaAccessibilityService.java",
          "patch": "@@ -505,7 +505,9 @@ public void run() {\n \tpublic static boolean hasScrollableParent(AccessibilityNodeInfo node) {\n \t\tif(node \u003d\u003d null) return false;\n \t\tAccessibilityNodeInfo parent \u003d node.getParent();\n-\t\tif(!parent.isScrollable()) return false;\n+\t\tif (parent !\u003d null) {\n+\t\t\tif(!parent.isScrollable()) return false;\n+\t\t}\n \t\treturn true;\n \t}\n \n@@ -514,15 +516,17 @@ public static boolean isFirstScrollNode(AccessibilityNodeInfo node) {\n \t\tif(!hasScrollableParent(node)) return false;\n \t\tAccessibilityNodeInfo parent \u003d node.getParent();\n \n-\t\tRect firstScrollNode_rect \u003d null;\t\n-\t\tfor(int i\u003d0; i\u003cparent.getChildCount(); ++i) {\n-\t\t\tAccessibilityNodeInfo  firstScrollNode \u003d parent.getChild(i);\n-\t\t\tif(firstScrollNode.isVisibleToUser() \u0026\u0026 firstScrollNode.isClickable()) {\n-\t\t\t\tfirstScrollNode_rect \u003d new Rect();\n-\t\t\t\tfirstScrollNode.getBoundsInScreen(firstScrollNode_rect);\n-\t\t\t\tbreak;\n-\t\t\t}\n-\t\t}\t\t\n+\t\tRect firstScrollNode_rect \u003d null;\n+\t\tif (parent !\u003d null) {\n+\t\t\tfor(int i\u003d0; i\u003cparent.getChildCount(); ++i) {\n+\t\t\t\tAccessibilityNodeInfo  firstScrollNode \u003d parent.getChild(i);\n+\t\t\t\tif(firstScrollNode.isVisibleToUser() \u0026\u0026 firstScrollNode.isClickable()) {\n+\t\t\t\t\tfirstScrollNode_rect \u003d new Rect();\n+\t\t\t\t\tfirstScrollNode.getBoundsInScreen(firstScrollNode_rect);\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t}\t\t\n+\t\t}\n \t\tif(firstScrollNode_rect \u003d\u003d null) return false;\n \n \t\tRect node_rect \u003d new Rect(); \n@@ -539,16 +543,18 @@ public static boolean isLastScrollNode(AccessibilityNodeInfo node) {\n \t\tif(node \u003d\u003d null) return false;\n \t\tif(!hasScrollableParent(node)) return false;\n \t\tAccessibilityNodeInfo parent \u003d node.getParent();\n-\n+\t\t\n \t\tRect lastScrollNode_rect \u003d null;\t\n-\t\tfor(int i\u003dparent.getChildCount()-1; i\u003e\u003d0; --i) {\n-\t\t\tAccessibilityNodeInfo  lastScrollNode \u003d parent.getChild(i);\n-\t\t\tif(lastScrollNode.isVisibleToUser() \u0026\u0026 lastScrollNode.isClickable()) {\n-\t\t\t\tlastScrollNode_rect \u003d new Rect();\n-\t\t\t\tlastScrollNode.getBoundsInScreen(lastScrollNode_rect);\n-\t\t\t\tbreak;\n-\t\t\t}\n-\t\t}\t\t\n+\t\tif (parent !\u003d null) {\n+\t\t\tfor(int i\u003dparent.getChildCount()-1; i\u003e\u003d0; --i) {\n+\t\t\t\tAccessibilityNodeInfo  lastScrollNode \u003d parent.getChild(i);\n+\t\t\t\tif(lastScrollNode.isVisibleToUser() \u0026\u0026 lastScrollNode.isClickable()) {\n+\t\t\t\t\tlastScrollNode_rect \u003d new Rect();\n+\t\t\t\t\tlastScrollNode.getBoundsInScreen(lastScrollNode_rect);\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t}\t\t\n+\t\t}\n \t\tif(lastScrollNode_rect \u003d\u003d null) return false;\n \n \t\tRect node_rect \u003d new Rect(); \n@@ -577,18 +583,15 @@ public static boolean isInsideParent(AccessibilityNodeInfo node) {\n \t\treturn false;\n \t}\n \n-\tpublic static void sendGlobalBackAction() {\n-\t\tif(sInstance \u003d\u003d null) return;\n+\tpublic void sendGlobalBackAction() {\n \t\tsInstance.performGlobalAction(AccessibilityService.GLOBAL_ACTION_BACK);\n \t}\n \n-\tpublic static void sendGlobalHomeAction() {\n-\t\tif(sInstance \u003d\u003d null) return;\n+\tpublic void sendGlobalHomeAction() {\n \t\tsInstance.performGlobalAction(AccessibilityService.GLOBAL_ACTION_HOME);\t\t\n \t}\t\n \n-\tpublic static void sendGlobalNotificationAction() {\n-\t\tif(sInstance \u003d\u003d null) return;\n+\tpublic void sendGlobalNotificationAction() {\n \t\tsInstance.performGlobalAction(AccessibilityService.GLOBAL_ACTION_NOTIFICATIONS);\t\t\n \t}\t\n "
        },
        {
          "file_name": "package/tecla/addon/TeclaApp.java",
          "patch": "@@ -134,11 +134,20 @@ private void processFrameworkOptions() {\n \t}\n \t\n \tpublic void turnFullscreenOn() {\n-\t\ta11yservice.showHUD();\n-\t\tTeclaAccessibilityService.sendGlobalHomeAction();\n \t\tpersistence.setSelfScanningEnabled(true);\n-\t\tAutomaticScan.startAutoScan();;\n-\t\ta11yservice.showFullscreenSwitch();\n+\t\tAutomaticScan.startAutoScan();\n+\t\tif (a11yservice !\u003d null) {\n+\t\t\ta11yservice.showHUD();\n+\t\t\ta11yservice.showFullscreenSwitch();\n+\t\t\ta11yservice.sendGlobalHomeAction();\n+\t\t}\n+\t}\n+\t\n+\tpublic void turnFullscreenOff() {\n+\t\tTeclaApp.a11yservice.hideFullscreenSwitch();\n+\t\tTeclaApp.persistence.setSelfScanningEnabled(false);\n+\t\tAutomaticScan.stopAutoScan();\t\t\t\t\n+\t\tTeclaApp.a11yservice.hideHUD();\n \t}\n \t\n \tpublic void answerCall() {"
        },
        {
          "file_name": "package/tecla/addon/TeclaHUDOverlay.java",
          "patch": "@@ -159,17 +159,17 @@ public void onClick(View v) {\n \t\t}\n \t};\t\n \n-\tprivate View.OnLongClickListener mOverlayLongClickListener \u003d  new View.OnLongClickListener() {\n-\n-\t\t@Override\n-\t\tpublic boolean onLongClick(View v) {\n-\t\t\tTeclaStatic.logV(CLASS_TAG, \"Long clicked.  \");\n-\t\t\tTeclaApp.persistence.setHUDCancelled(true);\n-\t\t\tTeclaApp.a11yservice.shutdownInfrastructure();\n-\t\t\treturn true;\n-\t\t}\n-\t};\n-\n+//\tprivate View.OnLongClickListener mOverlayLongClickListener \u003d  new View.OnLongClickListener() {\n+//\n+//\t\t@Override\n+//\t\tpublic boolean onLongClick(View v) {\n+//\t\t\tTeclaStatic.logV(CLASS_TAG, \"Long clicked.  \");\n+//\t\t\tTeclaApp.persistence.setHUDCancelled(true);\n+//\t\t\tTeclaApp.a11yservice.shutdownInfrastructure();\n+//\t\t\treturn true;\n+//\t\t}\n+//\t};\n+//\n \tpublic static void selectScanHighlighted() {\n \t\tTeclaHUDOverlay.sInstance.scanTrigger();\n \t}\n@@ -209,14 +209,14 @@ protected void scanTrigger() {\n \t\t\tTeclaAccessibilityService.clickActiveNode();\n \t\t\tbreak;\n \t\tcase HUD_BTN_BOTTOMLEFT:\n-\t\t\tTeclaAccessibilityService.sendGlobalBackAction();\n+\t\t\tTeclaApp.a11yservice.sendGlobalBackAction();\n \t\t\t/*if(Persistence.isDefaultIME(mContext) \u0026\u0026 TeclaApp.persistence.isIMERunning()) {\n \t\t\t\tTeclaStatic.logI(CLASS_TAG, \"LatinIME is active\");\n \t\t\t\tTeclaApp.ime.pressBackKey();\n \t\t\t} else TeclaStatic.logW(CLASS_TAG, \"LatinIME is not active!\");*/\n \t\t\tbreak;\n \t\tcase HUD_BTN_TOPLEFT:\n-\t\t\tTeclaAccessibilityService.sendGlobalHomeAction();\n+\t\t\tTeclaApp.a11yservice.sendGlobalHomeAction();\n \t\t\t/*if(Persistence.isDefaultIME(mContext) \u0026\u0026 TeclaApp.persistence.isIMERunning()) {\n \t\t\t\tTeclaStatic.logI(CLASS_TAG, \"LatinIME is active\");\n \t\t\t\tTeclaApp.ime.pressHomeKey();"
        },
        {
          "file_name": "package/tecla/addon/TeclaSettingsActivity.java",
          "patch": "@@ -89,10 +89,7 @@ public boolean onPreferenceChange(Preference pref, Object newValue) {\n \t\t\tif (newValue.toString().equals(\"true\")) {\n \t\t\t\tTeclaApp.getInstance().turnFullscreenOn();\n \t\t\t} else {\n-\t\t\t\tTeclaApp.a11yservice.hideFullscreenSwitch();\n-\t\t\t\tTeclaApp.persistence.setSelfScanningEnabled(false);\n-\t\t\t\tAutomaticScan.stopAutoScan();\t\t\t\t\n-\t\t\t\tTeclaApp.a11yservice.hideHUD();\n+\t\t\t\tTeclaApp.getInstance().turnFullscreenOff();\n \t\t\t}\n \t\t\treturn true;\n \t\t}"
        }
      ]
    }
  },
  {
    "name": "Null pointer in AestheticViewPager when resolving accent color",
    "url": "https://github.com/afollestad/aesthetic/issues/19",
    "description": "- [x] I have verified there are no duplicate active or recent bugs, questions, or requests\r\n- [x] I have verified that I am using the latest version of Aesthetic (see the README)\r\n- [x] I have given my issue description title\r\n- [x] I have read over the documentation (before asking questions on how to do something).\r\n\r\n - Aesthetic version: `0.4.1`\r\n - Device OS version: `7.1.2+`\r\n - Device: Any\r\nSource code at https://github.com/MnmlOS/Music\r\n```gradle\r\njava.lang.NullPointerException: Attempt to invoke virtual method \u0027android.content.res.Resources$Theme android.content.Context.getTheme()\u0027 on a null object reference\r\n                                                       at com.afollestad.aesthetic.Util.resolveColor(Util.java:85)\r\n                                                       at com.afollestad.aesthetic.Util.resolveColor(Util.java:80)\r\n                                                       at com.afollestad.aesthetic.Aesthetic.colorAccent(Aesthetic.java:383)\r\n                                                       at com.afollestad.aesthetic.AestheticViewPager.onAttachedToWindow(AestheticViewPager.java:35)\r\n                                                       at android.view.View.dispatchAttachedToWindow(View.java:15513)\r\n                                                       at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:2916)\r\n                                                       at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:2923)\r\n                                                       at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:2923)\r\n                                                       at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:2923)\r\n                                                       at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:2923)\r\n                                                       at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:2923)\r\n                                                       at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:2923)\r\n                                                       at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:2923)\r\n                                                       at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1526)\r\n                                                       at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1254)\r\n                                                       at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:6344)\r\n                                                       at android.view.Choreographer$CallbackRecord.run(Choreographer.java:887)\r\n                                                       at android.view.Choreographer.doCallbacks(Choreographer.java:699)\r\n                                                       at android.view.Choreographer.doFrame(Choreographer.java:634)\r\n                                                       at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:873)\r\n                                                       at android.os.Handler.handleCallback(Handler.java:751)\r\n                                                       at android.os.Handler.dispatchMessage(Handler.java:95)\r\n                                                       at android.os.Looper.loop(Looper.java:154)\r\n                                                       at android.app.ActivityThread.main(ActivityThread.java:6244)\r\n                                                       at java.lang.reflect.Method.invoke(Native Method)\r\n                                                       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:891)\r\n                                                       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:781)\r\n```\r\n \r\n###### Reproduction Steps\r\nRun app for the first time\r\n\r\n###### Expected Result\r\nSuccessful launch\r\n\r\n###### Actual Result\r\nCrash\r\n",
    "keywords": [
      "aesthetic",
      "com",
      "[x]",
      "handler",
      "viewgroup dispatchattachedtowindow",
      "choreographer",
      "view viewgroup",
      "android",
      "run",
      "view",
      "afollestad",
      "aestheticviewpager",
      "######",
      "viewgroup",
      "android view",
      "zygoteinit",
      "method",
      "os",
      "dispatchattachedtowindow viewgroup",
      "viewgroup java:2923",
      "version",
      "afollestad aesthetic",
      "util",
      "java:2923",
      "viewrootimpl",
      "dispatchattachedtowindow"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/afollestad/aesthetic/commit/d603c6903ea9df0675b096a7bc8ffdf1fba16da9",
      "files": [
        {
          "file_name": "README.md",
          "patch": "@@ -48,7 +48,7 @@ Add this to your module\u0027s `build.gradle` file:\n ```gradle\n dependencies {\n     // ... other dependencies\n-    compile \u0027com.afollestad:aesthetic:0.4.0\u0027\n+    compile \u0027com.afollestad:aesthetic:0.4.2\u0027\n }\n ```\n "
        },
        {
          "file_name": "dependencies.gradle",
          "patch": "@@ -2,8 +2,8 @@ ext.versions \u003d [\n         minSdk            : 16,\n         compileSdk        : 25,\n         buildTools        : \u002725.0.3\u0027,\n-        publishVersion    : \u00270.4.1\u0027,\n-        publishVersionCode: 13,\n+        publishVersion    : \u00270.4.2\u0027,\n+        publishVersionCode: 14  ,\n         gradlePlugin      : \u00272.3.2\u0027,\n \n         supportLib        : \u002725.3.1\u0027,"
        },
        {
          "file_name": "library/src/main/java/com/afollestad/aesthetic/Aesthetic.java",
          "patch": "@@ -145,12 +145,12 @@ public static void pause(@NonNull AppCompatActivity activity) {\n     if (instance.backgroundSubscriptions !\u003d null) {\n       instance.backgroundSubscriptions.clear();\n     }\n-    if (instance.context !\u003d null\n-        \u0026\u0026 instance.context.getClass().getName().equals(activity.getClass().getName())) {\n-      instance.context \u003d null;\n-    }\n     if (activity.isFinishing()) {\n       instance.backgroundSubscriberViews.remove(activity);\n+      if (instance.context !\u003d null\n+          \u0026\u0026 instance.context.getClass().getName().equals(activity.getClass().getName())) {\n+        instance.context \u003d null;\n+      }\n     }\n   }\n "
        }
      ]
    }
  },
  {
    "name": "Null pointer exception when using quick add voice input",
    "url": "https://github.com/tasks/tasks/issues/4",
    "description": "Click mic on quick add bar, speak, and click plus icon. Throws NPE\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/tasks/tasks/commit/3a848c344095f47313e61058d626bde2cf4aa65d",
      "files": [
        {
          "file_name": "astrid/src/main/java/com/todoroo/astrid/ui/QuickAddBar.java",
          "patch": "@@ -41,8 +41,6 @@\n import com.todoroo.astrid.data.SyncFlags;\n import com.todoroo.astrid.data.TagData;\n import com.todoroo.astrid.data.Task;\n-import com.todoroo.astrid.data.TaskAttachment;\n-import com.todoroo.astrid.files.FileUtilities;\n import com.todoroo.astrid.gcal.GCalControlSet;\n import com.todoroo.astrid.gcal.GCalHelper;\n import com.todoroo.astrid.repeats.RepeatControlSet;\n@@ -53,7 +51,6 @@\n import org.tasks.R;\n \n import java.util.HashSet;\n-import java.util.concurrent.atomic.AtomicReference;\n \n /**\n  * Quick Add Bar lets you add tasks.\n@@ -73,8 +70,6 @@\n     private RepeatControlSet repeatControl;\n     private GCalControlSet gcalControl;\n \n-    private String currentVoiceFile \u003d null;\n-\n     @Autowired ExceptionService exceptionService;\n     @Autowired\n     private TaskAttachmentDao taskAttachmentDao;\n@@ -243,7 +238,6 @@ private void resetControlSets() {\n         deadlineControl.readFromTask(empty);\n     }\n \n-\n     // --- quick add task logic\n \n     /**\n@@ -296,18 +290,6 @@ public Task quickAddTask(String title, boolean selectNewTask) {\n                 }\n             }\n \n-            if (currentVoiceFile !\u003d null) {\n-\n-                AtomicReference\u003cString\u003e nameRef \u003d new AtomicReference\u003c\u003e();\n-                String path \u003d FileUtilities.getNewAudioAttachmentPath(activity, nameRef);\n-\n-                voiceRecognizer.convert(path);\n-                currentVoiceFile \u003d null;\n-\n-                TaskAttachment attachment \u003d TaskAttachment.createNewAttachment(task.getUuid(), path, nameRef.get(), TaskAttachment.FILE_TYPE_AUDIO + \"m4a\");\n-                taskAttachmentDao.createNew(attachment);\n-            }\n-\n             fragment.onTaskCreated(task);\n \n             return task;\n@@ -389,19 +371,14 @@ public boolean onActivityResult(int requestCode, int resultCode, Intent data) {\n             return true;\n         }\n \n-\n         return false;\n     }\n \n-\n     public VoiceRecognizer getVoiceRecognizer() {\n         return voiceRecognizer;\n     }\n     public void startVoiceRecognition() {\n-        if (VoiceRecognizer.speechRecordingAvailable(activity) \u0026\u0026 currentVoiceFile \u003d\u003d null) {\n-            currentVoiceFile \u003d Long.toString(DateUtilities.now());\n-        }\n-        voiceRecognizer.startVoiceRecognition(activity, fragment, currentVoiceFile);\n+        voiceRecognizer.startVoiceRecognition(activity, fragment, Long.toString(DateUtilities.now()));\n     }\n \n     public void setupRecognizerApi() {"
        }
      ]
    }
  },
  {
    "name": "Null pointer exception when viewing Package table as a User",
    "url": "https://github.com/molgenis/molgenis/issues/5667",
    "description": "### How to Reproduce\r\n- Create a user\r\n- Give View permission on sys_md_Package, dataexplorer and sys_set_dataexplorer\r\n- As user go to data explorer and select Package from dropdown\r\n\r\n### Expected behavior\r\nI see all packages\r\n\r\n### Observed behavior\r\n```\r\n13:07:52.879 [ajp-bio-8009-exec-13] ERROR o.m.data.rest.v2.RestControllerV2 - Runtime exception occurred.\r\njava.lang.NullPointerException: null\r\n\tat org.molgenis.data.rest.v2.RestControllerV2.createEntityValuesResponse(RestControllerV2.java:700) ~[molgenis-data-rest-2.0.0-SNAPSHOT.jar:2.0.0-SNAPSHOT]\r\n\tat org.molgenis.data.rest.v2.RestControllerV2.createEntityResponse(RestControllerV2.java:688) ~[molgenis-data-rest-2.0.0-SNAPSHOT.jar:2.0.0-SNAPSHOT]\r\n\tat org.molgenis.data.rest.v2.RestControllerV2.createEntityValuesResponseRec(RestControllerV2.java:753) ~[molgenis-data-rest-2.0.0-SNAPSHOT.jar:2.0.0-SNAPSHOT]\r\n```\r\n",
    "keywords": [
      "rest",
      "rest v2",
      "0-snapshot jar:2",
      "###",
      "data",
      "org",
      "0-snapshot",
      "molgenis",
      "molgenis data",
      "0",
      "jar:2",
      "0-snapshot]",
      "restcontrollerv2",
      "~[molgenis-data-rest-2 0",
      "v2",
      "0 0-snapshot]",
      "user",
      "~[molgenis-data-rest-2"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/molgenis/molgenis/commit/a387e8453d1d7f3a10f81d28e4e5310fa7aacdf8",
      "files": [
        {
          "file_name": "molgenis-data/src/main/java/org/molgenis/data/EntityManagerImpl.java",
          "patch": "@@ -7,7 +7,6 @@\n import org.molgenis.data.meta.model.EntityType;\n import org.molgenis.data.populate.EntityPopulator;\n import org.molgenis.data.support.*;\n-import org.molgenis.util.BatchingIterable;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Component;\n \n@@ -253,7 +252,7 @@ else if (isMultipleReferenceType(attr))\n \t\t\t\t\t\t\t// replace lazy entity with real entity\n \t\t\t\t\t\t\tObject refEntityId \u003d lazyRefEntity.getIdValue();\n \t\t\t\t\t\t\treturn refEntitiesIdMap.get(refEntityId);\n-\t\t\t\t\t\t}).collect(Collectors.toList());\n+\t\t\t\t\t\t}).filter(Objects::nonNull).collect(Collectors.toList());\n \t\t\t\t\t\tentity.set(attrName, mrefEntities);\n \t\t\t\t\t}\n \t\t\t\t}"
        }
      ]
    }
  },
  {
    "name": "Java Problem: Potential null pointer access: The variable c may be null at this location",
    "url": "https://github.com/avrora-framework/avrora/issues/37",
    "description": "Resource: avrora/src/main/java/avrora/cck/util/ClassMap.java\nLocation: line 214\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/avrora-framework/avrora/commit/92cb37d6fd97490495af031839566fb325dd19b9",
      "files": [
        {
          "file_name": "avrora/src/main/java/avrora/cck/util/ClassMap.java",
          "patch": "@@ -223,6 +223,10 @@ public Object getObjectOfClass(String name)\n         {\n             Util.userError(\"Illegal access to class\", clname);\n         }\n+        catch (NullPointerException npe)\n+        {\n+            throw new IllegalStateException(\"clals not found\");\n+        }\n \n         // UNREACHABLE\n         throw Util.unreachable();"
        }
      ]
    }
  },
  {
    "name": "Fix Null Pointer in HomeActivity ",
    "url": "https://github.com/reustonium/Lunch-Pals/issues/40",
    "description": "java.lang.NullPointerException\u003cbr\u003eat com.reustonium.lunchpals.activities.HomeActivity.onOptionsItemSelected(HomeActivity.java:112)\u003cbr\u003eat android.app.Activity.onMenuItemSelected(Activity.java:2600)\u003cbr\u003eat com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:1065)\u003cbr\u003eat com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)\u003cbr\u003eat com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:152)\u003cbr\u003eat com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)\u003cbr\u003eat com.android.internal.view.menu.ActionMenuView.invokeItem(ActionMenuView.java:546)\u003cbr\u003eat com.android.internal.view.menu.ActionMenuItemView.onClick(ActionMenuItemView.java:115)\u003cbr\u003eat android.view.View.performClick(View.java:4438)\u003cbr\u003eat android.view.View$PerformClick.run(View.java:18422)\u003cbr\u003eat android.os.Handler.handleCallback(Handler.java:733)\u003cbr\u003eat android.os.Handler.dispatchMessage(Handler.java:95)\u003cbr\u003eat android.os.Looper.loop(Looper.java:136)\u003cbr\u003eat android.app.ActivityThread.main(ActivityThread.java:5017)\u003cbr\u003eat java.lang.reflect.Method.invokeNative(Native Method)\u003cbr\u003eat java.lang.reflect.Method.invoke(Method.java:515)\u003cbr\u003eat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:779)\u003cbr\u003eat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:595)\u003cbr\u003e\u003cspan\u003eat dalvik.system.NativeStart.main(Native Method)\u003c/span\u003e\n",
    "keywords": [
      "com",
      "handler",
      "internal",
      "os",
      "method",
      "android",
      "main",
      "homeactivity",
      "\u003cbr\u003eat com",
      "menu",
      "view",
      "\u003cbr\u003eat android",
      "menubuilder",
      "java",
      "android internal",
      "view menu",
      "\u003cbr\u003eat",
      "lang",
      "zygoteinit"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/reustonium/Lunch-Pals/commit/8585ac2cc306a399bfe3e1e1fac477a9af049e3f",
      "files": [
        {
          "file_name": "lunch-pals/src/main/java/com/reustonium/lunchpals/activities/HomeActivity.java",
          "patch": "@@ -106,12 +106,6 @@ public boolean onOptionsItemSelected(MenuItem item) {\n                 finish();\n                 return true;\n \n-            case R.id.home_ab_refresh:\n-                //TODO Update users\n-                PangsListFragment pFrag \u003d (PangsListFragment) getFragmentManager().findFragmentByTag(\"mFragment\");\n-                pFrag.UpdateStatus();\n-                return true;\n-\n             case R.id.home_ab_featReq:\n                 Intent github \u003d new Intent(Intent.ACTION_VIEW, Uri.parse(\"https://github.com/reustonium/Lunch-Pals/issues/new\"));\n                 startActivity(github);"
        },
        {
          "file_name": "lunch-pals/src/main/res/layout/fragment_locations.xml",
          "patch": "@@ -8,6 +8,8 @@\n     \u003cTextView\n         android:layout_width\u003d\"match_parent\"\n         android:layout_height\u003d\"match_parent\"\n+        android:textSize\u003d\"42dp\"\n+        android:gravity\u003d\"center\"\n         android:text\u003d\"@string/hello_blank_fragment\" /\u003e\n \n \u003c/FrameLayout\u003e"
        },
        {
          "file_name": "lunch-pals/src/main/res/layout/fragment_stats.xml",
          "patch": "@@ -34,13 +34,13 @@\n         \u003cTextView\n             android:layout_width\u003d\"wrap_content\"\n             android:layout_height\u003d\"wrap_content\"\n-            android:textSize\u003d\"32dp\"\n+            android:textSize\u003d\"28dp\"\n             android:text\u003d\"Nudges Sent\"/\u003e\n         \u003cTextView\n             android:id\u003d\"@+id/stats_sent\"\n             android:layout_width\u003d\"fill_parent\"\n             android:layout_height\u003d\"wrap_content\"\n-            android:textSize\u003d\"32dp\"\n+            android:textSize\u003d\"28dp\"\n             android:textStyle\u003d\"bold\"\n             android:layout_gravity\u003d\"right\"\n             android:gravity\u003d\"right\"\n@@ -57,13 +57,13 @@\n         \u003cTextView\n             android:layout_width\u003d\"wrap_content\"\n             android:layout_height\u003d\"wrap_content\"\n-            android:textSize\u003d\"32dp\"\n+            android:textSize\u003d\"28dp\"\n             android:text\u003d\"Times Nudged\"/\u003e\n         \u003cTextView\n             android:id\u003d\"@+id/stats_nudged\"\n             android:layout_width\u003d\"fill_parent\"\n             android:layout_height\u003d\"wrap_content\"\n-            android:textSize\u003d\"32dp\"\n+            android:textSize\u003d\"28dp\"\n             android:textStyle\u003d\"bold\"\n             android:layout_gravity\u003d\"right\"\n             android:gravity\u003d\"right\""
        },
        {
          "file_name": "lunch-pals/src/main/res/menu/home_actionbar.xml",
          "patch": "@@ -2,11 +2,6 @@\n \n \u003cmenu xmlns:android\u003d\"http://schemas.android.com/apk/res/android\"\u003e\n     \u003citem\n-        android:id\u003d\"@+id/home_ab_refresh\"\n-        android:icon\u003d\"@android:drawable/ic_popup_sync\"\n-        android:title\u003d\"Refresh Data\"\n-        android:showAsAction\u003d\"ifRoom\"/\u003e\n-    \u003citem\n         android:id\u003d\"@+id/home_ab_logout\"\n         android:icon\u003d\"@drawable/ic_action_loginout\"\n         android:title\u003d\"Logout\""
        },
        {
          "file_name": "lunch-pals/src/main/res/values/strings.xml",
          "patch": "@@ -4,7 +4,7 @@\n     \u003cstring name\u003d\"app_name\"\u003eLunchPals\u003c/string\u003e\n     \u003cstring name\u003d\"error_username_taken\"\u003eError - Username already taken\u003c/string\u003e\n     \u003cstring name\u003d\"frag_home_greeting\"\u003eGreetings\u003c/string\u003e\n-    \u003cstring name\u003d\"splash_message\"\u003eAlpha Release v0.2.5\u003c/string\u003e\n+    \u003cstring name\u003d\"splash_message\"\u003eAlpha Release v0.2.7\u003c/string\u003e\n     \u003cstring name\u003d\"title_activity_main\"\u003eMainActivity\u003c/string\u003e\n     \u003cstring name\u003d\"title_section1\"\u003ePals List\u003c/string\u003e\n     \u003cstring name\u003d\"title_section2\"\u003eLocations\u003c/string\u003e"
        }
      ]
    }
  },
  {
    "name": "onStop null pointer exception",
    "url": "https://github.com/drakeet/TimeMachine/issues/33",
    "description": "Click `Close Translation Mode` in the drawer after startup will cause the exception:\n\n\u003cimg src\u003d\"https://cloud.githubusercontent.com/assets/5214214/18315649/4ad88190-754a-11e6-8af0-9cb6d2fb98af.png\" width\u003d320 height\u003d571/\u003e\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/drakeet/TimeMachine/commit/822a5883adbb394cb4df16b835d68ddd0c6da8e2",
      "files": [
        {
          "file_name": "transformer/src/main/java/me/drakeet/transformer/TranslationService.java",
          "patch": "@@ -27,6 +27,7 @@\n import static me.drakeet.transformer.App.calculationExecutor;\n import static me.drakeet.transformer.App.networkExecutor;\n import static me.drakeet.transformer.Requests.urlToResponse;\n+import static me.drakeet.transformer.StringRes.CLOSE_TRANSLATION_ERROR;\n import static me.drakeet.transformer.entity.Step.OnConfirm;\n import static me.drakeet.transformer.entity.Step.OnWorking;\n import static me.drakeet.transformer.request.TranslateRequests.YOU_DAO;\n@@ -175,7 +176,11 @@ private void handleContent(@NonNull final String content) {\n                 break;\n             case \"\":\n             case \"\":\n-                onStopStep();\n+                if (token !\u003d null) {\n+                    onStopStep();\n+                } else {\n+                    insertNewIn(CLOSE_TRANSLATION_ERROR);\n+                }\n                 break;\n             default:\n                 echoDelegate.handleContent(content);"
        },
        {
          "file_name": "transformer/version.properties",
          "patch": "@@ -1,2 +1,2 @@\n-#Wed Sep 07 22:19:56 CST 2016\n-AI_VERSION_CODE\u003d432\n+#Thu Sep 08 22:45:09 CST 2016\n+AI_VERSION_CODE\u003d433"
        }
      ]
    }
  },
  {
    "name": "Null Pointer: PipeItemsTeleport",
    "url": "https://github.com/tcooc/AdditionalPipesBC/pull/59",
    "description": "Crash Report:\nhttp://pastebin.com/ZtQFqVp1\n\nI first caused it to happen when breaking a pipe connected to the receiving end of a teleport pipe. It seems to happen randomly and I am unable to reliably repeat it.\n\nInstalled mods:\nForge: 7.8.0.710\nFML: 5.2.12.710\nBuildcraft: 3.5.3\nAdditional-Buildcraft-Objects: 1.0.4.150\nAPUnofficial: 2.3.0\n",
    "keywords": [
      "0",
      "3"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/tcooc/AdditionalPipesBC/commit/a4ada46da80992b1042e2d67f159bf885e398d1d",
      "files": [
        {
          "file_name": "additionalpipes/AdditionalPipes.java",
          "patch": "@@ -73,11 +73,8 @@\n import cpw.mods.fml.relauncher.Side;\n import cpw.mods.fml.relauncher.SideOnly;\n \n-@Mod(modid\u003dAdditionalPipes.MODID, name\u003dAdditionalPipes.NAME,\n-dependencies\u003d\"after:BuildCraft|Transport;after:BuildCraft|Silicon;after:BuildCraft|Transport;after:BuildCraft|Factory\",\n-version\u003dAdditionalPipes.VERSION)\n-@NetworkMod(channels\u003d{AdditionalPipes.CHANNEL, AdditionalPipes.CHANNELNBT},\n-clientSideRequired\u003dtrue, serverSideRequired\u003dtrue, packetHandler\u003dNetworkHandler.class)\n+@Mod(modid \u003d AdditionalPipes.MODID, name \u003d AdditionalPipes.NAME, dependencies \u003d \"after:BuildCraft|Transport;after:BuildCraft|Silicon;after:BuildCraft|Transport;after:BuildCraft|Factory\", version \u003d AdditionalPipes.VERSION)\n+@NetworkMod(channels \u003d { AdditionalPipes.CHANNEL, AdditionalPipes.CHANNELNBT }, clientSideRequired \u003d true, serverSideRequired \u003d true, packetHandler \u003d NetworkHandler.class)\n public class AdditionalPipes {\n \tpublic static final String MODID \u003d \"APUnofficial\";\n \tpublic static final String NAME \u003d \"Additional Pipes Unofficial\";\n@@ -88,8 +85,7 @@\n \t@Instance(MODID)\n \tpublic static AdditionalPipes instance;\n \n-\t@SidedProxy(clientSide \u003d \"buildcraft.additionalpipes.MutiPlayerProxyClient\",\n-\t\t\tserverSide \u003d \"buildcraft.additionalpipes.MutiPlayerProxy\")\n+\t@SidedProxy(clientSide \u003d \"buildcraft.additionalpipes.MutiPlayerProxyClient\", serverSide \u003d \"buildcraft.additionalpipes.MutiPlayerProxy\")\n \tpublic static MutiPlayerProxy proxy;\n \n \tpublic File configFile;\n@@ -100,90 +96,110 @@\n \tprivate static @interface CfgId {\n \t\tpublic boolean block() default false;\n \t}\n+\n \t@Retention(RetentionPolicy.RUNTIME)\n-\tprivate static @interface CfgBool {}\n+\tprivate static @interface CfgBool {\n+\t}\n \n \tpublic static final String LOC_PATH \u003d \"/buildcraft/additionalpipes\";\n-\t//textures\n+\t// textures\n \tpublic static final String BASE_PATH \u003d \"/mods/additionalpipes\";\n \tpublic static final String TEXTURE_PATH \u003d BASE_PATH + \"/textures\";\n \n \tpublic static final String TEXTURE_GUI_TELEPORT \u003d TEXTURE_PATH + \"/gui/blankSmallGui.png\";\n \tpublic static final String TEXTURE_GUI_ADVANCEDWOOD \u003d TEXTURE_PATH + \"/gui/advancedWoodGui.png\";\n \tpublic static final String TEXTURE_GUI_DISTRIBUTION \u003d TEXTURE_PATH + \"/gui/distributionGui.png\";\n \n-\t//chunk load boundaries\n+\t// chunk load boundaries\n \tpublic ChunkLoadViewDataProxy chunkLoadViewer;\n-\tpublic @CfgBool boolean chunkSight \u003d true;\n-\tpublic int chunkSightRange \u003d 8; //config option\n-\tpublic @CfgBool boolean chunkSightAutorefresh \u003d true;\n-\n-\t//teleport scanner TODO\n-\t//public Item teleportScanner;\n-\t//public @CfgId int teleportScannerId \u003d 14061;\n-\t//meter TODO\n-\t//public Item powerMeter;\n-\t//public @CfgId int powerMeterId \u003d 14060;\n-\n-\t//Redstone Liquid\n+\tpublic @CfgBool\n+\tboolean chunkSight \u003d true;\n+\tpublic int chunkSightRange \u003d 8; // config option\n+\tpublic @CfgBool\n+\tboolean chunkSightAutorefresh \u003d true;\n+\n+\t// teleport scanner TODO\n+\t// public Item teleportScanner;\n+\t// public @CfgId int teleportScannerId \u003d 14061;\n+\t// meter TODO\n+\t// public Item powerMeter;\n+\t// public @CfgId int powerMeterId \u003d 14060;\n+\n+\t// Redstone Liquid\n \tpublic Item pipeLiquidsRedstone;\n-\tpublic @CfgId int pipeLiquidsRedstoneId \u003d 14042;\n-\t//Redstone\n+\tpublic @CfgId\n+\tint pipeLiquidsRedstoneId \u003d 14042;\n+\t// Redstone\n \tpublic Item pipeItemsRedStone;\n-\tpublic @CfgId int pipeItemsRedStoneId \u003d 14043;\n-\t//Advanced Insertion\n+\tpublic @CfgId\n+\tint pipeItemsRedStoneId \u003d 14043;\n+\t// Advanced Insertion\n \tpublic Item pipeItemsAdvancedInsertion;\n-\tpublic @CfgId int pipeItemsAdvancedInsertionId \u003d 14044;\n-\t//Advanced Wood\n+\tpublic @CfgId\n+\tint pipeItemsAdvancedInsertionId \u003d 14044;\n+\t// Advanced Wood\n \tpublic Item pipeItemsAdvancedWood;\n-\tpublic @CfgId int pipeItemsAdvancedWoodId \u003d 14045;\n-\t//Distributor\n+\tpublic @CfgId\n+\tint pipeItemsAdvancedWoodId \u003d 14045;\n+\t// Distributor\n \tpublic Item pipeItemsDistributor;\n-\tpublic @CfgId int pipeItemsDistributorId \u003d 14046;\n-\t//Item Teleport\n+\tpublic @CfgId\n+\tint pipeItemsDistributorId \u003d 14046;\n+\t// Item Teleport\n \tpublic Item pipeItemsTeleport;\n-\tpublic @CfgId int pipeItemsTeleportId \u003d 14047;\n-\t//Liquid Teleport\n+\tpublic @CfgId\n+\tint pipeItemsTeleportId \u003d 14047;\n+\t// Liquid Teleport\n \tpublic Item pipeLiquidsTeleport;\n-\tpublic @CfgId int pipeLiquidsTeleportId \u003d 14048;\n-\t//Power Teleport\n+\tpublic @CfgId\n+\tint pipeLiquidsTeleportId \u003d 14048;\n+\t// Power Teleport\n \tpublic Item pipePowerTeleport;\n-\tpublic @CfgId int pipePowerTeleportId \u003d 14049;\n-\t//Items Closed\n+\tpublic @CfgId\n+\tint pipePowerTeleportId \u003d 14049;\n+\t// Items Closed\n \tpublic Item pipeItemsClosed;\n-\tpublic @CfgId int pipeItemsClosedId \u003d 14050;\n-\t//Switch pipes\n+\tpublic @CfgId\n+\tint pipeItemsClosedId \u003d 14050;\n+\t// Switch pipes\n \tpublic Item pipePowerSwitch;\n-\tpublic @CfgId int pipePowerSwitchId \u003d 14051;\n+\tpublic @CfgId\n+\tint pipePowerSwitchId \u003d 14051;\n \tpublic Item pipeItemsSwitch;\n-\tpublic @CfgId int pipeItemsSwitchId \u003d 14052;\n+\tpublic @CfgId\n+\tint pipeItemsSwitchId \u003d 14052;\n \tpublic Item pipeLiquidsSwitch;\n-\tpublic @CfgId int pipeLiquidsSwitchId \u003d 14053;\n-\t//water pump pipe\n+\tpublic @CfgId\n+\tint pipeLiquidsSwitchId \u003d 14053;\n+\t// water pump pipe\n \tpublic Item pipeLiquidsWaterPump;\n-\tpublic @CfgId int pipeLiquidsWaterPumpId \u003d 14054;\n-\t//chunk loader\n+\tpublic @CfgId\n+\tint pipeLiquidsWaterPumpId \u003d 14054;\n+\t// chunk loader\n \tpublic Block blockChunkLoader;\n-\tpublic @CfgId(block\u003dtrue) int chunkLoaderId \u003d 1890;\n+\tpublic @CfgId(block \u003d true)\n+\tint chunkLoaderId \u003d 1890;\n \n-\tpublic @CfgBool boolean enableTriggers \u003d true;\n+\tpublic @CfgBool\n+\tboolean enableTriggers \u003d true;\n \tpublic ITrigger triggerPipeClosed;\n \n \tpublic ITrigger triggerPhasedSignalRed;\n \tpublic ITrigger triggerPhasedSignalBlue;\n \tpublic ITrigger triggerPhasedSignalGreen;\n \tpublic ITrigger triggerPhasedSignalYellow;\n-\t//keybinding\n-\tpublic int laserKeyCode \u003d 64; //config option (\u0026 in options menu)\n-\t//misc\n-\tpublic @CfgBool boolean allowWRRemove \u003d false;\n-\tpublic double powerLossCfg \u003d 0.90; //config option\n+\t// keybinding\n+\tpublic int laserKeyCode \u003d 64; // config option (\u0026 in options menu)\n+\t// misc\n+\tpublic @CfgBool\n+\tboolean allowWRRemove \u003d false;\n+\tpublic double powerLossCfg \u003d 0.90; // config option\n \n \t@PreInit\n \tpublic void preInit(FMLPreInitializationEvent event) {\n \t\tlogger \u003d Logger.getLogger(MODID);\n \t\tlogger.setParent(FMLLog.getLogger());\n-\t\tlogger.setLevel(Level.WARNING); //DEBUG\n+\t\tlogger.setLevel(Level.WARNING); // DEBUG\n \n \t\tconfigFile \u003d event.getSuggestedConfigurationFile();\n \t\tloadConfigs(false);\n@@ -194,7 +210,7 @@ public void preInit(FMLPreInitializationEvent event) {\n \t\t\ten_US \u003d new Properties();\n \t\t\ten_US.load(AdditionalPipes.class.getResourceAsStream((LOC_PATH + \"/lang/en_US.properties\")));\n \t\t\tLanguageRegistry.instance().addStringLocalization(en_US);\n-\t\t} catch (Exception e) {\n+\t\t} catch(Exception e) {\n \t\t\tlogger.log(Level.SEVERE, \"Failed to load default localization.\", e);\n \t\t}\n \t\tMinecraftForge.EVENT_BUS.register(this);\n@@ -203,14 +219,15 @@ public void preInit(FMLPreInitializationEvent event) {\n \t@Init\n \tpublic void init(FMLInitializationEvent event) {\n \t\tNetworkRegistry.instance().registerGuiHandler(this, new GuiHandler());\n-\t\tForgeChunkManager.setForcedChunkLoadingCallback(this,  new ChunkLoadingHandler());\n+\t\tForgeChunkManager.setForcedChunkLoadingCallback(this, new ChunkLoadingHandler());\n \t\tchunkLoadViewer \u003d new ChunkLoadViewDataProxy(chunkSightRange);\n \t\tTickRegistry.registerScheduledTickHandler(chunkLoadViewer, Side.CLIENT);\n \t\tproxy.registerKeyHandler();\n \t\tproxy.registerRendering();\n \n-\t\t//powerMeter \u003d new ItemPowerMeter(powerMeterId).setItemName(\"powerMeter\");\n-\t\t//LanguageRegistry.addName(powerMeter, \"Power Meter\");\n+\t\t// powerMeter \u003d new\n+\t\t// ItemPowerMeter(powerMeterId).setItemName(\"powerMeter\");\n+\t\t// LanguageRegistry.addName(powerMeter, \"Power Meter\");\n \t\tloadConfigs(true);\n \t\tloadPipes();\n \n@@ -223,38 +240,38 @@ public void init(FMLInitializationEvent event) {\n \t\t\tActionManager.registerTriggerProvider(new GateProvider());\n \t\t}\n \n-\t\tif (allowWRRemove) {\n-\t\t\t//Additional Pipes\n-\t\t\tGameRegistry.addRecipe(new ItemStack(pipeItemsTeleport), new Object[]{\"A\", \u0027A\u0027, pipePowerTeleport});\n-\t\t\tGameRegistry.addRecipe(new ItemStack(pipeItemsTeleport), new Object[]{\"A\", \u0027A\u0027, pipeLiquidsTeleport});\n-\t\t\tGameRegistry.addRecipe(new ItemStack(pipeItemsRedStone), new Object[]{\"A\", \u0027A\u0027, pipeLiquidsRedstone});\n-\t\t\t//BC Liquid\n-\t\t\tGameRegistry.addRecipe(new ItemStack(BuildCraftTransport.pipeItemsCobblestone), new Object[]{\"A\", \u0027A\u0027, BuildCraftTransport.pipeLiquidsCobblestone});\n-\t\t\tGameRegistry.addRecipe(new ItemStack(BuildCraftTransport.pipeItemsGold), new Object[]{\"A\", \u0027A\u0027, BuildCraftTransport.pipeLiquidsGold});\n-\t\t\tGameRegistry.addRecipe(new ItemStack(BuildCraftTransport.pipeItemsIron), new Object[]{\"A\", \u0027A\u0027, BuildCraftTransport.pipeLiquidsIron});\n-\t\t\tGameRegistry.addRecipe(new ItemStack(BuildCraftTransport.pipeItemsStone), new Object[]{\"A\", \u0027A\u0027, BuildCraftTransport.pipeLiquidsStone});\n-\t\t\tGameRegistry.addRecipe(new ItemStack(BuildCraftTransport.pipeItemsWood), new Object[]{\"A\", \u0027A\u0027, BuildCraftTransport.pipeLiquidsWood});\n-\t\t\t//BC Power\n-\t\t\tGameRegistry.addRecipe(new ItemStack(BuildCraftTransport.pipeItemsGold), new Object[]{\"A\", \u0027A\u0027, BuildCraftTransport.pipePowerGold});\n-\t\t\tGameRegistry.addRecipe(new ItemStack(BuildCraftTransport.pipeItemsStone), new Object[]{\"A\", \u0027A\u0027, BuildCraftTransport.pipePowerStone});\n-\t\t\tGameRegistry.addRecipe(new ItemStack(BuildCraftTransport.pipeItemsWood), new Object[]{\"A\", \u0027A\u0027, BuildCraftTransport.pipePowerWood});\n+\t\tif(allowWRRemove) {\n+\t\t\t// Additional Pipes\n+\t\t\tGameRegistry.addRecipe(new ItemStack(pipeItemsTeleport), new Object[] { \"A\", \u0027A\u0027, pipePowerTeleport });\n+\t\t\tGameRegistry.addRecipe(new ItemStack(pipeItemsTeleport), new Object[] { \"A\", \u0027A\u0027, pipeLiquidsTeleport });\n+\t\t\tGameRegistry.addRecipe(new ItemStack(pipeItemsRedStone), new Object[] { \"A\", \u0027A\u0027, pipeLiquidsRedstone });\n+\t\t\t// BC Liquid\n+\t\t\tGameRegistry.addRecipe(new ItemStack(BuildCraftTransport.pipeItemsCobblestone), new Object[] { \"A\", \u0027A\u0027, BuildCraftTransport.pipeLiquidsCobblestone });\n+\t\t\tGameRegistry.addRecipe(new ItemStack(BuildCraftTransport.pipeItemsGold), new Object[] { \"A\", \u0027A\u0027, BuildCraftTransport.pipeLiquidsGold });\n+\t\t\tGameRegistry.addRecipe(new ItemStack(BuildCraftTransport.pipeItemsIron), new Object[] { \"A\", \u0027A\u0027, BuildCraftTransport.pipeLiquidsIron });\n+\t\t\tGameRegistry.addRecipe(new ItemStack(BuildCraftTransport.pipeItemsStone), new Object[] { \"A\", \u0027A\u0027, BuildCraftTransport.pipeLiquidsStone });\n+\t\t\tGameRegistry.addRecipe(new ItemStack(BuildCraftTransport.pipeItemsWood), new Object[] { \"A\", \u0027A\u0027, BuildCraftTransport.pipeLiquidsWood });\n+\t\t\t// BC Power\n+\t\t\tGameRegistry.addRecipe(new ItemStack(BuildCraftTransport.pipeItemsGold), new Object[] { \"A\", \u0027A\u0027, BuildCraftTransport.pipePowerGold });\n+\t\t\tGameRegistry.addRecipe(new ItemStack(BuildCraftTransport.pipeItemsStone), new Object[] { \"A\", \u0027A\u0027, BuildCraftTransport.pipePowerStone });\n+\t\t\tGameRegistry.addRecipe(new ItemStack(BuildCraftTransport.pipeItemsWood), new Object[] { \"A\", \u0027A\u0027, BuildCraftTransport.pipePowerWood });\n \t\t}\n \n-\t\t//ChunkLoader\n+\t\t// ChunkLoader\n \t\tif(chunkLoaderId !\u003d 0) {\n \t\t\tblockChunkLoader \u003d new BlockChunkLoader(chunkLoaderId \u003e 0 ? chunkLoaderId : -chunkLoaderId, 32);\n \t\t\tblockChunkLoader.setUnlocalizedName(\"TeleportTether\");\n \t\t\tGameRegistry.registerBlock(blockChunkLoader, ItemBlock.class, \"chunkLoader\");\n \t\t\tGameRegistry.registerTileEntity(TileChunkLoader.class, \"TeleportTether\");\n-\t\t\tif (chunkLoaderId \u003e 0) {\n-\t\t\t\tGameRegistry.addRecipe(new ItemStack(blockChunkLoader), new Object[]{\"iii\", \"iLi\", \"iii\", \u0027i\u0027, Item.ingotIron, \u0027L\u0027, new ItemStack(Item.dyePowder, 1, 4)});\n+\t\t\tif(chunkLoaderId \u003e 0) {\n+\t\t\t\tGameRegistry.addRecipe(new ItemStack(blockChunkLoader), new Object[] { \"iii\", \"iLi\", \"iii\", \u0027i\u0027, Item.ingotIron, \u0027L\u0027, new ItemStack(Item.dyePowder, 1, 4) });\n \t\t\t}\n \t\t}\n \t}\n \n \t@ServerStarting\n \tpublic void onServerStart(FMLServerStartingEvent event) {\n-\t\t//event.registerServerCommand(new CommandAdditionalPipes());\n+\t\t// event.registerServerCommand(new CommandAdditionalPipes());\n \t\tTeleportManager.instance.reset();\n \t}\n \n@@ -269,42 +286,42 @@ private void loadConfigs(boolean postInit) {\n \t\t\tconfig.addCustomCategoryComment(Configuration.CATEGORY_ITEM, \"Set id to 0 to disable loading the item, add - in front of id to disable recipe only.\");\n \t\t\tconfig.addCustomCategoryComment(Configuration.CATEGORY_GENERAL, \"Disabling items/blocks only disables recipes.\");\n \t\t\tField[] fields \u003d AdditionalPipes.class.getFields();\n-\t\t\tfor(Field field : fields){\n+\t\t\tfor(Field field : fields) {\n \t\t\t\tif(!Modifier.isStatic(field.getModifiers())) {\n \n \t\t\t\t\tCfgId annotation \u003d field.getAnnotation(CfgId.class);\n \t\t\t\t\tif(annotation !\u003d null) {\n \t\t\t\t\t\tint id \u003d field.getInt(this);\n-\t\t\t\t\t\tif(annotation.block()){\n+\t\t\t\t\t\tif(annotation.block()) {\n \t\t\t\t\t\t\tif(config.getCategory(Configuration.CATEGORY_BLOCK).containsKey(field.getName())) {\n \t\t\t\t\t\t\t\tid \u003d config.get(Configuration.CATEGORY_BLOCK, field.getName(), id).getInt(id);\n-\t\t\t\t\t\t\t\tif(id \u003e 0) id \u003d config.getBlock(field.getName(), id).getInt(id);\n+\t\t\t\t\t\t\t\tif(id \u003e 0)\n+\t\t\t\t\t\t\t\t\tid \u003d config.getBlock(field.getName(), id).getInt(id);\n \t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\tid \u003d config.getBlock(field.getName(), id).getInt(id);\n \t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}else{\n+\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tif(config.getCategory(Configuration.CATEGORY_ITEM).containsKey(field.getName())) {\n \t\t\t\t\t\t\t\tid \u003d config.get(Configuration.CATEGORY_ITEM, field.getName(), id).getInt(id);\n-\t\t\t\t\t\t\t\tif(id \u003e 0) id \u003d config.getItem(field.getName(), id).getInt(id);\n+\t\t\t\t\t\t\t\tif(id \u003e 0)\n+\t\t\t\t\t\t\t\t\tid \u003d config.getItem(field.getName(), id).getInt(id);\n \t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\tid \u003d config.getItem(field.getName(), id).getInt(id);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t\tfield.setInt(this, id);\n \t\t\t\t\t} else {\n-\t\t\t\t\t\tif(field.isAnnotationPresent(CfgBool.class)){\n+\t\t\t\t\t\tif(field.isAnnotationPresent(CfgBool.class)) {\n \t\t\t\t\t\t\tboolean bool \u003d field.getBoolean(this);\n-\t\t\t\t\t\t\tbool \u003d config.get(Configuration.CATEGORY_GENERAL,\n-\t\t\t\t\t\t\t\t\tfield.getName(), bool).getBoolean(bool);\n+\t\t\t\t\t\t\tbool \u003d config.get(Configuration.CATEGORY_GENERAL, field.getName(), bool).getBoolean(bool);\n \t\t\t\t\t\t\tfield.setBoolean(this, bool);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \n \t\t\t\t}\n \t\t\t}\n \n-\t\t\tProperty powerLoss \u003d config.get(Configuration.CATEGORY_GENERAL,\n-\t\t\t\t\t\"powerLoss\", (int) (powerLossCfg * 100));\n+\t\t\tProperty powerLoss \u003d config.get(Configuration.CATEGORY_GENERAL, \"powerLoss\", (int) (powerLossCfg * 100));\n \t\t\tpowerLoss.comment \u003d \"Percentage of power a power teleport pipe transmits. Between 0 and 100.\";\n \t\t\tpowerLossCfg \u003d powerLoss.getInt() / 100.0;\n \t\t\tif(powerLossCfg \u003e 1.00) {\n@@ -313,102 +330,85 @@ private void loadConfigs(boolean postInit) {\n \t\t\t\tpowerLossCfg \u003d 0.0;\n \t\t\t}\n \n-\t\t\tProperty chunkLoadSightRange \u003d config.get(Configuration.CATEGORY_GENERAL,\n-\t\t\t\t\t\"chunkSightRange\", chunkSightRange);\n+\t\t\tProperty chunkLoadSightRange \u003d config.get(Configuration.CATEGORY_GENERAL, \"chunkSightRange\", chunkSightRange);\n \t\t\tchunkLoadSightRange.comment \u003d \"Range of chunk load boundaries.\";\n \n-\t\t\tProperty laserKey \u003d config.get(Configuration.CATEGORY_GENERAL,\n-\t\t\t\t\t\"laserKeyChar\", laserKeyCode);\n+\t\t\tProperty laserKey \u003d config.get(Configuration.CATEGORY_GENERAL, \"laserKeyChar\", laserKeyCode);\n \t\t\tlaserKey.comment \u003d \"Default key to toggle chunk load boundaries.\";\n \t\t\tlaserKeyCode \u003d laserKey.getInt();\n-\t\t} catch (Exception e) {\n+\t\t} catch(Exception e) {\n \t\t\tlogger.log(Level.SEVERE, \"Error loading Additional Pipes configs.\", e);\n \t\t} finally {\n \t\t\tconfig.save();\n \t\t}\n \t}\n \n-\tprivate void loadPipes(){\n+\tprivate void loadPipes() {\n \t\t// Item Teleport Pipe\n \t\tif(pipeItemsTeleportId !\u003d 0) {\n \t\t\tpipeItemsTeleport \u003d createPipeSpecial(pipeItemsTeleportId \u003e 0 ? pipeItemsTeleportId : -pipeItemsTeleportId, PipeItemsTeleport.class);\n-\t\t\tif (pipeItemsTeleportId \u003e 0) {\n-\t\t\t\tGameRegistry.addRecipe(new ItemStack(pipeItemsTeleport, 4), new Object[]{\"dgd\", \u0027d\u0027, BuildCraftCore.diamondGearItem, \u0027g\u0027, Block.glass});\n-\t\t\t\tAssemblyRecipe.assemblyRecipes.add(\n-\t\t\t\t\t\tnew AssemblyRecipe(new ItemStack[]{\n-\t\t\t\t\t\t\t\tnew ItemStack(BuildCraftSilicon.redstoneChipset, 1 , 4),\n-\t\t\t\t\t\t\t\tnew ItemStack(BuildCraftTransport.pipeItemsDiamond, 8),\n-\t\t\t\t\t\t\t\tnew ItemStack(BuildCraftSilicon.redstoneChipset, 1, 3)},\n-\t\t\t\t\t\t\t\t1000, new ItemStack(pipeItemsTeleport, 8)));\n+\t\t\tif(pipeItemsTeleportId \u003e 0) {\n+\t\t\t\tGameRegistry.addRecipe(new ItemStack(pipeItemsTeleport, 4), new Object[] { \"dgd\", \u0027d\u0027, BuildCraftCore.diamondGearItem, \u0027g\u0027, Block.glass });\n+\t\t\t\tAssemblyRecipe.assemblyRecipes.add(new AssemblyRecipe(new ItemStack[] { new ItemStack(BuildCraftSilicon.redstoneChipset, 1, 4), new ItemStack(BuildCraftTransport.pipeItemsDiamond, 8),\n+\t\t\t\t\t\tnew ItemStack(BuildCraftSilicon.redstoneChipset, 1, 3) }, 1000, new ItemStack(pipeItemsTeleport, 8)));\n \t\t\t}\n \n \t\t}\n \n \t\t// Liquid Teleport Pipe\n \t\tif(pipeLiquidsTeleportId !\u003d 0) {\n \t\t\tpipeLiquidsTeleport \u003d createPipeSpecial(pipeLiquidsTeleportId \u003e 0 ? pipeLiquidsTeleportId : -pipeLiquidsTeleportId, PipeLiquidsTeleport.class);\n-\t\t\tif (pipeItemsTeleport !\u003d null \u0026\u0026 pipeLiquidsTeleportId \u003e 0) {\n-\t\t\t\tGameRegistry.addRecipe(new ItemStack(pipeLiquidsTeleport), new Object[]{\"w\", \"P\", \u0027w\u0027, BuildCraftTransport.pipeWaterproof, \u0027P\u0027, pipeItemsTeleport});\n+\t\t\tif(pipeItemsTeleport !\u003d null \u0026\u0026 pipeLiquidsTeleportId \u003e 0) {\n+\t\t\t\tGameRegistry.addRecipe(new ItemStack(pipeLiquidsTeleport), new Object[] { \"w\", \"P\", \u0027w\u0027, BuildCraftTransport.pipeWaterproof, \u0027P\u0027, pipeItemsTeleport });\n \t\t\t}\n \t\t}\n \n \t\t// Power Teleport Pipe\n \t\tif(pipePowerTeleportId !\u003d 0) {\n \t\t\tpipePowerTeleport \u003d createPipeSpecial(pipePowerTeleportId \u003e 0 ? pipePowerTeleportId : -pipePowerTeleportId, PipePowerTeleport.class);\n-\t\t\tif (pipeItemsTeleport !\u003d null \u0026\u0026 pipePowerTeleportId \u003e 0) {\n-\t\t\t\tGameRegistry.addRecipe(new ItemStack(pipePowerTeleport), new Object[]{\"r\", \"P\", \u0027r\u0027, Item.redstone, \u0027P\u0027, pipeItemsTeleport});\n+\t\t\tif(pipeItemsTeleport !\u003d null \u0026\u0026 pipePowerTeleportId \u003e 0) {\n+\t\t\t\tGameRegistry.addRecipe(new ItemStack(pipePowerTeleport), new Object[] { \"r\", \"P\", \u0027r\u0027, Item.redstone, \u0027P\u0027, pipeItemsTeleport });\n \t\t\t}\n \t\t}\n \n \t\t// Distributor Pipe\n-\t\tpipeItemsDistributor \u003d doCreatePipeAndRecipe(pipeItemsDistributorId, PipeItemsDistributor.class,\n-\t\t\t\tnew Object[]{\" r \", \"IgI\", \u0027r\u0027, Item.redstone, \u0027I\u0027, Item.ingotIron, \u0027g\u0027, Block.glass});\n+\t\tpipeItemsDistributor \u003d doCreatePipeAndRecipe(pipeItemsDistributorId, PipeItemsDistributor.class, new Object[] { \" r \", \"IgI\", \u0027r\u0027, Item.redstone, \u0027I\u0027, Item.ingotIron, \u0027g\u0027, Block.glass });\n \n \t\t// Advanced Wooded Pipe\n-\t\tpipeItemsAdvancedWood \u003d doCreatePipeAndRecipe(pipeItemsAdvancedWoodId, 8, PipeItemsAdvancedWood.class,\n-\t\t\t\tnew Object[]{\"WgW\", \u0027W\u0027, BuildCraftCore.woodenGearItem, \u0027g\u0027, Block.glass});\n+\t\tpipeItemsAdvancedWood \u003d doCreatePipeAndRecipe(pipeItemsAdvancedWoodId, 8, PipeItemsAdvancedWood.class, new Object[] { \"WgW\", \u0027W\u0027, BuildCraftCore.woodenGearItem, \u0027g\u0027, Block.glass });\n \n \t\t// Advanced Insertion Pipe\n \t\tpipeItemsAdvancedInsertion \u003d doCreatePipeAndRecipe(pipeItemsAdvancedInsertionId, 8, PipeItemsAdvancedInsertion.class,\n-\t\t\t\tnew Object[]{\"IgI\", \u0027I\u0027, BuildCraftCore.ironGearItem, \u0027g\u0027, Block.glass});\n+\t\t\t\tnew Object[] { \"IgI\", \u0027I\u0027, BuildCraftCore.ironGearItem, \u0027g\u0027, Block.glass });\n \n \t\t// Redstone Pipe\n-\t\tpipeItemsRedStone \u003d doCreatePipeAndRecipe(pipeItemsRedStoneId, 8, PipeItemsRedstone.class,\n-\t\t\t\tnew Object[]{\"RgR\", \u0027R\u0027, Item.redstone, \u0027g\u0027, Block.glass});\n+\t\tpipeItemsRedStone \u003d doCreatePipeAndRecipe(pipeItemsRedStoneId, 8, PipeItemsRedstone.class, new Object[] { \"RgR\", \u0027R\u0027, Item.redstone, \u0027g\u0027, Block.glass });\n \t\t// Redstone Liquid Pipe\n-\t\tpipeLiquidsRedstone \u003d doCreatePipeAndRecipe(pipeLiquidsRedstoneId, PipeLiquidsRedstone.class,\n-\t\t\t\tnew Object[]{\"w\", \"P\", \u0027w\u0027, BuildCraftTransport.pipeWaterproof, \u0027P\u0027, pipeItemsRedStone});\n+\t\tpipeLiquidsRedstone \u003d doCreatePipeAndRecipe(pipeLiquidsRedstoneId, PipeLiquidsRedstone.class, new Object[] { \"w\", \"P\", \u0027w\u0027, BuildCraftTransport.pipeWaterproof, \u0027P\u0027, pipeItemsRedStone });\n \n \t\t// Closed Items Pipe\n-\t\tpipeItemsClosed \u003d doCreatePipeAndRecipe(pipeItemsClosedId, PipeItemsClosed.class,\n-\t\t\t\tnew Object[]{\"r\", \"I\", \u0027I\u0027, BuildCraftTransport.pipeItemsVoid, \u0027i\u0027, BuildCraftCore.ironGearItem});\n-\t\t//switch pipes\n-\t\tpipeItemsSwitch \u003d doCreatePipeAndRecipe(pipeItemsSwitchId, 8, PipeSwitchItems.class,\n-\t\t\t\tnew Object[]{\"GgG\", \u0027g\u0027, Block.glass, \u0027G\u0027, BuildCraftCore.goldGearItem});\n-\t\tpipePowerSwitch \u003d doCreatePipeAndRecipe(pipePowerSwitchId, PipeSwitchPower.class,\n-\t\t\t\tnew Object[]{\"r\", \"I\", \u0027I\u0027, pipeItemsSwitch, \u0027r\u0027, Item.redstone});\n-\t\tpipeLiquidsSwitch \u003d doCreatePipeAndRecipe(pipeLiquidsSwitchId, PipeSwitchLiquids.class,\n-\t\t\t\tnew Object[]{\"w\", \"I\", \u0027I\u0027, pipeItemsSwitch, \u0027w\u0027, BuildCraftTransport.pipeWaterproof});\n-\n-\t\t//water pump pipe\n-\t\tpipeLiquidsWaterPump \u003d doCreatePipeAndRecipe(pipeLiquidsWaterPumpId, PipeLiquidsWaterPump.class,\n-\t\t\t\tnew Object[]{\" L \", \"rPr\", \" W \",\n-\t\t\t\u0027r\u0027, Item.redstone,\n-\t\t\t\u0027P\u0027, BuildCraftCore.ironGearItem,\n-\t\t\t\u0027L\u0027, BuildCraftTransport.pipeLiquidsGold,\n-\t\t\t\u0027w\u0027, BuildCraftTransport.pipeWaterproof,\n-\t\t\t\u0027W\u0027, BuildCraftTransport.pipeLiquidsWood});\n+\t\tpipeItemsClosed \u003d doCreatePipeAndRecipe(pipeItemsClosedId, PipeItemsClosed.class, new Object[] { \"r\", \"I\", \u0027I\u0027, BuildCraftTransport.pipeItemsVoid, \u0027i\u0027, BuildCraftCore.ironGearItem });\n+\t\t// switch pipes\n+\t\tpipeItemsSwitch \u003d doCreatePipeAndRecipe(pipeItemsSwitchId, 8, PipeSwitchItems.class, new Object[] { \"GgG\", \u0027g\u0027, Block.glass, \u0027G\u0027, BuildCraftCore.goldGearItem });\n+\t\tpipePowerSwitch \u003d doCreatePipeAndRecipe(pipePowerSwitchId, PipeSwitchPower.class, new Object[] { \"r\", \"I\", \u0027I\u0027, pipeItemsSwitch, \u0027r\u0027, Item.redstone });\n+\t\tpipeLiquidsSwitch \u003d doCreatePipeAndRecipe(pipeLiquidsSwitchId, PipeSwitchLiquids.class, new Object[] { \"w\", \"I\", \u0027I\u0027, pipeItemsSwitch, \u0027w\u0027, BuildCraftTransport.pipeWaterproof });\n+\n+\t\t// water pump pipe\n+\t\tpipeLiquidsWaterPump \u003d doCreatePipeAndRecipe(pipeLiquidsWaterPumpId, PipeLiquidsWaterPump.class, new Object[] { \" L \", \"rPr\", \" W \", \u0027r\u0027, Item.redstone, \u0027P\u0027, BuildCraftCore.ironGearItem, \u0027L\u0027,\n+\t\t\t\tBuildCraftTransport.pipeLiquidsGold, \u0027w\u0027, BuildCraftTransport.pipeWaterproof, \u0027W\u0027, BuildCraftTransport.pipeLiquidsWood });\n \t}\n \n \tprivate Item doCreatePipeAndRecipe(int id, Class\u003c? extends Pipe\u003e clas, Object[] recipe) {\n \t\treturn doCreatePipeAndRecipe(id, 1, clas, recipe);\n \t}\n \n \tprivate Item doCreatePipeAndRecipe(int id, int output, Class\u003c? extends Pipe\u003e clas, Object[] recipe) {\n-\t\tif(id \u003d\u003d 0) return null;\n+\t\tif(id \u003d\u003d 0)\n+\t\t\treturn null;\n \t\tItem pipe \u003d createPipe(id \u003e 0 ? id : -id, clas);\n \t\tfor(Object obj : recipe) {\n-\t\t\tif(obj \u003d\u003d null) return pipe;\n+\t\t\tif(obj \u003d\u003d null)\n+\t\t\t\treturn pipe;\n \t\t}\n \t\tGameRegistry.addRecipe(new ItemStack(pipe, output), recipe);\n \t\treturn pipe;\n@@ -421,15 +421,15 @@ private static Item createPipe(int id, Class\u003c? extends Pipe\u003e clas) {\n \t\treturn res;\n \t}\n \n-\t//special pipe code\n+\t// special pipe code\n \tprivate static class ItemPipeAP extends ItemPipe {\n \t\tprotected ItemPipeAP(int i) {\n \t\t\tsuper(i);\n \t\t}\n \n \t\t@Override\n \t\t@SideOnly(Side.CLIENT)\n-\t\tpublic EnumRarity getRarity(ItemStack stack){\n+\t\tpublic EnumRarity getRarity(ItemStack stack) {\n \t\t\treturn EnumRarity.rare;\n \t\t}\n \t}\n@@ -444,16 +444,17 @@ private Item createPipeSpecial(int id, Class\u003c? extends Pipe\u003e clas) {\n \t\treturn item;\n \t}\n \n-\t//legacy method\n+\t// legacy method\n \tpublic static boolean isPipe(Item item) {\n-\t\tif (item !\u003d null \u0026\u0026 BlockGenericPipe.pipes.containsKey(item.itemID)) {\n+\t\tif(item !\u003d null \u0026\u0026 BlockGenericPipe.pipes.containsKey(item.itemID)) {\n \t\t\treturn true;\n \t\t}\n \t\treturn false;\n \t}\n+\n \t@ForgeSubscribe\n \t@SideOnly(Side.CLIENT)\n-\tpublic void textureHook(TextureStitchEvent.Pre event) throws IOException{\n+\tpublic void textureHook(TextureStitchEvent.Pre event) throws IOException {\n \t\tTextures.registerIcons(event.map);\n \t}\n }"
        },
        {
          "file_name": "additionalpipes/ChunkLoadViewDataProxy.java",
          "patch": "@@ -28,10 +28,10 @@\n public class ChunkLoadViewDataProxy implements IScheduledTickHandler, Comparator\u003cChunkCoordIntPair\u003e {\n \tpublic static final int MAX_SIGHT_RANGE \u003d 31;\n \n-\t//used by server\n+\t// used by server\n \tprivate int sightRange;\n \n-\t//used by client\n+\t// used by client\n \tprivate List\u003cBox\u003e lasers;\n \tprivate ChunkCoordIntPair[] persistentChunks;\n \tprivate boolean active \u003d false;\n@@ -43,23 +43,23 @@ public ChunkLoadViewDataProxy(int chunkSightRange) {\n \t\tactive \u003d false;\n \t}\n \n-\t//laser methods\n+\t// laser methods\n \n \t@SideOnly(Side.CLIENT)\n-\tpublic void toggleLasers(){\n-\t\tif(lasersActive()){\n+\tpublic void toggleLasers() {\n+\t\tif(lasersActive()) {\n \t\t\tdeactivateLasers();\n \t\t} else {\n \t\t\tactivateLasers();\n \t\t}\n \t}\n \n \t@SideOnly(Side.CLIENT)\n-\tpublic void activateLasers(){\n+\tpublic void activateLasers() {\n \t\tdeactivateLasers();\n \t\tEntityClientPlayerMP player \u003d FMLClientHandler.instance().getClient().thePlayer;\n \t\tint playerY \u003d (int) player.posY - 1;\n-\t\tfor (ChunkCoordIntPair coords : persistentChunks) {\n+\t\tfor(ChunkCoordIntPair coords : persistentChunks) {\n \t\t\tint xCoord \u003d coords.chunkXPos * 16;\n \t\t\tint zCoord \u003d coords.chunkZPos * 16;\n \n@@ -76,7 +76,6 @@ public void activateLasers(){\n \t\t\toutsideLaser.createLasers(player.worldObj, LaserKind.Blue);\n \t\t\tlasers.add(outsideLaser);\n \n-\n \t\t\tBox insideLaser \u003d new Box();\n \t\t\tinsideLaser.initialize(xCoord + 7, playerY, zCoord + 7, xCoord + 9, playerY, zCoord + 9);\n \t\t\tinsideLaser.createLasers(player.worldObj, LaserKind.Red);\n@@ -95,20 +94,20 @@ public void activateLasers(){\n \t}\n \n \t@SideOnly(Side.CLIENT)\n-\tpublic void deactivateLasers(){\n-\t\tfor (Box laser : lasers) {\n+\tpublic void deactivateLasers() {\n+\t\tfor(Box laser : lasers) {\n \t\t\tlaser.deleteLasers();\n \t\t}\n \t\tlasers.clear();\n \t\tactive \u003d false;\n \t}\n \n \t@SideOnly(Side.CLIENT)\n-\tpublic boolean lasersActive(){\n+\tpublic boolean lasersActive() {\n \t\treturn active;\n \t}\n \n-\t//packet methods\n+\t// packet methods\n \n \t@SideOnly(Side.CLIENT)\n \tpublic void requestPersistentChunks() {\n@@ -119,8 +118,9 @@ public void requestPersistentChunks() {\n \t@SideOnly(Side.CLIENT)\n \tpublic void receivePersistentChunks(ChunkCoordIntPair[] chunks) {\n \t\tboolean changed \u003d true;\n-\t\t//check if arrays have equal contents\n-\t\t//do this on the client since it\u0027s only rendering, and it reduces server load\n+\t\t// check if arrays have equal contents\n+\t\t// do this on the client since it\u0027s only rendering, and it reduces\n+\t\t// server load\n \t\tif(persistentChunks.length \u003d\u003d chunks.length) {\n \t\t\tchanged \u003d false;\n \t\t\tArrays.sort(chunks, this);\n@@ -141,8 +141,8 @@ public void receivePersistentChunks(ChunkCoordIntPair[] chunks) {\n \t\t}\n \t}\n \n-\t//sets how far the server will search for chunkloaded chunks\n-\t//when sending data to the player\n+\t// sets how far the server will search for chunkloaded chunks\n+\t// when sending data to the player\n \tpublic void setSightRange(int range) {\n \t\tsightRange \u003d range;\n \t\tif(sightRange \u003e MAX_SIGHT_RANGE)\n@@ -151,16 +151,17 @@ public void setSightRange(int range) {\n \t}\n \n \tpublic void sendPersistentChunksToPlayer(EntityPlayerMP player) {\n-\t\tif(!AdditionalPipes.instance.chunkSight) { return;}\n-\t\tif(sightRange \u003e MAX_SIGHT_RANGE) sightRange \u003d MAX_SIGHT_RANGE;\n+\t\tif(!AdditionalPipes.instance.chunkSight) {\n+\t\t\treturn;\n+\t\t}\n+\t\tif(sightRange \u003e MAX_SIGHT_RANGE)\n+\t\t\tsightRange \u003d MAX_SIGHT_RANGE;\n \n-\t\tSetMultimap\u003cChunkCoordIntPair, Ticket\u003e persistentChunks \u003d\n-\t\t\t\tForgeChunkManager.getPersistentChunksFor(player.worldObj);\n+\t\tSetMultimap\u003cChunkCoordIntPair, Ticket\u003e persistentChunks \u003d ForgeChunkManager.getPersistentChunksFor(player.worldObj);\n \t\tList\u003cChunkCoordIntPair\u003e chunksInRange \u003d new LinkedList\u003cChunkCoordIntPair\u003e();\n-\t\tint playerX \u003d (((int) player.posX) \u003e\u003e 4) - sightRange / 2,\n-\t\t\t\tplayerZ \u003d (((int) player.posZ) \u003e\u003e 4) - sightRange / 2;\n+\t\tint playerX \u003d (((int) player.posX) \u003e\u003e 4) - sightRange / 2, playerZ \u003d (((int) player.posZ) \u003e\u003e 4) - sightRange / 2;\n \n-\t\tfor(int i \u003d -sightRange; i  \u003c\u003d sightRange; i++) {\n+\t\tfor(int i \u003d -sightRange; i \u003c\u003d sightRange; i++) {\n \t\t\tfor(int j \u003d -sightRange; j \u003c\u003d sightRange; j++) {\n \t\t\t\tChunkCoordIntPair coords \u003d new ChunkCoordIntPair(playerX + i, playerZ + j);\n \t\t\t\tif(persistentChunks.containsKey(coords)) {\n@@ -180,7 +181,8 @@ public void sendPersistentChunksToPlayer(EntityPlayerMP player) {\n \t}\n \n \t@Override\n-\tpublic void tickStart(EnumSet\u003cTickType\u003e type, Object... tickData) {}\n+\tpublic void tickStart(EnumSet\u003cTickType\u003e type, Object... tickData) {\n+\t}\n \n \t@Override\n \t@SideOnly(Side.CLIENT)\n@@ -205,10 +207,10 @@ public int nextTickSpacing() {\n \t\treturn 20 * 5;\n \t}\n \n-\t//Comparator\n+\t// Comparator\n \n-\t//first - other\n-\t//assume non-null\n+\t// first - other\n+\t// assume non-null\n \t@Override\n \tpublic int compare(ChunkCoordIntPair first, ChunkCoordIntPair other) {\n \t\tint dx \u003d first.chunkXPos - other.chunkXPos;"
        },
        {
          "file_name": "additionalpipes/CommandAdditionalPipes.java",
          "patch": "@@ -25,7 +25,8 @@ public void processCommand(ICommandSender sender, String[] args) {\n \t\t\t\tif(args.length \u003d\u003d 3) {\n \t\t\t\t\ttry {\n \t\t\t\t\t\tint index \u003d Integer.parseInt(args[2]);\n-\t\t\t\t\t} catch(Exception e) {}\n+\t\t\t\t\t} catch(Exception e) {\n+\t\t\t\t\t}\n \n \t\t\t\t} else if(args.length \u003d\u003d 5) {\n \t\t\t\t\ttry {\n@@ -47,7 +48,8 @@ public void processCommand(ICommandSender sender, String[] args) {\n \t\t\t\t\t\t\t\tsender.sendChatToPlayer(sb.toString());\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n-\t\t\t\t\t} catch(Exception e) {}\n+\t\t\t\t\t} catch(Exception e) {\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t} else {\n \t\t\t\tStringBuffer sb \u003d new StringBuffer();"
        },
        {
          "file_name": "additionalpipes/GuiHandler.java",
          "patch": "@@ -14,16 +14,15 @@\n import cpw.mods.fml.common.network.IGuiHandler;\n \n public class GuiHandler implements IGuiHandler {\n-\t//Gui IDs\n+\t// Gui IDs\n \tpublic static final int PIPE_TP \u003d 1;\n \tpublic static final int PIPE_DIST \u003d 2;\n \tpublic static final int PIPE_WOODEN_ADV \u003d 3;\n \n \t@Override\n-\tpublic Object getServerGuiElement(int ID, EntityPlayer player, World world,\n-\t\t\tint x, int y, int z) {\n+\tpublic Object getServerGuiElement(int ID, EntityPlayer player, World world, int x, int y, int z) {\n \t\tTileEntity tile \u003d world.getBlockTileEntity(x, y, z);\n-\t\tif (tile \u003d\u003d null) {\n+\t\tif(tile \u003d\u003d null) {\n \t\t\treturn null;\n \t\t}\n \t\tswitch(ID) {\n@@ -39,10 +38,9 @@ public Object getServerGuiElement(int ID, EntityPlayer player, World world,\n \t}\n \n \t@Override\n-\tpublic Object getClientGuiElement(int ID, EntityPlayer player, World world,\n-\t\t\tint x, int y, int z) {\n+\tpublic Object getClientGuiElement(int ID, EntityPlayer player, World world, int x, int y, int z) {\n \t\tTileEntity tile \u003d world.getBlockTileEntity(x, y, z);\n-\t\tif (tile \u003d\u003d null) {\n+\t\tif(tile \u003d\u003d null) {\n \t\t\treturn null;\n \t\t}\n \t\tswitch(ID) {"
        },
        {
          "file_name": "additionalpipes/ItemPowerMeter.java",
          "patch": "@@ -15,14 +15,12 @@\n \tpublic ItemPowerMeter(int id) {\n \t\tsuper(id);\n \t\tsetMaxStackSize(1);\n-\t\t//setTextureFile(AdditionalPipes.TEXTURE_MASTER);\n+\t\t// setTextureFile(AdditionalPipes.TEXTURE_MASTER);\n \t\tsetCreativeTab(CreativeTabs.tabTools);\n \t}\n \n \t@Override\n-\tpublic boolean onItemUse(ItemStack stack, EntityPlayer player,\n-\t\t\tWorld world, int x, int y, int z, int side,\n-\t\t\tfloat par8, float par9, float par10) {\n+\tpublic boolean onItemUse(ItemStack stack, EntityPlayer player, World world, int x, int y, int z, int side, float par8, float par9, float par10) {\n \t\tTileEntity te \u003d world.getBlockTileEntity(x, y, z);\n \t\tboolean isPowerTile \u003d te instanceof IPowerReceptor;\n \t\tif(!world.isRemote \u0026\u0026 isPowerTile) {\n@@ -33,14 +31,8 @@ public boolean onItemUse(ItemStack stack, EntityPlayer player,\n \t\t\t\treceptor.getPowerProvider().receiveEnergy(1000, ForgeDirection.VALID_DIRECTIONS[side]);\n \t\t\t}\n \n-\t\t\tplayer.sendChatToPlayer(String.format(\"R:%d L:%d m:%d M:%d A:%d S:%d\",\n-\t\t\t\t\treceptor.powerRequest(ForgeDirection.VALID_DIRECTIONS[side]),\n-\t\t\t\t\tprovider.getLatency(),\n-\t\t\t\t\tprovider.getMinEnergyReceived(),\n-\t\t\t\t\tprovider.getMaxEnergyReceived(),\n-\t\t\t\t\tprovider.getMaxEnergyStored(),\n-\t\t\t\t\tprovider.getActivationEnergy(),\n-\t\t\t\t\tprovider.getEnergyStored()));\n+\t\t\tplayer.sendChatToPlayer(String.format(\"R:%d L:%d m:%d M:%d A:%d S:%d\", receptor.powerRequest(ForgeDirection.VALID_DIRECTIONS[side]), provider.getLatency(),\n+\t\t\t\t\tprovider.getMinEnergyReceived(), provider.getMaxEnergyReceived(), provider.getMaxEnergyStored(), provider.getActivationEnergy(), provider.getEnergyStored()));\n \t\t}\n \t\treturn isPowerTile;\n \t}"
        },
        {
          "file_name": "additionalpipes/KeyHandler.java",
          "patch": "@@ -20,9 +20,8 @@ public String getLabel() {\n \t}\n \n \t@Override\n-\tpublic void keyDown(EnumSet\u003cTickType\u003e types, KeyBinding kb,\n-\t\t\tboolean tickEnd, boolean isRepeat) {\n-\t\tif (tickEnd \u0026\u0026 kb.keyCode \u003d\u003d laserKey.keyCode) {\n+\tpublic void keyDown(EnumSet\u003cTickType\u003e types, KeyBinding kb, boolean tickEnd, boolean isRepeat) {\n+\t\tif(tickEnd \u0026\u0026 kb.keyCode \u003d\u003d laserKey.keyCode) {\n \t\t\tChunkLoadViewDataProxy viewer \u003d AdditionalPipes.instance.chunkLoadViewer;\n \t\t\tviewer.toggleLasers();\n \t\t\tif(viewer.lasersActive()) {\n@@ -32,7 +31,8 @@ public void keyDown(EnumSet\u003cTickType\u003e types, KeyBinding kb,\n \t}\n \n \t@Override\n-\tpublic void keyUp(EnumSet\u003cTickType\u003e types, KeyBinding kb, boolean tickEnd) {}\n+\tpublic void keyUp(EnumSet\u003cTickType\u003e types, KeyBinding kb, boolean tickEnd) {\n+\t}\n \n \t@Override\n \tpublic EnumSet\u003cTickType\u003e ticks() {"
        },
        {
          "file_name": "additionalpipes/MutiPlayerProxy.java",
          "patch": "@@ -1,20 +1,24 @@\n package buildcraft.additionalpipes;\n \n-import buildcraft.transport.ItemPipe;\n-import buildcraft.transport.Pipe;\n import net.minecraft.item.Item;\n import net.minecraft.world.World;\n+import buildcraft.transport.ItemPipe;\n+import buildcraft.transport.Pipe;\n \n public class MutiPlayerProxy {\n \tpublic boolean isServer(World world) {\n \t\treturn !world.isRemote;\n \t}\n \n-\tpublic void registerKeyHandler() {}\n+\tpublic void registerKeyHandler() {\n+\t}\n \n-\tpublic void registerRendering() {}\n+\tpublic void registerRendering() {\n+\t}\n \n-\tpublic void registerPipeRendering(Item res) {}\n+\tpublic void registerPipeRendering(Item res) {\n+\t}\n \n-\tpublic void createPipeSpecial(ItemPipe item, int id, Class\u003c? extends Pipe\u003e clas) {}\n+\tpublic void createPipeSpecial(ItemPipe item, int id, Class\u003c? extends Pipe\u003e clas) {\n+\t}\n }"
        },
        {
          "file_name": "additionalpipes/MutiPlayerProxyClient.java",
          "patch": "@@ -16,8 +16,7 @@\n \n \t@Override\n \tpublic void registerKeyHandler() {\n-\t\tKeyHandler.laserKey \u003d new KeyBinding(\"Toggle chunk loading boundries\",\n-\t\t\t\tAdditionalPipes.instance.laserKeyCode);\n+\t\tKeyHandler.laserKey \u003d new KeyBinding(\"Toggle chunk loading boundries\", AdditionalPipes.instance.laserKeyCode);\n \n \t\tKeyBinding[] bindings \u003d new KeyBinding[] { KeyHandler.laserKey };\n \t\tboolean[] repeatableBindings \u003d new boolean[] { false };\n@@ -27,20 +26,21 @@ public void registerKeyHandler() {\n \t}\n \n \t@Override\n-\tpublic void registerPipeRendering(Item res){\n+\tpublic void registerPipeRendering(Item res) {\n \t\tMinecraftForgeClient.registerItemRenderer(res.itemID, TransportProxyClient.pipeItemRenderer);\n \t}\n \n \t@Override\n \tpublic void createPipeSpecial(ItemPipe item, int id, Class\u003c? extends Pipe\u003e clas) {\n \t\ttry {\n \t\t\tPipe dummyPipe \u003d clas.getConstructor(int.class).newInstance(id);\n-\t\t\tif (dummyPipe !\u003d null){\n+\t\t\tif(dummyPipe !\u003d null) {\n \t\t\t\titem.setPipesIcons(dummyPipe.getIconProvider());\n-\t\t\t\t//TODO look around\n+\t\t\t\t// TODO look around\n \t\t\t\titem.setPipeIconIndex(dummyPipe.getIconIndex(ForgeDirection.VALID_DIRECTIONS[0]));\n-\t\t\t\t//item.setTextureIndex(dummyPipe.getTextureIndexForItem());\n+\t\t\t\t// item.setTextureIndex(dummyPipe.getTextureIndexForItem());\n \t\t\t}\n-\t\t} catch(Exception e) {}\n+\t\t} catch(Exception e) {\n+\t\t}\n \t}\n }"
        },
        {
          "file_name": "additionalpipes/chunkloader/BlockChunkLoader.java",
          "patch": "@@ -13,20 +13,20 @@\n \n \tpublic BlockChunkLoader(int BlockID, int i) {\n \t\tsuper(BlockID, Material.cloth);\n-\t\t//setTextureFile(AdditionalPipes.TEXTURE_MASTER);\n+\t\t// setTextureFile(AdditionalPipes.TEXTURE_MASTER);\n \t\tsetCreativeTab(CreativeTabs.tabRedstone);\n \t}\n \n \t@Override\n \tpublic void onBlockAdded(World world, int i, int j, int k) {\n \t\tsuper.onBlockAdded(world, i, j, k);\n-\t\t//TODO implement?\n+\t\t// TODO implement?\n \t}\n \n \t@Override\n \tpublic void breakBlock(World world, int i, int j, int k, int p1, int p2) {\n \t\tsuper.breakBlock(world, i, j, k, p2, p2);\n-\t\t//TODO implement?\n+\t\t// TODO implement?\n \t}\n \n \t@Override\n@@ -38,14 +38,14 @@ public TileEntity createTileEntity(World world, int meta) {\n \tpublic TileEntity createNewTileEntity(World world) {\n \t\treturn null;\n \t}\n+\n \t@Override\n-\tpublic Icon getIcon(int par1, int par2)\n-\t{\n+\tpublic Icon getIcon(int par1, int par2) {\n \t\treturn Textures.tetherTexture;\n \t}\n+\n \t@Override\n-\tpublic void registerIcons(IconRegister par1IconRegister)\n-\t{\n-\t\t//let Texutre class do it work\n+\tpublic void registerIcons(IconRegister par1IconRegister) {\n+\t\t// let Texutre class do it work\n \t}\n }\n\\ No newline at end of file"
        },
        {
          "file_name": "additionalpipes/chunkloader/TileChunkLoader.java",
          "patch": "@@ -19,10 +19,9 @@\n \tpublic List\u003cChunkCoordIntPair\u003e getLoadArea() {\n \t\tList\u003cChunkCoordIntPair\u003e loadArea \u003d new LinkedList\u003cChunkCoordIntPair\u003e();\n \n-\t\tfor (int x \u003d -loadDistance; x \u003c loadDistance + 1; x++) {\n-\t\t\tfor (int z \u003d -loadDistance; z \u003c loadDistance + 1; z++) {\n-\t\t\t\tChunkCoordIntPair chunkCoords \u003d new ChunkCoordIntPair(\n-\t\t\t\t\t\t(xCoord \u003e\u003e 4) + x, (zCoord \u003e\u003e 4) + z);\n+\t\tfor(int x \u003d -loadDistance; x \u003c loadDistance + 1; x++) {\n+\t\t\tfor(int z \u003d -loadDistance; z \u003c loadDistance + 1; z++) {\n+\t\t\t\tChunkCoordIntPair chunkCoords \u003d new ChunkCoordIntPair((xCoord \u003e\u003e 4) + x, (zCoord \u003e\u003e 4) + z);\n \n \t\t\t\tloadArea.add(chunkCoords);\n \t\t\t}\n@@ -34,10 +33,9 @@\n \t@Override\n \tpublic void validate() {\n \t\tsuper.validate();\n-\t\tif (!worldObj.isRemote \u0026\u0026 chunkTicket \u003d\u003d null) {\n-\t\t\tTicket ticket \u003d ForgeChunkManager.requestTicket(\n-\t\t\t\t\tAdditionalPipes.instance, worldObj, Type.NORMAL);\n-\t\t\tif (ticket !\u003d null) {\n+\t\tif(!worldObj.isRemote \u0026\u0026 chunkTicket \u003d\u003d null) {\n+\t\t\tTicket ticket \u003d ForgeChunkManager.requestTicket(AdditionalPipes.instance, worldObj, Type.NORMAL);\n+\t\t\tif(ticket !\u003d null) {\n \t\t\t\tforceChunkLoading(ticket);\n \t\t\t}\n \t\t}\n@@ -57,23 +55,21 @@ public void setLoadDistance(int dist) {\n \tpublic void forceChunkLoading(Ticket ticket) {\n \t\tstopChunkLoading();\n \t\tchunkTicket \u003d ticket;\n-\t\tfor (ChunkCoordIntPair coord : getLoadArea()) {\n-\t\t\tAdditionalPipes.instance.logger.info(\n-\t\t\t\t\tString.format(\"Force loading chunk %s in %s\",\n-\t\t\t\t\t\t\tcoord, worldObj.provider.getClass()));\n+\t\tfor(ChunkCoordIntPair coord : getLoadArea()) {\n+\t\t\tAdditionalPipes.instance.logger.info(String.format(\"Force loading chunk %s in %s\", coord, worldObj.provider.getClass()));\n \t\t\tForgeChunkManager.forceChunk(chunkTicket, coord);\n \t\t}\n \t}\n \n \tpublic void unforceChunkLoading() {\n-\t\tfor (Object obj : chunkTicket.getChunkList()) {\n+\t\tfor(Object obj : chunkTicket.getChunkList()) {\n \t\t\tChunkCoordIntPair coord \u003d (ChunkCoordIntPair) obj;\n \t\t\tForgeChunkManager.unforceChunk(chunkTicket, coord);\n \t\t}\n \t}\n \n \tpublic void stopChunkLoading() {\n-\t\tif (chunkTicket !\u003d null) {\n+\t\tif(chunkTicket !\u003d null) {\n \t\t\tForgeChunkManager.releaseTicket(chunkTicket);\n \t\t\tchunkTicket \u003d null;\n \t\t}"
        },
        {
          "file_name": "additionalpipes/gates/APTrigger.java",
          "patch": "@@ -10,6 +10,7 @@\n import buildcraft.api.gates.TriggerParameter;\n import cpw.mods.fml.relauncher.Side;\n import cpw.mods.fml.relauncher.SideOnly;\n+\n public abstract class APTrigger implements ITrigger {\n \n \tprotected int id;\n@@ -24,14 +25,14 @@ public int getId() {\n \t\treturn this.id;\n \t}\n \n-    @Override\n-    @SideOnly(Side.CLIENT)\n-    public IIconProvider getIconProvider() {\n-    \treturn Textures.actionIconProvider;\n-    }\n-    \n-    @Override\n-    public abstract int getIconIndex();\n+\t@Override\n+\t@SideOnly(Side.CLIENT)\n+\tpublic IIconProvider getIconProvider() {\n+\t\treturn Textures.actionIconProvider;\n+\t}\n+\n+\t@Override\n+\tpublic abstract int getIconIndex();\n \n \t@Override\n \tpublic boolean hasParameter() {"
        },
        {
          "file_name": "additionalpipes/gates/GateProvider.java",
          "patch": "@@ -15,7 +15,7 @@\n \n \t@Override\n \tpublic LinkedList\u003cITrigger\u003e getPipeTriggers(IPipe pipe) {\n-\t\tLinkedList \u003cITrigger\u003e list \u003d new LinkedList\u003cITrigger\u003e();\n+\t\tLinkedList\u003cITrigger\u003e list \u003d new LinkedList\u003cITrigger\u003e();\n \t\tif(pipe instanceof PipeItemsClosed) {\n \t\t\tlist.add(AdditionalPipes.instance.triggerPipeClosed);\n \t\t}"
        },
        {
          "file_name": "additionalpipes/gates/TriggerPhasedSignal.java",
          "patch": "@@ -18,7 +18,7 @@ public TriggerPhasedSignal(int id, IPipe.WireColor colour) {\n \n \t@Override\n \tpublic String getDescription() {\n-\t\tswitch (colour) {\n+\t\tswitch(colour) {\n \t\tcase Red:\n \t\t\treturn \"Red Phased Signal\";\n \t\tcase Blue:\n@@ -33,7 +33,7 @@ public String getDescription() {\n \n \t@Override\n \tpublic int getIconIndex() {\n-\t\tswitch (colour) {\n+\t\tswitch(colour) {\n \t\tcase Red:\n \t\t\treturn 2;\n \t\tcase Blue:"
        },
        {
          "file_name": "additionalpipes/gui/ContainerAdvancedWoodPipe.java",
          "patch": "@@ -23,8 +23,8 @@\n \n \tprivate boolean exclude;\n \n-\tpublic ContainerAdvancedWoodPipe (IInventory playerInventory, PipeLogicAdvancedWood filterInventory) {\n-\t\tsuper (filterInventory.getSizeInventory());\n+\tpublic ContainerAdvancedWoodPipe(IInventory playerInventory, PipeLogicAdvancedWood filterInventory) {\n+\t\tsuper(filterInventory.getSizeInventory());\n \t\tlogic \u003d filterInventory;\n \t\texclude \u003d !logic.exclude;\n \t\tplayerIInventory \u003d playerInventory;\n@@ -36,7 +36,6 @@ public ContainerAdvancedWoodPipe (IInventory playerInventory, PipeLogicAdvancedW\n \t\t\taddSlotToContainer(new Slot(filterInventory, j1 + k * 9, 8 + j1 * 18, 18 + k * 18));\n \t\t}\n \n-\n \t\tfor(int l \u003d 0; l \u003c 3; l++) {\n \t\t\tfor(int k1 \u003d 0; k1 \u003c 9; k1++) {\n \t\t\t\taddSlotToContainer(new Slot(playerInventory, k1 + l * 9 + 9, 8 + k1 * 18, 76 + l * 18));\n@@ -57,7 +56,7 @@ public boolean canInteractWith(EntityPlayer entityplayer) {\n \t@Override\n \tpublic void detectAndSendChanges() {\n \t\tsuper.detectAndSendChanges();\n-\t\tfor (Object crafter : crafters) {\n+\t\tfor(Object crafter : crafters) {\n \t\t\tif(exclude !\u003d logic.exclude) {\n \t\t\t\t((ICrafting) crafter).sendProgressBarUpdate(this, 0, logic.exclude ? 1 : 0);\n \t\t\t}"
        },
        {
          "file_name": "additionalpipes/gui/ContainerDistributionPipe.java",
          "patch": "@@ -26,7 +26,7 @@ public boolean canInteractWith(EntityPlayer player) {\n \t@Override\n \tpublic void detectAndSendChanges() {\n \t\tsuper.detectAndSendChanges();\n-\t\tfor (Object obj : crafters) {\n+\t\tfor(Object obj : crafters) {\n \t\t\tICrafting crafter \u003d (ICrafting) obj;\n \t\t\tfor(int i \u003d 0; i \u003c lastDistData.length; i++) {\n \t\t\t\tif(lastDistData[i] !\u003d pipe.logic.distData[i]) {"
        },
        {
          "file_name": "additionalpipes/gui/ContainerPipeClosed.java",
          "patch": "@@ -18,23 +18,20 @@ public ContainerPipeClosed(InventoryPlayer inventory, Pipe pipe) {\n \t\tint var3;\n \t\tint var4;\n \n-\t\tfor (var3 \u003d 0; var3 \u003c 3; ++var3) {\n-\t\t\tfor (var4 \u003d 0; var4 \u003c 3; ++var4) {\n-\t\t\t\taddSlotToContainer(new Slot(this.pipe, var4\n-\t\t\t\t\t\t+ var3 * 3, 62 + var4 * 18, 17 + var3 * 18));\n+\t\tfor(var3 \u003d 0; var3 \u003c 3; ++var3) {\n+\t\t\tfor(var4 \u003d 0; var4 \u003c 3; ++var4) {\n+\t\t\t\taddSlotToContainer(new Slot(this.pipe, var4 + var3 * 3, 62 + var4 * 18, 17 + var3 * 18));\n \t\t\t}\n \t\t}\n \n-\t\tfor (var3 \u003d 0; var3 \u003c 3; ++var3) {\n-\t\t\tfor (var4 \u003d 0; var4 \u003c 9; ++var4) {\n-\t\t\t\taddSlotToContainer(new Slot(inventory, var4 + var3\n-\t\t\t\t\t\t* 9 + 9, 8 + var4 * 18, 84 + var3 * 18));\n+\t\tfor(var3 \u003d 0; var3 \u003c 3; ++var3) {\n+\t\t\tfor(var4 \u003d 0; var4 \u003c 9; ++var4) {\n+\t\t\t\taddSlotToContainer(new Slot(inventory, var4 + var3 * 9 + 9, 8 + var4 * 18, 84 + var3 * 18));\n \t\t\t}\n \t\t}\n \n-\t\tfor (var3 \u003d 0; var3 \u003c 9; ++var3) {\n-\t\t\taddSlotToContainer(new Slot(inventory, var3,\n-\t\t\t\t\t8 + var3 * 18, 142));\n+\t\tfor(var3 \u003d 0; var3 \u003c 9; ++var3) {\n+\t\t\taddSlotToContainer(new Slot(inventory, var3, 8 + var3 * 18, 142));\n \t\t}\n \t}\n \n@@ -52,25 +49,25 @@ public ItemStack transferStackInSlot(EntityPlayer par1EntityPlayer, int par2) {\n \t\tItemStack var3 \u003d null;\n \t\tSlot var4 \u003d (Slot) inventorySlots.get(par2);\n \n-\t\tif (var4 !\u003d null \u0026\u0026 var4.getHasStack()) {\n+\t\tif(var4 !\u003d null \u0026\u0026 var4.getHasStack()) {\n \t\t\tItemStack var5 \u003d var4.getStack();\n \t\t\tvar3 \u003d var5.copy();\n \n-\t\t\tif (par2 \u003c 9) {\n-\t\t\t\tif (!mergeItemStack(var5, 9, 45, true)) {\n+\t\t\tif(par2 \u003c 9) {\n+\t\t\t\tif(!mergeItemStack(var5, 9, 45, true)) {\n \t\t\t\t\treturn null;\n \t\t\t\t}\n-\t\t\t} else if (!mergeItemStack(var5, 0, 9, false)) {\n+\t\t\t} else if(!mergeItemStack(var5, 0, 9, false)) {\n \t\t\t\treturn null;\n \t\t\t}\n \n-\t\t\tif (var5.stackSize \u003d\u003d 0) {\n+\t\t\tif(var5.stackSize \u003d\u003d 0) {\n \t\t\t\tvar4.putStack((ItemStack) null);\n \t\t\t} else {\n \t\t\t\tvar4.onSlotChanged();\n \t\t\t}\n \n-\t\t\tif (var5.stackSize \u003d\u003d var3.stackSize) {\n+\t\t\tif(var5.stackSize \u003d\u003d var3.stackSize) {\n \t\t\t\treturn null;\n \t\t\t}\n "
        },
        {
          "file_name": "additionalpipes/gui/ContainerTeleportPipe.java",
          "patch": "@@ -63,14 +63,14 @@ public boolean canInteractWith(EntityPlayer entityplayer) {\n \tpublic void detectAndSendChanges() {\n \t\tsuper.detectAndSendChanges();\n \t\tint connectedPipesNew \u003d connectedPipes;\n-\t\tif(ticks % 40 \u003d\u003d 0) { //reduce lag\n+\t\tif(ticks % 40 \u003d\u003d 0) { // reduce lag\n \t\t\tticks \u003d 0;\n \t\t\tAdditionalPipes.instance.logger.info(\"Old connected:\" + connectedPipesNew);\n \t\t\tconnectedPipesNew \u003d TeleportManager.instance.getConnectedPipes(pipe, false).size();\n \t\t\tAdditionalPipes.instance.logger.info(\"New connected:\" + connectedPipesNew);\n \t\t}\n \t\tticks++;\n-\t\tfor (Object crafter : crafters) {\n+\t\tfor(Object crafter : crafters) {\n \t\t\tif(freq !\u003d pipe.logic.getFrequency()) {\n \t\t\t\t((ICrafting) crafter).sendProgressBarUpdate(this, 0, pipe.logic.getFrequency());\n \t\t\t}"
        },
        {
          "file_name": "additionalpipes/gui/GuiAdvancedWoodPipe.java",
          "patch": "@@ -39,7 +39,7 @@ public GuiAdvancedWoodPipe(IInventory playerInventorys, TileGenericPipe containe\n \t\tplayerInventory \u003d playerInventorys;\n \t\tfilterInventory \u003d (PipeLogicAdvancedWood) container.pipe.logic;\n \t\tthis.container \u003d container;\n-\t\t//container \u003d theContainer;\n+\t\t// container \u003d theContainer;\n \t\txSize \u003d 175;\n \t\tySize \u003d 156;\n \n@@ -50,16 +50,15 @@ public void initGui() {\n \t\tsuper.initGui();\n \t\tint guiX \u003d (width - xSize) / 2;\n \t\tint guiY \u003d (height - ySize) / 2;\n-\t\tbuttons[0] \u003d  new GuiButton(1, guiX + 8, guiY + 40, 140, 20, \"These items are required\");\n+\t\tbuttons[0] \u003d new GuiButton(1, guiX + 8, guiY + 40, 140, 20, \"These items are required\");\n \t\tbuttonList.add(buttons[0]);\n \t}\n \n \t@Override\n \tprotected void drawGuiContainerForegroundLayer(int p1, int p2) {\n-\t\tif (((PipeLogicAdvancedWood)container.pipe.logic).exclude) {\n+\t\tif(((PipeLogicAdvancedWood) container.pipe.logic).exclude) {\n \t\t\tbuttons[0].displayString \u003d \"These items are excluded\";\n-\t\t}\n-\t\telse {\n+\t\t} else {\n \t\t\tbuttons[0].displayString \u003d \"These items are required\";\n \t\t}\n \n@@ -69,7 +68,7 @@ protected void drawGuiContainerForegroundLayer(int p1, int p2) {\n \n \t@Override\n \tprotected void actionPerformed(GuiButton guibutton) {\n-\t\tif (guibutton.id \u003d\u003d 1) {\n+\t\tif(guibutton.id \u003d\u003d 1) {\n \t\t\tPacketAdditionalPipes packet \u003d new PacketAdditionalPipes(NetworkHandler.ADV_WOOD_DATA, false);\n \t\t\tpacket.writeInt(container.xCoord);\n \t\t\tpacket.writeInt(container.yCoord);\n@@ -80,7 +79,7 @@ protected void actionPerformed(GuiButton guibutton) {\n \n \t@Override\n \tprotected void drawGuiContainerBackgroundLayer(float f, int i, int j) {\n-\t\t\n+\n \t\tGL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);\n \t\tmc.renderEngine.bindTexture(AdditionalPipes.TEXTURE_GUI_ADVANCEDWOOD);\n \t\tint j1 \u003d (width - xSize) / 2;"
        },
        {
          "file_name": "additionalpipes/gui/GuiDistributionPipe.java",
          "patch": "@@ -39,41 +39,42 @@ public GuiDistributionPipe(TileGenericPipe container) {\n \t@Override\n \tpublic void initGui() {\n \t\tsuper.initGui();\n-\t\t//int bw \u003d this.xSize - 20;\n+\t\t// int bw \u003d this.xSize - 20;\n \t\tint guiX \u003d (width - xSize) / 2 + 30;\n \t\tint guiY \u003d (height - ySize) / 2 - 10;\n \n-\t\tbuttonList.add(buttons[0]  \u003d  new GuiButton(1, guiX + 1,       guiY + 24, 20, 17, \"-\"));\n-\t\tbuttonList.add(buttons[1]  \u003d  new GuiButton(2, guiX + 3 + 20,  guiY + 24, 30, 17, \"0\"));\n-\t\tbuttonList.add(buttons[2]  \u003d  new GuiButton(3, guiX + 5 + 50,  guiY + 24, 20, 17, \"+\"));\n+\t\tbuttonList.add(buttons[0] \u003d new GuiButton(1, guiX + 1, guiY + 24, 20, 17, \"-\"));\n+\t\tbuttonList.add(buttons[1] \u003d new GuiButton(2, guiX + 3 + 20, guiY + 24, 30, 17, \"0\"));\n+\t\tbuttonList.add(buttons[2] \u003d new GuiButton(3, guiX + 5 + 50, guiY + 24, 20, 17, \"+\"));\n \n-\t\tbuttonList.add(buttons[3]  \u003d  new GuiButton(4, guiX + 1,       guiY + 25 + 17, 20, 17, \"-\"));\n-\t\tbuttonList.add(buttons[4]  \u003d  new GuiButton(5, guiX + 3 + 20,  guiY + 25 + 17, 30, 17, \"0\"));\n-\t\tbuttonList.add(buttons[5]  \u003d  new GuiButton(6, guiX + 5 + 50,  guiY + 25 + 17, 20, 17, \"+\"));\n+\t\tbuttonList.add(buttons[3] \u003d new GuiButton(4, guiX + 1, guiY + 25 + 17, 20, 17, \"-\"));\n+\t\tbuttonList.add(buttons[4] \u003d new GuiButton(5, guiX + 3 + 20, guiY + 25 + 17, 30, 17, \"0\"));\n+\t\tbuttonList.add(buttons[5] \u003d new GuiButton(6, guiX + 5 + 50, guiY + 25 + 17, 20, 17, \"+\"));\n \n-\t\tbuttonList.add(buttons[6]  \u003d  new GuiButton(7, guiX + 1,       guiY + 26 + 17 * 2, 20, 17, \"-\"));\n-\t\tbuttonList.add(buttons[7]  \u003d  new GuiButton(8, guiX + 3 + 20,  guiY + 26 + 17 * 2, 30, 17, \"0\"));\n-\t\tbuttonList.add(buttons[8]  \u003d  new GuiButton(9, guiX + 5 + 50,  guiY + 26 + 17 * 2, 20, 17, \"+\"));\n+\t\tbuttonList.add(buttons[6] \u003d new GuiButton(7, guiX + 1, guiY + 26 + 17 * 2, 20, 17, \"-\"));\n+\t\tbuttonList.add(buttons[7] \u003d new GuiButton(8, guiX + 3 + 20, guiY + 26 + 17 * 2, 30, 17, \"0\"));\n+\t\tbuttonList.add(buttons[8] \u003d new GuiButton(9, guiX + 5 + 50, guiY + 26 + 17 * 2, 20, 17, \"+\"));\n \n-\t\tbuttonList.add(buttons[9]  \u003d  new GuiButton(10, guiX + 1,      guiY + 27 + 17 * 3, 20, 17, \"-\"));\n-\t\tbuttonList.add(buttons[10] \u003d  new GuiButton(11, guiX + 3 + 20, guiY + 27 + 17 * 3, 30, 17, \"0\"));\n-\t\tbuttonList.add(buttons[11] \u003d  new GuiButton(12, guiX + 5 + 50, guiY + 27 + 17 * 3, 20, 17, \"+\"));\n+\t\tbuttonList.add(buttons[9] \u003d new GuiButton(10, guiX + 1, guiY + 27 + 17 * 3, 20, 17, \"-\"));\n+\t\tbuttonList.add(buttons[10] \u003d new GuiButton(11, guiX + 3 + 20, guiY + 27 + 17 * 3, 30, 17, \"0\"));\n+\t\tbuttonList.add(buttons[11] \u003d new GuiButton(12, guiX + 5 + 50, guiY + 27 + 17 * 3, 20, 17, \"+\"));\n \n-\t\tbuttonList.add(buttons[12] \u003d  new GuiButton(13, guiX + 1,      guiY + 28 + 17 * 4, 20, 17, \"-\"));\n-\t\tbuttonList.add(buttons[13] \u003d  new GuiButton(14, guiX + 3 + 20, guiY + 28 + 17 * 4, 30, 17, \"0\"));\n-\t\tbuttonList.add(buttons[14] \u003d  new GuiButton(15, guiX + 5 + 50, guiY + 28 + 17 * 4, 20, 17, \"+\"));\n+\t\tbuttonList.add(buttons[12] \u003d new GuiButton(13, guiX + 1, guiY + 28 + 17 * 4, 20, 17, \"-\"));\n+\t\tbuttonList.add(buttons[13] \u003d new GuiButton(14, guiX + 3 + 20, guiY + 28 + 17 * 4, 30, 17, \"0\"));\n+\t\tbuttonList.add(buttons[14] \u003d new GuiButton(15, guiX + 5 + 50, guiY + 28 + 17 * 4, 20, 17, \"+\"));\n \n-\t\tbuttonList.add(buttons[15] \u003d  new GuiButton(16, guiX + 1,      guiY + 29 + 17 * 5, 20, 17, \"-\"));\n-\t\tbuttonList.add(buttons[16] \u003d  new GuiButton(17, guiX + 3 + 20, guiY + 29 + 17 * 5, 30, 17, \"0\"));\n-\t\tbuttonList.add(buttons[17] \u003d  new GuiButton(18, guiX + 5 + 50, guiY + 29 + 17 * 5, 20, 17, \"+\"));\n+\t\tbuttonList.add(buttons[15] \u003d new GuiButton(16, guiX + 1, guiY + 29 + 17 * 5, 20, 17, \"-\"));\n+\t\tbuttonList.add(buttons[16] \u003d new GuiButton(17, guiX + 3 + 20, guiY + 29 + 17 * 5, 30, 17, \"0\"));\n+\t\tbuttonList.add(buttons[17] \u003d new GuiButton(18, guiX + 5 + 50, guiY + 29 + 17 * 5, 20, 17, \"+\"));\n \n \t}\n+\n \t@Override\n \tprotected void drawGuiContainerForegroundLayer(int p1, int p2) {\n \t\tPipeLogicDistributor pipeLogic \u003d pipe.logic;\n-\t\tbuttons[1].displayString  \u003d \"\" + pipeLogic.distData[0];\n-\t\tbuttons[4].displayString  \u003d \"\" + pipeLogic.distData[1];\n-\t\tbuttons[7].displayString  \u003d \"\" + pipeLogic.distData[2];\n+\t\tbuttons[1].displayString \u003d \"\" + pipeLogic.distData[0];\n+\t\tbuttons[4].displayString \u003d \"\" + pipeLogic.distData[1];\n+\t\tbuttons[7].displayString \u003d \"\" + pipeLogic.distData[2];\n \t\tbuttons[10].displayString \u003d \"\" + pipeLogic.distData[3];\n \t\tbuttons[13].displayString \u003d \"\" + pipeLogic.distData[4];\n \t\tbuttons[16].displayString \u003d \"\" + pipeLogic.distData[5];\n@@ -89,50 +90,21 @@ protected void actionPerformed(GuiButton guibutton) {\n \t\t} else {\n \t\t\tnewData++;\n \t\t}\n-\t\t/* //Old code\n-\t\tswitch (guibutton.id) {\n-\t\tcase 1:\n-\t\t\tindex \u003d 0;\n-\t\t\tpipeLogic.distData[0] -\u003d 1;\n-\t\t\tbreak;\n-\t\tcase 3:\n-\t\t\tindex \u003d 0;\n-\t\t\tpipeLogic.distData[0] +\u003d 1;\n-\t\t\tbreak;\n-\t\tcase 4:\n-\t\t\tpipeLogic.distData[1] -\u003d 1;\n-\t\t\tbreak;\n-\t\tcase 6:\n-\t\t\tpipeLogic.distData[1] +\u003d 1;\n-\t\t\tbreak;\n-\t\tcase 7:\n-\t\t\tpipeLogic.distData[2] -\u003d 1;\n-\t\t\tbreak;\n-\t\tcase 9:\n-\t\t\tpipeLogic.distData[2] +\u003d 1;\n-\t\t\tbreak;\n-\t\tcase 10:\n-\t\t\tpipeLogic.distData[3] -\u003d 1;\n-\t\t\tbreak;\n-\t\tcase 12:\n-\t\t\tpipeLogic.distData[3] +\u003d 1;\n-\t\t\tbreak;\n-\t\tcase 13:\n-\t\t\tpipeLogic.distData[4] -\u003d 1;\n-\t\t\tbreak;\n-\t\tcase 15:\n-\t\t\tpipeLogic.distData[4] +\u003d 1;\n-\t\t\tbreak;\n-\t\tcase 16:\n-\t\t\tpipeLogic.distData[5] -\u003d 1;\n-\t\t\tbreak;\n-\t\tcase 18:\n-\t\t\tpipeLogic.distData[5] +\u003d 1;\n-\t\t\tbreak;\n-\t\t}\n+\t\t/*\n+\t\t * //Old code switch (guibutton.id) { case 1: index \u003d 0;\n+\t\t * pipeLogic.distData[0] -\u003d 1; break; case 3: index \u003d 0;\n+\t\t * pipeLogic.distData[0] +\u003d 1; break; case 4: pipeLogic.distData[1] -\u003d\n+\t\t * 1; break; case 6: pipeLogic.distData[1] +\u003d 1; break; case 7:\n+\t\t * pipeLogic.distData[2] -\u003d 1; break; case 9: pipeLogic.distData[2] +\u003d\n+\t\t * 1; break; case 10: pipeLogic.distData[3] -\u003d 1; break; case 12:\n+\t\t * pipeLogic.distData[3] +\u003d 1; break; case 13: pipeLogic.distData[4] -\u003d\n+\t\t * 1; break; case 15: pipeLogic.distData[4] +\u003d 1; break; case 16:\n+\t\t * pipeLogic.distData[5] -\u003d 1; break; case 18: pipeLogic.distData[5] +\u003d\n+\t\t * 1; break; }\n \t\t */\n \n-\t\tif(newData \u003c 0) return;\n+\t\tif(newData \u003c 0)\n+\t\t\treturn;\n \n \t\tPacketAdditionalPipes packet \u003d new PacketAdditionalPipes(NetworkHandler.DIST_PIPE_DATA, true);\n \t\tpacket.writeInt(pipe.xCoord);\n@@ -145,7 +117,7 @@ protected void actionPerformed(GuiButton guibutton) {\n \n \t@Override\n \tprotected void drawGuiContainerBackgroundLayer(float f, int x, int y) {\n-\t\t\n+\n \t\tGL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);\n \t\tmc.renderEngine.bindTexture(AdditionalPipes.TEXTURE_GUI_DISTRIBUTION);\n \t\tint j \u003d (width - xSize) / 2;"
        },
        {
          "file_name": "additionalpipes/gui/GuiHandler.java",
          "patch": "@@ -8,17 +8,16 @@\n import cpw.mods.fml.common.network.IGuiHandler;\n \n public class GuiHandler implements IGuiHandler {\n-\t//Gui IDs\n+\t// Gui IDs\n \tpublic static final int PIPE_TP \u003d 1;\n \tpublic static final int PIPE_DIST \u003d 2;\n \tpublic static final int PIPE_WOODEN_ADV \u003d 3;\n \tpublic static final int PIPE_CLOSED \u003d 4;\n \n \t@Override\n-\tpublic Object getServerGuiElement(int ID, EntityPlayer player, World world,\n-\t\t\tint x, int y, int z) {\n+\tpublic Object getServerGuiElement(int ID, EntityPlayer player, World world, int x, int y, int z) {\n \t\tTileEntity tile \u003d world.getBlockTileEntity(x, y, z);\n-\t\tif (tile \u003d\u003d null) {\n+\t\tif(tile \u003d\u003d null) {\n \t\t\treturn null;\n \t\t}\n \t\tswitch(ID) {\n@@ -36,10 +35,9 @@ public Object getServerGuiElement(int ID, EntityPlayer player, World world,\n \t}\n \n \t@Override\n-\tpublic Object getClientGuiElement(int ID, EntityPlayer player, World world,\n-\t\t\tint x, int y, int z) {\n+\tpublic Object getClientGuiElement(int ID, EntityPlayer player, World world, int x, int y, int z) {\n \t\tTileEntity tile \u003d world.getBlockTileEntity(x, y, z);\n-\t\tif (tile \u003d\u003d null) {\n+\t\tif(tile \u003d\u003d null) {\n \t\t\treturn null;\n \t\t}\n \t\tswitch(ID) {"
        },
        {
          "file_name": "additionalpipes/gui/GuiPipeClosed.java",
          "patch": "@@ -19,22 +19,17 @@ public GuiPipeClosed(InventoryPlayer inventory, Pipe pipe) {\n \n \t@Override\n \tprotected void drawGuiContainerForegroundLayer(int par1, int par2) {\n-\t\tfontRenderer.drawString(\n-\t\t\t\tStatCollector.translateToLocal(\"Closed Pipe\"), 60, 6,\n-\t\t\t\t4210752);\n-\t\tfontRenderer.drawString(\n-\t\t\t\tStatCollector.translateToLocal(\"container.inventory\"), 8,\n-\t\t\t\tySize - 96 + 2, 4210752);\n+\t\tfontRenderer.drawString(StatCollector.translateToLocal(\"Closed Pipe\"), 60, 6, 4210752);\n+\t\tfontRenderer.drawString(StatCollector.translateToLocal(\"container.inventory\"), 8, ySize - 96 + 2, 4210752);\n \t}\n \n \t/**\n \t * Draw the background layer for the GuiContainer (everything behind the\n \t * items)\n \t */\n \t@Override\n-\tprotected void drawGuiContainerBackgroundLayer(float par1, int par2,\n-\t\t\tint par3) {\n-\t\n+\tprotected void drawGuiContainerBackgroundLayer(float par1, int par2, int par3) {\n+\n \t\tGL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);\n \t\tmc.renderEngine.bindTexture(\"/gui/trap.png\");\n \t\tint var5 \u003d (width - xSize) / 2;"
        },
        {
          "file_name": "additionalpipes/gui/GuiTeleportPipe.java",
          "patch": "@@ -45,7 +45,7 @@ public void draw(int x, int y) {\n \t\t\tMinecraft.getMinecraft().renderEngine.bindTexture(\"/gui/items.png\");\n \t\t\tdrawIcon(BuildCraftCore.iconProvider.getIcon(CoreIconProvider.ENERGY), x + 3, y + 4);\n \n-\t\t\tif (!isFullyOpened())\n+\t\t\tif(!isFullyOpened())\n \t\t\t\treturn;\n \n \t\t\tfontRenderer.drawStringWithShadow(\"Teleport Pipe\", x + 22, y + 8, headerColour);\n@@ -55,19 +55,13 @@ public void draw(int x, int y) {\n \t\t\tfontRenderer.drawString(String.valueOf(gui.container.connectedPipes), x + 66, y + 45, textColour);\n \t\t\tint[] net \u003d gui.pipe.logic.network;\n \t\t\tif(net.length \u003e 0) {\n-\t\t\t\tfontRenderer.drawString(\n-\t\t\t\t\tnew StringBuilder(\"(\").append(net[0]).append(\", \").append(net[1]).append(\", \").append(net[2]).append(\")\").toString(),\n-\t\t\t\t\tx + 22, y + 56, textColour);\n+\t\t\t\tfontRenderer.drawString(new StringBuilder(\"(\").append(net[0]).append(\", \").append(net[1]).append(\", \").append(net[2]).append(\")\").toString(), x + 22, y + 56, textColour);\n \t\t\t}\n \t\t\tif(net.length \u003e 3) {\n-\t\t\t\tfontRenderer.drawString(\n-\t\t\t\t\tnew StringBuilder(\"(\").append(net[3]).append(\", \").append(net[4]).append(\", \").append(net[5]).append(\")\").toString(),\n-\t\t\t\t\tx + 22, y + 68, textColour);\n+\t\t\t\tfontRenderer.drawString(new StringBuilder(\"(\").append(net[3]).append(\", \").append(net[4]).append(\", \").append(net[5]).append(\")\").toString(), x + 22, y + 68, textColour);\n \t\t\t}\n \t\t\tif(net.length \u003e 6) {\n-\t\t\t\tfontRenderer.drawString(\n-\t\t\t\t\tnew StringBuilder(\"(\").append(net[6]).append(\", \").append(net[7]).append(\", \").append(net[8]).append(\")\").toString(),\n-\t\t\t\t\tx + 22, y + 80, textColour);\n+\t\t\t\tfontRenderer.drawString(new StringBuilder(\"(\").append(net[6]).append(\", \").append(net[7]).append(\", \").append(net[8]).append(\")\").toString(), x + 22, y + 80, textColour);\n \t\t\t}\n \t\t}\n \n@@ -96,44 +90,43 @@ public void initGui() {\n \t\tsuper.initGui();\n \t\tint x \u003d (width - xSize) / 2, y \u003d (height - ySize) / 2 + 16;\n \t\tint bw \u003d xSize - 24;\n-\t\tbuttonList.add(buttons[0] \u003d new GuiButton(1, x + 12,              y + 32, bw / 6, 20, \"-100\"));\n-\t\tbuttonList.add(buttons[1] \u003d new GuiButton(2, x + 12 + bw / 6,     y + 32, bw / 6, 20, \"-10\"));\n+\t\tbuttonList.add(buttons[0] \u003d new GuiButton(1, x + 12, y + 32, bw / 6, 20, \"-100\"));\n+\t\tbuttonList.add(buttons[1] \u003d new GuiButton(2, x + 12 + bw / 6, y + 32, bw / 6, 20, \"-10\"));\n \t\tbuttonList.add(buttons[2] \u003d new GuiButton(3, x + 12 + bw * 2 / 6, y + 32, bw / 6, 20, \"-1\"));\n \t\tbuttonList.add(buttons[3] \u003d new GuiButton(4, x + 12 + bw * 3 / 6, y + 32, bw / 6, 20, \"+1\"));\n \t\tbuttonList.add(buttons[4] \u003d new GuiButton(5, x + 12 + bw * 4 / 6, y + 32, bw / 6, 20, \"+10\"));\n \t\tbuttonList.add(buttons[5] \u003d new GuiButton(6, x + 12 + bw * 5 / 6, y + 32, bw / 6, 20, \"+100\"));\n \n-\t\tbuttonList.add(buttons[6] \u003d new GuiButton(7, x + 12,              y + 10, bw / 2, 20, \"Send Only\"));\n+\t\tbuttonList.add(buttons[6] \u003d new GuiButton(7, x + 12, y + 10, bw / 2, 20, \"Send Only\"));\n \t\tbuttonList.add(buttons[7] \u003d new GuiButton(8, x + 12 + bw * 3 / 6, y + 10, bw / 2, 20, \"Private\"));\n \t}\n \n \t@Override\n \tprotected void drawGuiContainerForegroundLayer(int p1, int p2) {\n \t\tsuper.drawGuiContainerForegroundLayer(p1, p2);\n \t\tfontRenderer.drawString(\"Frequency: \" + pipe.logic.getFrequency(), 16, 12, 0x404040);\n-\t\tfontRenderer.drawString(\n-\t\t\tnew StringBuilder(\"(\").append(pipe.xCoord).append(\", \").append(pipe.yCoord).append(\", \").append(pipe.zCoord).append(\")\").toString(),\n-\t\t\t128, 12, 0x404040);\n+\t\tfontRenderer.drawString(new StringBuilder(\"(\").append(pipe.xCoord).append(\", \").append(pipe.yCoord).append(\", \").append(pipe.zCoord).append(\")\").toString(), 128, 12, 0x404040);\n \t\tswitch(pipe.logic.state) {\n-\t\t\tcase 3:\n-\t\t\t\tbuttons[6].displayString \u003d \"Send \u0026 Receive\";\n-\t\t\t\tbreak;\n-\t\t\tcase 2:\n-\t\t\t\tbuttons[6].displayString \u003d \"Receive Only\";\n-\t\t\t\tbreak;\n-\t\t\tcase 1:\n-\t\t\t\tbuttons[6].displayString \u003d \"Send Only\";\n-\t\t\t\tbreak;\n-\t\t\tdefault:\n-\t\t\t\tbuttons[6].displayString \u003d \"Disabled\";\n-\t\t\t\tbreak;\n+\t\tcase 3:\n+\t\t\tbuttons[6].displayString \u003d \"Send \u0026 Receive\";\n+\t\t\tbreak;\n+\t\tcase 2:\n+\t\t\tbuttons[6].displayString \u003d \"Receive Only\";\n+\t\t\tbreak;\n+\t\tcase 1:\n+\t\t\tbuttons[6].displayString \u003d \"Send Only\";\n+\t\t\tbreak;\n+\t\tdefault:\n+\t\t\tbuttons[6].displayString \u003d \"Disabled\";\n+\t\t\tbreak;\n \t\t}\n \t\tif(pipe.logic.isPublic) {\n \t\t\tbuttons[7].displayString \u003d \"Public\";\n \t\t} else {\n \t\t\tbuttons[7].displayString \u003d \"Private\";\n \t\t}\n \t}\n+\n \t@Override\n \tprotected void actionPerformed(GuiButton guibutton) {\n \t\tint freq \u003d pipe.logic.getFrequency();\n@@ -165,7 +158,7 @@ protected void actionPerformed(GuiButton guibutton) {\n \t\t\tisPublic \u003d !isPublic;\n \t\t\tbreak;\n \t\t}\n-\t\tif (freq \u003c 0) {\n+\t\tif(freq \u003c 0) {\n \t\t\tfreq \u003d 0;\n \t\t}\n "
        },
        {
          "file_name": "additionalpipes/network/NetworkHandler.java",
          "patch": "@@ -23,18 +23,17 @@\n import cpw.mods.fml.common.network.Player;\n \n public class NetworkHandler implements IPacketHandler {\n-\t//server to client\n+\t// server to client\n \tpublic static final byte CHUNKLOAD_DATA \u003d 15;\n \tpublic static final byte TELE_PIPE_DATA \u003d 16;\n-\t//client to server\n+\t// client to server\n \tpublic static final byte ADV_WOOD_DATA \u003d 62;\n \tpublic static final byte DIST_PIPE_DATA \u003d 63;\n \tpublic static final byte TELE_PIPE_DATA_SET \u003d 64;\n \tpublic static final byte CHUNKLOAD_REQUEST \u003d 65;\n \n \t@Override\n-\tpublic void onPacketData(INetworkManager manager,\n-\t\t\tPacket250CustomPayload packet, Player player) {\n+\tpublic void onPacketData(INetworkManager manager, Packet250CustomPayload packet, Player player) {\n \t\tif(AdditionalPipes.CHANNEL.equals(packet.channel)) {\n \t\t\tDataInputStream data \u003d new DataInputStream(new ByteArrayInputStream(packet.data));\n \t\t\tbyte packetID \u003d -1;\n@@ -59,11 +58,10 @@ public void onPacketData(INetworkManager manager,\n \t\t\t\t\thandleChunkLoadData(data);\n \t\t\t\t\tbreak;\n \t\t\t\tcase CHUNKLOAD_REQUEST:\n-\t\t\t\t\tAdditionalPipes.instance.chunkLoadViewer\n-\t\t\t\t\t.sendPersistentChunksToPlayer((EntityPlayerMP) player);\n+\t\t\t\t\tAdditionalPipes.instance.chunkLoadViewer.sendPersistentChunksToPlayer((EntityPlayerMP) player);\n \t\t\t\t\tbreak;\n \t\t\t\t}\n-\t\t\t} catch (IOException e) {\n+\t\t\t} catch(IOException e) {\n \t\t\t\tAdditionalPipes.instance.logger.log(Level.SEVERE, \"Error handling packet \" + packetID, e);\n \t\t\t}\n \t\t} else if(AdditionalPipes.CHANNELNBT.equals(packet.channel)) {\n@@ -93,21 +91,21 @@ private void handleDistPipeData(Player player, DataInputStream data) {\n \t\t\t\t\tlogic.distData[index] \u003d newData;\n \t\t\t\t\tboolean found \u003d newData \u003e 0;\n \t\t\t\t\tif(!found) {\n-\t\t\t\t\t\tfor (int i \u003d 0; i \u003c logic.distData.length; i++) {\n-\t\t\t\t\t\t\tif (logic.distData[i] \u003e 0) {\n+\t\t\t\t\t\tfor(int i \u003d 0; i \u003c logic.distData.length; i++) {\n+\t\t\t\t\t\t\tif(logic.distData[i] \u003e 0) {\n \t\t\t\t\t\t\t\tfound \u003d true;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n-\t\t\t\t\tif (!found) {\n-\t\t\t\t\t\tfor (int i \u003d 0; i \u003c logic.distData.length; i++) {\n+\t\t\t\t\tif(!found) {\n+\t\t\t\t\t\tfor(int i \u003d 0; i \u003c logic.distData.length; i++) {\n \t\t\t\t\t\t\tlogic.distData[i] \u003d 1;\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \n \t\t\t\t}\n \t\t\t}\n-\t\t} catch (IOException e) {\n+\t\t} catch(IOException e) {\n \t\t\tAdditionalPipes.instance.logger.log(Level.SEVERE, \"Error handling distribution pipe packet.\", e);\n \t\t}\n \t}\n@@ -117,7 +115,7 @@ private void handleTelePipeData(Player player, DataInputStream data) {\n \t\t\tTileEntity te \u003d getTileEntity(player, data);\n \t\t\tif(te instanceof TileGenericPipe) {\n \t\t\t\tPipeTeleport pipe \u003d (PipeTeleport) ((TileGenericPipe) te).pipe;\n-\t\t\t\t//only allow the owner to change pipe state\n+\t\t\t\t// only allow the owner to change pipe state\n \t\t\t\tEntityPlayerMP entityPlayer \u003d (EntityPlayerMP) player;\n \t\t\t\tif(!PipeLogicTeleport.canPlayerModifyPipe(entityPlayer, pipe.logic)) {\n \t\t\t\t\tentityPlayer.sendChatToPlayer(\"You may not change pipe state.\");\n@@ -131,7 +129,7 @@ private void handleTelePipeData(Player player, DataInputStream data) {\n \t\t\t\tpipe.logic.state \u003d (byte) data.read();\n \t\t\t\tpipe.logic.isPublic \u003d (data.read() \u003d\u003d 1);\n \t\t\t}\n-\t\t} catch (IOException e) {\n+\t\t} catch(IOException e) {\n \t\t\tAdditionalPipes.instance.logger.log(Level.SEVERE, \"Error handling teleport pipe packet.\", e);\n \t\t}\n \t}\n@@ -144,7 +142,7 @@ private void handleChunkLoadData(DataInputStream data) {\n \t\t\t\tchunks[i] \u003d new ChunkCoordIntPair(data.readInt(), data.readInt());\n \t\t\t}\n \t\t\tAdditionalPipes.instance.chunkLoadViewer.receivePersistentChunks(chunks);\n-\t\t} catch (IOException e) {\n+\t\t} catch(IOException e) {\n \t\t\tAdditionalPipes.instance.logger.log(Level.SEVERE, \"Error handling chunk load data.\", e);\n \t\t}\n \t}\n@@ -157,7 +155,7 @@ public TileEntity getTileEntity(Player player, DataInputStream data) {\n \t\t\ty \u003d data.readInt();\n \t\t\tz \u003d data.readInt();\n \t\t\tte \u003d ((EntityPlayer) player).worldObj.getBlockTileEntity(x, y, z);\n-\t\t} catch (IOException e) {\n+\t\t} catch(IOException e) {\n \t\t\tAdditionalPipes.instance.logger.log(Level.SEVERE, \"Error getting tileentity position from packet.\", e);\n \t\t}\n \t\treturn te;"
        },
        {
          "file_name": "additionalpipes/network/PacketNBTTagData.java",
          "patch": "@@ -13,8 +13,7 @@\n \tpublic final Packet250CustomPayload packet;\n \tpublic final NBTTagCompound nbt;\n \n-\tpublic PacketNBTTagData(String channel, int id, boolean chunkPacket,\n-\t\t\tNBTTagCompound nbttagcompound) {\n+\tpublic PacketNBTTagData(String channel, int id, boolean chunkPacket, NBTTagCompound nbttagcompound) {\n \t\tpacket \u003d new Packet250CustomPayload();\n \t\tpacket.channel \u003d channel;\n \t\tpacket.isChunkDataPacket \u003d chunkPacket;\n@@ -26,8 +25,8 @@ public Packet250CustomPayload getPacket() {\n \t\t\tbyte[] byteData \u003d CompressedStreamTools.compress(nbt);\n \t\t\tpacket.length \u003d byteData.length;\n \t\t\tpacket.data \u003d byteData;\n-\t\t} catch (IOException e) {\n-\t\t\t//impossible?\n+\t\t} catch(IOException e) {\n+\t\t\t// impossible?\n \t\t}\n \t\treturn packet;\n \t}\n@@ -36,8 +35,8 @@ public static NBTTagCompound getNBTFrom(Packet250CustomPayload packet) {\n \t\tNBTTagCompound tag \u003d new NBTTagCompound();\n \t\ttry {\n \t\t\ttag \u003d CompressedStreamTools.decompress(packet.data);\n-\t\t} catch (IOException e) {\n-\t\t\t//severe error reading packet data\n+\t\t} catch(IOException e) {\n+\t\t\t// severe error reading packet data\n \t\t}\n \t\treturn tag;\n \t}"
        },
        {
          "file_name": "additionalpipes/pipes/APPipe.java",
          "patch": "@@ -1,13 +1,13 @@\n package buildcraft.additionalpipes.pipes;\n \n-import cpw.mods.fml.relauncher.Side;\n-import cpw.mods.fml.relauncher.SideOnly;\n import net.minecraftforge.common.ForgeDirection;\n import buildcraft.additionalpipes.textures.Textures;\n import buildcraft.api.core.IIconProvider;\n import buildcraft.transport.Pipe;\n import buildcraft.transport.PipeTransport;\n import buildcraft.transport.pipes.PipeLogic;\n+import cpw.mods.fml.relauncher.Side;\n+import cpw.mods.fml.relauncher.SideOnly;\n \n public abstract class APPipe extends Pipe {\n \n@@ -17,8 +17,7 @@ public APPipe(PipeTransport transport, PipeLogic logic, int itemID) {\n \n \t@SideOnly(Side.CLIENT)\n \t@Override\n-\tpublic IIconProvider getIconProvider()\n-\t{\n+\tpublic IIconProvider getIconProvider() {\n \t\treturn Textures.pipeIconProvider;\n \t}\n "
        },
        {
          "file_name": "additionalpipes/pipes/PipeItemsAdvancedInsertion.java",
          "patch": "@@ -32,13 +32,13 @@ public PipeItemsAdvancedInsertion(int itemID) {\n \tpublic LinkedList\u003cForgeDirection\u003e filterPossibleMovements(LinkedList\u003cForgeDirection\u003e possibleOrientations, Position pos, IPipedItem item) {\n \t\tLinkedList\u003cForgeDirection\u003e newOris \u003d new LinkedList\u003cForgeDirection\u003e();\n \n-\t\tfor (int o \u003d 0; o \u003c 6; ++o) {\n+\t\tfor(int o \u003d 0; o \u003c 6; ++o) {\n \t\t\tForgeDirection orientation \u003d ForgeDirection.VALID_DIRECTIONS[o];\n-\t\t\tif (orientation !\u003d pos.orientation.getOpposite()) {\n+\t\t\tif(orientation !\u003d pos.orientation.getOpposite()) {\n \t\t\t\tTileEntity entity \u003d container.getTile(orientation);\n-\t\t\t\tif (entity instanceof IInventory) {\n-\t\t\t\t\tif (item.getPosition().orientation \u003d\u003d orientation.getOpposite()) {\n-\t\t\t\t\t\t//continue;\n+\t\t\t\tif(entity instanceof IInventory) {\n+\t\t\t\t\tif(item.getPosition().orientation \u003d\u003d orientation.getOpposite()) {\n+\t\t\t\t\t\t// continue;\n \t\t\t\t\t}\n \t\t\t\t\tITransactor transactor \u003d Transactor.getTransactorFor(entity);\n \t\t\t\t\tif(transactor.add(item.getItemStack(), orientation.getOpposite(), false).stackSize \u003e 0) {\n@@ -56,10 +56,10 @@ public PipeItemsAdvancedInsertion(int itemID) {\n \n \t@Override\n \tpublic void readjustSpeed(IPipedItem item) {\n-\t\tif (item.getSpeed() \u003e Utils.pipeNormalSpeed) {\n+\t\tif(item.getSpeed() \u003e Utils.pipeNormalSpeed) {\n \t\t\titem.setSpeed(item.getSpeed() - Utils.pipeNormalSpeed / 2.0F);\n \t\t}\n-\t\tif (item.getSpeed() \u003c Utils.pipeNormalSpeed) {\n+\t\tif(item.getSpeed() \u003c Utils.pipeNormalSpeed) {\n \t\t\titem.setSpeed(Utils.pipeNormalSpeed);\n \t\t}\n \t}"
        },
        {
          "file_name": "additionalpipes/pipes/PipeItemsAdvancedWood.java",
          "patch": "@@ -52,37 +52,35 @@ public IPowerProvider getPowerProvider() {\n \n \t@Override\n \tpublic void doWork() {\n-\t\tif (powerProvider.getEnergyStored() \u003c\u003d 0)\n+\t\tif(powerProvider.getEnergyStored() \u003c\u003d 0)\n \t\t\treturn;\n \n \t\tWorld w \u003d worldObj;\n \n \t\tint meta \u003d worldObj.getBlockMetadata(xCoord, yCoord, zCoord);\n \n-\t\tif (meta \u003e 5)\n+\t\tif(meta \u003e 5)\n \t\t\treturn;\n \n-\t\tPosition pos \u003d new Position(xCoord, yCoord, zCoord,\tForgeDirection.VALID_DIRECTIONS[meta]);\n+\t\tPosition pos \u003d new Position(xCoord, yCoord, zCoord, ForgeDirection.VALID_DIRECTIONS[meta]);\n \t\tpos.moveForwards(1);\n \t\tint blockId \u003d w.getBlockId((int) pos.x, (int) pos.y, (int) pos.z);\n \t\tTileEntity tile \u003d w.getBlockTileEntity((int) pos.x, (int) pos.y, (int) pos.z);\n \n-\t\tif (tile instanceof IInventory) {\n-\t\t\tif (!PipeManager.canExtractItems(this, w, (int) pos.x, (int) pos.y, (int) pos.z))\n+\t\tif(tile instanceof IInventory) {\n+\t\t\tif(!PipeManager.canExtractItems(this, w, (int) pos.x, (int) pos.y, (int) pos.z))\n \t\t\t\treturn;\n \n \t\t\tIInventory inventory \u003d (IInventory) tile;\n \n-\t\t\tItemStack extracted \u003d checkExtract(inventory, true,\n-\t\t\t\t\tpos.orientation.getOpposite());\n+\t\t\tItemStack extracted \u003d checkExtract(inventory, true, pos.orientation.getOpposite());\n \n-\t\t\tif (extracted \u003d\u003d null || extracted.stackSize \u003d\u003d 0) {\n+\t\t\tif(extracted \u003d\u003d null || extracted.stackSize \u003d\u003d 0) {\n \t\t\t\tpowerProvider.useEnergy(1, 1, false);\n \t\t\t\treturn;\n \t\t\t}\n \n-\t\t\tPosition entityPos \u003d new Position(pos.x + 0.5, pos.y + Utils.getPipeFloorOf(extracted), pos.z + 0.5,\n-\t\t\t\t\tpos.orientation.getOpposite());\n+\t\t\tPosition entityPos \u003d new Position(pos.x + 0.5, pos.y + Utils.getPipeFloorOf(extracted), pos.z + 0.5, pos.orientation.getOpposite());\n \t\t\tentityPos.moveForwards(0.5);\n \t\t\tIPipedItem entity \u003d new EntityPassiveItem(w, entityPos.x, entityPos.y, entityPos.z, extracted);\n \t\t\t((PipeTransportItems) transport).entityEntering(entity, entityPos.orientation);\n@@ -93,12 +91,11 @@ public ItemStack checkExtract(IInventory inventory, boolean doRemove, ForgeDirec\n \t\tIInventory inv \u003d Utils.getInventory(inventory);\n \t\tint first \u003d 0;\n \t\tint last \u003d inv.getSizeInventory() - 1;\n-\t\tif (inventory instanceof net.minecraftforge.common.ISidedInventory) {\n-\t\t\tnet.minecraftforge.common.ISidedInventory sidedInv \u003d\n-\t\t\t\t(net.minecraftforge.common.ISidedInventory) inventory;\n+\t\tif(inventory instanceof net.minecraftforge.common.ISidedInventory) {\n+\t\t\tnet.minecraftforge.common.ISidedInventory sidedInv \u003d (net.minecraftforge.common.ISidedInventory) inventory;\n \t\t\tfirst \u003d sidedInv.getStartInventorySide(from);\n \t\t\tlast \u003d first + sidedInv.getSizeInventorySide(from) - 1;\n-\t\t} else if (inventory instanceof ISidedInventory) {\n+\t\t} else if(inventory instanceof ISidedInventory) {\n \t\t\tISidedInventory sidedInv \u003d (ISidedInventory) inventory;\n \t\t\tint[] accessibleSlots \u003d sidedInv.getAccessibleSlotsFromSide(from.ordinal());\n \t\t\tItemStack result \u003d checkExtractGeneric(inv, doRemove, from, accessibleSlots);\n@@ -109,11 +106,11 @@ public ItemStack checkExtract(IInventory inventory, boolean doRemove, ForgeDirec\n \t}\n \n \tpublic ItemStack checkExtractGeneric(IInventory inventory, boolean doRemove, ForgeDirection from, int start, int stop) {\n-\t\tfor (int k \u003d start; k \u003c\u003d stop; ++k) {\n+\t\tfor(int k \u003d start; k \u003c\u003d stop; ++k) {\n \t\t\tItemStack slot \u003d inventory.getStackInSlot(k);\n \n-\t\t\tif (slot !\u003d null \u0026\u0026 slot.stackSize \u003e 0 \u0026\u0026 canExtract(slot)) {\n-\t\t\t\tif (doRemove) {\n+\t\t\tif(slot !\u003d null \u0026\u0026 slot.stackSize \u003e 0 \u0026\u0026 canExtract(slot)) {\n+\t\t\t\tif(doRemove) {\n \t\t\t\t\treturn inventory.decrStackSize(k, (int) powerProvider.useEnergy(1, slot.stackSize, true));\n \t\t\t\t} else {\n \t\t\t\t\treturn slot;\n@@ -124,11 +121,11 @@ public ItemStack checkExtractGeneric(IInventory inventory, boolean doRemove, For\n \t}\n \n \tpublic ItemStack checkExtractGeneric(IInventory inventory, boolean doRemove, ForgeDirection from, int[] slots) {\n-\t\tfor (int i : slots) {\n+\t\tfor(int i : slots) {\n \t\t\tItemStack slot \u003d inventory.getStackInSlot(i);\n \n-\t\t\tif (slot !\u003d null \u0026\u0026 slot.stackSize \u003e 0 \u0026\u0026 canExtract(slot)) {\n-\t\t\t\tif (doRemove) {\n+\t\t\tif(slot !\u003d null \u0026\u0026 slot.stackSize \u003e 0 \u0026\u0026 canExtract(slot)) {\n+\t\t\t\tif(doRemove) {\n \t\t\t\t\treturn inventory.decrStackSize(i, (int) powerProvider.useEnergy(1, slot.stackSize, true));\n \t\t\t\t} else {\n \t\t\t\t\treturn slot;\n@@ -140,13 +137,12 @@ public ItemStack checkExtractGeneric(IInventory inventory, boolean doRemove, For\n \n \tpublic boolean canExtract(ItemStack item) {\n \t\tPipeLogicAdvancedWood logic \u003d (PipeLogicAdvancedWood) this.logic;\n-\t\tfor (int i \u003d 0; i \u003c logic.getSizeInventory(); i++) {\n+\t\tfor(int i \u003d 0; i \u003c logic.getSizeInventory(); i++) {\n \t\t\tItemStack stack \u003d logic.getStackInSlot(i);\n-\t\t\tif (stack !\u003d null \u0026\u0026 stack.itemID \u003d\u003d item.itemID) {\n-\t\t\t\tif ((Item.itemsList[item.itemID].isDamageable())) {\n+\t\t\tif(stack !\u003d null \u0026\u0026 stack.itemID \u003d\u003d item.itemID) {\n+\t\t\t\tif((Item.itemsList[item.itemID].isDamageable())) {\n \t\t\t\t\treturn !logic.exclude;\n-\t\t\t\t}\n-\t\t\t\telse if (stack.getItemDamage() \u003d\u003d item.getItemDamage()) {\n+\t\t\t\t} else if(stack.getItemDamage() \u003d\u003d item.getItemDamage()) {\n \t\t\t\t\treturn !logic.exclude;\n \t\t\t\t}\n \t\t\t}\n@@ -171,11 +167,11 @@ public void readFromNBT(NBTTagCompound nbttagcompound) {\n \n \t@Override\n \tpublic int getIconIndex(ForgeDirection direction) {\n-\t\tif (direction \u003d\u003d ForgeDirection.UNKNOWN)\n+\t\tif(direction \u003d\u003d ForgeDirection.UNKNOWN)\n \t\t\treturn 6;\n \t\telse {\n \t\t\tint metadata \u003d worldObj.getBlockMetadata(xCoord, yCoord, zCoord);\n-\t\t\tif (metadata \u003d\u003d direction.ordinal())\n+\t\t\tif(metadata \u003d\u003d direction.ordinal())\n \t\t\t\treturn 7;\n \t\t\telse\n \t\t\t\treturn 6;"
        },
        {
          "file_name": "additionalpipes/pipes/PipeItemsClosed.java",
          "patch": "@@ -35,8 +35,7 @@ public void centerReached(PipeTransportItems pipe, EntityData data) {\n \t}\n \n \t@Override\n-\tpublic void endReached(PipeTransportItems pipe, EntityData data,\n-\t\t\tTileEntity tile) {\n+\tpublic void endReached(PipeTransportItems pipe, EntityData data, TileEntity tile) {\n \t}\n \n \t@Override\n@@ -53,13 +52,12 @@ public void drop(PipeTransportItems pipe, EntityData data) {\n \t\tcontainer.scheduleRenderUpdate();\n \t}\n \n-\n \t@Override\n \tpublic void writeToNBT(NBTTagCompound nbttagcompound) {\n \t\tsuper.writeToNBT(nbttagcompound);\n \t\tNBTTagList list \u003d new NBTTagList();\n \n-\t\tfor (ItemStack stack : inventory) {\n+\t\tfor(ItemStack stack : inventory) {\n \t\t\tif(stack !\u003d null) {\n \t\t\t\tNBTTagCompound stackTag \u003d new NBTTagCompound();\n \t\t\t\tstack.writeToNBT(stackTag);\n@@ -74,7 +72,7 @@ public void writeToNBT(NBTTagCompound nbttagcompound) {\n \tpublic void readFromNBT(NBTTagCompound nbttagcompound) {\n \t\tsuper.readFromNBT(nbttagcompound);\n \t\tNBTTagList list \u003d nbttagcompound.getTagList(\"closedInventory\");\n-\t\tfor (int i \u003d 0; i \u003c list.tagCount() \u0026\u0026 i \u003c inventory.length; i++) {\n+\t\tfor(int i \u003d 0; i \u003c list.tagCount() \u0026\u0026 i \u003c inventory.length; i++) {\n \t\t\tNBTTagCompound stackTag \u003d (NBTTagCompound) list.tagAt(i);\n \t\t\tinventory[i] \u003d ItemStack.loadItemStackFromNBT(stackTag);\n \t\t}\n@@ -99,7 +97,7 @@ public ItemStack getStackInSlot(int i) {\n \t@Override\n \tpublic ItemStack decrStackSize(int i, int amt) {\n \t\tItemStack stack \u003d inventory[i].splitStack(amt);\n-\t\tif (inventory[i].stackSize \u003d\u003d 0) {\n+\t\tif(inventory[i].stackSize \u003d\u003d 0) {\n \t\t\tinventory[i] \u003d null;\n \t\t}\n \t\treturn stack;"
        },
        {
          "file_name": "additionalpipes/pipes/PipeItemsDistributor.java",
          "patch": "@@ -28,18 +28,18 @@ public PipeItemsDistributor(int itemID) {\n \n \t@Override\n \tpublic int getIconIndex(ForgeDirection connection) {\n-\t\tswitch (connection) {\n-\t\tcase DOWN:    //-y\n+\t\tswitch(connection) {\n+\t\tcase DOWN: // -y\n \t\t\treturn 10;\n-\t\tcase UP:      //+y\n+\t\tcase UP: // +y\n \t\t\treturn 11;\n-\t\tcase NORTH:   //-z\n+\t\tcase NORTH: // -z\n \t\t\treturn 12;\n-\t\tcase SOUTH:   //+z\n+\t\tcase SOUTH: // +z\n \t\t\treturn 13;\n-\t\tcase WEST:    //-x\n+\t\tcase WEST: // -x\n \t\t\treturn 14;\n-\t\tcase EAST:    //+x\n+\t\tcase EAST: // +x\n \t\tdefault:\n \t\t\treturn 9;\n \t\t}\n@@ -49,7 +49,7 @@ public int getIconIndex(ForgeDirection connection) {\n \tpublic LinkedList\u003cForgeDirection\u003e filterPossibleMovements(LinkedList\u003cForgeDirection\u003e possibleOrientations, Position pos, IPipedItem item) {\n \t\tLinkedList\u003cForgeDirection\u003e result \u003d new LinkedList\u003cForgeDirection\u003e();\n \n-\t\tif (logic.curTick \u003e\u003d logic.distData[logic.distSide]) {\n+\t\tif(logic.curTick \u003e\u003d logic.distData[logic.distSide]) {\n \t\t\ttoNextOpenSide();\n \t\t}\n \n@@ -60,14 +60,13 @@ public int getIconIndex(ForgeDirection connection) {\n \n \tprivate void toNextOpenSide() {\n \t\tlogic.curTick \u003d 0;\n-\t\tfor (int o \u003d 0; o \u003c logic.distData.length; ++o) {\n+\t\tfor(int o \u003d 0; o \u003c logic.distData.length; ++o) {\n \t\t\tlogic.distSide \u003d (logic.distSide + 1) % logic.distData.length;\n-\t\t\tif (logic.distData[logic.distSide] \u003e 0 \u0026\u0026\n-\t\t\t\t\tcontainer.isPipeConnected(ForgeDirection.VALID_DIRECTIONS[logic.distSide])) {\n+\t\t\tif(logic.distData[logic.distSide] \u003e 0 \u0026\u0026 container.isPipeConnected(ForgeDirection.VALID_DIRECTIONS[logic.distSide])) {\n \t\t\t\tbreak;\n \t\t\t}\n \t\t}\n-\t\t//no valid inventories found, do nothing\n+\t\t// no valid inventories found, do nothing\n \t}\n \n \t@Override"
        },
        {
          "file_name": "additionalpipes/pipes/PipeItemsRedstone.java",
          "patch": "@@ -22,38 +22,37 @@\n \n public class PipeItemsRedstone extends APPipe implements IPipeTransportItemsHook {\n \n-\tpublic @TileNetworkData boolean isPowering \u003d false;\n+\tpublic @TileNetworkData\n+\tboolean isPowering \u003d false;\n+\n \tpublic PipeItemsRedstone(int itemID) {\n \t\tsuper(new PipeTransportItems(), new PipeLogicStone(), itemID);\n \t}\n \n \t@Override\n-\tpublic void readjustSpeed (IPipedItem item) {\n-\t\tif (item.getSpeed() \u003e Utils.pipeNormalSpeed) {\n+\tpublic void readjustSpeed(IPipedItem item) {\n+\t\tif(item.getSpeed() \u003e Utils.pipeNormalSpeed) {\n \t\t\titem.setSpeed(item.getSpeed() - Utils.pipeNormalSpeed / 2.0F);\n \t\t}\n \n-\t\tif (item.getSpeed() \u003c Utils.pipeNormalSpeed) {\n+\t\tif(item.getSpeed() \u003c Utils.pipeNormalSpeed) {\n \t\t\titem.setSpeed(Utils.pipeNormalSpeed);\n \t\t}\n \t}\n \n \t@Override\n-\tpublic LinkedList\u003cForgeDirection\u003e filterPossibleMovements(\n-\t\t\tLinkedList\u003cForgeDirection\u003e possibleOrientations, Position pos,\n-\t\t\tIPipedItem item) {\n+\tpublic LinkedList\u003cForgeDirection\u003e filterPossibleMovements(LinkedList\u003cForgeDirection\u003e possibleOrientations, Position pos, IPipedItem item) {\n \t\treturn possibleOrientations;\n \t}\n \n \t@Override\n \tpublic void updateEntity() {\n \t\tsuper.updateEntity();\n \n-\t\tif ( ((PipeTransportItems)transport).travelingEntities.size() \u003d\u003d 0 \u0026\u0026 isPowering) {\n+\t\tif(((PipeTransportItems) transport).travelingEntities.size() \u003d\u003d 0 \u0026\u0026 isPowering) {\n \t\t\tisPowering \u003d false;\n \t\t\tUpdateTiles(container.xCoord, container.yCoord, container.zCoord);\n-\t\t}\n-\t\telse if ( ((PipeTransportItems)transport).travelingEntities.size() \u003e 0 \u0026\u0026 !isPowering) {\n+\t\t} else if(((PipeTransportItems) transport).travelingEntities.size() \u003e 0 \u0026\u0026 !isPowering) {\n \t\t\tisPowering \u003d true;\n \t\t\tUpdateTiles(container.xCoord, container.yCoord, container.zCoord);\n \t\t}\n@@ -65,8 +64,8 @@ private void UpdateTiles(int i, int j, int k) {\n \n \t@Override\n \tpublic int isPoweringTo(int l) {\n-\t\t//System.out.println(\"RedStoneIsPoweringTo\");\n-\t\tif (((PipeTransportItems)transport).travelingEntities.size() \u003d\u003d 0) {\n+\t\t// System.out.println(\"RedStoneIsPoweringTo\");\n+\t\tif(((PipeTransportItems) transport).travelingEntities.size() \u003d\u003d 0) {\n \t\t\tisPowering \u003d false;\n \t\t\treturn 0;\n \t\t}\n@@ -90,7 +89,7 @@ public int isPoweringTo(int l) {\n \t\t\treturn 0;\n \t\t}\n \n-\t\treturn (i1 !\u003d 2 || l !\u003d 4)?15:0;\n+\t\treturn (i1 !\u003d 2 || l !\u003d 4) ? 15 : 0;\n \t}\n \n \t@Override"
        },
        {
          "file_name": "additionalpipes/pipes/PipeItemsTeleport.java",
          "patch": "@@ -22,7 +22,7 @@\n \n public class PipeItemsTeleport extends PipeTeleport implements IPipeTransportItemsHook {\n \n-\tprivate PipeTransportItems transport;\n+\tprivate final PipeTransportItems transport;\n \n \tpublic PipeItemsTeleport(int itemID) {\n \t\tsuper(new PipeTransportItems(), new PipeLogicTeleport(), itemID);\n@@ -45,30 +45,34 @@ public void entityEntered(IPipedItem item, ForgeDirection orientation) {\n \t\t\treturn;\n \t\t}\n \t\tList\u003cPipeTeleport\u003e connectedTeleportPipes \u003d TeleportManager.instance.getConnectedPipes(this, false);\n-\t\t//no teleport pipes connected, use default\n-\t\tif (connectedTeleportPipes.size() \u003c\u003d 0 || (logic.state \u0026 0x1) \u003d\u003d 0) {\n+\t\t// no teleport pipes connected, use default\n+\t\tif(connectedTeleportPipes.size() \u003c\u003d 0 || (logic.state \u0026 0x1) \u003d\u003d 0) {\n \t\t\treturn;\n \t\t}\n \n-\t\t//output to random pipe\n+\t\t// output to random pipe\n \t\tLinkedList\u003cForgeDirection\u003e outputOrientations \u003d new LinkedList\u003cForgeDirection\u003e();\n \t\tPipeTeleport otherPipe \u003d connectedTeleportPipes.get(rand.nextInt(connectedTeleportPipes.size()));\n \n-\t\t//find possible output orientations\n-\t\tfor (ForgeDirection o : ForgeDirection.VALID_DIRECTIONS) {\n-\t\t\tif (otherPipe.outputOpen(o))\n+\t\t// find possible output orientations\n+\t\tfor(ForgeDirection o : ForgeDirection.VALID_DIRECTIONS) {\n+\t\t\tif(otherPipe.outputOpen(o))\n \t\t\t\toutputOrientations.add(o);\n \t\t}\n-\t\t//no outputs found, default behaviour\n-\t\tif (outputOrientations.size() \u003c\u003d 0) {\n+\t\t// no outputs found, default behaviour\n+\t\tif(outputOrientations.size() \u003c\u003d 0) {\n \t\t\treturn;\n \t\t}\n \n \t\tForgeDirection newOrientation \u003d outputOrientations.get(rand.nextInt(outputOrientations.size()));\n \t\tTileGenericPipe destination \u003d (TileGenericPipe) otherPipe.container.getTile(newOrientation);\n-\t\t//item.setContainer(destination);\n+\n+\t\tif(destination \u003d\u003d null) {\n+\t\t\treturn;\n+\t\t}\n+\n \t\titem.setPosition(destination.xCoord + 0.5, destination.yCoord, destination.zCoord + 0.5);\n-\t\t//transport.scheduleRemoval(item);\n+\n \t\tdestination.pipe.transport.entityEntering(item, newOrientation);\n \t\tAdditionalPipes.instance.logger.info(item + \" from \" + getPosition() + \" to \" + otherPipe.getPosition() + \" \" + newOrientation);\n \t}"
        },
        {
          "file_name": "additionalpipes/pipes/PipeLiquidsRedstone.java",
          "patch": "@@ -21,7 +21,8 @@\n import buildcraft.transport.pipes.PipeLogicGold;\n \n public class PipeLiquidsRedstone extends APPipe {\n-\tpublic @TileNetworkData boolean isPowering \u003d false;\n+\tpublic @TileNetworkData\n+\tboolean isPowering \u003d false;\n \n \tpublic PipeLiquidsRedstone(int itemID) {\n \t\tsuper(new PipeTransportLiquids(), new PipeLogicGold(), itemID);\n@@ -36,10 +37,9 @@ private void UpdateTiles(int i, int j, int k) {\n \n \t@Override\n \tpublic int isPoweringTo(int l) {\n-\t\t//System.out.println(\"RedStoneIsPoweringTo\");\n-\t\tLiquidStack liquid \u003d ((PipeTransportLiquids) transport)\n-\t\t\t\t.getTanks(ForgeDirection.UNKNOWN)[ForgeDirection.UNKNOWN.ordinal()].getLiquid();\n-\t\tif (liquid \u003d\u003d null || liquid.amount \u003d\u003d 0) {\n+\t\t// System.out.println(\"RedStoneIsPoweringTo\");\n+\t\tLiquidStack liquid \u003d ((PipeTransportLiquids) transport).getTanks(ForgeDirection.UNKNOWN)[ForgeDirection.UNKNOWN.ordinal()].getLiquid();\n+\t\tif(liquid \u003d\u003d null || liquid.amount \u003d\u003d 0) {\n \t\t\tisPowering \u003d false;\n \t\t\treturn 0;\n \t\t}\n@@ -63,7 +63,7 @@ public int isPoweringTo(int l) {\n \t\t\treturn 0;\n \t\t}\n \n-\t\treturn (i1 !\u003d 2 || l !\u003d 4)?15:0;\n+\t\treturn (i1 !\u003d 2 || l !\u003d 4) ? 15 : 0;\n \t}\n \n \t@Override\n@@ -75,29 +75,29 @@ public int isIndirectlyPoweringTo(int l) {\n \tpublic void updateEntity() {\n \t\tsuper.updateEntity();\n \n-\t\t//System.out.println(\"Quantity: \" + (((PipeTransportLiquids)this.transport).getLiquidQuantity()) + \" - Wanted: \" + computeMaxLiquid() + \" - Qua2: \" + computeEnds()[1]);\n-\t\t//System.out.println(\"Quantity: \" + ((PipeTransportLiquids)this.transport).getCenter());\n-\t\tLiquidStack liquid \u003d ((PipeTransportLiquids) transport)\n-\t\t\t\t.getTanks(ForgeDirection.UNKNOWN)[ForgeDirection.UNKNOWN.ordinal()].getLiquid();\n-\t\tif (liquid \u003d\u003d null || liquid.amount \u003d\u003d 0 \u0026\u0026 isPowering) {\n+\t\t// System.out.println(\"Quantity: \" +\n+\t\t// (((PipeTransportLiquids)this.transport).getLiquidQuantity()) +\n+\t\t// \" - Wanted: \" + computeMaxLiquid() + \" - Qua2: \" + computeEnds()[1]);\n+\t\t// System.out.println(\"Quantity: \" +\n+\t\t// ((PipeTransportLiquids)this.transport).getCenter());\n+\t\tLiquidStack liquid \u003d ((PipeTransportLiquids) transport).getTanks(ForgeDirection.UNKNOWN)[ForgeDirection.UNKNOWN.ordinal()].getLiquid();\n+\t\tif(liquid \u003d\u003d null || liquid.amount \u003d\u003d 0 \u0026\u0026 isPowering) {\n \t\t\tisPowering \u003d false;\n \t\t\tUpdateTiles(container.xCoord, container.yCoord, container.zCoord);\n-\t\t}\n-\t\telse if (!isPowering) {\n+\t\t} else if(!isPowering) {\n \t\t\tisPowering \u003d true;\n \t\t\tUpdateTiles(container.xCoord, container.yCoord, container.zCoord);\n \t\t}\n \t}\n \n \tpublic boolean canRec(Position p) {\n-\t\tTileEntity entity \u003d worldObj.getBlockTileEntity((int) p.x, (int) p.y,\n-\t\t\t\t(int) p.z);\n+\t\tTileEntity entity \u003d worldObj.getBlockTileEntity((int) p.x, (int) p.y, (int) p.z);\n \n-\t\tif (!Utils.checkPipesConnections(entity, container)) {\n+\t\tif(!Utils.checkPipesConnections(entity, container)) {\n \t\t\treturn false;\n \t\t}\n \n-\t\tif (entity instanceof IPipeEntry || entity instanceof ITankContainer) {\n+\t\tif(entity instanceof IPipeEntry || entity instanceof ITankContainer) {\n \t\t\treturn true;\n \t\t}\n "
        },
        {
          "file_name": "additionalpipes/pipes/PipeLiquidsTeleport.java",
          "patch": "@@ -30,19 +30,19 @@ public PipeLiquidsTeleport(int itemID) {\n \tpublic int fill(ForgeDirection from, LiquidStack resource, boolean doFill) {\n \t\tList\u003cPipeTeleport\u003e pipeList \u003d TeleportManager.instance.getConnectedPipes(this, false);\n \n-\t\tif (pipeList.size() \u003d\u003d 0 || (logic.state \u0026 0x1) \u003d\u003d 0) {\n+\t\tif(pipeList.size() \u003d\u003d 0 || (logic.state \u0026 0x1) \u003d\u003d 0) {\n \t\t\treturn 0;\n \t\t}\n \n \t\tint i \u003d worldObj.rand.nextInt(pipeList.size());\n \t\tList\u003cITankContainer\u003e possibleMovements \u003d getPossibleLiquidMovements(pipeList.get(i));\n \n-\t\tif (possibleMovements.size() \u003c\u003d 0) {\n+\t\tif(possibleMovements.size() \u003c\u003d 0) {\n \t\t\treturn 0;\n \t\t}\n \n \t\tint used \u003d 0;\n-\t\twhile (possibleMovements.size() \u003e 0 \u0026\u0026 used \u003c\u003d 0) {\n+\t\twhile(possibleMovements.size() \u003e 0 \u0026\u0026 used \u003c\u003d 0) {\n \t\t\tint a \u003d rand.nextInt(possibleMovements.size());\n \t\t\tused \u003d possibleMovements.get(a).fill(ForgeDirection.UNKNOWN, resource, doFill);\n \t\t\tpossibleMovements.remove(a);\n@@ -54,8 +54,8 @@ public int fill(ForgeDirection from, LiquidStack resource, boolean doFill) {\n \tprivate static List\u003cITankContainer\u003e getPossibleLiquidMovements(PipeTeleport pipe) {\n \t\tList\u003cITankContainer\u003e result \u003d new LinkedList\u003cITankContainer\u003e();\n \n-\t\tfor (ForgeDirection o : ForgeDirection.VALID_DIRECTIONS) {\n-\t\t\tif (pipe.logic.outputOpen(o)) {\n+\t\tfor(ForgeDirection o : ForgeDirection.VALID_DIRECTIONS) {\n+\t\t\tif(pipe.logic.outputOpen(o)) {\n \t\t\t\tITankContainer te \u003d (ITankContainer) pipe.container.getTile(o);\n \t\t\t\tresult.add(te);\n \t\t\t}"
        },
        {
          "file_name": "additionalpipes/pipes/PipeLiquidsWaterPump.java",
          "patch": "@@ -22,8 +22,7 @@ public PipeLiquidsWaterPump(int itemID) {\n \t@Override\n \tpublic void updateEntity() {\n \t\tsuper.updateEntity();\n-\t\tif(AdditionalPipes.proxy.isServer(worldObj) \u0026\u0026\n-\t\t\t\tworldObj.getBlockId(xCoord, yCoord - 1, zCoord) \u003d\u003d water.blockID) {\n+\t\tif(AdditionalPipes.proxy.isServer(worldObj) \u0026\u0026 worldObj.getBlockId(xCoord, yCoord - 1, zCoord) \u003d\u003d water.blockID) {\n \t\t\ttransport.fill(ForgeDirection.UNKNOWN, new LiquidStack(water, 100), true);\n \t\t}\n \t}"
        },
        {
          "file_name": "additionalpipes/pipes/PipePowerTeleport.java",
          "patch": "@@ -25,6 +25,7 @@\n \tprivate static class PowerRequest {\n \t\tpublic final TileGenericPipe tile;\n \t\tpublic final ForgeDirection orientation;\n+\n \t\tpublic PowerRequest(TileGenericPipe te, ForgeDirection o) {\n \t\t\ttile \u003d te;\n \t\t\torientation \u003d o;\n@@ -37,23 +38,23 @@ public PipePowerTeleport(int itemID) {\n \n \t@Override\n \tpublic void requestEnergy(ForgeDirection from, int is) {\n-\t\t((PipeTransportPower)transport).step();\n+\t\t((PipeTransportPower) transport).step();\n \n-\t\tif ((logic.state \u0026 0x2) \u003d\u003d 0) { //No need to waste CPU\n+\t\tif((logic.state \u0026 0x2) \u003d\u003d 0) { // No need to waste CPU\n \t\t\treturn;\n \t\t}\n \n \t\tList\u003cPipeTeleport\u003e pipeList \u003d TeleportManager.instance.getConnectedPipes(this, true);\n \n-\t\tif (pipeList.size() \u003c\u003d 0) {\n+\t\tif(pipeList.size() \u003c\u003d 0) {\n \t\t\treturn;\n \t\t}\n \n-\t\tfor (PipeTeleport pipe : pipeList) {\n+\t\tfor(PipeTeleport pipe : pipeList) {\n \t\t\tLinkedList\u003cForgeDirection\u003e possibleMovements \u003d getRealPossibleMovements(pipe);\n-\t\t\tfor (ForgeDirection orientation : possibleMovements) {\n+\t\t\tfor(ForgeDirection orientation : possibleMovements) {\n \t\t\t\tTileEntity tile \u003d pipe.container.getTile(orientation);\n-\t\t\t\tif (tile instanceof TileGenericPipe) {\n+\t\t\t\tif(tile instanceof TileGenericPipe) {\n \t\t\t\t\tTileGenericPipe adjacentTile \u003d (TileGenericPipe) tile;\n \t\t\t\t\tPipeTransportPower nearbyTransport \u003d (PipeTransportPower) adjacentTile.pipe.transport;\n \t\t\t\t\tnearbyTransport.requestEnergy(orientation.getOpposite(), is);\n@@ -64,55 +65,54 @@ public void requestEnergy(ForgeDirection from, int is) {\n \n \t@Override\n \tpublic void receiveEnergy(ForgeDirection from, double val) {\n-\t\t((PipeTransportPower)transport).step();\n+\t\t((PipeTransportPower) transport).step();\n \t\tList\u003cPipeTeleport\u003e connectedPipes \u003d TeleportManager.instance.getConnectedPipes(this, false);\n \t\tList\u003cPipeTeleport\u003e sendingToList \u003d new LinkedList\u003cPipeTeleport\u003e();\n \n-\t\t//no connected pipes, leave!\n-\t\tif (connectedPipes.size() \u003c\u003d 0 || (logic.state \u0026 0x1) \u003d\u003d 0) {\n+\t\t// no connected pipes, leave!\n+\t\tif(connectedPipes.size() \u003c\u003d 0 || (logic.state \u0026 0x1) \u003d\u003d 0) {\n \t\t\treturn;\n \t\t}\n \n-\t\tfor (PipeTeleport pipe : connectedPipes) {\n-\t\t\tif (getPipesNeedsPower(pipe).size() \u003e 0) {\n+\t\tfor(PipeTeleport pipe : connectedPipes) {\n+\t\t\tif(getPipesNeedsPower(pipe).size() \u003e 0) {\n \t\t\t\tsendingToList.add(pipe);\n \t\t\t}\n \t\t}\n \n-\t\t//no pipes need energy, leave!\n-\t\tif (sendingToList.size() \u003c\u003d 0) {\n+\t\t// no pipes need energy, leave!\n+\t\tif(sendingToList.size() \u003c\u003d 0) {\n \t\t\treturn;\n \t\t}\n \n-\t\t//TODO proportional power relay\n+\t\t// TODO proportional power relay\n \t\tdouble powerToSend \u003d AdditionalPipes.instance.powerLossCfg * val / sendingToList.size();\n \n-\t\tfor (PipeTeleport receiver : sendingToList) {\n+\t\tfor(PipeTeleport receiver : sendingToList) {\n \t\t\tList\u003cPowerRequest\u003e needsPower \u003d getPipesNeedsPower(receiver);\n \n-\t\t\tif (needsPower.size() \u003c\u003d 0) {\n+\t\t\tif(needsPower.size() \u003c\u003d 0) {\n \t\t\t\tcontinue;\n \t\t\t}\n \n \t\t\tdouble dividedPowerToSend \u003d powerToSend / needsPower.size();\n \n-\t\t\tfor (PowerRequest powerEntry : needsPower) {\n+\t\t\tfor(PowerRequest powerEntry : needsPower) {\n \t\t\t\tPipeTransportPower nearbyTransport \u003d (PipeTransportPower) powerEntry.tile.pipe.transport;\n \t\t\t\tnearbyTransport.receiveEnergy(powerEntry.orientation, dividedPowerToSend);\n \t\t\t}\n \n \t\t}\n \t}\n \n-\n \tprivate List\u003cPowerRequest\u003e getPipesNeedsPower(PipeTeleport pipe) {\n \t\tLinkedList\u003cForgeDirection\u003e possibleMovements \u003d getRealPossibleMovements(pipe);\n \t\tList\u003cPowerRequest\u003e needsPower \u003d new LinkedList\u003cPowerRequest\u003e();\n \n-\t\tif (possibleMovements.size() \u003e 0) {\n-\t\t\tfor (ForgeDirection orientation : possibleMovements) {\n+\t\tif(possibleMovements.size() \u003e 0) {\n+\t\t\tfor(ForgeDirection orientation : possibleMovements) {\n \t\t\t\tTileEntity tile \u003d pipe.container.getTile(orientation);\n-\t\t\t\tif (tile instanceof TileGenericPipe){\n+\t\t\t\tif(tile instanceof TileGenericPipe) {\n \t\t\t\t\tTileGenericPipe adjacentPipe \u003d (TileGenericPipe) tile;\n \t\t\t\t\tif(pipeNeedsPower(adjacentPipe)) {\n \t\t\t\t\t\tneedsPower.add(new PowerRequest(adjacentPipe, orientation.getOpposite()));\n@@ -124,27 +124,26 @@ public void receiveEnergy(ForgeDirection from, double val) {\n \t\treturn needsPower;\n \t}\n \n-\t//precondition: power pipe that isn\u0027t tp\n+\t// precondition: power pipe that isn\u0027t tp\n \tprivate static boolean pipeNeedsPower(TileGenericPipe tile) {\n-\t\tif (tile instanceof TileGenericPipe) {\n+\t\tif(tile instanceof TileGenericPipe) {\n \t\t\tPipeTransportPower ttb \u003d (PipeTransportPower) tile.pipe.transport;\n-\t\t\tfor (int i \u003d 0; i \u003c ttb.powerQuery.length; i++)\n-\t\t\t\tif (ttb.powerQuery[i] \u003e 0) {\n+\t\t\tfor(int i \u003d 0; i \u003c ttb.powerQuery.length; i++)\n+\t\t\t\tif(ttb.powerQuery[i] \u003e 0) {\n \t\t\t\t\treturn true;\n \t\t\t\t}\n \t\t}\n \t\treturn false;\n \t}\n \n-\t//returns all adjacent pipes\n+\t// returns all adjacent pipes\n \tprivate static LinkedList\u003cForgeDirection\u003e getRealPossibleMovements(PipeTeleport pipe) {\n \t\tLinkedList\u003cForgeDirection\u003e result \u003d new LinkedList\u003cForgeDirection\u003e();\n \n-\t\tfor (ForgeDirection orientation : ForgeDirection.VALID_DIRECTIONS) {\n-\t\t\tif (pipe.outputOpen(orientation)) {\n+\t\tfor(ForgeDirection orientation : ForgeDirection.VALID_DIRECTIONS) {\n+\t\t\tif(pipe.outputOpen(orientation)) {\n \t\t\t\tTileEntity te \u003d pipe.container.getTile(orientation);\n-\t\t\t\tif ((te instanceof TileGenericPipe) \u0026\u0026\n-\t\t\t\t\t\tUtils.checkPipesConnections(pipe.container, te)) {\n+\t\t\t\tif((te instanceof TileGenericPipe) \u0026\u0026 Utils.checkPipesConnections(pipe.container, te)) {\n \t\t\t\t\tresult.add(orientation);\n \t\t\t\t}\n \t\t\t}"
        },
        {
          "file_name": "additionalpipes/pipes/PipeSwitch.java",
          "patch": "@@ -15,7 +15,7 @@ public PipeSwitch(PipeTransport transport, int itemID, int textureIndex) {\n \n \t@Override\n \tpublic int getIconIndex(ForgeDirection direction) {\n-\t\treturn textureIndex + (logic.canPipeConnect(null, direction)? 0 : 1);\n+\t\treturn textureIndex + (logic.canPipeConnect(null, direction) ? 0 : 1);\n \t}\n \n \t@Override"
        },
        {
          "file_name": "additionalpipes/pipes/TeleportManager.java",
          "patch": "@@ -18,26 +18,26 @@\n \tpublic final Map\u003cInteger, Integer[]\u003e phasedSignals;\n \tpublic final Map\u003cInteger, String\u003e frequencyNames;\n \n-\tprivate TeleportManager(){\n+\tprivate TeleportManager() {\n \t\tteleportPipes \u003d new LinkedList\u003cPipeTeleport\u003e();\n \t\tphasedSignals \u003d new HashMap\u003cInteger, Integer[]\u003e();\n \t\tfrequencyNames \u003d new HashMap\u003cInteger, String\u003e();\n \t}\n \n \tpublic void add(PipeTeleport pipe) {\n-\t\tif(!AdditionalPipes.proxy.isServer(pipe.worldObj)) return;\n+\t\tif(!AdditionalPipes.proxy.isServer(pipe.worldObj))\n+\t\t\treturn;\n \t\tteleportPipes.add(pipe);\n-\t\tAdditionalPipes.instance.logger.info(\n-\t\t\t\tString.format(\"[TeleportManager] Pipe added: %s @ (%d, %d, %d), %d pipes in network\",\n-\t\t\t\t\t\tpipe.getClass().getSimpleName(), pipe.xCoord, pipe.yCoord, pipe.zCoord, teleportPipes.size()));\n+\t\tAdditionalPipes.instance.logger.info(String.format(\"[TeleportManager] Pipe added: %s @ (%d, %d, %d), %d pipes in network\", pipe.getClass().getSimpleName(), pipe.xCoord, pipe.yCoord,\n+\t\t\t\tpipe.zCoord, teleportPipes.size()));\n \t}\n \n-\tpublic void remove(PipeTeleport pipe){\n-\t\tif(!AdditionalPipes.proxy.isServer(pipe.worldObj)) return;\n+\tpublic void remove(PipeTeleport pipe) {\n+\t\tif(!AdditionalPipes.proxy.isServer(pipe.worldObj))\n+\t\t\treturn;\n \t\tteleportPipes.remove(pipe);\n-\t\tAdditionalPipes.instance.logger.info(\n-\t\t\t\tString.format(\"[TeleportManager] Pipe removed: %s @ (%d, %d, %d), %d pipes in network\",\n-\t\t\t\t\t\tpipe.getClass().getSimpleName(), pipe.xCoord, pipe.yCoord, pipe.zCoord, teleportPipes.size()));\n+\t\tAdditionalPipes.instance.logger.info(String.format(\"[TeleportManager] Pipe removed: %s @ (%d, %d, %d), %d pipes in network\", pipe.getClass().getSimpleName(), pipe.xCoord, pipe.yCoord,\n+\t\t\t\tpipe.zCoord, teleportPipes.size()));\n \t}\n \n \tpublic void reset() {\n@@ -47,45 +47,43 @@ public void reset() {\n \t\tAdditionalPipes.instance.logger.info(\"Reset teleport manager.\");\n \t}\n \n-\t//returns all other teleport pipes of the same type (class) and frequency\n-\t//if forceReceive is true. Otherwise, take away all pipes that aren\u0027t receiving\n+\t// returns all other teleport pipes of the same type (class) and frequency\n+\t// if forceReceive is true. Otherwise, take away all pipes that aren\u0027t\n+\t// receiving\n \tpublic List\u003cPipeTeleport\u003e getConnectedPipes(PipeTeleport pipe, boolean forceReceive) {\n \t\tList\u003cPipeTeleport\u003e connected \u003d new LinkedList\u003cPipeTeleport\u003e();\n \t\tPipeLogicTeleport logic \u003d pipe.logic;\n \n-\t\tfor (PipeTeleport other : teleportPipes) {\n-\t\t\tif (!pipe.getClass().equals(other.getClass()) || other.container.isInvalid()) {\n+\t\tfor(PipeTeleport other : teleportPipes) {\n+\t\t\tif(!pipe.getClass().equals(other.getClass()) || other.container.isInvalid()) {\n \t\t\t\tcontinue;\n \t\t\t}\n \t\t\tPipeLogicTeleport otherLogic \u003d other.logic;\n \n-\t\t\t//not the same pipe \u0026\u0026\n-\t\t\t//same frequency \u0026\u0026\n-\t\t\t//pipe is open or forceReceive \u0026\u0026\n-\t\t\t//both public or same owner\n-\t\t\tif ((pipe.xCoord !\u003d other.xCoord || pipe.yCoord !\u003d other.yCoord || pipe.zCoord !\u003d other.zCoord ) \u0026\u0026\n-\t\t\t\t\totherLogic.getFrequency() \u003d\u003d logic.getFrequency() \u0026\u0026\n-\t\t\t\t\t((otherLogic.state \u0026 0x2) \u003e 0 || forceReceive) \u0026\u0026\n-\t\t\t\t\t(logic.isPublic ? otherLogic.isPublic  : otherLogic.owner.equalsIgnoreCase(logic.owner) )) {\n+\t\t\t// not the same pipe \u0026\u0026\n+\t\t\t// same frequency \u0026\u0026\n+\t\t\t// pipe is open or forceReceive \u0026\u0026\n+\t\t\t// both public or same owner\n+\t\t\tif((pipe.xCoord !\u003d other.xCoord || pipe.yCoord !\u003d other.yCoord || pipe.zCoord !\u003d other.zCoord) \u0026\u0026 otherLogic.getFrequency() \u003d\u003d logic.getFrequency()\n+\t\t\t\t\t\u0026\u0026 ((otherLogic.state \u0026 0x2) \u003e 0 || forceReceive) \u0026\u0026 (logic.isPublic ? otherLogic.isPublic : otherLogic.owner.equalsIgnoreCase(logic.owner))) {\n \t\t\t\tconnected.add(other);\n \t\t\t}\n \t\t}\n \t\treturn connected;\n \t}\n \n-\t//FIXME unused\n+\t// FIXME unused\n \tpublic List\u003cPipeTeleport\u003e getAllPipesInNetwork(PipeTeleport pipe) {\n \t\tList\u003cPipeTeleport\u003e pipes \u003d new LinkedList\u003cPipeTeleport\u003e();\n \t\tPipeLogicTeleport logic \u003d pipe.logic;\n \n-\t\tfor (PipeTeleport other : teleportPipes) {\n-\t\t\tif (!pipe.getClass().equals(other.getClass()) || other.container.isInvalid()) {\n+\t\tfor(PipeTeleport other : teleportPipes) {\n+\t\t\tif(!pipe.getClass().equals(other.getClass()) || other.container.isInvalid()) {\n \t\t\t\tcontinue;\n \t\t\t}\n \t\t\tPipeLogicTeleport otherLogic \u003d other.logic;\n \n-\t\t\tif (otherLogic.getFrequency() \u003d\u003d logic.getFrequency() \u0026\u0026\n-\t\t\t\t\t(logic.isPublic ? otherLogic.isPublic  : otherLogic.owner.equalsIgnoreCase(logic.owner) )) {\n+\t\t\tif(otherLogic.getFrequency() \u003d\u003d logic.getFrequency() \u0026\u0026 (logic.isPublic ? otherLogic.isPublic : otherLogic.owner.equalsIgnoreCase(logic.owner))) {\n \t\t\t\tpipes.add(other);\n \t\t\t}\n \t\t}\n@@ -94,7 +92,7 @@ public void reset() {\n \n \tpublic String getFrequencyName(int frequency) {\n \t\tString name \u003d frequencyNames.get(frequency);\n-\t\treturn name \u003d\u003d  null ? \"\" : name;\n+\t\treturn name \u003d\u003d null ? \"\" : name;\n \t}\n \n \tpublic void setFrequencyName(int frequency, String name) {"
        },
        {
          "file_name": "additionalpipes/pipes/logic/PipeLogicAdvancedWood.java",
          "patch": "@@ -28,42 +28,39 @@\n \n public class PipeLogicAdvancedWood extends PipeLogic implements IInventory {\n \n-\tpublic ItemStack [] items \u003d new ItemStack [9];\n+\tpublic ItemStack[] items \u003d new ItemStack[9];\n \n \tpublic boolean exclude \u003d false;\n \n-\tpublic void switchSource () {\n+\tpublic void switchSource() {\n \t\tint meta \u003d worldObj.getBlockMetadata(xCoord, yCoord, zCoord);\n \t\tint newMeta \u003d 6;\n \n-\t\tfor (int i \u003d meta + 1; i \u003c\u003d meta + 6; ++i) {\n+\t\tfor(int i \u003d meta + 1; i \u003c\u003d meta + 6; ++i) {\n \t\t\tForgeDirection o \u003d ForgeDirection.VALID_DIRECTIONS[i % 6];\n \t\t\tTileEntity tile \u003d container.getTile(o);\n-\t\t\tif (isInput(tile))\n-\t\t\t\tif (PipeManager.canExtractItems(container.getPipe(), tile.worldObj, tile.xCoord, tile.yCoord, tile.zCoord)) {\n+\t\t\tif(isInput(tile))\n+\t\t\t\tif(PipeManager.canExtractItems(container.getPipe(), tile.worldObj, tile.xCoord, tile.yCoord, tile.zCoord)) {\n \t\t\t\t\tnewMeta \u003d o.ordinal();\n \t\t\t\t\tbreak;\n \t\t\t\t}\n \t\t}\n \n-\t\tif (newMeta !\u003d meta) {\n+\t\tif(newMeta !\u003d meta) {\n \t\t\tworldObj.setBlockMetadataWithNotify(xCoord, yCoord, zCoord, newMeta, 2);\n \t\t\tcontainer.scheduleRenderUpdate();\n-\t\t\t//worldObj.markBlockNeedsUpdate(xCoord, yCoord, zCoord);\n+\t\t\t// worldObj.markBlockNeedsUpdate(xCoord, yCoord, zCoord);\n \t\t}\n \t}\n \n \tpublic boolean isInput(TileEntity tile) {\n-\t\treturn !(tile instanceof TileGenericPipe) \u0026\u0026 tile instanceof IInventory\n-\t\t\t\t\u0026\u0026 Utils.checkPipesConnections(container, tile);\n+\t\treturn !(tile instanceof TileGenericPipe) \u0026\u0026 tile instanceof IInventory \u0026\u0026 Utils.checkPipesConnections(container, tile);\n \t}\n \n-\n \t@Override\n \tpublic boolean blockActivated(EntityPlayer entityplayer) {\n \t\tItem equipped \u003d entityplayer.getCurrentEquippedItem() !\u003d null ? entityplayer.getCurrentEquippedItem().getItem() : null;\n-\t\tif (equipped instanceof IToolWrench\n-\t\t\t\t\u0026\u0026 ((IToolWrench) equipped).canWrench(entityplayer, xCoord, yCoord, zCoord)) {\n+\t\tif(equipped instanceof IToolWrench \u0026\u0026 ((IToolWrench) equipped).canWrench(entityplayer, xCoord, yCoord, zCoord)) {\n \t\t\tswitchSource();\n \t\t\t((IToolWrench) equipped).wrenchUsed(entityplayer, xCoord, yCoord, zCoord);\n \t\t\treturn true;\n@@ -72,35 +69,36 @@ public boolean blockActivated(EntityPlayer entityplayer) {\n \t\t\treturn false;\n \t\t}\n \n-\t\tentityplayer.openGui(AdditionalPipes.instance, GuiHandler.PIPE_WOODEN_ADV,\n-\t\t\t\tcontainer.worldObj, container.xCoord, container.yCoord, container.zCoord);\n+\t\tentityplayer.openGui(AdditionalPipes.instance, GuiHandler.PIPE_WOODEN_ADV, container.worldObj, container.xCoord, container.yCoord, container.zCoord);\n \t\treturn true;\n \t}\n \n \t@Override\n \tpublic boolean canPipeConnect(TileEntity tile, ForgeDirection side) {\n \t\tPipe pipe2 \u003d null;\n \n-\t\tif (tile instanceof TileGenericPipe) {\n+\t\tif(tile instanceof TileGenericPipe) {\n \t\t\tpipe2 \u003d ((TileGenericPipe) tile).pipe;\n \t\t}\n \n-\t\treturn (pipe2 \u003d\u003d null || (!(pipe2.logic instanceof PipeLogicWood) \u0026\u0026 !(pipe2.logic instanceof PipeLogicAdvancedWood))) \u0026\u0026 super.canPipeConnect(tile,side);\n+\t\treturn (pipe2 \u003d\u003d null || (!(pipe2.logic instanceof PipeLogicWood) \u0026\u0026 !(pipe2.logic instanceof PipeLogicAdvancedWood))) \u0026\u0026 super.canPipeConnect(tile, side);\n \n \t}\n \n \t@Override\n-\tpublic void initialize () {\n+\tpublic void initialize() {\n \t\tsuper.initialize();\n \t\tswitchSourceIfNeeded();\n \t}\n \n-\tprivate void switchSourceIfNeeded () {\n+\tprivate void switchSourceIfNeeded() {\n \t\tint meta \u003d worldObj.getBlockMetadata(xCoord, yCoord, zCoord);\n-\t\tif (meta \u003e 5) switchSource();\n+\t\tif(meta \u003e 5)\n+\t\t\tswitchSource();\n \t\telse {\n \t\t\tTileEntity tile \u003d container.getTile(ForgeDirection.VALID_DIRECTIONS[meta]);\n-\t\t\tif (!isInput(tile)) switchSource();\n+\t\t\tif(!isInput(tile))\n+\t\t\t\tswitchSource();\n \t\t}\n \t}\n \n@@ -111,10 +109,10 @@ public void readFromNBT(NBTTagCompound nbttagcompound) {\n \n \t\tNBTTagList nbttaglist \u003d nbttagcompound.getTagList(\"items\");\n \n-\t\tfor (int j \u003d 0; j \u003c nbttaglist.tagCount(); ++j) {\n+\t\tfor(int j \u003d 0; j \u003c nbttaglist.tagCount(); ++j) {\n \t\t\tNBTTagCompound nbttagcompound2 \u003d (NBTTagCompound) nbttaglist.tagAt(j);\n \t\t\tint index \u003d nbttagcompound2.getInteger(\"index\");\n-\t\t\titems [index] \u003d ItemStack.loadItemStackFromNBT(nbttagcompound2);\n+\t\t\titems[index] \u003d ItemStack.loadItemStackFromNBT(nbttagcompound2);\n \t\t}\n \t}\n \n@@ -125,12 +123,12 @@ public void writeToNBT(NBTTagCompound nbttagcompound) {\n \n \t\tNBTTagList nbttaglist \u003d new NBTTagList();\n \n-\t\tfor (int j \u003d 0; j \u003c items.length; ++j) {\n-\t\t\tif (items [j] !\u003d null \u0026\u0026 items [j].stackSize \u003e 0) {\n-\t\t\t\tNBTTagCompound nbttagcompound2 \u003d new NBTTagCompound ();\n+\t\tfor(int j \u003d 0; j \u003c items.length; ++j) {\n+\t\t\tif(items[j] !\u003d null \u0026\u0026 items[j].stackSize \u003e 0) {\n+\t\t\t\tNBTTagCompound nbttagcompound2 \u003d new NBTTagCompound();\n \t\t\t\tnbttaglist.appendTag(nbttagcompound2);\n \t\t\t\tnbttagcompound2.setInteger(\"index\", j);\n-\t\t\t\titems [j].writeToNBT(nbttagcompound2);\n+\t\t\t\titems[j].writeToNBT(nbttagcompound2);\n \t\t\t}\n \t\t}\n \n@@ -150,12 +148,12 @@ public ItemStack getStackInSlot(int i) {\n \t@Override\n \tpublic ItemStack decrStackSize(int i, int amt) {\n \t\tItemStack stack \u003d getStackInSlot(i);\n-\t\tif (stack !\u003d null) {\n-\t\t\tif (stack.stackSize \u003c\u003d amt) {\n+\t\tif(stack !\u003d null) {\n+\t\t\tif(stack.stackSize \u003c\u003d amt) {\n \t\t\t\tsetInventorySlotContents(i, null);\n \t\t\t} else {\n \t\t\t\tstack \u003d stack.splitStack(amt);\n-\t\t\t\tif (stack.stackSize \u003d\u003d 0) {\n+\t\t\t\tif(stack.stackSize \u003d\u003d 0) {\n \t\t\t\t\tsetInventorySlotContents(i, null);\n \t\t\t\t}\n \t\t\t}\n@@ -166,7 +164,7 @@ public ItemStack decrStackSize(int i, int amt) {\n \t@Override\n \tpublic ItemStack getStackInSlotOnClosing(int i) {\n \t\tItemStack stack \u003d getStackInSlot(i);\n-\t\tif (stack !\u003d null) {\n+\t\tif(stack !\u003d null) {\n \t\t\tsetInventorySlotContents(i, null);\n \t\t}\n \t\treturn stack;"
        },
        {
          "file_name": "additionalpipes/pipes/logic/PipeLogicClosed.java",
          "patch": "@@ -10,7 +10,7 @@\n \t@Override\n \tpublic boolean blockActivated(EntityPlayer player) {\n \t\tItemStack equippedItem \u003d player.getCurrentEquippedItem();\n-\t\tif (equippedItem !\u003d null \u0026\u0026 AdditionalPipes.isPipe(equippedItem.getItem()))  {\n+\t\tif(equippedItem !\u003d null \u0026\u0026 AdditionalPipes.isPipe(equippedItem.getItem())) {\n \t\t\treturn false;\n \t\t}\n \t\tplayer.openGui(AdditionalPipes.instance, GuiHandler.PIPE_CLOSED, worldObj, xCoord, yCoord, zCoord);"
        },
        {
          "file_name": "additionalpipes/pipes/logic/PipeLogicDistributor.java",
          "patch": "@@ -19,7 +19,7 @@\n \n public class PipeLogicDistributor extends PipeLogic {\n \n-\tpublic int distData[] \u003d {1, 1, 1, 1, 1, 1};\n+\tpublic int distData[] \u003d { 1, 1, 1, 1, 1, 1 };\n \tpublic int distSide \u003d 0;\n \tpublic int curTick \u003d 0;\n \n@@ -30,25 +30,24 @@ public boolean blockActivated(EntityPlayer player) {\n \t\t}\n \n \t\tItem equipped \u003d player.getCurrentEquippedItem() !\u003d null ? player.getCurrentEquippedItem().getItem() : null;\n-\t\tif (equipped !\u003d null) {\n-\t\t\tif (AdditionalPipes.isPipe(equipped)) {\n+\t\tif(equipped !\u003d null) {\n+\t\t\tif(AdditionalPipes.isPipe(equipped)) {\n \t\t\t\treturn false;\n \t\t\t}\n \t\t}\n \n-\t\tplayer.openGui(AdditionalPipes.instance, GuiHandler.PIPE_DIST,\n-\t\t\t\tcontainer.worldObj, container.xCoord, container.yCoord, container.zCoord);\n+\t\tplayer.openGui(AdditionalPipes.instance, GuiHandler.PIPE_DIST, container.worldObj, container.xCoord, container.yCoord, container.zCoord);\n \n \t\treturn true;\n \t}\n \n \tprivate void sanityCheck() {\n-\t\tfor (int d : distData) {\n-\t\t\tif (d \u003e 0) {\n+\t\tfor(int d : distData) {\n+\t\t\tif(d \u003e 0) {\n \t\t\t\treturn;\n \t\t\t}\n \t\t}\n-\t\tfor (int i \u003d 0; i \u003c distData.length; i++) {\n+\t\tfor(int i \u003d 0; i \u003c distData.length; i++) {\n \t\t\tArrays.fill(distData, 1);\n \t\t}\n \t}\n@@ -59,7 +58,7 @@ public void writeToNBT(NBTTagCompound nbt) {\n \n \t\tnbt.setInteger(\"curTick\", curTick);\n \t\tnbt.setInteger(\"distSide\", distSide);\n-\t\tfor (int i \u003d 0; i \u003c distData.length; i++) {\n+\t\tfor(int i \u003d 0; i \u003c distData.length; i++) {\n \t\t\tnbt.setInteger(\"distData\" + i, distData[i]);\n \t\t}\n \t}\n@@ -70,7 +69,7 @@ public void readFromNBT(NBTTagCompound nbt) {\n \n \t\tcurTick \u003d nbt.getInteger(\"curTick\");\n \t\tdistSide \u003d nbt.getInteger(\"distSide\");\n-\t\tfor (int i \u003d 0; i \u003c distData.length; i++) {\n+\t\tfor(int i \u003d 0; i \u003c distData.length; i++) {\n \t\t\tdistData[i] \u003d nbt.getInteger(\"distData\" + i);\n \t\t}\n \t\tsanityCheck();"
        },
        {
          "file_name": "additionalpipes/pipes/logic/PipeLogicTeleport.java",
          "patch": "@@ -36,14 +36,16 @@ public void setTile(TileGenericPipe tile) {\n \n \t@Override\n \tpublic boolean blockActivated(EntityPlayer player) {\n-\t\tif(!AdditionalPipes.proxy.isServer(player.worldObj)) return true;\n-\t\tif (owner \u003d\u003d null || \"\".equalsIgnoreCase(owner)) {\n+\t\tif(!AdditionalPipes.proxy.isServer(player.worldObj))\n+\t\t\treturn true;\n+\t\tif(owner \u003d\u003d null || \"\".equalsIgnoreCase(owner)) {\n \t\t\towner \u003d player.username;\n \t\t}\n \t\tItemStack equippedItem \u003d player.getCurrentEquippedItem();\n-\t\t/*if (equippedItem !\u003d null \u0026\u0026 AdditionalPipes.isPipe(equippedItem.getItem()))  {\n-\t\t\treturn false;\n-\t\t}*/\n+\t\t/*\n+\t\t * if (equippedItem !\u003d null \u0026\u0026\n+\t\t * AdditionalPipes.isPipe(equippedItem.getItem())) { return false; }\n+\t\t */\n \t\tplayer.openGui(AdditionalPipes.instance, GuiHandler.PIPE_TP, worldObj, xCoord, yCoord, zCoord);\n \t\treturn true;\n \t}\n@@ -92,10 +94,11 @@ public void updatePhasedSignals() {\n \t@Override\n \tpublic boolean canPipeConnect(TileEntity tile, ForgeDirection side) {\n \t\tPipe pipe \u003d null;\n-\t\tif (tile instanceof TileGenericPipe) {\n+\t\tif(tile instanceof TileGenericPipe) {\n \t\t\tpipe \u003d ((TileGenericPipe) tile).pipe;\n \t\t}\n-\t\tif(pipe !\u003d null \u0026\u0026 pipe.logic.getClass() \u003d\u003d this.getClass()) return false;\n+\t\tif(pipe !\u003d null \u0026\u0026 pipe.logic.getClass() \u003d\u003d this.getClass())\n+\t\t\treturn false;\n \t\treturn pipe !\u003d null;\n \t}\n "
        },
        {
          "file_name": "additionalpipes/textures/APActionTriggerIconProvider.java",
          "patch": "@@ -1,43 +1,43 @@\n package buildcraft.additionalpipes.textures;\n+\n import net.minecraft.client.Minecraft;\n import net.minecraft.client.renderer.texture.IconRegister;\n import net.minecraft.util.Icon;\n import buildcraft.api.core.IIconProvider;\n import cpw.mods.fml.relauncher.Side;\n import cpw.mods.fml.relauncher.SideOnly;\n \n-public class APActionTriggerIconProvider implements IIconProvider\n-{\n+public class APActionTriggerIconProvider implements IIconProvider {\n \tpublic static int actionDisablePipeIconIndex \u003d 0;\n \tpublic static int triggerCraftingIconIndex \u003d 1;\n-\tpublic static int triggerPowerDischargingIconIndex \u003d2;\n-\tpublic static int triggerPowerNeededIconIndex \u003d3;\n-\tpublic static int triggerSupplierFailedIconIndex \u003d4;\n-\tpublic static int triggerHasDestinationIconIndex \u003d5;\n-\t\n+\tpublic static int triggerPowerDischargingIconIndex \u003d 2;\n+\tpublic static int triggerPowerNeededIconIndex \u003d 3;\n+\tpublic static int triggerSupplierFailedIconIndex \u003d 4;\n+\tpublic static int triggerHasDestinationIconIndex \u003d 5;\n+\n \tprivate Icon icons[];\n \tprivate final int iconCount \u003d 9;\n-\tpublic APActionTriggerIconProvider()\n-\t{\n-\t\ticons\u003dnew Icon[iconCount];\n+\n+\tpublic APActionTriggerIconProvider() {\n+\t\ticons \u003d new Icon[iconCount];\n \t}\n+\n \t@Override\n \t@SideOnly(Side.CLIENT)\n \tpublic Icon getIcon(int iconIndex) {\n-\t\tif(iconIndex\u003e\u003diconCount)\n+\t\tif(iconIndex \u003e\u003d iconCount)\n \t\t\treturn null;\n \t\treturn icons[iconIndex];\n \t}\n \n \t@Override\n \t@SideOnly(Side.CLIENT)\n \tpublic void registerIcons(IconRegister iconRegister) {\n-\t\tif(iconRegister!\u003dMinecraft.getMinecraft().renderEngine.textureMapItems)\n+\t\tif(iconRegister !\u003d Minecraft.getMinecraft().renderEngine.textureMapItems)\n \t\t\treturn;\n-\t\tfor(int i\u003d0;i\u003ciconCount;i++)\n-\t\t{\n-\t\t\ticons[i]\u003diconRegister.registerIcon(\"additionalpipes:triggers/\"+i);\n+\t\tfor(int i \u003d 0; i \u003c iconCount; i++) {\n+\t\t\ticons[i] \u003d iconRegister.registerIcon(\"additionalpipes:triggers/\" + i);\n \t\t}\n \t}\n-\t\n+\n }\n\\ No newline at end of file"
        },
        {
          "file_name": "additionalpipes/textures/APPipeIconProvider.java",
          "patch": "@@ -1,4 +1,5 @@\n package buildcraft.additionalpipes.textures;\n+\n import net.minecraft.client.Minecraft;\n import net.minecraft.client.renderer.texture.IconRegister;\n import net.minecraft.util.Icon;\n@@ -10,24 +11,25 @@\n \tprivate Icon icons[];\n \tprivate final int iconCount \u003d 25;\n \n-\tpublic APPipeIconProvider()\t{\n-\t\ticons\u003dnew Icon[iconCount];\n+\tpublic APPipeIconProvider() {\n+\t\ticons \u003d new Icon[iconCount];\n \t}\n \n \t@Override\n \t@SideOnly(Side.CLIENT)\n \tpublic Icon getIcon(int iconIndex) {\n-\t\tif(iconIndex\u003e\u003diconCount)\n+\t\tif(iconIndex \u003e\u003d iconCount)\n \t\t\treturn null;\n \t\treturn icons[iconIndex];\n \t}\n \n \t@Override\n \t@SideOnly(Side.CLIENT)\n \tpublic void registerIcons(IconRegister iconRegister) {\n-\t\tif(iconRegister !\u003d Minecraft.getMinecraft().renderEngine.textureMapBlocks) return;\n+\t\tif(iconRegister !\u003d Minecraft.getMinecraft().renderEngine.textureMapBlocks)\n+\t\t\treturn;\n \t\tfor(int i \u003d 0; i \u003c iconCount; i++) {\n-\t\t\ticons[i]\u003diconRegister.registerIcon(\"additionalpipes:pipes/\"+i);\n+\t\t\ticons[i] \u003d iconRegister.registerIcon(\"additionalpipes:pipes/\" + i);\n \t\t}\n \t}\n "
        },
        {
          "file_name": "additionalpipes/textures/Textures.java",
          "patch": "@@ -5,17 +5,15 @@\n import net.minecraft.util.Icon;\n \n public class Textures {\n-\tpublic static APActionTriggerIconProvider actionIconProvider\u003dnew APActionTriggerIconProvider();\n-\tpublic static APPipeIconProvider pipeIconProvider\u003dnew APPipeIconProvider();\n+\tpublic static APActionTriggerIconProvider actionIconProvider \u003d new APActionTriggerIconProvider();\n+\tpublic static APPipeIconProvider pipeIconProvider \u003d new APPipeIconProvider();\n \tpublic static Icon tetherTexture;\n-\tpublic static void registerIcons(IconRegister par1IconRegister)\n-\t{\n+\n+\tpublic static void registerIcons(IconRegister par1IconRegister) {\n \t\tactionIconProvider.registerIcons(par1IconRegister);\n \t\tpipeIconProvider.registerIcons(par1IconRegister);\n-\t\tif(par1IconRegister\u003d\u003dMinecraft.getMinecraft().renderEngine.textureMapBlocks)\n-\t\t{\n-\t\t\ttetherTexture\u003dpar1IconRegister.registerIcon(\"additionalpipes:tether\");\n+\t\tif(par1IconRegister \u003d\u003d Minecraft.getMinecraft().renderEngine.textureMapBlocks) {\n+\t\t\ttetherTexture \u003d par1IconRegister.registerIcon(\"additionalpipes:tether\");\n \t\t}\n \t}\n }\n-"
        }
      ]
    }
  },
  {
    "name": "java null pointer exception while loading Minecraft",
    "url": "https://github.com/mezz/JustEnoughItems/issues/870",
    "description": "I get this crash when loading Minecraft. I use JEI 4.3.6.280, Minecraft 1.11.2 and Forge 13.20.0.2309 https://pastebin.com/5SAivj1Z\r\n",
    "keywords": [
      "minecraft"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/mezz/JustEnoughItems/commit/0cbc686826d8574eaff3769ba3b0fc88a644b7d8",
      "files": [
        {
          "file_name": "src/main/java/mezz/jei/config/Config.java",
          "patch": "@@ -279,7 +279,7 @@ private static boolean syncConfig() {\n \t\tSearchMode[] searchModes \u003d SearchMode.values();\r\n \r\n \t\t// set new defaults moving from config version 0.2.0 to 0.3.0\r\n-\t\tif (config.getLoadedConfigVersion().equals(\"0.2.0\")) {\r\n+\t\tif (\"0.2.0\".equals(config.getLoadedConfigVersion())) {\r\n \t\t\tconfig.setEnum(\"creativeTabSearchMode\", CATEGORY_SEARCH, defaultValues.creativeTabSearchMode, searchModes);\r\n \t\t\tconfig.setEnum(\"oreDictSearchMode\", CATEGORY_SEARCH, defaultValues.oreDictSearchMode, searchModes);\r\n \t\t}\r"
        }
      ]
    }
  },
  {
    "name": "Null pointer exception for POST mode facets if facet_filter accepts no documents",
    "url": "https://github.com/elastic/elasticsearch/issues/3479",
    "description": "elasticsearch 0.90.3\norg.elasticsearch.search.facet.FacetExecutor$Post$Filtered, line 66\n\n```\nfor (int i \u003d 0; i \u003c docSets.size(); i++) {\n  ContextDocIdSet entry \u003d docSets.get(i);\n  DocIdSet filteredSet \u003d filter.getDocIdSet(entry.context, null);\n  filteredEntries.add(new ContextDocIdSet(\n    entry.context,\n    // TODO: can we be smart here, maybe AndDocIdSet is not always fastest?\n    new AndDocIdSet(new DocIdSet[]{entry.docSet, filteredSet})\n  ));\n}\n```\n\nFrom the JavaDoc for Filter:\n`NOTE: null can be returned if no documents are accepted by this Filter`\n\nSo, the filteredSet object can be null. It is then passed into the constructor of the AndDocIdSet, which can cause a null pointer exception during the execution of the POST facet.\n\nThe solution is that if filteredSet is null then the current ContextDocIdSet can be ignored.\n\n```\nif (filteredSet \u003d\u003d null) continue;\n```\n\nI replicated this issue with the following query (where the filter facet does match a term in the index, but the facet filter does not):\n\n```\n{\n  \"query\": {\n    \"match_all\": {}\n  },\n  \"size\": 0,\n  \"facets\": {\n    \"my_facet\": {\n      \"filter\": {\n        \"term\": {\n          \"text\": \"document\"\n        }\n      },\n      \"mode\": \"post\",\n      \"facet_filter\": {\n        \"term\": {\n          \"text\": \"DOES_NOT_MATCH_ANYTHING\",\n        }\n      }\n    }\n  }\n}\n```\n",
    "keywords": [
      "filter",
      "entry",
      "new",
      "can",
      "post",
      "null",
      "anddocidset",
      "contextdocidset",
      "filteredset",
      "term",
      ";",
      "facet"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/elastic/elasticsearch/commit/83c26eb74abe7d3c4550a927ee78fe3ee4010d49",
      "files": [
        {
          "file_name": "src/main/java/org/elasticsearch/search/facet/FacetExecutor.java",
          "patch": "@@ -66,11 +66,13 @@ public void executePost(List\u003cContextDocIdSet\u003e docSets) throws IOException {\n                 for (int i \u003d 0; i \u003c docSets.size(); i++) {\n                     ContextDocIdSet entry \u003d docSets.get(i);\n                     DocIdSet filteredSet \u003d filter.getDocIdSet(entry.context, null);\n-                    filteredEntries.add(new ContextDocIdSet(\n-                            entry.context,\n-                            // TODO: can we be smart here, maybe AndDocIdSet is not always fastest?\n-                            new AndDocIdSet(new DocIdSet[]{entry.docSet, filteredSet})\n-                    ));\n+                    if (filteredSet !\u003d null) {\n+                        filteredEntries.add(new ContextDocIdSet(\n+                                entry.context,\n+                                // TODO: can we be smart here, maybe AndDocIdSet is not always fastest?\n+                                new AndDocIdSet(new DocIdSet[]{entry.docSet, filteredSet})\n+                        ));\n+                    }\n                 }\n                 post.executePost(filteredEntries);\n             }"
        },
        {
          "file_name": "src/test/java/org/elasticsearch/test/integration/search/facet/SimpleFacetsTests.java",
          "patch": "@@ -58,7 +58,6 @@\n import static org.elasticsearch.index.query.FilterBuilders.termFilter;\n import static org.elasticsearch.index.query.QueryBuilders.*;\n import static org.elasticsearch.search.facet.FacetBuilders.*;\n-import static org.hamcrest.MatcherAssert.assertThat;\n import static org.hamcrest.Matchers.*;\n \n /**\n@@ -2282,6 +2281,29 @@ public void testQueryFacet() throws Exception {\n         }\n     }\n \n+    @Test // #3479: Null pointer exception for POST mode facets if facet_filter accepts no documents\n+    public void testFilterFacetWithFacetFilterPostMode() throws IOException {\n+        client().prepareIndex(\"test\", \"type1\").setSource(jsonBuilder().startObject()\n+                .field(\"field\", \"xxx\")\n+                .endObject()).execute().actionGet();\n+\n+        client().admin().indices().prepareRefresh().execute().actionGet();\n+\n+        for (int i \u003d 0; i \u003c numberOfRuns(); i++) {\n+            SearchResponse searchResponse \u003d client().prepareSearch()\n+                    .setQuery(matchAllQuery())\n+                    .addFacet(\n+                            termsFacet(\"facet1\").field(\"field\").mode(FacetBuilder.Mode.POST).facetFilter(termFilter(\"tag\", \"doesnotexist\"))\n+                    )\n+                    .execute().actionGet();\n+\n+            assertThat(searchResponse.getFailedShards(), equalTo(0));\n+            TermsFacet facet \u003d searchResponse.getFacets().facet(\"facet1\");\n+            assertThat(facet.getName(), equalTo(\"facet1\"));\n+            assertThat(facet.getEntries().size(), equalTo(0));\n+        }\n+    }\n+\n     private long utcTimeInMillis(String time) {\n         return timeInMillis(time, DateTimeZone.UTC);\n     }"
        }
      ]
    }
  },
  {
    "name": "Null Pointer Exception Error CppClassRepository",
    "url": "https://github.com/CS580-Thunderbird/study-hard-play-hard/issues/20",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/CS580-Thunderbird/study-hard-play-hard/commit/1aed674e620989ae7c444eb561d4bab2237dac3f",
      "files": [
        {
          "file_name": "src/main/java/edu/cpp/cs580/thunderbird/MyApp.java",
          "patch": "@@ -23,12 +23,12 @@ public UserManager userManager(){\n \t\treturn userManager;\n \t}\n \t\n-\t/*\n+\t\n \t@Bean\n \tpublic CppClassManager cppClassManager(){\n \t\tCppClassManager cppClassManager \u003d new CppClassManager();\n \t\treturn cppClassManager;\n-\t}*/\n+\t}\n \n \tpublic static void main(String[] args) {\n \t\tSpringApplication.run(MyApp.class, args);"
        },
        {
          "file_name": "src/main/java/edu/cpp/cs580/thunderbird/controller/WebController.java",
          "patch": "@@ -29,6 +29,7 @@\n public class WebController {\n \t\n \t@Autowired private UserManager userManager;\n+\t@Autowired private CppClassManager cppClassManager;\n \n     GoogleOAuth OAuth; // May come up with better method\n \n@@ -120,9 +121,9 @@ String getHome(@RequestParam(\"code\") String code) throws IOException{\n \n     //Temporary Usage, Just want to try it out\n     @RequestMapping(\"/getCppSchedule\")\n-    String getCppClassesSchedule(){\n+    String getCppClassesSchedule() throws Exception{\n         try {\n-            GetCppClasses cppClsss \u003d new GetCppClasses();\n+            GetCppClasses cppClsss \u003d new GetCppClasses(cppClassManager);\n         } catch (IOException e) {\n             System.out.println(\"Error -- getCppClsses\");\n         }"
        },
        {
          "file_name": "src/main/java/edu/cpp/cs580/thunderbird/data/CppClassSchedule.java",
          "patch": "@@ -9,7 +9,6 @@\n  * @author nchantarutai\n  *\n  */\n-@Document(collection \u003d \"classes\")\n public class CppClassSchedule {\n \n \tprivate String code;"
        },
        {
          "file_name": "src/main/java/edu/cpp/cs580/thunderbird/data/provider/CppClassManager.java",
          "patch": "@@ -11,10 +11,14 @@\n @Configurable\n public class CppClassManager {\n \t\n-\t@Autowired private CppClassRepository classRepo; // Not work need to recheck\n-\t\n+\t@Autowired private CppClassRepository cppClassRepo; // Not work need to recheck\n+\n \tpublic void addNewClassToList(CppClassSchedule newClass){\n-\t\tclassRepo.save(newClass);\n+\t\tcppClassRepo.save(newClass);\n+\t}\n+\t\n+\tpublic void test(){\n+\t\t\n \t}\n \t\n }"
        },
        {
          "file_name": "src/main/java/edu/cpp/cs580/thunderbird/tools/GetCppClasses.java",
          "patch": "@@ -28,14 +28,14 @@\n  */\n public class GetCppClasses {\n \t\t\n-\t@Autowired private CppClassManager classManager;\n+\t\tprivate CppClassManager classManager;\n \t\t\n-\t\tpublic GetCppClasses() throws IOException{\t\n-\t\t\tclassManager \u003d new CppClassManager(); //Autowired not work, need to recheck\n+\t\tpublic GetCppClasses(CppClassManager classManager) throws Exception{\t\n+\t\t\tthis.classManager \u003d classManager; //Autowired not work, need to recheck\n \t\t\tparseClasses();\n \t\t}\n \t\t\n-\t\tpublic void parseClasses() throws IOException{\n+\t\tpublic void parseClasses() throws Exception{\n \t\t\tFile codeCsv \u003d new File(\"src/main/resources/static/data/classCodes.csv\");\n \t\t\tBufferedReader br \u003d new BufferedReader(new FileReader(codeCsv));\n \t\t\tString input \u003d br.readLine();\n@@ -107,7 +107,7 @@ public static Document parseClass(String code) throws IOException{\n \t\t\treturn result;\n \t\t}\n \t\t\n-\t\tpublic void insertClassScheduleToDB(Document doc){\n+\t\tpublic void insertClassScheduleToDB(Document doc) throws Exception{\n \t\t\t\n \t\t\tTimeObj classTime \u003d new TimeObj();\t\t\n \t\t\tString classCode \u003d \"\", description \u003d \"\", time \u003d\"\", location \u003d \"\", datePeriod \u003d \"\", instructor \u003d \"\", building \u003d \"\", room \u003d \"\";\n@@ -137,8 +137,8 @@ public void insertClassScheduleToDB(Document doc){\n \t\t\t\t\n \t\t\t\tCppClassSchedule newClass \u003d new CppClassSchedule(classCode, description, classTime, instructor, building, room);\n \t\t\t\t\n-\t\t\t\t//Error Null Pointer Exception, need to fix\n-\t\t\t\t//classManager.addNewClassToList(newClass);\n+\t\t\t\tclassManager.addNewClassToList(newClass);\n+\t\t\t\t\n \t\t\t}\n \t\t\t\n \t\t}"
        }
      ]
    }
  },
  {
    "name": "FormEntryActivity Null Pointer Exception fix",
    "url": "https://github.com/dimagi/commcare-android/pull/303",
    "description": "Fixing a hard to reproduce Null Pointer Exception\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/dimagi/commcare-android/commit/7dc16324249fb3f9be3bbbff384a1813fc186e0c",
      "files": [
        {
          "file_name": "app/src/org/odk/collect/android/activities/FormEntryActivity.java",
          "patch": "@@ -1358,8 +1358,14 @@ public int compare(FormIndex arg0, FormIndex arg1) {\n                     }\n                 }\n             } else {\n-                Log.w(t, \"Unknown view type rendered while current event was question or group! View type: \" + mCurrentView \u003d\u003d null ? \"null\" : mCurrentView.getClass().toString());\n-            }    \n+                String viewType;\n+                if (mCurrentView \u003d\u003d null || mCurrentView.getClass() \u003d\u003d null) {\n+                   viewType \u003d \"null\";\n+                } else {\n+                    viewType \u003d mCurrentView.getClass().toString();\n+                }\n+                Log.w(t, \"Unknown view type rendered while current event was question or group! View type: \" + viewType);\n+            }\n         }\n         return success;\n     }"
        }
      ]
    }
  },
  {
    "name": "Null Pointer",
    "url": "https://github.com/DarthCraft/DarthCraft/issues/75",
    "description": "Just saw this in logs, need to look at it:\n\n21:15:39] [Server thread/ERROR]: Error occurred while enabling DarthCraft v2.5 (Is it up to date?)\njava.lang.NullPointerException\n    at net.darthcraft.dcmod.DarthCraft.onEnable(DarthCraft.java:195) ~[?:?]\n    at org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:321) ~[spigot1.8.jar:git-Spigot-b8f6402-a646500]\n    at org.bukkit.plugin.java.JavaPluginLoader.enablePlugin(JavaPluginLoader.java:335) [spigot1.8.jar:git-Spigot-b8f6402-a646500]\n    at org.bukkit.plugin.SimplePluginManager.enablePlugin(SimplePluginManager.java:405) [spigot1.8.jar:git-Spigot-b8f6402-a646500]\n    at org.bukkit.craftbukkit.v1_8_R1.CraftServer.loadPlugin(CraftServer.java:352) [spigot1.8.jar:git-Spigot-b8f6402-a646500]\n    at org.bukkit.craftbukkit.v1_8_R1.CraftServer.enablePlugins(CraftServer.java:313) [spigot1.8.jar:git-Spigot-b8f6402-a646500]\n    at net.minecraft.server.v1_8_R1.MinecraftServer.q(MinecraftServer.java:402) [spigot1.8.jar:git-Spigot-b8f6402-a646500]\n    at net.minecraft.server.v1_8_R1.MinecraftServer.k(MinecraftServer.java:370) [spigot1.8.jar:git-Spigot-b8f6402-a646500]\n    at net.minecraft.server.v1_8_R1.MinecraftServer.a(MinecraftServer.java:325) [spigot1.8.jar:git-Spigot-b8f6402-a646500]\n    at net.minecraft.server.v1_8_R1.DedicatedServer.init(DedicatedServer.java:211) [spigot1.8.jar:git-Spigot-b8f6402-a646500]\n    at net.minecraft.server.v1_8_R1.MinecraftServer.run(MinecraftServer.java:494) [spigot1.8.jar:git-Spigot-b8f6402-a646500]\n    at java.lang.Thread.run(Unknown Source) [?:1.7.0_67]\n",
    "keywords": [
      "darthcraft",
      "minecraft",
      "server",
      "bukkit",
      "craftserver",
      "org",
      "jar:git-spigot-b8f6402-a646500]",
      "v1_8_r1 minecraftserver",
      "java",
      "plugin",
      "org bukkit",
      "minecraftserver",
      "[spigot1",
      "v1_8_r1",
      "8",
      "minecraft server",
      "net",
      "8 jar:git-spigot-b8f6402-a646500]"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/DarthCraft/DarthCraft/commit/cff90eb57cadec73ab87ea418f00c1a83e5d3bf7",
      "files": [
        {
          "file_name": "buildnumber.properties",
          "patch": "@@ -1,3 +1,3 @@\n #Build Number for ANT. Do not edit!\r\n-#Sun Feb 22 21:25:55 GMT 2015\r\n-build.number\u003d173\r\n+#Sun Feb 22 22:40:27 GMT 2015\r\n+build.number\u003d177\r"
        },
        {
          "file_name": "src/config.yml",
          "patch": "@@ -3,6 +3,9 @@\n ## By DarthSalamon \u0026 Wild1145\n ##\n \n+# GeoIP Stuff (Requires Manual Uploading)\n+geoip: true\n+\n # Visitor Counter\n uniqueplayers: 0\n players: 0"
        },
        {
          "file_name": "src/net/darthcraft/dcmod/DarthCraft.java",
          "patch": "@@ -191,15 +191,19 @@ public void onEnable()\n             logger.warning(DC_Messages.MYSQL_NOT_ENABLED);\n         }\n \n-        //Lets download the Database and see if this shit actually works...\n-        plugin.playerSource.downloadDatabase();\n+         if (mainConfig.getBoolean(\"geoip\", true))\n+         {\n+             logger.warning(\"Attention: If you have NOT manually downloaded and installed the required MaxMind Dependencies, you will get a clusterfuck of errors. Please make sure that you do this BEFORE enabling this plugin again!\");\n+         }\n \n         // Start the metrics\n-        metricsPlotter.start();\n+        {\n+            metricsPlotter.start();\n+        }\n \n         logger.log(Level.INFO, DC_Messages.PLUGIN_ENABLED, new Object[]\n-        {\n-            pluginVersion, pluginAuthors\n+           {\n+               pluginVersion, pluginAuthors\n         });\n     }\n "
        },
        {
          "file_name": "src/net/darthcraft/dcmod/addons/PlayerSource.java",
          "patch": "@@ -18,17 +18,14 @@\n \n public class PlayerSource extends DarthCraftAddon\n {\n-    \n+\n     File databaseFile;\n-    File dataFolder;\n-    \n+\n     public PlayerSource(DarthCraft plugin)\n     {\n         super(plugin);\n         File database \u003d new File(\"GeoLite2-City.mmdb\");\n-        \n-        this.dataFolder \u003d dataFolder;\n-        \n+\n         try\n         {\n             reader \u003d new DatabaseReader.Builder(database).build();\n@@ -38,7 +35,7 @@ public PlayerSource(DarthCraft plugin)\n             logger.debug(\"SHIT BROKE!!!! (IP Resolver)\");\n         }\n     }\n-    \n+\n     DatabaseReader reader;\n \n     /**\n@@ -53,9 +50,9 @@ public String getCountryName(String ip)\n         try\n         {\n             CityResponse response \u003d reader.city(InetAddress.getByName(ip));\n-            \n+\n             Country country \u003d response.getCountry();\n-            \n+\n             return country.getName();\n         }\n         catch (IOException | GeoIp2Exception ex)\n@@ -64,61 +61,27 @@ public String getCountryName(String ip)\n             return null;\n         }\n     }\n-    \n+\n     public void onPlayerJoinEvent(PlayerJoinEvent event)\n     {\n-        String country \u003d getCountryName(event.getPlayer().getAddress().getHostName());\n-        for (Player player : plugin.getServer().getOnlinePlayers())\n+        if (plugin.mainConfig.getBoolean(\"geoip\", true))\n         {\n-            if (Permissions.PermissionUtils.hasPermission(player, Permissions.Permission.ADMIN))\n+\n+            String country \u003d getCountryName(event.getPlayer().getAddress().getHostName());\n+            for (Player player : plugin.getServer().getOnlinePlayers())\n             {\n-                player.sendMessage(event.getPlayer().getName() + \"Comes from \" + country);\n+                if (Permissions.PermissionUtils.hasPermission(player, Permissions.Permission.ADMIN))\n+                {\n+                    player.sendMessage(event.getPlayer().getName() + \"Comes from \" + country);\n+                }\n             }\n+\n         }\n-        \n-    }\n-    \n-    public void downloadDatabase()\n-    {\n-        if (databaseFile.exists())\n-        {\n-            logger.debug(\"The file exsists... Lets do nothing\");\n-        }\n+\n         else\n         {\n-            logger.debug(\"PANIC!!! The file is missing... Lets see what we can do about that.\");\n-            try\n-            {\n-                databaseFile \u003d new File(dataFolder, \"GeoLite2-City.mmdb\");\n-                String url \u003d \"https://www.superior-networks.com/maxmind/GeoLite2-City.mmdb\";\n-                logger.debug(\"Something important can be put here... What exactly nobody knows, but oh well.\");\n-                URL downloadUrl \u003d new URL(url);\n-                URLConnection conn \u003d downloadUrl.openConnection();\n-                conn.setConnectTimeout(10000);\n-                conn.connect();\n-                InputStream input \u003d conn.getInputStream();\n-                \n-                input \u003d new GZIPInputStream(input);\n-                OutputStream output \u003d new FileOutputStream(databaseFile);\n-                byte[] buffer \u003d new byte[2048];\n-                int length \u003d input.read(buffer);\n-                while (length \u003e\u003d 0)\n-                {\n-                    output.write(buffer, 0, length);\n-                    length \u003d input.read(buffer);\n-                }\n-                output.close();\n-                input.close();\n-            }\n-            catch (MalformedURLException ex)\n-            {\n-                logger.debug(\"The URL is fucked up... Wild broke something again - Sorry :)\");\n-                return;\n-            }\n-            catch (IOException ex)\n-            {\n-                logger.debug(\"Errr... This looks like Ben Broken something with the network I think... As we cannot connect to the URL... Shout at Ben please :)\");\n-            }\n+            logger.debug(\"The GeoIP stuff is disabled, woopie!\");\n         }\n     }\n+\n }"
        }
      ]
    }
  },
  {
    "name": "Null pointer in SettingsActivity.java when loading navigation app preferences",
    "url": "https://github.com/cgeo/cgeo/issues/4514",
    "description": "main/src/cgeo/geocaching/settings/SettingsActivity.java:155\n\nThe call getPreference(appEnum.preferenceKey) can return null when another app on the device has an intent-filter that responds to cgeo.geocaching.wear.NAVIGATE_TO. Take SkeletonApp or any sample, add this intent-filter to it, and install the app. c:geo will crash on startup.\n\n``` xml\n\u003cservice android:name\u003d\"com.foo.cgeogear.GearService\" android:exported\u003d\"true\" \u003e\n  \u003cintent-filter\u003e\n    \u003caction android:name\u003d\"cgeo.geocaching.wear.NAVIGATE_TO\" /\u003e\n    \u003ccategory android:name\u003d\"android.intent.category.DEFAULT\" /\u003e\n  \u003c/intent-filter\u003e\n\u003c/service\u003e\n```\n",
    "keywords": [
      "app",
      "android:name\u003d"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/cgeo/cgeo/commit/09b6da5f4c94eb473d98971af7d10511ad530b64",
      "files": [
        {
          "file_name": "main/res/xml/preferences.xml",
          "patch": "@@ -703,6 +703,11 @@\n                 \u003cCheckBoxPreference\n                     android:defaultValue\u003d\"true\"\n                     android:enabled\u003d\"false\"\n+                    android:key\u003d\"@string/pref_navigation_menu_android_wear\"\n+                    android:title\u003d\"@string/cache_menu_android_wear\" /\u003e\n+                \u003cCheckBoxPreference\n+                    android:defaultValue\u003d\"true\"\n+                    android:enabled\u003d\"false\"\n                     android:key\u003d\"@string/pref_navigation_menu_mapswithme\"\n                     android:title\u003d\"@string/cache_menu_mapswithme\" /\u003e\n             \u003c/PreferenceScreen\u003e"
        }
      ]
    }
  },
  {
    "name": "Various fixes for dereference null pointer and resource leaks.",
    "url": "https://github.com/lightblue-platform/lightblue-mongo/pull/208",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/lightblue-platform/lightblue-mongo/commit/31ca6ad4b9824fa2907bc21d4621e7d40ce78ee9",
      "files": [
        {
          "file_name": "mongo/src/main/java/com/redhat/lightblue/mongo/config/MongoDBResolver.java",
          "patch": "@@ -77,6 +77,9 @@ public DB get(MongoDataStore store) {\n                 db \u003d dbMap.get(store.getDatabaseName());\n                 if (db \u003d\u003d null) {\n                     MongoConfiguration cfg\u003dgetConfiguration(store);\n+                    if (cfg \u003d\u003d null) {\n+                        throw new IllegalArgumentException(\"No datasources for \" + store.getDatasourceName());\n+                    }\n                     db \u003d cfg.getDB();\n                     dbMap.put(store.getDatabaseName(), db);\n                 }"
        },
        {
          "file_name": "mongo/src/main/java/com/redhat/lightblue/mongo/crud/Translator.java",
          "patch": "@@ -266,9 +266,9 @@ public static Object getDBObject(DBObject start, Path p) {\n             String segment \u003d p.head(seg);\n             if (segment.equals(Path.ANY)) {\n                 throw Error.get(MongoCrudConstants.ERR_TRANSLATION_ERROR, p.toString());\n-            } else if (Util.isNumber(segment)) {\n+            } else if (trc !\u003d null \u0026\u0026 Util.isNumber(segment)) {\n                 trc \u003d ((List) trc).get(Integer.valueOf(segment));\n-            } else {\n+            } else if (trc !\u003d null) {\n                 trc \u003d ((DBObject) trc).get(segment);\n             }\n             if (trc \u003d\u003d null\u0026\u0026seg+1\u003cn) {"
        },
        {
          "file_name": "mongo/src/main/java/com/redhat/lightblue/mongo/metadata/BSONParser.java",
          "patch": "@@ -220,7 +220,7 @@ public BSONObject convert(EntitySchema schema) {\n         Error.push(\"convert[info|bson]\");\n         try {\n             BSONObject doc \u003d super.convert(schema);\n-            putValue(doc, \"_id\", getStringProperty(doc, \"name\") + DELIMITER_ID + getStringProperty(getObjectProperty(doc, \"version\"), \"value\"));\n+            putValue(doc, \"_id\", getStringProperty(doc, \"name\") + DELIMITER_ID + getRequiredStringProperty(getRequiredObjectProperty(doc, \"version\"), \"value\"));\n \n             return doc;\n         } catch (Error e) {"
        },
        {
          "file_name": "mongo/src/test/java/com/redhat/lightblue/mongo/config/MongoConfigurationParseTest.java",
          "patch": "@@ -9,23 +9,26 @@\n import com.mongodb.ReadPreference;\n import com.mongodb.WriteConcern;\n import com.redhat.lightblue.util.JsonUtils;\n+import java.io.InputStream;\n \n public class MongoConfigurationParseTest {\n \n     @Test\n     public void testReadPreference() throws IOException {\n \n-        JsonNode node \u003d JsonUtils.json(Thread.currentThread().getContextClassLoader().getResourceAsStream(\"parse-test-datasources.json\"));\n+        try (InputStream is \u003d Thread.currentThread().getContextClassLoader().getResourceAsStream(\"parse-test-datasources.json\")) {\n+            JsonNode node \u003d JsonUtils.json(is);\n \n-        MongoConfiguration metadataConfig \u003d new MongoConfiguration();\n-        metadataConfig.initializeFromJson(node.get(\"metadata\"));\n+            MongoConfiguration metadataConfig \u003d new MongoConfiguration();\n+            metadataConfig.initializeFromJson(node.get(\"metadata\"));\n \n-        MongoConfiguration dataConfig \u003d new MongoConfiguration();\n-        dataConfig.initializeFromJson(node.get(\"mongodata\"));\n+            MongoConfiguration dataConfig \u003d new MongoConfiguration();\n+            dataConfig.initializeFromJson(node.get(\"mongodata\"));\n \n-        assertEquals(ReadPreference.nearest(), metadataConfig.getMongoClientOptions().getReadPreference());\n-        assertEquals(ReadPreference.secondary(), dataConfig.getMongoClientOptions().getReadPreference());\n-        assertEquals(WriteConcern.SAFE, metadataConfig.getWriteConcern());\n+            assertEquals(ReadPreference.nearest(), metadataConfig.getMongoClientOptions().getReadPreference());\n+            assertEquals(ReadPreference.secondary(), dataConfig.getMongoClientOptions().getReadPreference());\n+            assertEquals(WriteConcern.SAFE, metadataConfig.getWriteConcern());\n+        }\n     }\n \n }"
        },
        {
          "file_name": "mongo/src/test/java/com/redhat/lightblue/mongo/crud/BasicDocDeleterTest.java",
          "patch": "@@ -19,11 +19,11 @@\n package com.redhat.lightblue.mongo.crud;\n \n import com.mongodb.BasicDBObject;\n+import com.mongodb.DBCursor;\n import com.mongodb.DBObject;\n import com.mongodb.WriteResult;\n import com.redhat.lightblue.crud.CRUDDeleteResponse;\n import com.redhat.lightblue.crud.CRUDOperationContext;\n-import com.redhat.lightblue.mongo.crud.BasicDocDeleter;\n import com.redhat.lightblue.crud.CRUDOperation;\n import org.junit.Assert;\n import org.junit.Test;\n@@ -44,7 +44,9 @@ public void delete() {\n         // check that insert happened\n         Assert.assertTrue(wr.getError() \u003d\u003d null);\n \n-        Assert.assertEquals(\"count on collection\", 1, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(\"count on collection\", 1, c.count());\n+        }\n \n         // execute delete\n         BasicDocDeleter deleter \u003d new BasicDocDeleter();"
        },
        {
          "file_name": "mongo/src/test/java/com/redhat/lightblue/mongo/crud/BasicDocFinderTest.java",
          "patch": "@@ -29,12 +29,11 @@\n import com.github.fge.jsonschema.core.exceptions.ProcessingException;\n \n import com.mongodb.BasicDBObject;\n+import com.mongodb.DBCursor;\n import com.mongodb.DBObject;\n import com.mongodb.WriteResult;\n import com.redhat.lightblue.crud.CRUDOperation;\n import com.redhat.lightblue.metadata.EntityMetadata;\n-import com.redhat.lightblue.mongo.crud.BasicDocFinder;\n-import com.redhat.lightblue.mongo.crud.Translator;\n import com.redhat.lightblue.util.Path;\n import com.redhat.lightblue.util.JsonUtils;\n \n@@ -48,6 +47,7 @@\n     private Translator translator;\n \n     @Before\n+    @Override\n     public void setup() throws Exception {\n         super.setup();\n \n@@ -87,7 +87,9 @@ public void findAll() throws IOException, ProcessingException {\n         insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + \"2\");\n         insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + \"3\");\n \n-        Assert.assertEquals(\"count on collection\", 3, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(\"count on collection\", 3, c.count());\n+        }\n \n         BasicDocFinder finder \u003d new BasicDocFinder(translator);\n \n@@ -118,7 +120,9 @@ public void findOneOfMany() throws IOException, ProcessingException {\n         insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + \"2\");\n         insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + \"3\");\n \n-        Assert.assertEquals(\"count on collection\", 3, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(\"count on collection\", 3, c.count());\n+        }\n \n         BasicDocFinder finder \u003d new BasicDocFinder(translator);\n \n@@ -152,7 +156,9 @@ public void findLimit() throws IOException, ProcessingException {\n         insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + \"2\");\n         insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + \"3\");\n \n-        Assert.assertEquals(\"count on collection\", 3, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(\"count on collection\", 3, c.count());\n+        }\n \n         BasicDocFinder finder \u003d new BasicDocFinder(translator);\n \n@@ -178,12 +184,13 @@ public void findLimit() throws IOException, ProcessingException {\n     @Test\n     public void testSkipLimit() throws IOException, ProcessingException {\n     \tString id \u003d \"findLimit\";\n-        for(int i\u003d0;i\u003c20;i++)\n-        {\n-        insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + i);\n+        for (int i \u003d 0; i \u003c 20; i++) {\n+            insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + i);\n         }\n \n-        Assert.assertEquals(\"count on collection\", 20, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(\"count on collection\", 20, c.count());\n+        }\n \n         BasicDocFinder finder \u003d new BasicDocFinder(translator);\n \n@@ -219,13 +226,13 @@ public void testSkipLimit() throws IOException, ProcessingException {\n     @Test\n     public void testNullLimit() throws IOException, ProcessingException {\n         String id \u003d \"findLimit\";\n-        for(int i\u003d0;i\u003c20;i++)\n-        {\n-        insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + i);\n+        for(int i \u003d 0; i \u003c 20; i++) {\n+            insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + i);\n         }\n        \n-\n-        Assert.assertEquals(\"count on collection\", 20, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(\"count on collection\", 20, c.count());\n+        }\n \n         BasicDocFinder finder \u003d new BasicDocFinder(translator);\n \n@@ -251,13 +258,13 @@ public void testNullLimit() throws IOException, ProcessingException {\n     @Test\n     public void testZeroLimit() throws IOException, ProcessingException {\n         String id \u003d \"findLimit\";\n-        for(int i\u003d0;i\u003c20;i++)\n-        {\n-        insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + i);\n+        for(int i \u003d 0; i \u003c 20; i++) {\n+            insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + i);\n         }\n        \n-\n-        Assert.assertEquals(\"count on collection\", 20, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(\"count on collection\", 20, c.count());\n+        }\n \n         BasicDocFinder finder \u003d new BasicDocFinder(translator);\n \n@@ -283,13 +290,13 @@ public void testZeroLimit() throws IOException, ProcessingException {\n     @Test\n     public void testResultSetLimit() throws IOException, ProcessingException {\n         String id \u003d \"findLimit\";\n-        for(int i\u003d0;i\u003c20;i++)\n-        {\n-        insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + i);\n+        for(int i \u003d 0; i \u003c 20; i++) {\n+            insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + i);\n         }\n-       \n \n-        Assert.assertEquals(\"count on collection\", 20, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(\"count on collection\", 20, c.count());\n+        }\n \n         BasicDocFinder finder \u003d new BasicDocFinder(translator);\n         finder.setMaxResultSetSize(10);\n@@ -334,13 +341,13 @@ public void testResultSetLimit() throws IOException, ProcessingException {\n     @Test\n     public void testNegativeLimit() throws IOException, ProcessingException {\n         String id \u003d \"findLimit\";\n-        for(int i\u003d0;i\u003c20;i++)\n-        {\n-        insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + i);\n+        for(int i \u003d 0; i \u003c 20; i++) {\n+            insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + i);\n         }\n        \n-\n-        Assert.assertEquals(\"count on collection\", 20, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(\"count on collection\", 20, c.count());\n+        }\n \n         BasicDocFinder finder \u003d new BasicDocFinder(translator);\n \n@@ -366,13 +373,13 @@ public void testNegativeLimit() throws IOException, ProcessingException {\n     @Test\n     public void testLimitLesserThanSkip() throws IOException, ProcessingException {\n         String id \u003d \"findLimit\";\n-        for(int i\u003d0;i\u003c20;i++)\n-        {\n-        insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + i);\n+        for(int i \u003d 0; i \u003c 20; i++) {\n+            insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + i);\n         }\n-       \n \n-        Assert.assertEquals(\"count on collection\", 20, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(\"count on collection\", 20, c.count());\n+        }\n \n         BasicDocFinder finder \u003d new BasicDocFinder(translator);\n \n@@ -402,7 +409,9 @@ public void findSort() throws IOException, ProcessingException {\n         insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + \"1\");\n         insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + \"3\");\n \n-        Assert.assertEquals(\"count on collection\", 3, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(\"count on collection\", 3, c.count());\n+        }\n \n         BasicDocFinder finder \u003d new BasicDocFinder(translator);\n \n@@ -440,7 +449,9 @@ public void findSortAndLimit() throws IOException, ProcessingException {\n         insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + \"1\");\n         insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + \"3\");\n \n-        Assert.assertEquals(\"count on collection\", 3, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(\"count on collection\", 3, c.count());\n+        }\n \n         BasicDocFinder finder \u003d new BasicDocFinder(translator);\n \n@@ -477,7 +488,9 @@ public void findSkip() throws IOException, ProcessingException {\n         insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + \"2\");\n         insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + \"3\");\n \n-        Assert.assertEquals(\"count on collection\", 3, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(\"count on collection\", 3, c.count());\n+        }\n \n         BasicDocFinder finder \u003d new BasicDocFinder(translator);\n \n@@ -511,7 +524,9 @@ public void findSortAndSkip() throws IOException, ProcessingException {\n         insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + \"1\");\n         insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + \"3\");\n \n-        Assert.assertEquals(\"count on collection\", 3, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(\"count on collection\", 3, c.count());\n+        }\n \n         BasicDocFinder finder \u003d new BasicDocFinder(translator);\n \n@@ -549,7 +564,9 @@ public void findSortSkipAndLimit() throws IOException, ProcessingException {\n         insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + \"4\");\n         insert(\"{\\\"_id\\\":\\\"%s\\\",\\\"objectType\\\":\\\"test\\\"}\", id + \"3\");\n \n-        Assert.assertEquals(\"count on collection\", 4, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(\"count on collection\", 4, c.count());\n+        }\n \n         BasicDocFinder finder \u003d new BasicDocFinder(translator);\n "
        },
        {
          "file_name": "mongo/src/test/java/com/redhat/lightblue/mongo/crud/MongoCRUDControllerTest.java",
          "patch": "@@ -34,6 +34,7 @@\n import com.mongodb.BasicDBObject;\n import com.mongodb.DB;\n import com.mongodb.DBCollection;\n+import com.mongodb.DBCursor;\n import com.mongodb.DBObject;\n import com.redhat.lightblue.crud.CRUDDeleteResponse;\n import com.redhat.lightblue.crud.CRUDInsertionResponse;\n@@ -57,10 +58,6 @@\n import com.redhat.lightblue.mongo.common.DBResolver;\n import com.redhat.lightblue.mongo.common.MongoDataStore;\n import com.redhat.lightblue.mongo.config.MongoConfiguration;\n-import com.redhat.lightblue.mongo.crud.IterateAndUpdate;\n-import com.redhat.lightblue.mongo.crud.MongoCRUDController;\n-import com.redhat.lightblue.mongo.crud.MongoCrudConstants;\n-import com.redhat.lightblue.mongo.crud.Translator;\n import com.redhat.lightblue.query.Projection;\n import com.redhat.lightblue.query.SortKey;\n import com.redhat.lightblue.util.Error;\n@@ -106,7 +103,9 @@ public void insertTest() throws Exception {\n         Assert.assertTrue(ctx.getDataErrors() \u003d\u003d null || ctx.getDataErrors().isEmpty());\n         Assert.assertEquals(ctx.getDocumentsWithoutErrors().size(), response.getNumInserted());\n         String id \u003d ctx.getDocuments().get(0).getOutputDocument().get(new Path(\"_id\")).asText();\n-        Assert.assertEquals(1, coll.find(new BasicDBObject(\"_id\", Translator.createIdFrom(id))).count());\n+        try (DBCursor c \u003d coll.find(new BasicDBObject(\"_id\", Translator.createIdFrom(id)))) {\n+            Assert.assertEquals(1, c.count());\n+        }\n     }\n \n     @Test\n@@ -125,7 +124,9 @@ public void insertTest_nullReqField() throws Exception {\n         Assert.assertTrue(ctx.getDataErrors() \u003d\u003d null || ctx.getDataErrors().isEmpty());\n         Assert.assertEquals(ctx.getDocumentsWithoutErrors().size(), response.getNumInserted());\n         String id \u003d ctx.getDocuments().get(0).getOutputDocument().get(new Path(\"_id\")).asText();\n-        Assert.assertEquals(1, coll.find(new BasicDBObject(\"_id\", Translator.createIdFrom(id))).count());\n+        try (DBCursor c \u003d coll.find(new BasicDBObject(\"_id\", Translator.createIdFrom(id)))) {\n+            Assert.assertEquals(1, c.count());\n+        }\n     }\n \n \n@@ -286,8 +287,6 @@ public void saveTestForInvisibleFields() throws Exception {\n         String id \u003d ctx.getDocuments().get(0).getOutputDocument().get(new Path(\"_id\")).asText();\n         System.out.println(\"Saved id:\" + id);\n \n-        coll.find();\n-\n         // Read doc using mongo\n         DBObject dbdoc \u003d coll.findOne(new BasicDBObject(\"_id\", Translator.createIdFrom(id)));\n         Assert.assertNotNull(dbdoc);\n@@ -343,13 +342,17 @@ public void upsertTest() throws Exception {\n         ctx.addDocument(readDoc);\n         // This should not insert anything\n         CRUDSaveResponse sr \u003d controller.save(ctx, false, projection(\"{\u0027field\u0027:\u0027_id\u0027}\"));\n-        Assert.assertEquals(1, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(1, c.count());\n+        }\n \n         ctx \u003d new TestCRUDOperationContext(CRUDOperation.SAVE);\n         ctx.add(md);\n         ctx.addDocument(readDoc);\n         sr \u003d controller.save(ctx, true, projection(\"{\u0027field\u0027:\u0027_id\u0027}\"));\n-        Assert.assertEquals(2, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(2, c.count());\n+        }\n         Assert.assertEquals(ctx.getDocumentsWithoutErrors().size(), sr.getNumSaved());\n     }\n \n@@ -450,7 +453,9 @@ public void updateTest() throws Exception {\n         }\n         ctx.addDocuments(docs);\n         CRUDInsertionResponse response \u003d controller.insert(ctx, projection(\"{\u0027field\u0027:\u0027_id\u0027}\"));\n-        Assert.assertEquals(numDocs, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(numDocs, c.count());\n+        }\n         Assert.assertEquals(ctx.getDocumentsWithoutErrors().size(), response.getNumInserted());\n \n         // Single doc update\n@@ -463,13 +468,17 @@ public void updateTest() throws Exception {\n         Assert.assertEquals(0, upd.getNumFailed());\n         //Assert.assertEquals(AtomicIterateUpdate.class, ctx.getProperty(MongoCRUDController.PROP_UPDATER).getClass());\n         Assert.assertEquals(IterateAndUpdate.class, ctx.getProperty(MongoCRUDController.PROP_UPDATER).getClass());\n-        DBObject obj \u003d coll.find(new BasicDBObject(\"field3\", 1000), new BasicDBObject(\"_id\", 1)).next();\n-        Assert.assertNotNull(obj);\n-        System.out.println(\"DBObject:\" + obj);\n-        System.out.println(\"Output doc:\" + ctx.getDocuments().get(0).getOutputDocument());\n-        Assert.assertEquals(ctx.getDocuments().get(0).getOutputDocument().get(new Path(\"_id\")).asText(),\n-                obj.get(\"_id\").toString());\n-        Assert.assertEquals(1, coll.find(new BasicDBObject(\"field3\", 1000)).count());\n+        try (DBCursor c \u003d coll.find(new BasicDBObject(\"field3\", 1000), new BasicDBObject(\"_id\", 1))) {\n+            DBObject obj \u003d c.next();\n+            Assert.assertNotNull(obj);\n+            System.out.println(\"DBObject:\" + obj);\n+            System.out.println(\"Output doc:\" + ctx.getDocuments().get(0).getOutputDocument());\n+            Assert.assertEquals(ctx.getDocuments().get(0).getOutputDocument().get(new Path(\"_id\")).asText(),\n+                    obj.get(\"_id\").toString());\n+        }\n+        try (DBCursor c \u003d coll.find(new BasicDBObject(\"field3\", 1000))) {\n+            Assert.assertEquals(1, c.count());\n+        }\n \n         // Bulk update\n         ctx \u003d new TestCRUDOperationContext(CRUDOperation.UPDATE);\n@@ -481,7 +490,9 @@ public void updateTest() throws Exception {\n         Assert.assertEquals(IterateAndUpdate.class, ctx.getProperty(MongoCRUDController.PROP_UPDATER).getClass());\n         Assert.assertEquals(10, upd.getNumUpdated());\n         Assert.assertEquals(0, upd.getNumFailed());\n-        Assert.assertEquals(10, coll.find(new BasicDBObject(\"field3\", new BasicDBObject(\"$gt\", 10))).count());\n+        try (DBCursor c \u003d coll.find(new BasicDBObject(\"field3\", new BasicDBObject(\"$gt\", 10)))) {\n+            Assert.assertEquals(10, c.count());\n+        }\n \n         // Bulk direct update\n         ctx \u003d new TestCRUDOperationContext(CRUDOperation.UPDATE);\n@@ -492,7 +503,9 @@ public void updateTest() throws Exception {\n         Assert.assertEquals(IterateAndUpdate.class, ctx.getProperty(MongoCRUDController.PROP_UPDATER).getClass());\n         Assert.assertEquals(10, upd.getNumUpdated());\n         Assert.assertEquals(0, upd.getNumFailed());\n-        Assert.assertEquals(10, coll.find(new BasicDBObject(\"field3\", new BasicDBObject(\"$gt\", 10))).count());\n+        try (DBCursor c \u003d coll.find(new BasicDBObject(\"field3\", new BasicDBObject(\"$gt\", 10)))) {\n+            Assert.assertEquals(10, c.count());\n+        }\n \n         // Iterate update\n         ctx \u003d new TestCRUDOperationContext(CRUDOperation.UPDATE);\n@@ -503,7 +516,9 @@ public void updateTest() throws Exception {\n         Assert.assertEquals(IterateAndUpdate.class, ctx.getProperty(MongoCRUDController.PROP_UPDATER).getClass());\n         Assert.assertEquals(10, upd.getNumUpdated());\n         Assert.assertEquals(0, upd.getNumFailed());\n-        Assert.assertEquals(10, coll.find(new BasicDBObject(\"field7.0.elemf1\", \"blah\")).count());\n+        try (DBCursor c \u003d coll.find(new BasicDBObject(\"field7.0.elemf1\", \"blah\"))) {\n+            Assert.assertEquals(10, c.count());\n+        }\n     }\n \n     @Test\n@@ -544,7 +559,9 @@ public void updateTest_PartialFailure() throws Exception {\n         }\n         ctx.addDocuments(docs);\n         CRUDInsertionResponse response \u003d controller.insert(ctx, projection(\"{\u0027field\u0027:\u0027_id\u0027}\"));\n-        Assert.assertEquals(numDocs, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(numDocs, c.count());\n+        }\n         Assert.assertEquals(ctx.getDocumentsWithoutErrors().size(), response.getNumInserted());\n \n         // Add element to array\n@@ -1030,21 +1047,27 @@ public void deleteTest() throws Exception {\n         }\n         ctx.addDocuments(docs);\n         controller.insert(ctx, projection(\"{\u0027field\u0027:\u0027_id\u0027}\"));\n-        Assert.assertEquals(numDocs, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(numDocs, c.count());\n+        }\n \n         // Single doc delete\n         ctx \u003d new TestCRUDOperationContext(CRUDOperation.DELETE);\n         ctx.add(md);\n         CRUDDeleteResponse del \u003d controller.delete(ctx, query(\"{\u0027field\u0027:\u0027field3\u0027,\u0027op\u0027:\u0027$eq\u0027,\u0027rvalue\u0027:10}\"));\n         Assert.assertEquals(1, del.getNumDeleted());\n-        Assert.assertEquals(numDocs - 1, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(numDocs - 1, c.count());\n+        }\n \n         // Bulk delete\n         ctx \u003d new TestCRUDOperationContext(CRUDOperation.DELETE);\n         ctx.add(md);\n         del \u003d controller.delete(ctx, query(\"{\u0027field\u0027:\u0027field3\u0027,\u0027op\u0027:\u0027\u003e\u0027,\u0027rvalue\u0027:10}\"));\n         Assert.assertEquals(9, del.getNumDeleted());\n-        Assert.assertEquals(10, coll.find(null).count());\n+        try (DBCursor c \u003d coll.find(null)) {\n+            Assert.assertEquals(10, c.count());\n+        }\n     }\n \n     @Test\n@@ -1389,12 +1412,12 @@ public void indexFieldValidationTest() throws Exception {\n     public void indexFieldsMatch() {\n         // order of kesys in an index matters to mongo, this test exists to ensure this is accounted for in the controller\n \n-        DBCollection coll \u003d db.getCollection(\"testIndexFieldMatch\");\n+        DBCollection collection \u003d db.getCollection(\"testIndexFieldMatch\");\n         {\n             BasicDBObject dbIndex \u003d new BasicDBObject();\n             dbIndex.append(\"x\", 1);\n             dbIndex.append(\"y\", 1);\n-            coll.createIndex(dbIndex);\n+            collection.createIndex(dbIndex);\n         }\n \n         {\n@@ -1405,7 +1428,7 @@ public void indexFieldsMatch() {\n             ix.setFields(fields);\n \n             boolean verified \u003d false;\n-            for (DBObject dbi: coll.getIndexInfo()) {\n+            for (DBObject dbi: collection.getIndexInfo()) {\n                 if (((BasicDBObject)dbi.get(\"key\")).entrySet().iterator().next().getKey().equals(\"_id\")) {\n                     continue;\n                 }\n@@ -1424,7 +1447,7 @@ public void indexFieldsMatch() {\n             ix.setFields(fields);\n \n             boolean verified \u003d false;\n-            for (DBObject dbi: coll.getIndexInfo()) {\n+            for (DBObject dbi: collection.getIndexInfo()) {\n                 if (((BasicDBObject)dbi.get(\"key\")).entrySet().iterator().next().getKey().equals(\"_id\")) {\n                     continue;\n                 }\n@@ -1459,7 +1482,7 @@ public void testMigrationUpdate() throws Exception {\n \n     @Test\n     public void idIndexRewriteTest() throws Exception {\n-        DBCollection coll\u003ddb.getCollection(\"data\");\n+        DBCollection collection\u003ddb.getCollection(\"data\");\n \n         EntityMetadata e \u003d new EntityMetadata(\"testEntity\");\n         e.setVersion(new Version(\"1.0.0\", null, \"some text blah blah\"));\n@@ -1494,21 +1517,21 @@ public void idIndexRewriteTest() throws Exception {\n         ctx.addDocument(doc);\n         CRUDInsertionResponse response \u003d controller.insert(ctx, projection);\n \n-       Assert.assertEquals(1,coll.find().count());\n+       Assert.assertEquals(1,collection.find().count());\n \n        Index ix2\u003dnew Index(new SortKey(new Path(\"field1\"),false));\n        e.getEntityInfo().getIndexes().add(ix2);\n        // At this point, there must be an _id index in the collection\n-       Assert.assertEquals(1,coll.getIndexInfo().size());\n+       Assert.assertEquals(1,collection.getIndexInfo().size());\n        // Lets overwrite\n        controller.afterUpdateEntityInfo(null,e.getEntityInfo(),false);\n        // This should not fail\n-       Assert.assertEquals(2,coll.getIndexInfo().size());\n+       Assert.assertEquals(2,collection.getIndexInfo().size());\n     }\n \n     @Test\n     public void doubleidIndexRewriteTest() throws Exception {\n-        DBCollection coll\u003ddb.getCollection(\"data\");\n+        DBCollection collection\u003ddb.getCollection(\"data\");\n \n         EntityMetadata e \u003d new EntityMetadata(\"testEntity\");\n         e.setVersion(new Version(\"1.0.0\", null, \"some text blah blah\"));\n@@ -1553,10 +1576,10 @@ public void doubleidIndexRewriteTest() throws Exception {\n         ctx.addDocument(doc);\n         CRUDInsertionResponse response \u003d controller.insert(ctx, projection);\n \n-        Assert.assertEquals(1,coll.find().count());\n+        Assert.assertEquals(1,collection.find().count());\n \n         // At this point, there must be only one _id index in the collection\n-        Assert.assertEquals(1,coll.getIndexInfo().size());\n+        Assert.assertEquals(1,collection.getIndexInfo().size());\n \n         // Remove the nonunique index\n         List\u003cIndex\u003e ilist\u003dnew ArrayList\u003c\u003e();\n@@ -1567,7 +1590,7 @@ public void doubleidIndexRewriteTest() throws Exception {\n         // Lets overwrite\n         controller.afterUpdateEntityInfo(null,e.getEntityInfo(),false);\n         // This should not fail\n-        Assert.assertEquals(2,coll.getIndexInfo().size());\n+        Assert.assertEquals(2,collection.getIndexInfo().size());\n     }\n \n     @Test"
        },
        {
          "file_name": "mongo/src/test/java/com/redhat/lightblue/mongo/hystrix/AbstractMongoTest.java",
          "patch": "@@ -21,6 +21,7 @@\n import com.mongodb.BasicDBObject;\n import com.mongodb.DB;\n import com.mongodb.DBCollection;\n+import com.mongodb.DBCursor;\n import com.mongodb.DBObject;\n import com.redhat.lightblue.mongo.test.EmbeddedMongo;\n import com.redhat.lightblue.util.test.AbstractJsonSchemaTest;\n@@ -62,7 +63,9 @@ public void setup() {\n             }\n         }\n \n-        Assert.assertEquals(count, coll.find().count());\n+        try (DBCursor c \u003d coll.find()) {\n+            Assert.assertEquals(count, c.count());\n+        }\n     }\n \n     @After"
        },
        {
          "file_name": "mongo/src/test/java/com/redhat/lightblue/mongo/hystrix/InsertCommandTest.java",
          "patch": "@@ -51,15 +51,15 @@ public void executeOne() {\n         Assert.assertNotNull(result);\n         Assert.assertNull(result.getError());\n \n-        DBCursor cur \u003d coll.find(query, null);\n+        try (DBCursor cur \u003d coll.find(query, null)) {\n+            Assert.assertNotNull(cur);\n+            Assert.assertEquals(1, cur.size());\n \n-        Assert.assertNotNull(cur);\n-        Assert.assertEquals(1, cur.size());\n+            DBObject obj \u003d cur.next();\n \n-        DBObject obj \u003d cur.next();\n-\n-        Assert.assertNotNull(obj);\n-        Assert.assertEquals(\"obj\", obj.get(\"name\"));\n+            Assert.assertNotNull(obj);\n+            Assert.assertEquals(\"obj\", obj.get(\"name\"));\n+        }\n     }\n \n     @Test\n@@ -75,15 +75,15 @@ public void executeMany() {\n         Assert.assertNotNull(result);\n         Assert.assertNull(result.getError());\n \n-        DBCursor cur \u003d coll.find(null, null);\n-\n-        Assert.assertNotNull(cur);\n-        Assert.assertEquals(3, cur.size());\n+        try (DBCursor cur \u003d coll.find(null, null)) {\n+            Assert.assertNotNull(cur);\n+            Assert.assertEquals(3, cur.size());\n \n-        // check first object\n-        DBObject obj \u003d cur.next();\n+            // check first object\n+            DBObject obj \u003d cur.next();\n \n-        Assert.assertNotNull(obj);\n-        Assert.assertEquals(\"obj1\", obj.get(\"name\"));\n+            Assert.assertNotNull(obj);\n+            Assert.assertEquals(\"obj1\", obj.get(\"name\"));\n+        }\n     }\n }"
        },
        {
          "file_name": "mongo/src/test/java/com/redhat/lightblue/mongo/hystrix/SaveCommandTest.java",
          "patch": "@@ -19,6 +19,7 @@\n package com.redhat.lightblue.mongo.hystrix;\n \n import com.mongodb.BasicDBObject;\n+import com.mongodb.DBCursor;\n import com.mongodb.DBObject;\n import com.mongodb.WriteResult;\n import org.junit.Assert;\n@@ -48,21 +49,23 @@ public void executeWithId() {\n \n     @Test\n     public void executeWithoutId() {\n-        DBObject obj \u003d coll.find(new BasicDBObject(key1, \"obj2\")).sort(new BasicDBObject(\"_id\", -1)).next();\n-        Object id \u003d obj.get(\"_id\");\n+        try (DBCursor c \u003d coll.find(new BasicDBObject(key1, \"obj2\")).sort(new BasicDBObject(\"_id\", -1))) {\n+            DBObject obj \u003d c.next();\n+            Object id \u003d obj.get(\"_id\");\n \n-        DBObject save \u003d new BasicDBObject(key1, obj.get(key1));\n-        save.put(\"newKey\", \"key value\");\n+            DBObject save \u003d new BasicDBObject(key1, obj.get(key1));\n+            save.put(\"newKey\", \"key value\");\n \n-        WriteResult result \u003d new SaveCommand(coll, save).execute();\n+            WriteResult result \u003d new SaveCommand(coll, save).execute();\n \n-        Assert.assertNotNull(result);\n-        Assert.assertNull(result.getError());\n+            Assert.assertNotNull(result);\n+            Assert.assertNull(result.getError());\n \n-        DBObject updated \u003d coll.findOne(new BasicDBObject(\"newKey\", \"key value\"));\n+            DBObject updated \u003d coll.findOne(new BasicDBObject(\"newKey\", \"key value\"));\n \n-        // verify wrote new object\n-        Assert.assertNotEquals(id, updated.get(\"_id\"));\n-        Assert.assertEquals(\"key value\", updated.get(\"newKey\"));\n+            // verify wrote new object\n+            Assert.assertNotEquals(id, updated.get(\"_id\"));\n+            Assert.assertEquals(\"key value\", updated.get(\"newKey\"));\n+        }\n     }\n }"
        },
        {
          "file_name": "test/src/main/java/com/redhat/lightblue/mongo/test/MongoServerExternalResource.java",
          "patch": "@@ -109,7 +109,10 @@ public void run() {\n     public Statement apply(Statement base, Description description) {\n         immsAnnotation \u003d description.getAnnotation(InMemoryMongoServer.class);\n         if ((immsAnnotation \u003d\u003d null) \u0026\u0026 description.isTest()) {\n-            immsAnnotation \u003d description.getTestClass().getAnnotation(InMemoryMongoServer.class);\n+            Class\u003c?\u003e clazz \u003d description.getTestClass();\n+            if (clazz !\u003d null) {\n+                immsAnnotation \u003d clazz.getAnnotation(InMemoryMongoServer.class);\n+            }\n         }\n \n         return super.apply(base, description);"
        }
      ]
    }
  },
  {
    "name": "Unload all in space null pointer",
    "url": "https://github.com/joulupunikki/Phoenix/issues/69",
    "description": "Trying unload cargo in space does not work. Fails with:\n\n_Thread[AWT-EventQueue-0,6,main]\njava.lang.NullPointerException\n    at state.UIW1.pressUnloadButton(UIW1.java:114)_\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/joulupunikki/Phoenix/commit/658c1f24a0c516b349c21882dfd8b3257ac7cf38",
      "files": [
        {
          "file_name": "src/ai/TaskForce.java",
          "patch": "@@ -372,7 +372,7 @@ private SUB_STATE moveToDestination() throws AIException {\n     }\n \n     private boolean handlePTS(Hex land) {\n-        game.startBombardOrPTS(land, true);\n+        game.startBombardOrPTS(land, true, -1);\n         List\u003cHex\u003e pts_queue \u003d game.getBattle().getPTSQueue();\n         System.out.println(\"PTS queue len \u003d \" + pts_queue.size());\n         while (!pts_queue.isEmpty() \u0026\u0026 !Util.getSelectedUnits(game.getSelectedStack()).isEmpty()) {\n@@ -382,7 +382,7 @@ private boolean handlePTS(Hex land) {\n                 continue;\n             }\n             // since we are landing, do not try to bomb landing hex\n-            game.startBombardOrPTS(pts_hex, false);\n+            game.startBombardOrPTS(pts_hex, false, -1);\n             pts_hex.spot(game.getTurn());\n             System.out.println(\"PTS combat (\" + pts_hex.getX() + \",\" + pts_hex.getY() + \") vs (\" + land.getX() + \",\" + land.getY() + \")\");\n             game.resolveGroundBattleInit(C.PTS_COMBAT, pts_hex.getStack().get(0).owner);"
        },
        {
          "file_name": "src/dat/UnitType.java",
          "patch": "@@ -128,10 +128,11 @@ public UnitType(String s, int index, int t_lvl) {\n         this.index \u003d index;\n         this.t_lvl \u003d t_lvl;\n         int stats_end;\n+        Util.debugPrint(\"Line: \" + s);\n         /*\n          * accepts alphanum, -, \u0027 and .\n          */\n-        Pattern unit_type \u003d Pattern.compile(\"\\\"[0-9a-zA-Z_ ,\\\\(\\\\)\\\\[\\\\]\\\\!\\\\*\\\\-\u0027\\\\.\\\\\u0026]+\\\"\");\n+        Pattern unit_type \u003d Pattern.compile(\"\\\"[0-9a-zA-Z_ ,\\\\(\\\\)\\\\[\\\\]\\\\!\\\\*\\\\-\u0027\\\\.\\\\\u0026\\t]+\\\"\");\n \n         Matcher m \u003d unit_type.matcher(s);\n \n@@ -157,7 +158,7 @@ public UnitType(String s, int index, int t_lvl) {\n         //skip \"stats\"\n         m.find();\n         m.find();\n-\n+        Util.debugPrint(\"Interval: \" + (m.start() + 1) + \",\" + (m.end() - 1));\n         //last one is a big string of one text and dozens of integer values\n         String stats \u003d s.substring(m.start() + 1, m.end() - 1);\n         Util.debugPrint(\"Stats: \" + stats);\n@@ -422,7 +423,8 @@ public static void main(String[] args) {\n                             index \u003d Integer.parseInt(s.substring(start + 1, end));\n                             Util.debugPrint(\"index: \" + index);\n                         } else {\n-                            Util.logFFErrorAndExit(file_name, line_nr);\n+                            Util.logFileFormatError(FN.S_UNIT_DAT, line_nr, \"comments must begin with //\"); // fix #66\n+                            //Util.logFFErrorAndExit(file_name, line_nr);\n                         }\n                     }\n                 }"
        },
        {
          "file_name": "src/game/Battle.java",
          "patch": "@@ -38,6 +38,7 @@\n import java.util.ListIterator;\n import java.util.Random;\n import java.util.Set;\n+import org.apache.commons.math3.util.FastMath;\n import util.C;\n import util.StackIterator;\n import util.Util;\n@@ -55,6 +56,14 @@\n     private static final long serialVersionUID \u003d 1L;\n     private List\u003cUnit\u003e combat_stack_a;\n     private List\u003cUnit\u003e combat_stack_b;\n+    private List\u003cUnit\u003e defender_defence \u003d new LinkedList\u003c\u003e();\n+    private List\u003cUnit\u003e defender_offence \u003d new LinkedList\u003c\u003e();\n+    private List\u003cUnit\u003e defender_normal \u003d new LinkedList\u003c\u003e();\n+    private List\u003cUnit\u003e defender_persons \u003d new LinkedList\u003c\u003e();\n+    private List\u003cUnit\u003e attacker_offence \u003d new LinkedList\u003c\u003e();\n+    private List\u003cUnit\u003e attacker_defence \u003d new LinkedList\u003c\u003e();\n+    private List\u003cUnit\u003e attacker_normal \u003d new LinkedList\u003c\u003e();\n+    private List\u003cUnit\u003e attacker_assassins \u003d new LinkedList\u003c\u003e();\n     private LinkedList\u003cHex\u003e path;\n     private String combat_type;\n     private int attacked_faction;\n@@ -71,6 +80,7 @@\n     private Hex ranged_space_target;\n     // pts defence fire queue against landing or bombardment\n     private List\u003cHex\u003e pts_queue;\n+    private int city_damage;\n \n     public Battle() {\n         \n@@ -92,6 +102,7 @@ public void battleInit(Random random, int[][] damage, int[][] target,\n     public void perBattleInit(LinkedList\u003cHex\u003e path, int current_planet) {\n         this.path \u003d path;\n         this.current_planet \u003d current_planet;\n+        this.city_damage \u003d 0;\n     }\n \n     public List\u003cUnit\u003e getCombatStack(String stack) {\n@@ -292,7 +303,7 @@ public int getDam(Unit atk, Unit def, int atk_type) {\n \n     /**\n      * Handles one round of attacks by an attacker stack against a defender\n-     * stack.\n+     * stack. Handles assassinations and agility bonus for unspotted units.\n      *\n      * @param attacker the attacking stack\n      * @param defender the defending stack\n@@ -305,35 +316,78 @@ public void doAttack(List\u003cUnit\u003e attacker, List\u003cUnit\u003e defender, int[] damage, int\n             return;\n         }\n \n-        int count \u003d attacker.size(); // \u003e defender.size() ? attacker.size() : defender.size();\n-//        for (int i \u003d 0; i \u003c count; i++) {\n-//            damage[i] \u003d 0;\n+        int count \u003d attacker.size();\n+        attacker_assassins.clear();\n+        attacker_normal.clear();\n+        defender_normal.clear();\n+        defender_persons.clear();\n+        for (Unit unit : attacker) {\n+            if (unit.type \u003d\u003d C.SPY_UNIT_TYPE) {\n+                attacker_assassins.add(unit);\n+            } else {\n+                attacker_normal.add(unit);\n+            }\n+        }\n+        for (Unit unit : defender) {\n+            if (unit.type_data.rank \u003e\u003d C.PERSONNEL_UNIT_MIN_RANK) {\n+                defender_persons.add(unit);\n+            } else {\n+                defender_normal.add(unit);\n+            }\n+        }\n+//        ListIterator\u003cUnit\u003e atk_it \u003d attacker.listIterator();\n+//        ListIterator\u003cUnit\u003e def_it \u003d defender.listIterator();\n+        ListIterator\u003cUnit\u003e atk_norm \u003d attacker_normal.listIterator();\n+        ListIterator\u003cUnit\u003e def_norm \u003d defender_normal.listIterator();\n+        ListIterator\u003cUnit\u003e atk_assa \u003d attacker_assassins.listIterator();\n+        ListIterator\u003cUnit\u003e def_pers \u003d defender_persons.listIterator();\n+        ListIterator\u003cUnit\u003e def_all \u003d defender.listIterator();\n+\n+        Unit atk \u003d null;\n+        Unit def \u003d null;\n+//        if (atk_assa.hasNext()) {\n+//            atk \u003d atk_assa.next();\n+//        } else {\n+//            atk \u003d atk_norm.next();\n+//        }\n+//        if (def_pers.hasNext()) {\n+//            def \u003d def_pers.next();\n+//        } else {\n+//            def \u003d def_norm.next();\n //        }\n-        ListIterator\u003cUnit\u003e atk_it \u003d attacker.listIterator();\n-        ListIterator\u003cUnit\u003e def_it \u003d defender.listIterator();\n-        Unit atk \u003d atk_it.next();\n-        Unit def \u003d def_it.next();\n-        int def_indx \u003d 0;\n         for (int i \u003d 0; i \u003c count; i++) {\n-\n-            int to_hit \u003d getAtkAcc(atk_type, atk) - def.type_data.ag;\n-            if (random.nextInt(20) + to_hit \u003e 9) {\n-//                damage[def_indx] +\u003d getDam(atk, def, atk_type);\n-                def.health_tmp -\u003d getDam(atk, def, atk_type);\n-            }\n-//            if (!atk_it.hasNext()) {\n-//                atk_it \u003d attacker.listIterator();\n-//            }\n-            if (!atk_it.hasNext()) {\n+            if (atk_assa.hasNext()) {\n+                atk \u003d atk_assa.next();\n+                if (def_pers.hasNext()) {\n+                    def \u003d def_pers.next();\n+                } else if (def_norm.hasNext()) {\n+                    def \u003d def_norm.next();\n+                } else if (!def_all.hasNext()) {\n+                    def_all \u003d defender.listIterator();\n+                    def \u003d def_all.next();\n+                }\n+            } else if (atk_norm.hasNext()) {\n+                atk \u003d atk_norm.next();\n+                if (def_norm.hasNext()) {\n+                    def \u003d def_norm.next();\n+                } else if (def_pers.hasNext()) {\n+                    def \u003d def_pers.next();\n+                } else if (!def_all.hasNext()) {\n+                    def_all \u003d defender.listIterator();\n+                    def \u003d def_all.next();\n+                }\n+            } else {\n                 return;\n             }\n-            atk \u003d atk_it.next();\n-            if (!def_it.hasNext()) {\n-                def_it \u003d defender.listIterator();\n-                def_indx \u003d -1;\n+            int to_hit \u003d getAtkAcc(atk_type, atk) - def.type_data.ag;\n+            if (!def.spotted[atk.owner]) {\n+                to_hit -\u003d C.UNSPOTTED_AG_BONUS;\n+            }\n+            if (random.nextInt(20) + to_hit \u003e 9) { // nextInt(20) returns 0\u003c\u003d x \u003c 20\n+                def.health_tmp -\u003d getDam(atk, def, atk_type);\n+            } else if (combat_type.equals(C.BOMBARD_COMBAT) \u0026\u0026 atk.in_space \u0026\u0026 random.nextBoolean()) { // orbital bombardment city damage\n+                city_damage +\u003d FastMath.min(10, (atk.type_data.ranged_sp_str + 9) / 10);\n             }\n-            def \u003d def_it.next();\n-            def_indx++;\n         }\n \n     }\n@@ -812,8 +866,8 @@ public void resolveGroundBattleFight() {\n         CombatReport report \u003d new CombatReport(combat_stack_a.size(), combat_stack_b.size());\n         //record combat report combat preconditions combatReportPre()\n         combatReportPre(report);\n-        spotAllUnits();\n         doCombat(combat_stack_a, combat_stack_b);\n+        spotAllUnits();\n         assignDamage(combat_stack_a, combat_stack_b);\n         //record combat report combat postconditions, send message combatReportPost()\n         combatReportPost(report);\n@@ -837,6 +891,11 @@ public void resolveGroundBattleFinalize() {\n                 cancelRout(stack_a, stack_b);\n                 break;\n             case C.BOMBARD_COMBAT:\n+                Structure s \u003d ranged_space_target.getStructure();\n+                if (s !\u003d null \u0026\u0026 s.health \u003c 1) {\n+                    game.destroyCity(s.p_idx, s.x, s.y);\n+                }\n+            // no break !!!\n             case C.PTS_COMBAT:\n                 stack_b \u003d ranged_space_target.getStack();\n                 cancelRout(stack_a, stack_b);\n@@ -877,13 +936,10 @@ public void resolveGroundBattleFinalize() {\n      */\n     public void doCombat(List\u003cUnit\u003e attacker, List\u003cUnit\u003e defender) {\n \n+        city_damage \u003d 0;\n         int[] defender_damage \u003d new int[C.STACK_SIZE];\n-        List\u003cUnit\u003e defender_defence \u003d new LinkedList\u003c\u003e();\n-        List\u003cUnit\u003e defender_offence \u003d new LinkedList\u003c\u003e();\n \n         int[] attacker_damage \u003d new int[C.STACK_SIZE];\n-        List\u003cUnit\u003e attacker_offence \u003d new LinkedList\u003c\u003e();\n-        List\u003cUnit\u003e attacker_defence \u003d new LinkedList\u003c\u003e();\n \n         int combat_loop_iter \u003d -1;\n         int[] combat_phases \u003d null;\n@@ -939,7 +995,12 @@ public void doCombat(List\u003cUnit\u003e attacker, List\u003cUnit\u003e defender) {\n \n             }\n         }\n-\n+        if (combat_type.equals(C.BOMBARD_COMBAT)) {\n+            Structure s \u003d ranged_space_target.getStructure();\n+            if (s !\u003d null) {\n+                s.health -\u003d city_damage;\n+            }\n+        }\n     }\n \n     public String getCombatType() {\n@@ -961,7 +1022,7 @@ public Hex getRangedSpaceTarget() {\n      * @param h\n      * @param queue_pts\n      */\n-    public void startBombardOrPTS(Hex h, boolean queue_pts) {\n+    public void startBombardOrPTS(Hex h, boolean queue_pts, int target_faction) {\n         ranged_space_target \u003d h;\n         if (!queue_pts) {\n             return;\n@@ -974,7 +1035,7 @@ public void startBombardOrPTS(Hex h, boolean queue_pts) {\n             if (!stack.isEmpty()) {\n                 int fac_a \u003d stack.get(0).owner;\n                 int fac_b \u003d game.getTurn();\n-                if (fac_a !\u003d fac_b \u0026\u0026 game.getDiplomacy().getDiplomaticState(fac_a, fac_b) \u003d\u003d C.DS_WAR) {\n+                if ((target_faction \u003d\u003d -1 || target_faction \u003d\u003d fac_a) \u0026\u0026 fac_a !\u003d fac_b \u0026\u0026 game.getDiplomacy().getDiplomaticState(fac_a, fac_b) \u003d\u003d C.DS_WAR) {\n                     for (Unit unit : stack) {\n                         if (unit.type_data.ranged_sp_str \u003e 0) {\n                             pts_queue.add(next);"
        },
        {
          "file_name": "src/game/Contract.java",
          "patch": "@@ -48,6 +48,7 @@\n     private List\u003cTerm\u003e terms;\n     private boolean resolved;\n     private int sender;\n+    private int receiver;\n \n     public Contract() {\n         terms \u003d new LinkedList\u003c\u003e();\n@@ -92,6 +93,7 @@ public boolean acceptCheck(Game game) throws AssertionError {\n             int recipient \u003d term.getRecipient();\n             switch (term.type) {\n                 case STATE:\n+                case TECH: // TODO ?\n                     break;\n                 case MONEY:\n                     if (donor \u003d\u003d game.getTurn()\n@@ -142,6 +144,9 @@ public void acceptDo(Game game) throws AssertionError {\n                 case MINISTRY:\n                     game.getDiplomacy().setMinistryPromise(donor, recipient, term.getAmount());\n                     break;\n+                case TECH:\n+                    game.getFaction(recipient).getResearch().receiveTech(term.getAmount());\n+                    break;\n                 default:\n                     throw new AssertionError();\n             }\n@@ -173,6 +178,20 @@ public void setSender(int sender) {\n         this.sender \u003d sender;\n     }\n \n+    /**\n+     * @return the receiver\n+     */\n+    public int getReceiver() {\n+        return receiver;\n+    }\n+\n+    /**\n+     * @param receiver the receiver to set\n+     */\n+    public void setReceiver(int receiver) {\n+        this.receiver \u003d receiver;\n+    }\n+\n //    @Override\n //    public String toString() {\n //        String s \u003d \"\";\n@@ -187,6 +206,7 @@ public void setSender(int sender) {\n         MONEY,\n         VOTES,\n         MINISTRY,\n+        TECH,\n     }\n \n     /**\n@@ -283,6 +303,16 @@ public Ministry(int ministry) {\n \n     }\n \n+    public static class Tech extends Term {\n+\n+        private static final long serialVersionUID \u003d 1L;\n+\n+        public Tech(int tech) {\n+            this.type \u003d Type.TECH;\n+            this.amount \u003d tech;\n+        }\n+\n+    }\n //    public static class Resource extends Term {\n //        private static final long serialVersionUID \u003d 1L;\n //"
        },
        {
          "file_name": "src/game/Game.java",
          "patch": "@@ -1947,8 +1947,8 @@ public Regency getRegency() {\n      * @param h\n      * @param queue_pts\n      */\n-    public void startBombardOrPTS(Hex h, boolean queue_pts) {\n-        battle.startBombardOrPTS(h, queue_pts);\n+    public void startBombardOrPTS(Hex h, boolean queue_pts, int target_faction) {\n+        battle.startBombardOrPTS(h, queue_pts, target_faction);\n \n     }\n "
        },
        {
          "file_name": "src/game/Research.java",
          "patch": "@@ -116,6 +116,14 @@ public void doResearch() {\n         }\n     }\n \n+    public void receiveTech(int tech) {\n+        if (researched \u003d\u003d tech) {\n+            points[researched] \u003d game.getGameResources().getTech()[researched].stats[C.TECH_COST];\n+        } else {\n+            techs[tech] \u003d true;\n+        }\n+    }\n+\n     /**\n      * Update list of units which can be built in cities.\n      *"
        },
        {
          "file_name": "src/gui/CombatWindow.java",
          "patch": "@@ -67,6 +67,7 @@\n      *\n      */\n     private static final long serialVersionUID \u003d 1L;\n+    private static final int UNSPOTTED_COLOR_SHIFT \u003d 2;\n     // pointer to GUI\n     private Gui gui;\n     private Game game;\n@@ -234,6 +235,7 @@ public void drawUnits(Graphics g) {\n         int[] skull \u003d Util.loadSquare(FN.S_SKULL_BIN, 0, C.SKULL_SIDE * C.SKULL_SIDE);\n         int[] flag \u003d Util.loadSquare(FN.S_FLAG_BIN, 0, C.SKULL_SIDE * C.SKULL_SIDE);\n         List\u003cUnit\u003e attacker \u003d game.getCombatStack(\"a\");\n+        List\u003cUnit\u003e defender \u003d game.getCombatStack(\"b\");\n         ListIterator\u003cUnit\u003e it \u003d attacker.listIterator();\n \n         BufferedImage bi_att_u \u003d new BufferedImage(ws.unit_icon_size, ws.unit_icon_size, BufferedImage.TYPE_BYTE_INDEXED, Gui.getICM());\n@@ -248,7 +250,9 @@ public void drawUnits(Graphics g) {\n                     break loop_att;\n                 }\n                 int color \u003d Util.getOwnerColor(e.owner);\n-\n+                if (!e.spotted[defender.get(0).owner]) {\n+                    color +\u003d UNSPOTTED_COLOR_SHIFT;\n+                }\n //                System.out.println(\"color \u003d \" + color);\n                 Util.fillRaster(wr_att_u, color);\n                 Util.drawUnitIconEdges(wr_att_u, ws);\n@@ -303,7 +307,6 @@ public void drawUnits(Graphics g) {\n \n         }\n \n-        List\u003cUnit\u003e defender \u003d game.getCombatStack(\"b\");\n         it \u003d defender.listIterator();\n \n         bi_att \u003d new BufferedImage(ws.combat_window_stack_display_w, ws.combat_window_stack_display_h, BufferedImage.TYPE_BYTE_INDEXED, Gui.getICM());\n@@ -321,7 +324,9 @@ public void drawUnits(Graphics g) {\n                     break loop_def;\n                 }\n                 int color \u003d Util.getOwnerColor(e.owner);\n-\n+                if (!e.spotted[attacker.get(0).owner]) {\n+                    color +\u003d UNSPOTTED_COLOR_SHIFT;\n+                }\n //                System.out.println(\"color \u003d \" + color);\n                 Util.fillRaster(wr_att_u, color);\n                 Util.drawUnitIconEdges(wr_att_u, ws);"
        },
        {
          "file_name": "src/gui/DiplomacyWindow.java",
          "patch": "@@ -82,13 +82,15 @@\n \n     private static final int MAX_MONEY_DEMAND \u003d 50000;\n \n+    public static final int MAX_TERMS \u003d 3;\n \n     public enum IfYouWill {\n \n         PEACE(\"Sign A Peace Treaty With Us\", null, null),\n         MONEY(\"Compensate Us With \", \"Firebirds\", null),\n         VOTES(\"Give Us all Your votes for the next election\", null, null),\n-        MINISTRY(\"Give Us \", \"If You are Elected\", \"Ministry\");\n+        MINISTRY(\"Give Us \", \"If You are Elected\", \"Ministry\"),\n+        TECH(\"Give Us \", \"Technology\", null);\n //        RESOURCES(\"Compensate Us With \", \"Resources\"),\n //        UNITS(\"Compensate Us With \", \"Units\"),\n //        CITIES(\"Compensate Us With \", \"Cities\");\n@@ -109,7 +111,8 @@ private IfYouWill(String text, String text2, String text3) {\n         PEACE(\"Sign A Peace Treaty With You\", null, null),\n         MONEY(\"Compensate You With \", \"Firebirds\", null),\n         VOTES(\"Give You all Our votes for the next election\", null, null),\n-        MINISTRY(\"Give You \", \"If We are Elected\", \"Ministry\");\n+        MINISTRY(\"Give You \", \"If We are Elected\", \"Ministry\"),\n+        TECH(\"Give You \", \"Technology\", null);\n //        RESOURCES(\"Compensate You With \", \"Resources\"),\n //        UNITS(\"Compensate You With \", \"Units\"),\n //        CITIES(\"Compensate You With \", \"Cities\");\n@@ -175,14 +178,11 @@ public static DiplomacyWindow getWindow(Gui gui) {\n     }\n \n     public void enterWindow(int faction) {\n-        //System.out.println(\"enterWindow() start : \" + contract);\n+        this.faction \u003d faction; // fix #71\n         if (contract \u003d\u003d null) {\n             contract \u003d new Contract();\n         }\n         clear();\n-\n-        //System.out.println(\"enterWindow() end : \" + contract);\n-        this.faction \u003d faction;\n     }\n \n     public void showIfYouMenu(Point p) {        \n@@ -219,47 +219,193 @@ public void mouseClicked(MouseEvent e) {\n         });\n     }\n \n+    public int clickedInRects(Point p, int x, int y, int w, int h, int n, int d) {\n+        int horiz \u003d 1;\n+        int vert \u003d 0;\n+        if (n \u003c 0) {\n+            horiz \u003d 0;\n+            vert \u003d 1;\n+            n *\u003d -1;\n+        }\n+        for (int i \u003d 0; i \u003c n; i++) {\n+            if (x + horiz * i * d \u003c\u003d p.x\n+                    \u0026\u0026 p.x \u003c\u003d x + w + horiz * i * d\n+                    \u0026\u0026 y + vert * i * d \u003c\u003d p.y\n+                    \u0026\u0026 p.y \u003c\u003d y + h + vert * i * d) {\n+                System.out.println(\" term \" + i);\n+                return i;\n+            }\n+        }\n+        return -1;\n+    }\n+\n     public void doClick(MouseEvent e) {\n         Point p \u003d e.getPoint();\n         List\u003cContract.Term\u003e terms \u003d contract.getTerms();\n-        if (c.get(G.CDW.GIVE_X) \u003c\u003d p.x \u0026\u0026 p.x \u003c\u003d c.get(G.CDW.GIVE_X) + c.get(G.CDW.GIVE_W)\n-                \u0026\u0026 c.get(G.CDW.GIVE_Y) \u003c\u003d p.y \u0026\u0026 p.y \u003c\u003d c.get(G.CDW.GIVE_Y) + c.get(G.CDW.GIVE_H)) {\n+        int click_in \u003d -1;\n+        if ((click_in \u003d clickedInRects(p, c.get(G.CDW.GIVE_X), c.get(G.CDW.GIVE_Y), c.get(G.CDW.GIVE_W), c.get(G.CDW.GIVE_H), -MAX_TERMS, c.get(G.CDW.ROW_H))) \u003e -1) {\n+            // if clicked on existing term ...\n             int term_count \u003d 0;\n-            for (Contract.Term term : terms) {\n-                if_you_items[term.getType().ordinal()].setEnabled(false);\n-                term_count++;\n+            int idx \u003d 0;\n+            for (Term term : terms) {\n+                if (term.getDonor() !\u003d game.getTurn()) {\n+                    if (click_in \u003d\u003d term_count) {\n+                        break;\n+                    }\n+                    term_count++;\n+                }\n+                idx++;\n             }\n-            if (term_count \u003c 3) {\n-                showIfYouMenu(p);\n+            if (idx \u003c terms.size()) {\n+                // ... remove term\n+                Term t \u003d terms.get(idx);\n+                switch (t.getType()) {\n+                    case VOTES:\n+                        System.out.println(\"Remove votes other\");\n+                        setTermAvailability(t.getType(), true);\n+                        break;\n+                    case MINISTRY:\n+                        non_promised_ministries.add(t.getAmount());\n+                        break;\n+                    case MONEY:\n+                        setTermAvailability(t.getType(), true);\n+                        break;\n+                    case STATE:\n+                        setTermAvailability(t.getType(), true);\n+                        break;\n+                    case TECH:\n+                        break;\n+                    default:\n+                        break;\n+                }\n+                terms.remove(idx);\n             }\n-        } else if (c.get(G.CDW.GIVE_X) \u003c\u003d p.x \u0026\u0026 p.x \u003c\u003d c.get(G.CDW.GIVE_X) + c.get(G.CDW.GIVE_W)\n-                \u0026\u0026 c.get(G.CDW.TAKE_Y) \u003c\u003d p.y \u0026\u0026 p.y \u003c\u003d c.get(G.CDW.TAKE_Y) + c.get(G.CDW.GIVE_H)) {\n+            setAvailableTerms(terms);\n+            // ask for new term\n+            showIfYouMenu(p);\n+        } else if ((click_in \u003d clickedInRects(p, c.get(G.CDW.GIVE_X), c.get(G.CDW.TAKE_Y), c.get(G.CDW.GIVE_W), c.get(G.CDW.GIVE_H), -MAX_TERMS, c.get(G.CDW.ROW_H))) \u003e -1) {\n+            // if clicked on existing term ...\n             int term_count \u003d 0;\n-            for (Contract.Term term : terms) {\n-                then_we_items[term.getType().ordinal()].setEnabled(false);\n-                term_count++;\n+            int idx \u003d 0;\n+            for (Term term : terms) {\n+                if (term.getDonor() \u003d\u003d game.getTurn()) {\n+                    if (click_in \u003d\u003d term_count) {\n+                        break;\n+                    }\n+                    term_count++;\n+                }\n+                idx++;\n             }\n-            if (term_count \u003c 3) {\n-                showThenWeMenu(p);\n+            if (idx \u003c terms.size()) {\n+                // ... remove term\n+                Term t \u003d terms.get(idx);\n+                switch (terms.get(idx).getType()) {\n+                    case VOTES:\n+                        System.out.println(\"Remove votes self\");\n+                        setTermAvailability(t.getType(), true);\n+                        break;\n+                    case MINISTRY:\n+                        non_promised_ministries.add(t.getAmount());\n+                        break;\n+                    case MONEY:\n+                        setTermAvailability(t.getType(), true);\n+                        break;\n+                    case STATE:\n+                        setTermAvailability(t.getType(), true);\n+                        break;\n+                    case TECH:\n+                        break;\n+                    default:\n+                        break;\n+                }\n+                terms.remove(idx);\n             }\n+            setAvailableTerms(terms);\n+            // ask for a new term\n+            showThenWeMenu(p);\n         }\n+//        if (c.get(G.CDW.GIVE_X) \u003c\u003d p.x \u0026\u0026 p.x \u003c\u003d c.get(G.CDW.GIVE_X) + c.get(G.CDW.GIVE_W)\n+//                \u0026\u0026 c.get(G.CDW.GIVE_Y) \u003c\u003d p.y \u0026\u0026 p.y \u003c\u003d c.get(G.CDW.GIVE_Y) + c.get(G.CDW.GIVE_H)) {\n+//            int term_count \u003d 0;\n+//            for (Contract.Term term : terms) {\n+//                if (term.getType() !\u003d Contract.Type.TECH) {\n+//                    if_you_items[term.getType().ordinal()].setEnabled(false);\n+//                }\n+//                if (term.getDonor() !\u003d game.getTurn()) {\n+//                    term_count++;\n+//                }\n+//            }\n+//            if (term_count \u003c 3) {\n+//                showIfYouMenu(p);\n+//            }\n+//        } else if (c.get(G.CDW.GIVE_X) \u003c\u003d p.x \u0026\u0026 p.x \u003c\u003d c.get(G.CDW.GIVE_X) + c.get(G.CDW.GIVE_W)\n+//                \u0026\u0026 c.get(G.CDW.TAKE_Y) \u003c\u003d p.y \u0026\u0026 p.y \u003c\u003d c.get(G.CDW.TAKE_Y) + c.get(G.CDW.GIVE_H)) {\n+//            int term_count \u003d 0;\n+//            for (Contract.Term term : terms) {\n+//                if (term.getType() !\u003d Contract.Type.TECH) {\n+//                    then_we_items[term.getType().ordinal()].setEnabled(false);\n+//                }\n+//                if (term.getDonor() \u003d\u003d game.getTurn()) {\n+//                    term_count++;\n+//                }\n+//            }\n+//            if (term_count \u003c 3) {\n+//                showThenWeMenu(p);\n+//            }\n+//        }\n+    }\n+\n+    private void setAvailableTerms(List\u003cContract.Term\u003e terms) {\n+        setTermAvailability(Contract.Type.MINISTRY, true);\n+        for (Term t : terms) {\n+            switch (t.getType()) {\n+                case VOTES:\n+                    System.out.println(\"DBG no votes\");\n+                    setTermAvailability(t.getType(), false);\n+                    break;\n+                case MINISTRY:\n+                    non_promised_ministries.remove(new Integer(t.getAmount()));\n+                    break;\n+                case MONEY:\n+                    setTermAvailability(t.getType(), false);\n+                    break;\n+                case STATE:\n+                    setTermAvailability(t.getType(), false);\n+                    break;\n+                case TECH:\n+                    // this is handled elsewhere\n+                    break;\n+                default:\n+                    throw new AssertionError();\n+            }\n+        }\n+        if (non_promised_ministries.isEmpty()) {\n+            setTermAvailability(Contract.Type.MINISTRY, false);\n+        }\n+    }\n+\n+    private void setTermAvailability(Contract.Type type, boolean available) {\n+        if_you_items[type.ordinal()].setEnabled(available);\n+        then_we_items[type.ordinal()].setEnabled(available);\n     }\n \n     public void clear() {\n         contract.clear();\n+        // reset all diplomacy choices\n         for (int i \u003d 0; i \u003c if_you_items.length; i++) {\n             if_you_items[i].setEnabled(true);\n         }\n         for (int i \u003d 0; i \u003c then_we_items.length; i++) {\n             then_we_items[i].setEnabled(true);\n         }\n+        non_promised_ministries.clear();\n+        non_promised_ministries.addAll(all_ministries);\n+        // if not at war, can\u0027t ask/offer peace\n         if (game.getDiplomacy().getDiplomaticState(game.getTurn(), faction) !\u003d C.DS_WAR) {\n             if_you_items[IfYouWill.PEACE.ordinal()].setEnabled(false);\n             then_we_items[ThenWeWill.PEACE.ordinal()].setEnabled(false);\n         }\n-        non_promised_ministries.clear();\n-        non_promised_ministries.addAll(all_ministries);\n-\n+        // search for promised votes and ministries in pending contracts of sender\n         for (Contract con : game.getDiplomacy().getSentContracts()) {\n             for (Term term : con.getTerms()) {\n                 if (term.getDonor() \u003d\u003d game.getTurn()) {\n@@ -271,25 +417,59 @@ public void clear() {\n                         case MINISTRY:\n                             non_promised_ministries.remove(new Integer(term.getAmount()));\n                             break;\n-\n+                        case MONEY:\n+                            break;\n+                        case STATE:\n+                            break;\n+                        case TECH:\n+                            break;\n+                       default:\n+                            throw new AssertionError();\n+                    }\n+                }\n+                if (term.getDonor() \u003d\u003d faction) {\n+                    switch (term.getType()) {\n+                        case VOTES:\n+                            System.out.println(\"DBG no votes\");\n+                            if_you_items[IfYouWill.VOTES.ordinal()].setEnabled(false);\n+                            break;\n+                        case MINISTRY:\n+                            non_promised_ministries.remove(new Integer(term.getAmount()));\n+                            break;\n+                        case MONEY:\n+                            break;\n+                        case STATE:\n+                            break;\n+                        case TECH:\n+                            break;\n                         default:\n                             throw new AssertionError();\n                     }\n                 }\n             }\n         }\n-        if (game.getRegency().getVotes()[game.getTurn()][Regency.CANDIDATE_IDX] \u003e -1) {\n+        // search for promised votes and ministries for sender and for receiver\n+        // those that are made with sender\n+        if (game.getRegency().getVotes()[game.getTurn()][Regency.CANDIDATE_IDX] \u003e -1\n+                || game.getRegency().getVotes()[faction][Regency.CANDIDATE_IDX] \u003d\u003d game.getTurn()) {\n             then_we_items[ThenWeWill.VOTES.ordinal()].setEnabled(false);\n+            if_you_items[IfYouWill.VOTES.ordinal()].setEnabled(false);\n         }\n-\n         int[] promises \u003d game.getDiplomacy().getMinistryPromises(game.getTurn());\n         for (int i \u003d 0; i \u003c promises.length; i++) {\n             if (promises[i] \u003e -1) {\n                 non_promised_ministries.remove(new Integer(promises[i]));\n             }\n         }\n+        promises \u003d game.getDiplomacy().getMinistryPromises(faction);\n+        for (int i \u003d 0; i \u003c promises.length; i++) {\n+            if (promises[i] \u003d\u003d game.getTurn()) {\n+                non_promised_ministries.remove(new Integer(promises[i]));\n+            }\n+        }\n         if (non_promised_ministries.isEmpty()) {\n             then_we_items[ThenWeWill.MINISTRY.ordinal()].setEnabled(false);\n+            if_you_items[IfYouWill.MINISTRY.ordinal()].setEnabled(false);\n         }\n     }\n \n@@ -343,6 +523,7 @@ public void actionPerformed(ActionEvent e) {\n                                 \n                     }\n                     contract.setSender(game.getTurn());\n+                    contract.setReceiver(receiver);\n                     Message msg \u003d new Message(null, C.Msg.CONTRACT, game.getYear(), null);\n                     msg.setContract(contract);\n                     game.getDiplomacy().addSentContract(contract);\n@@ -370,7 +551,7 @@ private void drawBackground(Graphics g) {\n     private void drawDetails(Graphics gg) {\n         Graphics2D g \u003d (Graphics2D) gg;\n         drawLeader(g);\n-        drawContract(g, contract, ws, faction);\n+        drawContract(game, g, contract, ws, faction);\n         drawContractHeaders(g);\n \n     }\n@@ -384,7 +565,7 @@ private void drawContractHeaders(Graphics2D g) {\n         UtilG.drawStringGrad(g, s, ws.font_large, x, +c.get(CDW.GIVE_H_Y) - c.get(CDW.GIVE_Y) + c.get(CDW.TAKE_Y));\n     }\n \n-    static void drawContract(Graphics2D g, Contract contract, WindowSize ws, int other_party) throws AssertionError {\n+    static void drawContract(Game game, Graphics2D g, Contract contract, WindowSize ws, int other_party) throws AssertionError {\n         Map\u003cEnum, Integer\u003e c \u003d ws.diplomacy_window;\n         List\u003cTerm\u003e terms \u003d contract.getTerms();\n         int count_a \u003d 0;\n@@ -405,7 +586,9 @@ static void drawContract(Graphics2D g, Contract contract, WindowSize ws, int oth\n                     case MINISTRY:\n                         s \u003d IfYouWill.MINISTRY.text + Util.getFactionName(term.getAmount()) + \" \" + IfYouWill.MINISTRY.text2;\n                         break;\n-\n+                    case TECH:\n+                        s \u003d IfYouWill.TECH.text + game.getGameResources().getTech()[term.getAmount()].name + \" \" + IfYouWill.TECH.text2;\n+                        break;\n                     default:\n                         throw new AssertionError();\n                 }\n@@ -427,6 +610,9 @@ static void drawContract(Graphics2D g, Contract contract, WindowSize ws, int oth\n                     case MINISTRY:\n                         s \u003d ThenWeWill.MINISTRY.text + Util.getFactionName(term.getAmount()) + \" \" + ThenWeWill.MINISTRY.text2;\n                         break;\n+                    case TECH:\n+                        s \u003d ThenWeWill.TECH.text + game.getGameResources().getTech()[term.getAmount()].name + \" \" + ThenWeWill.TECH.text2;\n+                        break;\n                     default:\n                         throw new AssertionError();\n                 }\n@@ -495,13 +681,15 @@ private void selectIfYou(int selection) {\n         switch (IfYouWill.values()[selection]) {\n             case PEACE:\n                 term \u003d new Contract.DiplomaticState(C.DS_PEACE);\n+                //if_you_items[IfYouWill.PEACE.ordinal()].setEnabled(false);\n                 break;\n             case MONEY:\n                 detail_dialog.showDialog(MAX_MONEY_DEMAND);\n                 int value \u003d detail_dialog.getValue();\n                 if (value \u003e 0) {\n                     term \u003d new Contract.Money(value);\n                 }\n+                //if_you_items[IfYouWill.MONEY.ordinal()].setEnabled(false);\n                 //System.out.println(\"I\u0027ll forward you to alcoholics anonymous ...\");\n                 break;\n             case VOTES:\n@@ -510,6 +698,18 @@ private void selectIfYou(int selection) {\n             case MINISTRY:\n                 term \u003d new Contract.Ministry(selectMinistry(false));\n                 break;\n+            case TECH:\n+                LinkedList\u003cInteger\u003e techs_in_contract \u003d new LinkedList\u003c\u003e();\n+                for (Term term1 : contract.getTerms()) {\n+                    if (term1.getType() \u003d\u003d Contract.Type.TECH \u0026\u0026 term1.getDonor() \u003d\u003d faction) {\n+                        techs_in_contract.add(term1.getAmount());\n+                    }\n+                }\n+                int tech_nr \u003d selectTech(false, techs_in_contract);\n+                if (tech_nr \u003e -1) {\n+                    term \u003d new Contract.Tech(tech_nr);\n+                }\n+                break;\n //            case RESOURCES:\n //                System.out.println(\"A Hawkwood, a Hazat and a Decados went to a bar ...\");\n //                break;\n@@ -528,14 +728,25 @@ private void selectIfYou(int selection) {\n         }\n     }\n \n-    private int selectMinistry(boolean donor) {\n-        int promised_ministry \u003d -1;\n-        List\u003cInteger\u003e ministry_list \u003d new LinkedList\u003c\u003e();\n+    private int selectTech(boolean donor, LinkedList\u003cInteger\u003e techs_in_contract) {\n+        int[] promised_tech \u003d {-1};\n         if (donor) {\n-            ministry_list.addAll(non_promised_ministries);\n+            gui.showTechWindow(game.getTurn(), faction, techs_in_contract, promised_tech);\n         } else {\n-            ministry_list.addAll(all_ministries);\n+            gui.showTechWindow(faction, game.getTurn(), techs_in_contract, promised_tech);\n         }\n+        return promised_tech[0];\n+    }\n+\n+    private int selectMinistry(boolean donor) {\n+        int promised_ministry \u003d -1;\n+        List\u003cInteger\u003e ministry_list \u003d new LinkedList\u003c\u003e();\n+        ministry_list.addAll(non_promised_ministries);\n+//        if (donor) {\n+//            ministry_list.addAll(non_promised_ministries);\n+//        } else {\n+//            ministry_list.addAll(all_ministries);\n+//        }\n //        ministry_list.add(C.FLEET);\n //        ministry_list.add(C.THE_SPY);\n //        ministry_list.add(C.STIGMATA);\n@@ -622,6 +833,18 @@ private void selectThenWe(int selection) {\n             case MINISTRY:\n                 term \u003d new Contract.Ministry(selectMinistry(true));\n                 break;\n+            case TECH:\n+                LinkedList\u003cInteger\u003e techs_in_contract \u003d new LinkedList\u003c\u003e();\n+                for (Term term1 : contract.getTerms()) {\n+                    if (term1.getType() \u003d\u003d Contract.Type.TECH \u0026\u0026 term1.getDonor() \u003d\u003d game.getTurn()) {\n+                        techs_in_contract.add(term1.getAmount());\n+                    }\n+                }\n+                int tech_nr \u003d selectTech(true, techs_in_contract);\n+                if (tech_nr \u003e -1) {\n+                    term \u003d new Contract.Tech(tech_nr);\n+                }\n+                break;\n //            case RESOURCES:\n //                System.out.println(\"A Hawkwood, a Hazat and a Decados went to a bar ...\");\n //                break;"
        },
        {
          "file_name": "src/gui/Gui.java",
          "patch": "@@ -838,8 +838,7 @@ public void actionPerformed(ActionEvent e) {\n \n         menu_build_road.addActionListener(new ActionListener() {\n             public void actionPerformed(ActionEvent e) {\n-\n-                showInfoWindow(\"Not implemented yet.\");\n+                state.buildRoad();\n             }\n         });\n \n@@ -1057,7 +1056,21 @@ public void hideTechWindow() {\n     }\n \n     public void showTechWindow() {\n-        tech_panel.setTechData();\n+        showTechWindow(-1, -1, null, null);\n+    }\n+\n+    /**\n+     * When donor \u003c 0, this will prime tech window for setting lab research targets.\n+     * When donor \u003e\u003d 0, this will prime tech window for selecting swapped techs\n+     * in contracts.\n+     *\n+     * @param donor\n+     * @param recipient\n+     * @param selected\n+     */\n+    public void showTechWindow(int donor, int recipient, List\u003cInteger\u003e in_contract, int[] selected) {\n+        tech_panel.setTechData(donor, recipient, in_contract);\n+        tech_panel.setSwapTech(selected);\n         tech_panel.setLabsCost();\n         tech_panel.setRPAvailable();\n         tech_panel.setLabResearches();\n@@ -2231,6 +2244,10 @@ public void enableBuildCityMenuItem(boolean enabled) {\n         menu_build_city.setEnabled(enabled);\n     }\n \n+    public void enableBuildRoadMenuItem(boolean enabled) {\n+        menu_build_road.setEnabled(enabled);\n+    }\n+\n     public void enableRazeCityMenuItem(boolean enabled) {\n         menu_raze_city.setEnabled(enabled);\n     }"
        },
        {
          "file_name": "src/gui/ResolveContract.java",
          "patch": "@@ -103,8 +103,11 @@ public static ResolveContract getWindow(Gui gui) {\n     public void enterDialog(Message msg) {\n         message \u003d msg;\n         contract \u003d message.getContract();\n-        if (message.getContract().isResolved()) {\n-\n+        accept.setEnabled(true);\n+        reject.setEnabled(true);\n+        if (contract.isResolved()) {\n+            accept.setEnabled(false); // fix #68\n+            reject.setEnabled(false);\n         }\n         dialog.setVisible(true);\n     }\n@@ -159,9 +162,11 @@ public void actionPerformed(ActionEvent e) {\n                     gui.showInfoWindow(\"My Lord, we cannot satisfy all the terms of the Contract!\");\n                     return;\n                 }\n-                game.getFaction(contract.getSender()).addMessage(new Message(\"\"\n+                Message message \u003d new Message(\"\"\n                         + Util.factionNameDisplay(game.getTurn())\n-                        + \" sent Us the following message: \\\"We accept Your offer.\\\"\", C.Msg.RESPONSE, game.getYear(), null));\n+                        + \" sent Us the following message: \\\"We accept the offer.\\\"\", C.Msg.RESPONSE, game.getYear(), null);\n+                message.setContract(contract);\n+                game.getFaction(contract.getSender()).addMessage(message);\n                 self.setWindowVisiblity(false);\n             }\n         });\n@@ -177,9 +182,11 @@ public void actionPerformed(ActionEvent e) {\n             @Override\n             public void actionPerformed(ActionEvent e) {\n                 contract.reject();\n-                game.getFaction(contract.getSender()).addMessage(new Message(\"\"\n+                Message message \u003d new Message(\"\"\n                         + Util.factionNameDisplay(game.getTurn())\n-                        + \" sent Us the following message: \\\"We reject Your offer.\\\"\", C.Msg.RESPONSE, game.getYear(), null));\n+                        + \" sent Us the following message: \\\"We reject the offer.\\\"\", C.Msg.RESPONSE, game.getYear(), null);\n+                message.setContract(contract);\n+                game.getFaction(contract.getSender()).addMessage(message);\n                 self.setWindowVisiblity(false);\n             }\n         });\n@@ -189,13 +196,17 @@ public void actionPerformed(ActionEvent e) {\n     private void renderWindow(Graphics g) {\n         drawBackground(g);\n         drawDetails(g);\n+\n     }\n \n     private void drawDetails(Graphics gg) {\n         Graphics2D g \u003d (Graphics2D) gg;\n         drawContractHeaders(g);\n-        DiplomacyWindow.drawContract(g, message.getContract(), ws, game.getTurn());\n+        DiplomacyWindow.drawContract(game, g, message.getContract(), ws, game.getTurn());\n         drawLeader(g);\n+        if (message.getType() \u003d\u003d C.Msg.RESPONSE) {\n+            drawRespose(g);\n+        }\n     }\n \n     private void drawBackground(Graphics g) {\n@@ -220,8 +231,16 @@ private void drawContractHeaders(Graphics2D g) {\n     }\n \n     private void drawLeader(Graphics2D g) {\n-        String s \u003d Util.factionNameDisplay(contract.getSender());\n+        int message_sender \u003d contract.getSender();\n+        if (message.getType() \u003d\u003d C.Msg.RESPONSE) {\n+            message_sender \u003d contract.getReceiver();\n+        }\n+        String s \u003d Util.factionNameDisplay(message_sender);\n         int x \u003d UtilG.center(g, c2.get(G.CH.LEADER_H_X), c2.get(G.CH.LEADER_H_W), ws.font_large, s);\n         UtilG.drawStringGrad(g, s, ws.font_large, x, c2.get(G.CH.LEADER_H_Y));\n     }\n+\n+    private void drawRespose(Graphics2D g) {\n+        UtilG.drawStringGrad(g, message.getMsgTxt(), ws.font_large, c.get(CDW.R_RESPONCE_X), c.get(CDW.R_RESPONCE_Y));\n+    }\n }"
        },
        {
          "file_name": "src/gui/TechPanel.java",
          "patch": "@@ -86,6 +86,10 @@\n     // number of labs, set in setLabsCost()\n     private int nr_labs;\n \n+    private int[] swap_tech;\n+    private Research donor_res \u003d null;\n+    private Research recipient_res \u003d null;\n+    private List\u003cInteger\u003e in_contract \u003d null;\n     private JButton tech_db;\n     private JButton exit;\n     private JButton archive;\n@@ -161,12 +165,16 @@ public void setUpExitButton() {\n         exit.addActionListener(new ActionListener() {\n             @Override\n             public void actionPerformed(ActionEvent e) {\n-\n-                gui.hideTechWindow();\n+                exitWindow();\n             }\n         });\n     }\n \n+    private void exitWindow() {\n+        swap_tech \u003d null;\n+        gui.hideTechWindow();\n+    }\n+\n     public void setUpArchiveButton() {\n         archive \u003d new JButton(\"Archive\");\n         archive.setFont(ws.font_default);\n@@ -188,6 +196,10 @@ public void actionPerformed(ActionEvent e) {\n         });\n     }\n \n+    public void setSwapTech(int[] swap_tech) {\n+        this.swap_tech \u003d swap_tech;\n+    }\n+\n     public void addTechInfo() {\n         tech_info \u003d new JTextArea();\n         tech_info.setFont(ws.font_default);\n@@ -365,18 +377,29 @@ public void mousePressed(MouseEvent e) {\n \n                 }\n                 if (e.getClickCount() \u003d\u003d 2) {\n-\n+                    // if select tech for swapping in contracts\n+                    if (swap_tech !\u003d null) {\n+                        int clicked \u003d (Integer) tech_table.getValueAt(row, 0);\n+                        if (!donor_res.techs[clicked] || recipient_res.techs[clicked] || row \u003d\u003d 0\n+                                || in_contract.contains(clicked)) {\n+                            return;\n+                        }\n+                        swap_tech[0] \u003d clicked;\n+\n+                        exitWindow();\n+                        return;\n+                    }\n                     // if category allready reseached \u0026\u0026 !\u003d \"nothing\"\n                     int cost \u003d ((Integer) tech_table.getValueAt(row, 1)).intValue();\n                     if (cost \u003d\u003d -1 \u0026\u0026 row !\u003d 0) {\n                         return;\n                     }\n \n                     // set researched technology \u0026\u0026 do research\n-                    int tech_no \u003d ((Integer) tech_table.getValueAt(row, 0)).intValue();\n+                    int tech_no \u003d ((Integer) tech_table.getValueAt(row, 0));\n                     game.setResearch(tech_no);\n                     game.getFaction(game.getTurn()).getResearch().doResearch();\n-                    setTechData();\n+                    setTechData(-1, -1, null);\n                     setRPAvailable();\n                     if (row !\u003d 0 \u0026\u0026 game.getFaction(game.getTurn()).getResearch().techs[tech_no]) {\n                         tech_table.setRowSelectionInterval(0, 0);\n@@ -392,9 +415,16 @@ public void mousePressed(MouseEvent e) {\n         });\n     }\n \n-    public void setTechData() {\n+    public void setTechData(int donor, int recipient, List\u003cInteger\u003e in_contract) {\n+        this.in_contract \u003d in_contract;\n         tech_info.setText(\"\");\n         Research research \u003d game.getFaction(game.getTurn()).getResearch();\n+        donor_res \u003d null;\n+        recipient_res \u003d null;\n+        if (donor \u003e -1) {\n+            donor_res \u003d game.getFaction(donor).getResearch();\n+            recipient_res \u003d game.getFaction(recipient).getResearch();\n+        }\n         boolean[] owned_tech \u003d research.techs;\n         int researched \u003d research.researched;\n         Tech[] techs \u003d game.getGameResources().getTech();\n@@ -431,10 +461,14 @@ public void setTechData() {\n             if (techs[i].stats[C.TECH0] \u003e\u003d 800) {\n                 continue;\n             }\n-            if (!owned_tech[i] \u0026\u0026 owned_tech[techs[i].stats[C.TECH0]]\n-                    \u0026\u0026 owned_tech[techs[i].stats[C.TECH1]]\n+            if (donor_res \u003d\u003d null) {\n+                if (!owned_tech[i] \u0026\u0026 owned_tech[techs[i].stats[C.TECH0]]\n+                        \u0026\u0026 owned_tech[techs[i].stats[C.TECH1]]\n                     \u0026\u0026 owned_tech[techs[i].stats[C.TECH2]]) {\n //                category_lists.get(techs[i].stats[C.TECH_VOL] - 1).add(new Integer(i));\n+                    category_lists.get(cat_nr).add(new Integer(i));\n+                }\n+            } else if (donor_res.techs[i] \u0026\u0026 !recipient_res.techs[i] \u0026\u0026 !in_contract.contains(i)) {\n                 category_lists.get(cat_nr).add(new Integer(i));\n             }\n         }\n@@ -550,7 +584,11 @@ public Component getTableCellRendererComponent(\n                 int row, int column) {\n             Color c_b \u003d Color.BLACK;\n             Color c_f \u003d C.COLOR_GOLD;\n-            if (row !\u003d 0 \u0026\u0026 ((Integer) table.getValueAt(row, 1)).intValue() \u003d\u003d -1) {\n+            if (donor_res \u003d\u003d null \u0026\u0026 row !\u003d 0 \u0026\u0026 ((Integer) table.getValueAt(row, 1)).intValue() \u003d\u003d -1) {\n+                c_f \u003d Color.BLUE;\n+            } else if (donor_res !\u003d null \u0026\u0026 (!donor_res.techs[((Integer) table.getValueAt(row, 0))]\n+                    || recipient_res.techs[((Integer) table.getValueAt(row, 0))]\n+                    || in_contract.contains((Integer) table.getValueAt(row, 0)))) {\n                 c_f \u003d Color.BLUE;\n             }\n             if (game.getFaction(game.getTurn()).getResearch().researched"
        },
        {
          "file_name": "src/gui/UnitStats.java",
          "patch": "@@ -256,7 +256,7 @@ private void setAttkStat(int field_no, String type, int acc, int str) {\n                     attack4_stat.setText(\"\" + acc + \"/\" + str);\n                     break;\n                 default:\n-                    throw new AssertionError(\"Unit with over 4 attack types\", null);\n+                    System.out.println(\"Unit with over 4 attack types\");\n             }\n         }\n "
        },
        {
          "file_name": "src/state/Bomb.java",
          "patch": "@@ -120,7 +120,7 @@ public void clickOnPlanetMapButton1(Point p) {\n         game.getDiplomacy().setDiplomaticState(faction.x, target_stack.get(0).owner, C.DS_WAR);\n         game.subMovePointsSpace(selected);\n         target_hex.spot(faction.x);\n-        game.startBombardOrPTS(target_hex, true);\n+        game.startBombardOrPTS(target_hex, true, target_stack.get(0).owner);\n         game.resolveGroundBattleInit(C.BOMBARD_COMBAT, target_stack.get(0).owner);\n         gui.setMouseCursor(C.S_CURSOR_SCEPTOR);\n         SU.showCombatWindowBombard();"
        },
        {
          "file_name": "src/state/CWB2.java",
          "patch": "@@ -57,9 +57,10 @@ public void pressBombardAgainButton() {\n         Hex target \u003d game.getBattle().getRangedSpaceTarget();\n         game.resolveGroundBattleFinalize();\n         gui.getCombatWindow().setFightText(\"Do Combat\");\n-        gui.getCombatWindow().toggleButtons(false, true, false);       \n-        game.startBombardOrPTS(target, true);\n-        game.resolveGroundBattleInit(C.BOMBARD_COMBAT, game.getBattle().getRangedSpaceTarget().getStack().get(0).owner);\n+        gui.getCombatWindow().toggleButtons(false, true, false);\n+        int target_faction \u003d target.getStack().get(0).owner;\n+        game.startBombardOrPTS(target, true, target_faction);\n+        game.resolveGroundBattleInit(C.BOMBARD_COMBAT, target_faction);\n         gui.setCurrentState(CWB1.get());\n         game.subMovePointsSpace(game.getCombatStack(\"a\"));\n         SU.showCombatWindowBombard();"
        },
        {
          "file_name": "src/state/CWPTS2.java",
          "patch": "@@ -56,7 +56,7 @@ static void pressFightButtonProcess() {\n         if (!Util.getSelectedUnits(game.getSelectedStack()).isEmpty() \u0026\u0026 !pts_queue.isEmpty()) {\n             Hex pts_hex \u003d pts_queue.remove(0);\n             pts_hex.spot(game.getTurn());\n-            game.startBombardOrPTS(pts_hex, false);\n+            game.startBombardOrPTS(pts_hex, false, -1);\n             game.resolveGroundBattleInit(C.PTS_COMBAT, pts_hex.getStack().get(0).owner);\n             SU.showCombatWindowPTS();\n             return;"
        },
        {
          "file_name": "src/state/LAND1.java",
          "patch": "@@ -110,7 +110,7 @@ public void clickOnPlanetMapButton1(Point p) {\n             gui.showInfoWindow(\"Cannot land on ruins.\");\n             return;\n         }\n-        if (!target_stack.isEmpty() \u0026\u0026 target_stack.get(0).owner \u003d\u003d faction.x \u0026\u0026 target_stack.get(0).owner !\u003d faction.y) {\n+        if (!target_stack.isEmpty() \u0026\u0026 target_stack.get(0).owner \u003d\u003d faction.x \u0026\u0026 target_stack.get(0).prev_owner !\u003d faction.y) { // fix #70\n             gui.showInfoWindow(\"Cannot merge loaned stacks.\");\n             return;\n         }\n@@ -125,15 +125,15 @@ public void clickOnPlanetMapButton1(Point p) {\n                 \n         // start PTS defence fire if any\n         if (SU.byzIICombatOK(stack, false)) {\n-            game.startBombardOrPTS(target_hex, true);\n+            game.startBombardOrPTS(target_hex, true, -1);\n             List\u003cHex\u003e pts_queue \u003d game.getBattle().getPTSQueue();\n             if (!pts_queue.isEmpty()) {\n                 // save state so we can land in state.CWPTS2 after PTS\n                 saveMainGameState();\n                 landing_point \u003d p;\n                 Hex pts_hex \u003d pts_queue.remove(0);\n                 // since we are landing, do not try to bomb landing hex\n-                game.startBombardOrPTS(pts_hex, false);\n+                game.startBombardOrPTS(pts_hex, false, -1);\n                 pts_hex.spot(game.getTurn());\n                 game.resolveGroundBattleInit(C.PTS_COMBAT, pts_hex.getStack().get(0).owner);\n                 gui.setMouseCursor(C.S_CURSOR_SCEPTOR);"
        },
        {
          "file_name": "src/state/MsgsW.java",
          "patch": "@@ -87,6 +87,7 @@ public void clickOnWindow(MouseEvent e) {\n //                        current_cmbt_report \u003d report;\n                         SU.showCombatReplay();\n                         break;\n+                    case RESPONSE:\n                     case CONTRACT:\n                         gui.showResolveContractDialog(msg);\n                         break;"
        },
        {
          "file_name": "src/state/PW.java",
          "patch": "@@ -27,6 +27,7 @@\n  */\n package state;\n \n+import game.Hex;\n import java.awt.Point;\n import java.awt.event.MouseEvent;\n import static state.SU.setWindow;\n@@ -98,4 +99,13 @@ public void clickOnPlanetWindow(MouseEvent e) {\n         }\n \n     }\n+\n+    @Override\n+    public void buildRoad() {\n+        Point p \u003d game.getSelectedPoint();\n+        Hex h \u003d game.getHexFromPXY(game.getCurrentPlanetNr(), p.x, p.y);\n+        h.getTerrain()[C.ROAD] \u003d true;\n+        gui.enableBuildRoadMenuItem(false);\n+    }\n+\n }"
        },
        {
          "file_name": "src/state/SU.java",
          "patch": "@@ -84,6 +84,8 @@ public static void setStateUpKeep(State s) {\n             List\u003cUnit\u003e stack \u003d game.getSelectedStack();\n             boolean have_engineer \u003d false;\n             boolean have_city \u003d false;\n+            boolean have_land \u003d false;\n+            boolean have_road \u003d false;\n             if (stack !\u003d null \u0026\u0026 !stack.isEmpty()) {\n                 for (Unit unit1 : Util.xS(stack)) {\n                     if (unit1.type \u003d\u003d C.ENGINEER_UNIT_TYPE \u0026\u0026 unit1.selected \u0026\u0026 !unit1.in_space) {\n@@ -96,12 +98,20 @@ public static void setStateUpKeep(State s) {\n                 if (hex.getStructure() !\u003d null) {\n                     have_city \u003d true;\n                 }\n+                if (!hex.getTerrain(C.OCEAN) || game.getPlanet(u.p_idx).tile_set_type \u003d\u003d C.BARREN_TILE_SET) {\n+                    have_land \u003d true;\n+                }\n+                if (hex.getTerrain(C.ROAD)) {\n+                    have_road \u003d true;\n+                }\n             }\n             gui.enableBuildCityMenuItem(have_engineer);\n             gui.enableRazeCityMenuItem(have_engineer \u0026\u0026 have_city);\n+            gui.enableBuildRoadMenuItem(have_land \u0026\u0026 !have_road);\n         } else {\n             gui.enableBuildCityMenuItem(false);\n             gui.enableRazeCityMenuItem(false);\n+            gui.enableBuildRoadMenuItem(false);\n         }\n     }\n "
        },
        {
          "file_name": "src/state/State.java",
          "patch": "@@ -169,4 +169,7 @@ public void pressUnloadButton() {\n \n     public void razeCity() {\n     }\n+\n+    public void buildRoad() {\n+    }\n }"
        },
        {
          "file_name": "src/state/UIW1.java",
          "patch": "@@ -114,7 +114,7 @@ public void pressUnloadButton() {\n                     if ((faction.x !\u003d -1 \u0026\u0026 !(c.move_type \u003d\u003d C.MoveType.JUMP\n                             || c.move_type \u003d\u003d C.MoveType.LANDER\n                             || c.move_type \u003d\u003d C.MoveType.SPACE))\n-                            || (terrain[C.OCEAN] \u003d\u003d true \u0026\u0026 tile_set !\u003d 4)) {\n+                            || (faction.x \u003d\u003d -1 \u0026\u0026 terrain[C.OCEAN] \u003d\u003d true \u0026\u0026 tile_set !\u003d 4)) { // fix #69\n                         continue;\n                     }\n                     tmp.add(c);"
        },
        {
          "file_name": "src/util/C.java",
          "patch": "@@ -156,7 +156,8 @@\n     public static final float LOYALTY_REBEL_HIGH_P \u003d 0.98f;\n     public static final String OPT_ENABLE_AI \u003d \"enableai\";\n     public static final String OPT_AI_TEST \u003d \"ai_test\";\n-\n+    public static final int PERSONNEL_UNIT_MIN_RANK \u003d 6;\n+    public static final int UNSPOTTED_AG_BONUS \u003d 3;\n \n \n "
        },
        {
          "file_name": "src/util/G.java",
          "patch": "@@ -117,7 +117,7 @@\n         R_ACCEPT_Y,\n         R_ACCEPT_W,\n         R_ACCEPT_H,\n-        R_BUTTON_W, R_WIN_Y, R_WIN_H,\n+        R_BUTTON_W, R_WIN_Y, R_WIN_H, R_RESPONCE_Y, R_RESPONCE_X,\n     }\n \n     /**"
        },
        {
          "file_name": "src/util/WindowSize.java",
          "patch": "@@ -1185,6 +1185,9 @@ private void iDiplomacyWindow(boolean is_double) {\n         diplomacy_window.put(CDW.R_ACCEPT_W, 95);\n         diplomacy_window.put(CDW.R_ACCEPT_H, 16);\n         diplomacy_window.put(CDW.R_BUTTON_W, 123);\n+        diplomacy_window.put(CDW.R_RESPONCE_X, 10);\n+        diplomacy_window.put(CDW.R_RESPONCE_Y, 350 - y);\n+\n \n         if (is_double) {\n             diplomacy_window.replaceAll(mul2);"
        }
      ]
    }
  },
  {
    "name": "WinningCombination.java: Null pointer dereferencePointer",
    "url": "https://github.com/modernmaster/katas/issues/16",
    "description": "L34\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/modernmaster/katas/commit/d7170d505942bf390e6c202e35204d0b881f393a",
      "files": [
        {
          "file_name": "rock-paper-scissors/src/main/java/uk/co/jamesmcguigan/rockpaperscissors/models/Player.java",
          "patch": "@@ -22,7 +22,7 @@ public void setGesture(final Gesture gesture) {\n \n     @Override\n     public boolean equals(final Object obj) {\n-        if(obj\u003d\u003dnull || !obj.getClass().equals(Player.class)) {\n+        if(obj\u003d\u003dnull || obj.getClass() !\u003d Player.class) {\n             return false;\n         }\n         Player player \u003d (Player) obj;"
        },
        {
          "file_name": "rock-paper-scissors/src/main/java/uk/co/jamesmcguigan/rockpaperscissors/models/WinningCombination.java",
          "patch": "@@ -31,12 +31,12 @@ public void setResultingAction(final String resultingAction) {\n \n     @Override\n     public boolean equals(final Object obj) {\n-        if (Gesture.class.equals(obj.getClass())) {\n-            Gesture winningCombinationGesture \u003d (Gesture) obj;\n-            return winningGesture.getName().equals(\n-                    winningCombinationGesture.getName());\n+        if(obj \u003d\u003d null || obj.getClass() !\u003d Gesture.class) {\n+            return false;\n         }\n-        return false;\n+        Gesture winningCombinationGesture \u003d (Gesture) obj;\n+        return winningGesture.getName().equals(\n+                winningCombinationGesture.getName());\n     }\n \n     @Override"
        }
      ]
    }
  },
  {
    "name": "Null pointer exception when changing curtomer password",
    "url": "https://github.com/Faustyachka/Zephyrus/issues/39",
    "description": "![image](https://cloud.githubusercontent.com/assets/7128868/2938456/4ccf091a-d90c-11e3-80cf-1a791950bf66.png)\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/Faustyachka/Zephyrus/commit/c99a3f07f85d8bb54a34db96435911f1e4f9a963",
      "files": [
        {
          "file_name": "src/com/zephyrus/wind/commands/sql/CreateNewPassComand.java",
          "patch": "@@ -64,8 +64,8 @@ protected String doExecute(HttpServletRequest request,\n \t\t\trequest.setAttribute(\"messageNumber\", MessageNumber.USER_ID_ERROR.getId());\n \t\t\treturn PAGES.MESSAGE_PAGE.getValue();\n \t\t}\n-\t\tString pass \u003d request.getParameter(\"pass\");\n-\t\tString confPass \u003d request.getParameter(\"confpass\");\n+\t\tString pass \u003d request.getParameter(\"password\");\n+\t\tString confPass \u003d request.getParameter(\"confirmpass\");\n \t\tif (pass.equals(\"\")) {\n \t\t\trequest.setAttribute(\"error\", \"Password can not be empty\");\n \t\t\trequest.setAttribute(\"userId\", userId);"
        }
      ]
    }
  },
  {
    "name": "tundra.service:benchmark throws a null pointer exception",
    "url": "https://github.com/Permafrost/Tundra/issues/65",
    "description": "When invoked as follows: `tundra.service:benchmark($service\u003d\"tundra.service:nothing\", $count\u003d10)`.\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/Permafrost/Tundra/commit/e530f996972acd94ddaed619e30eb369506ccce8",
      "files": [
        {
          "file_name": "code/classes/tundra/service$IncrementalNormalDistributionEstimator.class"
        },
        {
          "file_name": "code/classes/tundra/service$invoke.class"
        },
        {
          "file_name": "code/classes/tundra/service.class"
        },
        {
          "file_name": "code/source/tundra/service.java",
          "patch": "@@ -1,8 +1,8 @@\n package tundra;\n \n // -----( IS Java Code Template v1.2\n-// -----( CREATED: 2014-06-11 16:05:34.466\n-// -----( ON-HOST: -\n+// -----( CREATED: 2014-08-09 19:02:53 EST\n+// -----( ON-HOST: 172.16.189.141\n \n import com.wm.data.*;\n import com.wm.util.Values;\n@@ -40,14 +40,14 @@ public static final void benchmark (IData pipeline)\n \t\t// [o] field:0:required $duration.stdev\n \t\t// [o] field:0:required $message\n \t\tIDataCursor cursor \u003d pipeline.getCursor();\n-\n+\t\t\n \t\ttry {\n \t\t  String service \u003d IDataUtil.getString(cursor, \"$service\");\n \t\t  IData scope \u003d IDataUtil.getIData(cursor, \"$pipeline\");\n \t\t  int count \u003d Integer.parseInt(IDataUtil.getString(cursor, \"$count\"));\n-\n+\t\t\n \t\t  IncrementalNormalDistributionEstimator estimator \u003d benchmark(service, scope \u003d\u003d null? pipeline : scope, count);\n-\n+\t\t\n \t\t  IDataUtil.put(cursor, \"$duration.average\", tundra.duration.format(\"\" + estimator.mean(), \"milliseconds\", \"xml\"));\n \t\t  IDataUtil.put(cursor, \"$duration.stdev\", tundra.duration.format(\"\" + estimator.standardDeviation(), \"milliseconds\", \"xml\"));\n \t\t  IDataUtil.put(cursor, \"$message\", service + \" benchmark results: \" + estimator.toString());\n@@ -56,7 +56,7 @@ public static final void benchmark (IData pipeline)\n \t\t}\n \t\t// --- \u003c\u003cIS-END\u003e\u003e ---\n \n-\n+                \n \t}\n \n \n@@ -71,7 +71,7 @@ public static final void callstack (IData pipeline)\n \t\t// [o] field:0:required $callers\n \t\t// [o] field:0:required $caller\n \t\tIDataCursor cursor \u003d pipeline.getCursor();\n-\n+\t\t\n \t\ttry {\n \t\t  String[] stack \u003d callstack();\n \t\t  String callers \u003d tundra.list.object.join(stack, \" \\u2192 \");\n@@ -83,7 +83,7 @@ public static final void callstack (IData pipeline)\n \t\t}\n \t\t// --- \u003c\u003cIS-END\u003e\u003e ---\n \n-\n+                \n \t}\n \n \n@@ -100,23 +100,23 @@ public static final void ensure (IData pipeline)\n \t\t// [i] record:0:optional $pipeline\n \t\t// [o] record:0:optional $pipeline\n \t\tIDataCursor cursor \u003d pipeline.getCursor();\n-\n+\t\t\n \t\ttry {\n \t\t  String $service \u003d IDataUtil.getString(cursor, \"$service\");\n \t\t  String $catch \u003d IDataUtil.getString(cursor, \"$catch\");\n \t\t  String $finally \u003d IDataUtil.getString(cursor, \"$finally\");\n \t\t  IData scope \u003d IDataUtil.getIData(cursor, \"$pipeline\");\n \t\t  boolean scoped \u003d scope !\u003d null;\n-\n+\t\t\n \t\t  scope \u003d ensure($service, scoped ? scope : pipeline, $catch, $finally);\n-\n+\t\t\n \t\t  if (scoped) IDataUtil.put(cursor, \"$pipeline\", scope);\n \t\t} finally {\n \t\t  cursor.destroy();\n \t\t}\n \t\t// --- \u003c\u003cIS-END\u003e\u003e ---\n \n-\n+                \n \t}\n \n \n@@ -129,15 +129,15 @@ public static final void initiator (IData pipeline)\n \t\t// @sigtype java 3.5\n \t\t// [o] field:0:required $initiator?\n \t\tIDataCursor cursor \u003d pipeline.getCursor();\n-\n+\t\t\n \t\ttry {\n \t\t  IDataUtil.put(cursor, \"$initiator?\", \"\" + initiator());\n \t\t} finally {\n \t\t  cursor.destroy();\n \t\t}\n \t\t// --- \u003c\u003cIS-END\u003e\u003e ---\n \n-\n+                \n \t}\n \n \n@@ -154,18 +154,18 @@ public static final void invoke (IData pipeline)\n \t\t// [o] record:0:optional $pipeline\n \t\t// [o] object:0:optional $thread\n \t\tIDataCursor cursor \u003d pipeline.getCursor();\n-\n+\t\t\n \t\ttry {\n \t\t  String service \u003d IDataUtil.getString(cursor, \"$service\");\n \t\t  IData scope \u003d IDataUtil.getIData(cursor, \"$pipeline\");\n \t\t  String mode \u003d IDataUtil.getString(cursor, \"$mode\");\n-\n+\t\t\n \t\t  if (mode \u003d\u003d null) mode \u003d \"synchronous\";\n \t\t  boolean scoped \u003d scope !\u003d null;\n-\n+\t\t\n \t\t  Object value \u003d invoke(service, scoped ? scope : pipeline, mode);\n \t\t  String key \u003d mode.equals(\"asynchronous\")? \"$thread\" : \"$pipeline\";\n-\n+\t\t\n \t\t  if (scoped || mode.equals(\"asynchronous\")) {\n \t\t    IDataUtil.put(cursor, key, value);\n \t\t  }\n@@ -174,7 +174,7 @@ public static final void invoke (IData pipeline)\n \t\t}\n \t\t// --- \u003c\u003cIS-END\u003e\u003e ---\n \n-\n+                \n \t}\n \n \n@@ -188,17 +188,17 @@ public static final void join (IData pipeline)\n \t\t// [i] object:0:optional $thread\n \t\t// [o] record:0:optional $pipeline\n \t\tIDataCursor cursor \u003d pipeline.getCursor();\n-\n+\t\t\n \t\ttry {\n \t\t  com.wm.app.b2b.server.ServiceThread thread \u003d (com.wm.app.b2b.server.ServiceThread)IDataUtil.get(cursor, \"$thread\");\n-\n+\t\t\n \t\t  if (thread !\u003d null) IDataUtil.put(cursor, \"$pipeline\", join(thread));\n \t\t} finally {\n \t\t  cursor.destroy();\n \t\t}\n \t\t// --- \u003c\u003cIS-END\u003e\u003e ---\n \n-\n+                \n \t}\n \n \n@@ -211,7 +211,7 @@ public static final void nothing (IData pipeline)\n \t\t// @sigtype java 3.5\n \t\t// --- \u003c\u003cIS-END\u003e\u003e ---\n \n-\n+                \n \t}\n \n \n@@ -229,22 +229,22 @@ public static final void respond (IData pipeline)\n \t\t// [i] field:0:optional $content.type\n \t\t// [i] field:0:optional $encoding\n \t\tIDataCursor cursor \u003d pipeline.getCursor();\n-\n+\t\t\n \t\ttry {\n \t\t  int code \u003d Integer.parseInt(IDataUtil.getString(cursor, \"$code\"));\n \t\t  String message \u003d IDataUtil.getString(cursor, \"$message\");\n \t\t  IData headers \u003d IDataUtil.getIData(cursor, \"$headers\");\n \t\t  Object content \u003d IDataUtil.get(cursor, \"$content\");\n \t\t  String contentType \u003d IDataUtil.getString(cursor, \"$content.type\");\n \t\t  String encoding \u003d IDataUtil.getString(cursor, \"$encoding\");\n-\n+\t\t\n \t\t  respond(code, message, headers, content, contentType, encoding);\n \t\t} finally {\n \t\t  cursor.destroy();\n \t\t}\n \t\t// --- \u003c\u003cIS-END\u003e\u003e ---\n \n-\n+                \n \t}\n \n \n@@ -257,15 +257,15 @@ public static final void self (IData pipeline)\n \t\t// @sigtype java 3.5\n \t\t// [o] field:0:optional $self\n \t\tIDataCursor cursor \u003d pipeline.getCursor();\n-\n+\t\t\n \t\ttry {\n \t\t  IDataUtil.put(cursor, \"$self\", self());\n \t\t} finally {\n \t\t  cursor.destroy();\n \t\t}\n \t\t// --- \u003c\u003cIS-END\u003e\u003e ---\n \n-\n+                \n \t}\n \n \n@@ -278,7 +278,7 @@ public static final void sleep (IData pipeline)\n \t\t// @sigtype java 3.5\n \t\t// [i] field:0:required $duration\n \t\tIDataCursor cursor \u003d pipeline.getCursor();\n-\n+\t\t\n \t\ttry {\n \t\t  String duration \u003d IDataUtil.getString(cursor, \"$duration\");\n \t\t  sleep(duration);\n@@ -287,7 +287,7 @@ public static final void sleep (IData pipeline)\n \t\t}\n \t\t// --- \u003c\u003cIS-END\u003e\u003e ---\n \n-\n+                \n \t}\n \n \n@@ -302,7 +302,7 @@ public static final void validate (IData pipeline)\n \t\t// [i] field:0:optional $raise? {\u0026quot;false\u0026quot;,\u0026quot;true\u0026quot;}\n \t\t// [o] field:0:required $valid?\n \t\tIDataCursor cursor \u003d pipeline.getCursor();\n-\n+\t\t\n \t\ttry {\n \t\t  String service \u003d IDataUtil.getString(cursor, \"$service\");\n \t\t  boolean raise \u003d tundra.bool.parse(IDataUtil.getString(cursor, \"$raise?\"));\n@@ -312,38 +312,38 @@ public static final void validate (IData pipeline)\n \t\t}\n \t\t// --- \u003c\u003cIS-END\u003e\u003e ---\n \n-\n+                \n \t}\n \n \t// --- \u003c\u003cIS-START-SHARED\u003e\u003e ---\n \t// sets the response headers and body for the current service invocation\n \tpublic static void respond(int code, String message, IData headers, Object content, String contentType, String encoding) throws ServiceException {\n \t  try {\n \t    com.wm.net.HttpHeader response \u003d com.wm.app.b2b.server.Service.getHttpResponseHeader();\n-\n-\t    if (response \u003d\u003d null) {\n+\t\n+\t    if (response \u003d\u003d null) { \n \t      // not invoked via HTTP, so throw an exception instead for HTTP statuses \u003e\u003d 400\n \t      if (code \u003e\u003d 400) tundra.exception.raise(tundra.string.normalize(content, encoding));\n \t    } else {\n \t      if (message \u003d\u003d null) message \u003d tundra.support.http.status(code);\n \t      response.setResponse(code, message);\n-\n+\t\n \t      if (contentType \u003d\u003d null) contentType \u003d \"application/octet-stream\";\n \t      if (encoding \u003d\u003d null) encoding \u003d tundra.support.constant.DEFAULT_CHARACTER_ENCODING;\n-\n+\t\n \t      javax.activation.MimeType mimeType \u003d new javax.activation.MimeType(contentType);\n \t      mimeType.setParameter(\"charset\", encoding);\n-\n+\t\n \t      response.clearField(\"Content-Type\");\n \t      response.addField(\"Content-Type\", mimeType.toString());\n-\n+\t\n \t      if (headers !\u003d null) {\n \t        IDataCursor hc \u003d headers.getCursor();\n-\n+\t        \n \t        while(hc.next()) {\n \t          String key \u003d hc.getKey();\n \t          Object value \u003d hc.getValue();\n-\n+\t\n \t          if (key !\u003d null \u0026\u0026 value !\u003d null) {\n \t            response.clearField(key);\n \t            response.addField(key, value.toString());\n@@ -352,7 +352,7 @@ public static void respond(int code, String message, IData headers, Object conte\n \t        hc.destroy();\n \t      }\n \t    }\n-\n+\t\n \t    if (content \u003d\u003d null) content \u003d \"\";\n \t    byte[] body \u003d tundra.bytes.normalize(content, encoding);\n \t    com.wm.app.b2b.server.Service.setResponse(body);\n@@ -362,27 +362,27 @@ public static void respond(int code, String message, IData headers, Object conte\n \t    tundra.exception.raise(ex);\n \t  }\n \t}\n-\n-\t// returns true if the calling service is the top-level initiating\n+\t\n+\t// returns true if the calling service is the top-level initiating \n \t// service of the current thread\n \tpublic static boolean initiator() {\n \t  return callstack().length \u003c\u003d 1;\n \t}\n-\n+\t\n \t// returns true if the given string is a service and exists\n \tpublic static boolean validate(String service) throws ServiceException {\n \t  return validate(service, false);\n \t}\n-\n+\t\n \t// returns true if the given string is a service and exists\n \tpublic static boolean validate(String service, boolean raise) throws ServiceException {\n \t  boolean valid \u003d tundra.node.exists(service) \u0026\u0026 \"service\".equals(tundra.node.type(service));\n-\n+\t\n \t  if (raise \u0026\u0026 !valid) throw new ServiceException(\"Service does not exist: \" + service);\n-\n+\t  \n \t  return valid;\n \t}\n-\n+\t\n \t// returns the invocation call stack\n \tpublic static String[] callstack() {\n \t  java.util.Iterator stack \u003d com.wm.app.b2b.server.InvokeState.getCurrentState().getCallStack().iterator();\n@@ -394,22 +394,22 @@ public static boolean validate(String service, boolean raise) throws ServiceExce\n \t  if (services.size() \u003e 0) services.remove(services.size() - 1);\n \t  return (String[])services.toArray(new String[services.size()]);\n \t}\n-\n+\t\n \t// returns the name of the current service\n \tpublic static String self() {\n \t  String self \u003d null;\n \t  String[] callstack \u003d callstack();\n \t  if (callstack.length \u003e 0) self \u003d tundra.list.object.get(callstack, -1); // last element in list\n \t  return self;\n \t}\n-\n+\t\n \t// invokes the given service synchronously\n-\tpublic static IData invoke(String service, IData pipeline) throws ServiceException {\n+\tpublic static IData invoke(String service, IData pipeline) throws ServiceException {  \n \t  return (IData)invoke(service, pipeline, \"synchronous\");\n \t}\n-\n+\t\n \t// invokes the given service either synchronously or asynchronously\n-\tpublic static Object invoke(String service, IData pipeline, String mode) throws ServiceException {\n+\tpublic static Object invoke(String service, IData pipeline, String mode) throws ServiceException {  \n \t  Object result \u003d null;\n \t  if (mode.equals(\"synchronous\")) {\n \t    result \u003d invoke.synchronous(service, pipeline);\n@@ -420,60 +420,60 @@ public static Object invoke(String service, IData pipeline, String mode) throws\n \t  }\n \t  return result;\n \t}\n-\n+\t\n \tpublic static class invoke {\n \t  // invokes a service asynchronously\n \t  public static com.wm.app.b2b.server.ServiceThread asynchronous(String service, IData pipeline) {\n \t    if (pipeline \u003d\u003d null) pipeline \u003d IDataFactory.create();\n \t    if (service \u003d\u003d null) return null;\n-\n+\t    \n \t    IData scope \u003d IDataUtil.clone(pipeline);\n-\t    com.wm.lang.ns.NSName name \u003d com.wm.lang.ns.NSName.create(service);\n+\t    com.wm.lang.ns.NSName name \u003d com.wm.lang.ns.NSName.create(service);  \n \t    com.wm.app.b2b.server.ServiceThread thread \u003d com.wm.app.b2b.server.Service.doThreadInvoke(name, scope);\n-\n+\t\n \t    return thread;\n \t  }\n-\n+\t\n \t  // invokes a service synchronously\n \t  public static IData synchronous(String service, IData pipeline) throws ServiceException {\n \t    if (pipeline \u003d\u003d null) pipeline \u003d IDataFactory.create();\n \t    if (service \u003d\u003d null) return pipeline;\n-\n+\t    \n \t    IData scope \u003d IDataUtil.clone(pipeline);\n \t    com.wm.lang.ns.NSName name \u003d com.wm.lang.ns.NSName.create(service);\n-\n+\t\n \t    try {\n \t      scope \u003d com.wm.app.b2b.server.Service.doInvoke(name, scope);\n \t    } catch (Exception ex) {\n \t      tundra.exception.raise(ex);\n \t    }\n-\n+\t\n \t    IDataUtil.merge(scope, pipeline);\n-\n+\t    \n \t    return pipeline;\n \t  }\n \t}\n-\n+\t\n \t// waits for an asynchronously invoked service to complete\n \tpublic static IData join(com.wm.app.b2b.server.ServiceThread thread) throws ServiceException {\n \t  IData pipeline \u003d IDataFactory.create();\n-\n+\t\n \t  if (thread !\u003d null) {\n \t    try {\n \t      pipeline \u003d thread.getIData();\n \t    } catch (Exception ex) {\n \t      tundra.exception.raise(ex);\n \t    }\n \t  }\n-\n+\t  \n \t  return pipeline;\n \t}\n-\n+\t\n \t// sleeps the current thread for the given duration\n \tpublic static void sleep(String duration) throws ServiceException {\n \t  sleep(tundra.duration.parse(duration).getTimeInMillis(new java.util.Date()));\n \t}\n-\n+\t\n \t// sleeps the current thread for the given duration\n \tpublic static void sleep(long milliseconds) throws ServiceException {\n \t  try {\n@@ -482,7 +482,7 @@ public static void sleep(long milliseconds) throws ServiceException {\n \t    tundra.exception.raise(ex);\n \t  }\n \t}\n-\n+\t\n \t// provides a try/catch/finally pattern for flow services\n \tpublic static IData ensure(String service, IData pipeline, String catchService, String finallyService) throws ServiceException {\n \t  try {\n@@ -495,7 +495,7 @@ public static IData ensure(String service, IData pipeline, String catchService,\n \t    IDataUtil.put(cursor, \"$exception.message\", t.getMessage());\n \t    IDataUtil.put(cursor, \"$exception.stack\", tundra.exception.stack(t));\n \t    cursor.destroy();\n-\n+\t\n \t    if (catchService \u003d\u003d null) {\n \t      tundra.exception.raise(t);\n \t    } else {\n@@ -504,54 +504,54 @@ public static IData ensure(String service, IData pipeline, String catchService,\n \t  } finally {\n \t    if (finallyService !\u003d null) pipeline \u003d invoke(finallyService, pipeline);\n \t  }\n-\n+\t\n \t  return pipeline;\n \t}\n-\n+\t\n \t// invokes the given service a given number of times, and returns execution duration statistics\n \tpublic static IncrementalNormalDistributionEstimator benchmark(String service, IData pipeline, int count) throws ServiceException {\n \t  IncrementalNormalDistributionEstimator estimator \u003d new IncrementalNormalDistributionEstimator(\"ms\");\n-\n+\t\n \t  validate(service, true);\n-\n-\t  try {\n+\t\n+\t  try { \n \t    for (int i \u003d 0; i \u003c count; i++) {\n \t      long start \u003d System.currentTimeMillis();\n \t      tundra.service.invoke.synchronous(service, pipeline);\n \t      long end \u003d System.currentTimeMillis();\n-\n+\t\n \t      estimator.append(end - start);\n \t    }\n \t  } catch (ServiceException ex) {\n \t    // ignore exceptions\n \t  }\n-\n+\t\n \t  return estimator;\n \t}\n-\n+\t\n \t// Class for incrementally calculating the mean and standard deviation\n \tpublic static class IncrementalNormalDistributionEstimator {\n-\n+\t\n \t  protected long count;\n \t  protected double mean, sq;\n \t  protected String unit \u003d \"\";\n-\n+\t\n \t  /**\n \t   * Constructs a new estimator object.\n \t   */\n \t  public IncrementalNormalDistributionEstimator() {\n \t    reset();\n \t  }\n-\n+\t\n \t  /**\n \t   * Constructs a new estimator object.\n \t   * @param unit The unit of measurement related to the measured samples.\n \t   */\n \t  public IncrementalNormalDistributionEstimator(String unit) {\n \t    this();\n \t    this.unit \u003d unit;\n-\t  }\n-\n+\t  }  \n+\t\n \t  /**\n \t   * Constructs a new estimator object seeded with the given samples.\n \t   *\n@@ -561,7 +561,7 @@ public IncrementalNormalDistributionEstimator(double... samples) {\n \t    this();\n \t    append(samples);\n \t  }\n-\n+\t\n \t  /**\n \t   * Constructs a new estimator object seeded with the given samples.\n \t   *\n@@ -572,7 +572,7 @@ public IncrementalNormalDistributionEstimator(String unit, double... samples) {\n \t    this(unit);\n \t    append(samples);\n \t  }\n-\n+\t\n \t  /**\n \t   * Constructs a new estimator object seeded with the given collection of\n \t   * samples.\n@@ -583,7 +583,7 @@ public IncrementalNormalDistributionEstimator(java.util.Collection\u003cDouble\u003e sampl\n \t    this();\n \t    append(samples);\n \t  }\n-\n+\t\n \t  /**\n \t   * Constructs a new estimator object seeded with the given collection of\n \t   * samples.\n@@ -595,7 +595,7 @@ public IncrementalNormalDistributionEstimator(String unit, java.util.Collection\u003c\n \t    this(unit);\n \t    append(samples);\n \t  }\n-\n+\t\n \t  /**\n \t   * Appends the given sample to the list of samples in the estimator.\n \t   *\n@@ -606,10 +606,10 @@ public final IncrementalNormalDistributionEstimator append(double sample) {\n \t    double next \u003d mean + (sample - mean) / ++count;\n \t    sq +\u003d (sample - mean) * (sample - next);\n \t    mean \u003d next;\n-\n+\t\n \t    return this;\n \t  }\n-\n+\t\n \t  /**\n \t   * Adds one or more samples to the estimator.\n \t   *\n@@ -620,10 +620,10 @@ public final IncrementalNormalDistributionEstimator append(double... samples) {\n \t    for (double sample : samples) {\n \t      append(sample);\n \t    }\n-\n+\t\n \t    return this;\n \t  }\n-\n+\t\n \t  /**\n \t   * Adds a collection of samples to the estimator.\n \t   *\n@@ -634,10 +634,10 @@ public final IncrementalNormalDistributionEstimator append(java.util.Collection\u003c\n \t    for (double sample : samples) {\n \t      append(sample);\n \t    }\n-\n+\t\n \t    return this;\n \t  }\n-\n+\t\n \t  /**\n \t   * Returns the number of samples seen by this estimator.\n \t   *\n@@ -646,7 +646,7 @@ public final IncrementalNormalDistributionEstimator append(java.util.Collection\u003c\n \t  public long count() {\n \t    return count;\n \t  }\n-\n+\t\n \t  /**\n \t   * Returns the mean of the samples.\n \t   *\n@@ -655,16 +655,16 @@ public long count() {\n \t  public double mean() {\n \t    return mean;\n \t  }\n-\n+\t\n \t  /**\n \t   * Returns the maximum likelihood estimate of the variance of the samples.\n \t   *\n \t   * @return Maximum likelihood variance estimate.\n \t   */\n \t  public double variance() {\n-\t    return count \u003e 1 ? sq / mean : 0.0;\n+\t    return count \u003e 1 \u0026\u0026 mean \u003e 0 ? sq / mean : 0.0;\n \t  }\n-\n+\t\n \t  /**\n \t   * Returns the maximum likelihood estimate of the standard deviation of the\n \t   * samples.\n@@ -674,7 +674,7 @@ public double variance() {\n \t  public double standardDeviation() {\n \t    return Math.sqrt(variance());\n \t  }\n-\n+\t\n \t  /**\n \t   * Returns the unit of measure related to the measured samples.\n \t   *\n@@ -683,7 +683,7 @@ public double standardDeviation() {\n \t  public String unit() {\n \t    return unit;\n \t  }\n-\n+\t\n \t  /**\n \t   * Resets the estimator back to zero samples.\n \t   *\n@@ -693,10 +693,10 @@ public final IncrementalNormalDistributionEstimator reset() {\n \t    count \u003d 0;\n \t    mean \u003d 0.0;\n \t    sq \u003d 0.0;\n-\n+\t\n \t    return this;\n \t  }\n-\n+\t\n \t  /**\n \t   * Returns a string-based representation of the mean, standard deviation and\n \t   * number of samples for this estimator."
        },
        {
          "file_name": "ns/tundra/service/benchmark/node.ndf",
          "patch": "@@ -7,6 +7,7 @@\n   \u003crecord name\u003d\"svc_sig\" javaclass\u003d\"com.wm.util.Values\"\u003e\n     \u003crecord name\u003d\"sig_in\" javaclass\u003d\"com.wm.util.Values\"\u003e\n       \u003cvalue name\u003d\"node_type\"\u003erecord\u003c/value\u003e\n+      \u003cvalue name\u003d\"is_public\"\u003efalse\u003c/value\u003e\n       \u003cvalue name\u003d\"field_type\"\u003erecord\u003c/value\u003e\n       \u003cvalue name\u003d\"field_dim\"\u003e0\u003c/value\u003e\n       \u003cvalue name\u003d\"nillable\"\u003etrue\u003c/value\u003e\n@@ -21,6 +22,7 @@\n             \u003cvalue name\u003d\"field_largerEditor\"\u003efalse\u003c/value\u003e\n             \u003cvalue name\u003d\"field_password\"\u003efalse\u003c/value\u003e\n           \u003c/record\u003e\n+          \u003cvalue name\u003d\"is_public\"\u003efalse\u003c/value\u003e\n           \u003cvalue name\u003d\"field_name\"\u003e$service\u003c/value\u003e\n           \u003cvalue name\u003d\"field_type\"\u003estring\u003c/value\u003e\n           \u003cvalue name\u003d\"field_dim\"\u003e0\u003c/value\u003e\n@@ -46,6 +48,7 @@\n             \u003cvalue name\u003d\"field_largerEditor\"\u003efalse\u003c/value\u003e\n             \u003cvalue name\u003d\"field_password\"\u003efalse\u003c/value\u003e\n           \u003c/record\u003e\n+          \u003cvalue name\u003d\"is_public\"\u003efalse\u003c/value\u003e\n           \u003cvalue name\u003d\"field_name\"\u003e$pipeline\u003c/value\u003e\n           \u003cvalue name\u003d\"field_type\"\u003erecord\u003c/value\u003e\n           \u003cvalue name\u003d\"field_dim\"\u003e0\u003c/value\u003e\n@@ -55,6 +58,7 @@\n           \u003cvalue name\u003d\"is_global\"\u003efalse\u003c/value\u003e\n           \u003carray name\u003d\"rec_fields\" type\u003d\"record\" depth\u003d\"1\"\u003e\n           \u003c/array\u003e\n+          \u003cvalue name\u003d\"modifiable\"\u003etrue\u003c/value\u003e\n         \u003c/record\u003e\n         \u003crecord javaclass\u003d\"com.wm.util.Values\"\u003e\n           \u003cvalue name\u003d\"node_type\"\u003erecord\u003c/value\u003e\n@@ -64,6 +68,7 @@\n             \u003cvalue name\u003d\"field_largerEditor\"\u003efalse\u003c/value\u003e\n             \u003cvalue name\u003d\"field_password\"\u003efalse\u003c/value\u003e\n           \u003c/record\u003e\n+          \u003cvalue name\u003d\"is_public\"\u003efalse\u003c/value\u003e\n           \u003cvalue name\u003d\"field_name\"\u003e$count\u003c/value\u003e\n           \u003cvalue name\u003d\"field_type\"\u003estring\u003c/value\u003e\n           \u003cvalue name\u003d\"field_dim\"\u003e0\u003c/value\u003e\n@@ -83,9 +88,11 @@\n           \u003cvalue name\u003d\"is_global\"\u003efalse\u003c/value\u003e\n         \u003c/record\u003e\n       \u003c/array\u003e\n+      \u003cvalue name\u003d\"modifiable\"\u003etrue\u003c/value\u003e\n     \u003c/record\u003e\n     \u003crecord name\u003d\"sig_out\" javaclass\u003d\"com.wm.util.Values\"\u003e\n       \u003cvalue name\u003d\"node_type\"\u003erecord\u003c/value\u003e\n+      \u003cvalue name\u003d\"is_public\"\u003efalse\u003c/value\u003e\n       \u003cvalue name\u003d\"field_type\"\u003erecord\u003c/value\u003e\n       \u003cvalue name\u003d\"field_dim\"\u003e0\u003c/value\u003e\n       \u003cvalue name\u003d\"nillable\"\u003etrue\u003c/value\u003e\n@@ -100,6 +107,7 @@\n             \u003cvalue name\u003d\"field_largerEditor\"\u003efalse\u003c/value\u003e\n             \u003cvalue name\u003d\"field_password\"\u003efalse\u003c/value\u003e\n           \u003c/record\u003e\n+          \u003cvalue name\u003d\"is_public\"\u003efalse\u003c/value\u003e\n           \u003cvalue name\u003d\"field_name\"\u003e$duration.average\u003c/value\u003e\n           \u003cvalue name\u003d\"field_type\"\u003estring\u003c/value\u003e\n           \u003cvalue name\u003d\"field_dim\"\u003e0\u003c/value\u003e\n@@ -126,6 +134,7 @@\n             \u003cvalue name\u003d\"field_largerEditor\"\u003efalse\u003c/value\u003e\n             \u003cvalue name\u003d\"field_password\"\u003efalse\u003c/value\u003e\n           \u003c/record\u003e\n+          \u003cvalue name\u003d\"is_public\"\u003efalse\u003c/value\u003e\n           \u003cvalue name\u003d\"field_name\"\u003e$duration.stdev\u003c/value\u003e\n           \u003cvalue name\u003d\"field_type\"\u003estring\u003c/value\u003e\n           \u003cvalue name\u003d\"field_dim\"\u003e0\u003c/value\u003e\n@@ -152,6 +161,7 @@\n             \u003cvalue name\u003d\"field_largerEditor\"\u003efalse\u003c/value\u003e\n             \u003cvalue name\u003d\"field_password\"\u003efalse\u003c/value\u003e\n           \u003c/record\u003e\n+          \u003cvalue name\u003d\"is_public\"\u003efalse\u003c/value\u003e\n           \u003cvalue name\u003d\"field_name\"\u003e$message\u003c/value\u003e\n           \u003cvalue name\u003d\"field_type\"\u003estring\u003c/value\u003e\n           \u003cvalue name\u003d\"field_dim\"\u003e0\u003c/value\u003e\n@@ -171,6 +181,7 @@\n           \u003cvalue name\u003d\"is_global\"\u003efalse\u003c/value\u003e\n         \u003c/record\u003e\n       \u003c/array\u003e\n+      \u003cvalue name\u003d\"modifiable\"\u003etrue\u003c/value\u003e\n     \u003c/record\u003e\n   \u003c/record\u003e\n   \u003cvalue name\u003d\"node_comment\"\u003eBenchmarks the performance of the given service by invoking it the given \n@@ -210,6 +221,8 @@ durations.\n   \u003cvalue name\u003d\"prefetch\"\u003eno\u003c/value\u003e\n   \u003cvalue name\u003d\"cache_ttl\"\u003e15\u003c/value\u003e\n   \u003cvalue name\u003d\"prefetch_level\"\u003e1\u003c/value\u003e\n+  \u003cvalue name\u003d\"template\"\u003etundra_service_benchmark\u003c/value\u003e\n+  \u003cvalue name\u003d\"template_type\"\u003ehtml\u003c/value\u003e\n   \u003cvalue name\u003d\"audit_level\"\u003eoff\u003c/value\u003e\n   \u003cvalue name\u003d\"check_internal_acls\"\u003eno\u003c/value\u003e\n   \u003cvalue name\u003d\"icontext_policy\"\u003e$null\u003c/value\u003e\n@@ -219,10 +232,16 @@ durations.\n   \u003cvalue name\u003d\"svc_in_validator_options\"\u003edefault\u003c/value\u003e\n   \u003cvalue name\u003d\"svc_out_validator_options\"\u003edefault\u003c/value\u003e\n   \u003cvalue name\u003d\"auditoption\"\u003e0\u003c/value\u003e\n+  \u003cnull name\u003d\"auditfields_input\"/\u003e\n+  \u003cnull name\u003d\"auditfields_output\"/\u003e\n   \u003crecord name\u003d\"auditsettings\" javaclass\u003d\"com.wm.util.Values\"\u003e\n     \u003cvalue name\u003d\"document_data\"\u003e0\u003c/value\u003e\n     \u003cvalue name\u003d\"startExecution\"\u003efalse\u003c/value\u003e\n     \u003cvalue name\u003d\"stopExecution\"\u003efalse\u003c/value\u003e\n     \u003cvalue name\u003d\"onError\"\u003etrue\u003c/value\u003e\n   \u003c/record\u003e\n+  \u003cvalue name\u003d\"pipeline_option\"\u003e1\u003c/value\u003e\n+  \u003cnull name\u003d\"originURI\"/\u003e\n+  \u003cvalue name\u003d\"modifiable\"\u003etrue\u003c/value\u003e\n+  \u003cvalue name\u003d\"is_public\"\u003efalse\u003c/value\u003e\n \u003c/Values\u003e"
        },
        {
          "file_name": "ns/tundra/service/node.idf",
          "patch": "@@ -198,26 +198,26 @@ CiAgcHVibGljIGRvdWJsZSBtZWFuKCkgewogICAgcmV0dXJuIG1lYW47CiAgfQoKICAvKioKICAg\n KiBSZXR1cm5zIHRoZSBtYXhpbXVtIGxpa2VsaWhvb2QgZXN0aW1hdGUgb2YgdGhlIHZhcmlhbmNl\n IG9mIHRoZSBzYW1wbGVzLgogICAqCiAgICogQHJldHVybiBNYXhpbXVtIGxpa2VsaWhvb2QgdmFy\n aWFuY2UgZXN0aW1hdGUuCiAgICovCiAgcHVibGljIGRvdWJsZSB2YXJpYW5jZSgpIHsKICAgIHJl\n-dHVybiBjb3VudCA+IDEgPyBzcSAvIG1lYW4gOiAwLjA7CiAgfQoKICAvKioKICAgKiBSZXR1cm5z\n-IHRoZSBtYXhpbXVtIGxpa2VsaWhvb2QgZXN0aW1hdGUgb2YgdGhlIHN0YW5kYXJkIGRldmlhdGlv\n-biBvZiB0aGUKICAgKiBzYW1wbGVzLgogICAqCiAgICogQHJldHVybiBNYXhpbXVtIGxpa2VsaWhv\n-b2Qgc3RhbmRhcmQgZGV2aWF0aW9uIGVzdGltYXRlLgogICAqLwogIHB1YmxpYyBkb3VibGUgc3Rh\n-bmRhcmREZXZpYXRpb24oKSB7CiAgICByZXR1cm4gTWF0aC5zcXJ0KHZhcmlhbmNlKCkpOwogIH0K\n-CiAgLyoqCiAgICogUmV0dXJucyB0aGUgdW5pdCBvZiBtZWFzdXJlIHJlbGF0ZWQgdG8gdGhlIG1l\n-YXN1cmVkIHNhbXBsZXMuCiAgICoKICAgKiBAcmV0dXJuIE1heGltdW0gbGlrZWxpaG9vZCBzdGFu\n-ZGFyZCBkZXZpYXRpb24gZXN0aW1hdGUuCiAgICovCiAgcHVibGljIFN0cmluZyB1bml0KCkgewog\n-ICAgcmV0dXJuIHVuaXQ7CiAgfQoKICAvKioKICAgKiBSZXNldHMgdGhlIGVzdGltYXRvciBiYWNr\n-IHRvIHplcm8gc2FtcGxlcy4KICAgKgogICAqIEByZXR1cm4gVGhlIEVzdGltYXRvciBvYmplY3Qg\n-aXRzZWxmLCB0byBzdXBwb3J0IG1ldGhvZCBjaGFpbmluZy4KICAgKi8KICBwdWJsaWMgZmluYWwg\n-SW5jcmVtZW50YWxOb3JtYWxEaXN0cmlidXRpb25Fc3RpbWF0b3IgcmVzZXQoKSB7CiAgICBjb3Vu\n-dCA9IDA7CiAgICBtZWFuID0gMC4wOwogICAgc3EgPSAwLjA7CgogICAgcmV0dXJuIHRoaXM7CiAg\n-fQoKICAvKioKICAgKiBSZXR1cm5zIGEgc3RyaW5nLWJhc2VkIHJlcHJlc2VudGF0aW9uIG9mIHRo\n-ZSBtZWFuLCBzdGFuZGFyZCBkZXZpYXRpb24gYW5kCiAgICogbnVtYmVyIG9mIHNhbXBsZXMgZm9y\n-IHRoaXMgZXN0aW1hdG9yLgogICAqCiAgICogQHJldHVybiBTdHJpbmctYmFzZWQgcmVwcmVzZW50\n-YXRpb24gb2YgdGhpcyBlc3RpbWF0b3IuCiAgICovCiAgQE92ZXJyaWRlCiAgcHVibGljIFN0cmlu\n-ZyB0b1N0cmluZygpIHsKICAgIHJldHVybiBTdHJpbmcuZm9ybWF0KCLOvCA9ICUuM2YgJXMsIM+D\n-ID0gJS4zZiAlcywgbiA9ICVkIiwgbWVhbigpLCB1bml0KCksIHN0YW5kYXJkRGV2aWF0aW9uKCks\n-IHVuaXQoKSwgY291bnQoKSk7CiAgfQp9\u003c/value\u003e\n+dHVybiBjb3VudCA+IDEgJiYgbWVhbiA+IDAgPyBzcSAvIG1lYW4gOiAwLjA7CiAgfQoKICAvKioK\n+ICAgKiBSZXR1cm5zIHRoZSBtYXhpbXVtIGxpa2VsaWhvb2QgZXN0aW1hdGUgb2YgdGhlIHN0YW5k\n+YXJkIGRldmlhdGlvbiBvZiB0aGUKICAgKiBzYW1wbGVzLgogICAqCiAgICogQHJldHVybiBNYXhp\n+bXVtIGxpa2VsaWhvb2Qgc3RhbmRhcmQgZGV2aWF0aW9uIGVzdGltYXRlLgogICAqLwogIHB1Ymxp\n+YyBkb3VibGUgc3RhbmRhcmREZXZpYXRpb24oKSB7CiAgICByZXR1cm4gTWF0aC5zcXJ0KHZhcmlh\n+bmNlKCkpOwogIH0KCiAgLyoqCiAgICogUmV0dXJucyB0aGUgdW5pdCBvZiBtZWFzdXJlIHJlbGF0\n+ZWQgdG8gdGhlIG1lYXN1cmVkIHNhbXBsZXMuCiAgICoKICAgKiBAcmV0dXJuIE1heGltdW0gbGlr\n+ZWxpaG9vZCBzdGFuZGFyZCBkZXZpYXRpb24gZXN0aW1hdGUuCiAgICovCiAgcHVibGljIFN0cmlu\n+ZyB1bml0KCkgewogICAgcmV0dXJuIHVuaXQ7CiAgfQoKICAvKioKICAgKiBSZXNldHMgdGhlIGVz\n+dGltYXRvciBiYWNrIHRvIHplcm8gc2FtcGxlcy4KICAgKgogICAqIEByZXR1cm4gVGhlIEVzdGlt\n+YXRvciBvYmplY3QgaXRzZWxmLCB0byBzdXBwb3J0IG1ldGhvZCBjaGFpbmluZy4KICAgKi8KICBw\n+dWJsaWMgZmluYWwgSW5jcmVtZW50YWxOb3JtYWxEaXN0cmlidXRpb25Fc3RpbWF0b3IgcmVzZXQo\n+KSB7CiAgICBjb3VudCA9IDA7CiAgICBtZWFuID0gMC4wOwogICAgc3EgPSAwLjA7CgogICAgcmV0\n+dXJuIHRoaXM7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIGEgc3RyaW5nLWJhc2VkIHJlcHJlc2Vu\n+dGF0aW9uIG9mIHRoZSBtZWFuLCBzdGFuZGFyZCBkZXZpYXRpb24gYW5kCiAgICogbnVtYmVyIG9m\n+IHNhbXBsZXMgZm9yIHRoaXMgZXN0aW1hdG9yLgogICAqCiAgICogQHJldHVybiBTdHJpbmctYmFz\n+ZWQgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBlc3RpbWF0b3IuCiAgICovCiAgQE92ZXJyaWRlCiAg\n+cHVibGljIFN0cmluZyB0b1N0cmluZygpIHsKICAgIHJldHVybiBTdHJpbmcuZm9ybWF0KCLOvCA9\n+ICUuM2YgJXMsIM+DID0gJS4zZiAlcywgbiA9ICVkIiwgbWVhbigpLCB1bml0KCksIHN0YW5kYXJk\n+RGV2aWF0aW9uKCksIHVuaXQoKSwgY291bnQoKSk7CiAgfQp9\u003c/value\u003e\n   \u003cvalue name\u003d\"extends\"\u003e\u003c/value\u003e\n   \u003carray name\u003d\"implements\" type\u003d\"value\" depth\u003d\"1\"\u003e\n   \u003c/array\u003e"
        }
      ]
    }
  },
  {
    "name": "Gps null pointer in getaddress",
    "url": "https://github.com/cyw617/taxi/pull/12",
    "description": "Finally gets merged. Please update all your local git repo.\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/cyw617/taxi/commit/3e27faf58929520e5558b0431de60551832018fa",
      "files": [
        {
          "file_name": "TaxiClient/Customer/res/drawable/taxipointer.png"
        },
        {
          "file_name": "TaxiClient/Customer/res/xml/activity_request.xml",
          "patch": "@@ -0,0 +1,114 @@\n+\u003c?xml version\u003d\"1.0\" encoding\u003d\"utf-8\"?\u003e\n+\u003cRelativeLayout xmlns:android\u003d\"http://schemas.android.com/apk/res/android\"\n+    android:layout_width\u003d\"match_parent\"\n+    android:layout_height\u003d\"match_parent\"\n+    android:orientation\u003d\"vertical\" \u003e\n+    \n+    \u003cfragment \n+          android:id\u003d\"@+id/map\"\n+          android:layout_width\u003d\"match_parent\"\n+          android:layout_height\u003d\"match_parent\"\n+          android:name\u003d\"com.google.android.gms.maps.MapFragment\"/\u003e\n+\n+    \n+\n+\n+\n+    \u003cTextView\n+        android:id\u003d\"@+id/lat_lng\"\n+        android:layout_width\u003d\"wrap_content\"\n+        android:layout_height\u003d\"wrap_content\"\n+        android:layout_alignBaseline\u003d\"@+id/request\"\n+        android:layout_alignBottom\u003d\"@+id/request\"\n+        android:layout_alignParentLeft\u003d\"true\"\n+        android:text\u003d\"lat_lng\" \n+        android:textColor\u003d\"#ff0000\" /\u003e\n+\n+    \u003cTextView\n+        android:id\u003d\"@+id/address\"\n+        android:layout_width\u003d\"wrap_content\"\n+        android:layout_height\u003d\"wrap_content\"\n+        android:layout_alignParentLeft\u003d\"true\"\n+        android:layout_below\u003d\"@+id/request\"\n+        android:text\u003d\"address\" \n+        android:textColor\u003d\"#ff0000\" /\u003e\n+    \n+    \u003cProgressBar\n+        android:id\u003d\"@+id/address_progress\"\n+        android:layout_width\u003d\"wrap_content\"\n+        android:layout_height\u003d\"wrap_content\"\n+        android:layout_below\u003d\"@id/lat_lng\"\n+        android:layout_centerHorizontal\u003d\"true\"\n+        android:indeterminate\u003d\"true\"\n+        android:visibility\u003d\"gone\" /\u003e\n+\n+    \u003cTextView\n+        android:id\u003d\"@+id/text_connection_state\"\n+        android:layout_width\u003d\"wrap_content\"\n+        android:layout_height\u003d\"wrap_content\"\n+        android:layout_alignBottom\u003d\"@+id/more\"\n+        android:layout_alignParentLeft\u003d\"true\"\n+        android:text\u003d\"text_connection_status\"\n+        android:textColor\u003d\"#ff0000\" /\u003e\n+\n+    \u003cTextView\n+        android:id\u003d\"@+id/text_connection_status\"\n+        android:layout_width\u003d\"wrap_content\"\n+        android:layout_height\u003d\"wrap_content\"\n+        android:layout_alignParentLeft\u003d\"true\"\n+        android:layout_below\u003d\"@+id/text_connection_state\"\n+        android:text\u003d\"text_connection_status\"\n+        android:textColor\u003d\"#ff0000\" /\u003e\n+\n+    \u003cButton\n+        android:id\u003d\"@+id/request\"\n+        android:layout_width\u003d\"wrap_content\"\n+        android:layout_height\u003d\"wrap_content\"\n+        android:layout_above\u003d\"@+id/more\"\n+        android:layout_alignParentRight\u003d\"true\"\n+        android:onClick\u003d\"Request\"\n+        android:text\u003d\"Taxi\" /\u003e\n+\n+    \u003cButton\n+        android:id\u003d\"@+id/more\"\n+        android:layout_width\u003d\"wrap_content\"\n+        android:layout_height\u003d\"wrap_content\"\n+        android:layout_alignParentBottom\u003d\"true\"\n+        android:layout_alignParentRight\u003d\"true\"\n+        android:layout_marginBottom\u003d\"40dp\"\n+        android:onClick\u003d\"MoreOption\"\n+        android:text\u003d\"More..\" /\u003e\n+\n+    \u003cEditText\n+        android:id\u003d\"@+id/editText1\"\n+        android:layout_width\u003d\"wrap_content\"\n+        android:layout_height\u003d\"wrap_content\"\n+        android:layout_alignParentTop\u003d\"true\"\n+        android:layout_alignRight\u003d\"@+id/editText2\"\n+        android:layout_marginTop\u003d\"20dp\"\n+        android:ems\u003d\"10\"\n+        android:hint\u003d\"x (in map)\"  \u003e\n+\n+        \u003crequestFocus /\u003e\n+    \u003c/EditText\u003e\n+\n+    \u003cEditText\n+        android:id\u003d\"@+id/editText2\"\n+        android:layout_width\u003d\"wrap_content\"\n+        android:layout_height\u003d\"wrap_content\"\n+        android:layout_alignParentLeft\u003d\"true\"\n+        android:layout_below\u003d\"@+id/editText1\"\n+        android:ems\u003d\"10\" \n+        android:hint\u003d\"y (in map)\"/\u003e\n+\n+    \u003cEditText\n+        android:id\u003d\"@+id/editText3\"\n+        android:layout_width\u003d\"wrap_content\"\n+        android:layout_height\u003d\"wrap_content\"\n+        android:layout_alignParentLeft\u003d\"true\"\n+        android:layout_below\u003d\"@+id/editText2\"\n+        android:layout_marginTop\u003d\"20dp\"\n+        android:ems\u003d\"10\"  \n+        android:hint\u003d\"Destination\"/\u003e\n+\n+\u003c/RelativeLayout\u003e\n\\ No newline at end of file"
        },
        {
          "file_name": "TaxiClient/Customer/src/comp3111h/anytaxi/customer/RequestActivity.java",
          "patch": "@@ -22,7 +22,10 @@\n import android.os.Build;\n import android.os.Bundle;\n import android.support.v4.app.FragmentActivity;\n+import android.support.v7.app.ActionBarActivity;\n import android.util.Log;\n+import android.view.Menu;\n+import android.view.MenuItem;\n import android.view.View;\n import android.widget.EditText;\n import android.widget.ProgressBar;\n@@ -46,11 +49,13 @@\n import com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential;\n import com.google.api.client.json.jackson2.JacksonFactory;\n import comp3111h.anytaxi.customer.LocationUtils.ErrorDialogFragment;\n+import comp3111h.anytaxi.customer.R;\n+import comp3111h.anytaxi.customer.SettingsActivity;\n \n-public class RequestActivity extends FragmentActivity implements\n-LocationListener,\n-GooglePlayServicesClient.ConnectionCallbacks,\n-GooglePlayServicesClient.OnConnectionFailedListener{\n+public class RequestActivity extends ActionBarActivity implements\n+\tLocationListener,\n+\tGooglePlayServicesClient.ConnectionCallbacks,\n+\tGooglePlayServicesClient.OnConnectionFailedListener{\n \n \t/*CUURENT LOCATION INFO VAR START*/\n \t// A request to connect to Location Services\n@@ -228,16 +233,144 @@ public void getLocation() {\n \t\t}\n \t}    \n \n+    \n+\t@Override\n+\tpublic boolean onCreateOptionsMenu(Menu menu) {\n+\n+\t\t// Inflate the menu; this adds items to the action bar if it is present.\n+\t\tgetMenuInflater().inflate(R.menu.main, menu);\n+\t\treturn true;\n+\t}\n+\n+\t@Override\n+\tpublic boolean onOptionsItemSelected(MenuItem item) {\n+\t\t// Handle action bar item clicks here. The action bar will\n+\t\t// automatically handle clicks on the Home/Up button, so long\n+\t\t// as you specify a parent activity in AndroidManifest.xml.\n+\t\tint id \u003d item.getItemId();\n+\t\tif (id \u003d\u003d R.id.action_settings) {\n+\t\t    Intent intent \u003d new Intent(this, SettingsActivity.class);\n+\t        startActivity(intent);\n+\t\t\treturn true;\n+\t\t}\n+\t\treturn super.onOptionsItemSelected(item);\n+\t}\n+    \n+    @Override\n+    public void onBackPressed() {\n+        exit();\n+    }\n+    \n+    private void exit() {\n+        new AlertDialog.Builder(this)\n+        .setMessage(getString(R.string.quit_Message))\n+        .setPositiveButton(getString(R.string.quit_Positive),\n+            new DialogInterface.OnClickListener() {\n+                @Override\n+                public void onClick(DialogInterface dialog, int which) {\n+                    moveTaskToBack(true);\n+                    finish();\n+                }\n+            })\n+        .setNegativeButton(getString(R.string.quit_Negative), null)\n+        .show();\n+    }\n+    \n \tpublic void Request(View view){\n \n \t\tString des \u003d ((EditText)findViewById(R.id.editText3)).getText().toString();\n-\n-\t\tshowDialog(\"This will send to sever \"+mLocationClient.getLastLocation().toString()+\" \"+des);\n+\t\tLocation current \u003d mLocationClient.getLastLocation();\n+\t\tString latString \u003d Double.valueOf((current.getLatitude())).toString();\n+\t\tString lngString \u003d Double.valueOf((current.getLongitude())).toString();\n \n \n+\t\t\n+\t\tshowDialog(\"This will send to sever \"+latString+\" \"+lngString+\" \"+des);\n \n \n \t\t/* \n+    /**\n+     * Invoked by the \"Taxi\" button.\n+     *\n+     * The button will retrieve the current location and send it to server\n+     *\n+     * Calls getLastLocation() to get the current location\n+     *\n+     * @param v The view object associated with this method, in this case a Button.\n+     */\n+    \n+    public void getLocation() {\n+\n+        // If Google Play Services is available\n+        if (servicesConnected()) {\n+            // Get the current location\n+            Location currentLocation \u003d mLocationClient.getLastLocation();\n+\n+            // Display the current location in the UI\n+            mLatLng.setText(LocationUtils.getLatLng(this, currentLocation));\n+            \n+            latCurrent\u003d(float) currentLocation.getLatitude();\n+            lntCurrent\u003d(float) currentLocation.getLongitude();\n+         \n+        }\n+    }    \n+    \n+    \n+\t@Override\n+\tpublic boolean onCreateOptionsMenu(Menu menu) {\n+\n+\t\t// Inflate the menu; this adds items to the action bar if it is present.\n+\t\tgetMenuInflater().inflate(R.menu.main, menu);\n+\t\treturn true;\n+\t}\n+\n+\t@Override\n+\tpublic boolean onOptionsItemSelected(MenuItem item) {\n+\t\t// Handle action bar item clicks here. The action bar will\n+\t\t// automatically handle clicks on the Home/Up button, so long\n+\t\t// as you specify a parent activity in AndroidManifest.xml.\n+\t\tint id \u003d item.getItemId();\n+\t\tif (id \u003d\u003d R.id.action_settings) {\n+\t\t    Intent intent \u003d new Intent(this, SettingsActivity.class);\n+\t        startActivity(intent);\n+\t\t\treturn true;\n+\t\t}\n+\t\treturn super.onOptionsItemSelected(item);\n+\t}\n+    \n+    @Override\n+    public void onBackPressed() {\n+        exit();\n+    }\n+    \n+    private void exit() {\n+        new AlertDialog.Builder(this)\n+        .setMessage(getString(R.string.quit_Message))\n+        .setPositiveButton(getString(R.string.quit_Positive),\n+            new DialogInterface.OnClickListener() {\n+                @Override\n+                public void onClick(DialogInterface dialog, int which) {\n+                    moveTaskToBack(true);\n+                    finish();\n+                }\n+            })\n+        .setNegativeButton(getString(R.string.quit_Negative), null)\n+        .show();\n+    }\n+    \n+\tpublic void Request(View view){\n+\n+\t\tString des \u003d ((EditText)findViewById(R.id.editText3)).getText().toString();\n+\t\tLocation current \u003d mLocationClient.getLastLocation();\n+\t\tString latString \u003d Double.valueOf((current.getLatitude())).toString();\n+\t\tString lngString \u003d Double.valueOf((current.getLongitude())).toString();\n+\t\t\n+\t\t\n+\t\t\n+\t\tshowDialog(\"This will send to sever \"+latString+\" \"+lngString+\" \"+des);\n+\t\t\n+\n+       /* \n \t\tDriver d \u003d new Driver();\n \t\td.setLicense(\"mylicense\");\n \t\tGeoPt p \u003d new GeoPt();\n@@ -380,13 +513,17 @@ public void stopUpdates(View v) {\n \tpublic void onConnected(Bundle bundle) {\n \t\tmConnectionStatus.setText(R.string.connected);\n \n-\n-\t\tstartPeriodicUpdates();\n-\t\tgetAddress();\n \t\tLocation currentLoc \u003d mLocationClient.getLastLocation();\n+\t\twhile(currentLoc\u003d\u003dnull)\n+\t\t{\n+\t\t\tcurrentLoc \u003d mLocationClient.getLastLocation();\n+\t\t}\n \t\tLatLng locationNew \u003d new LatLng(currentLoc.getLatitude(),currentLoc.getLongitude());\n \t\tCameraUpdate cameraup\u003dCameraUpdateFactory.newLatLngZoom(locationNew,15);\n \t\tLocationUtils.mMap.animateCamera(cameraup);\n+\t\t\n+\t\tgetAddress();\n+\t\tstartPeriodicUpdates();\n \n \t}\n \n@@ -617,8 +754,19 @@ protected String doInBackground(Location... params) {\n \t\t\t */\n \t\t\tGeocoder geocoder \u003d new Geocoder(localContext, Locale.getDefault());\n \n+\t\t\t\n+\t\t\t\n+\t\t\t\n \t\t\t// Get the current location from the input parameter list\n \t\t\tLocation location \u003d params[0];\n+\t\t\t\n+\t\t\t//Consider the case when location is null\n+\t\t\t//A dumb solution to address the issue\n+\t\t\t//More consideration needed\n+\t\t\twhile(location\u003d\u003dnull)\n+\t\t\t{\n+\t\t\t\tlocation \u003d mLocationClient.getLastLocation();\n+\t\t\t}\n \n \t\t\t// Create a list to contain the result address\n \t\t\tList \u003cAddress\u003e addresses \u003d null;\n@@ -676,7 +824,8 @@ protected String doInBackground(Location... params) {\n \t\t\t\t\t\t\t\taddress.getAddressLine(0) : \"\",\n \n \t\t\t\t\t\t\t\t// Locality is usually a city\n-\t\t\t\t\t\t\t\taddress.getLocality(),\n+\t\t\t\t\t\t\t\taddress.getLocality() !\u003d null ?\n+\t\t\t\t\t\t\t\taddress.getLocality() : \"\",\n \n \t\t\t\t\t\t\t\t// The country of the address\n \t\t\t\t\t\t\t\taddress.getCountryName()\n@@ -750,4 +899,4 @@ protected void onPostExecute(Driver result) {\n \t}\n \n \n-}\n\\ No newline at end of file\n+}"
        },
        {
          "file_name": "TaxiClient/Customer/src/comp3111h/anytaxi/customer/TrackingActivity.java",
          "patch": "@@ -44,7 +44,7 @@ protected void onCreate(Bundle savedInstanceState){\n         \n \t\tfinal Handler h \u003d new Handler();\n \t\tfinal int delay \u003d 1000; //milliseconds\n-\n+\t\t\n \t\th.postDelayed(new Runnable(){\n \t        Double latDouble \u003d 22.3367;\n \t        Double lngDouble \u003d 114.2639;"
        },
        {
          "file_name": "TaxiClient/Customer/src/comp3111h/anytaxi/customer/TrackingActivity.java.orig",
          "patch": "@@ -0,0 +1,126 @@\n+package comp3111h.anytaxi.customer;\n+\n+import java.util.Random;\n+\n+import android.annotation.SuppressLint;\n+import android.graphics.Canvas;\n+import android.graphics.Point;\n+import android.os.Bundle;\n+import android.os.Handler;\n+import android.support.v7.app.ActionBarActivity;\n+import android.view.View;\n+\n+import com.google.android.gms.maps.CameraUpdate;\n+import com.google.android.gms.maps.CameraUpdateFactory;\n+import com.google.android.gms.maps.GoogleMap;\n+import com.google.android.gms.maps.MapFragment;\n+import com.google.android.gms.maps.MapView;\n+import com.google.android.gms.maps.model.LatLng;\n+import com.google.android.gms.maps.model.Marker;\n+import com.google.android.gms.maps.model.MarkerOptions;\n+\n+public class TrackingActivity extends ActionBarActivity{\n+\t\n+\t\n+\tpublic static GoogleMap mMap;\n+\t\n+\t@SuppressLint(\"NewApi\")\n+\t@Override\n+\tprotected void onCreate(Bundle savedInstanceState){\n+\t\tsuper.onCreate(savedInstanceState);\n+\t\tsetContentView(R.layout.activity_tracking);\n+        \n+        getSupportActionBar().setDisplayHomeAsUpEnabled(true);\n+        \n+        \n+        mMap \u003d ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();\n+        mMap.setMyLocationEnabled(true);\n+        \n+        Double latDouble \u003d 22.3367;\n+        Double lngDouble \u003d 114.2639;\n+\n+        \n+\n+        LatLng locationNew \u003d new LatLng(latDouble,lngDouble);\n+        CameraUpdate cameraup\u003dCameraUpdateFactory.newLatLngZoom(locationNew,6);\n+        mMap.animateCamera(cameraup);\n+        \n+        \n+        final Marker marker \u003d mMap.addMarker(new MarkerOptions().position(new LatLng(22.3367, 114.2639)));\n+\n+        \n+\t\tfinal Handler h \u003d new Handler();\n+\t\tfinal int delay \u003d 1000; //milliseconds\n+\t\t\n+\t\tLatLng locationNew \u003d new LatLng(latDouble,lngDouble);\n+        CameraUpdate cameraup\u003dCameraUpdateFactory.newLatLngZoom(locationNew,6);\n+        mMap.animateCamera(cameraup);\n+\n+\t\th.postDelayed(new Runnable(){\n+\t        Double latDouble \u003d 22.3367;\n+\t        Double lngDouble \u003d 114.2639;\n+\t\t    public void run(){\n+\t\t    \tRandom rand\u003dnew Random();\n+\t\t    \tdouble locationVariation1 \u003d rand.nextDouble() * 0.01 - 0.005;\n+\t\t    \tdouble locationVariation2 \u003d rand.nextDouble() * 0.01 - 0.005;\n+\t\t        latDouble+\u003dlocationVariation1;\n+\t\t        lngDouble+\u003d locationVariation2;\n+\t\t       \n+\t\t\t\tLatLng locationNew \u003d new LatLng(latDouble,lngDouble);\n+\t\t        //CameraUpdate cameraup\u003dCameraUpdateFactory.newLatLngZoom(locationNew,15);\n+\t\t        //mMap.animateCamera(cameraup);\n+\t\t        \n+\t\t        marker.setPosition(locationNew);\n+\t\t    \t\n+\t\t        h.postDelayed(this, delay);\n+\t\t    }\n+\t\t}, delay);\n+        \n+       \n+\t}\n+\t\n+\tpublic void goBack(View view){\n+\t\tfinish();\n+\t}\n+\t\n+\t/*\n+\t\n+    private class EndpointsTask extends AsyncTask\u003cVoid, Void, Void\u003e {\n+\t\tException exceptionThrown \u003d null;\n+\t\tAnyTaxi endpoint;\n+\t\tDriver d;\n+\n+\t\tpublic EndpointsTask(Activity activity, AnyTaxi endpoint, LatLng startLocation) {\n+\t\t\tthis.endpoint \u003d endpoint;\n+\t\t\tthis.d \u003d d;\n+\t\t}\n+\n+\t\t@Override\n+\t\tprotected Void doInBackground(Void... params) {\n+\t\t\ttry {\n+\n+\t\t\t} catch (Exception e) {\n+\t\t\t\texceptionThrown \u003d e;\n+\t\t\t}\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\tprotected void onPostExecute(Driver driver) {\n+\t\t\t// Check if exception was thrown\n+\t\t\tif (exceptionThrown !\u003d null) {\n+\t\t\t\tLog.e(MainActivity.class.getName(), \n+\t\t\t\t\t\t\"Exception when submitting data\" \n+\t\t\t\t+ Log.getStackTraceString(exceptionThrown));\n+\t\t\t\t\n+\t\t\t\tshowDialog(\"Failed to submit the data via \" +\n+\t\t\t\t\t\t\"the endpoint at \" + endpoint.getBaseUrl() +\n+\t\t\t\t\t\t\", check log for details\");\n+\t\t\t}\n+\t\t\telse {\n+\t\t\t\tshowDialog(\"Successfully submitted the data via \" +\n+\t\t\t\t\t\t\"the endpoint at \" + endpoint.getBaseUrl());\n+\t\t\t}\n+\t\t}   \n+\t}\n+\t*/\n+}"
        },
        {
          "file_name": "TaxiClient/Driver/AndroidManifest.xml",
          "patch": "@@ -87,6 +87,6 @@\n         \n         \u003cmeta-data\n     \t\tandroid:name\u003d\"com.google.android.maps.v2.API_KEY\"\n-    \t\tandroid:value\u003d\"AIzaSyD4WooXy2q5Plsh4VCgtwDor5EdcZ77GfM\"/\u003e\n+    \t\tandroid:value\u003d\"AIzaSyAYYVSGr-5ELbwRZtRMomCUorHiOEZL8Ss\"/\u003e\n     \u003c/application\u003e\n \u003c/manifest\u003e"
        },
        {
          "file_name": "TaxiClient/Driver/src/comp3111h/anytaxi/driver/TraceActivity.java",
          "patch": "@@ -1,8 +1,22 @@\n package comp3111h.anytaxi.driver;\n \n-import java.io.IOException;\n-import java.util.List;\n-import java.util.Locale;\n+import comp3111h.anytaxi.driver.LocationUtils;\n+\n+import comp3111h.anytaxi.driver.R;\n+import comp3111h.anytaxi.driver.TraceActivity.ErrorDialogFragment;\n+import comp3111h.anytaxi.driver.TraceActivity;\n+\n+import com.google.android.gms.common.ConnectionResult;\n+import com.google.android.gms.common.GooglePlayServicesClient;\n+import com.google.android.gms.common.GooglePlayServicesUtil;\n+import com.google.android.gms.location.LocationClient;\n+import com.google.android.gms.location.LocationListener;\n+import com.google.android.gms.location.LocationRequest;\n+import com.google.android.gms.maps.CameraUpdate;\n+import com.google.android.gms.maps.CameraUpdateFactory;\n+import com.google.android.gms.maps.GoogleMap;\n+import com.google.android.gms.maps.MapFragment;\n+import com.google.android.gms.maps.model.LatLng;\n \n import android.annotation.SuppressLint;\n import android.app.Activity;\n@@ -24,6 +38,7 @@\n import android.widget.ProgressBar;\n import android.widget.TextView;\n import android.widget.Toast;\n+import android.content.Context;\n \n import com.appspot.hk_taxi.anyTaxi.AnyTaxi;\n import com.google.android.gms.common.ConnectionResult;"
        }
      ]
    }
  },
  {
    "name": "Fix a null pointer error with InputPosition",
    "url": "https://github.com/neo4j/neo4j/pull/9538",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/neo4j/neo4j/commit/4cebf339df16e8359a14b1fef8a2c9bb5c8c35f6",
      "files": [
        {
          "file_name": "community/cypher/cypher-compiler-3.2/src/test/scala/org/neo4j/cypher/internal/compiler/v3_2/ast/rewriters/DesugarDesugaredMapProjectionTest.scala",
          "patch": "@@ -73,7 +73,7 @@ class DesugarDesugaredMapProjectionTest extends CypherFunSuite {\n   def assertRewrite(originalQuery: String, expectedQuery: String) {\n     test(originalQuery + \" is rewritten to \" + expectedQuery) {\n       def rewrite(q: String): Statement \u003d {\n-        val mkException \u003d new SyntaxExceptionCreator(originalQuery, InputPosition.NONE)\n+        val mkException \u003d new SyntaxExceptionCreator(originalQuery, None)\n         val sequence: Rewriter \u003d inSequence(normalizeReturnClauses(mkException), normalizeWithClauses(mkException))\n         val originalAst \u003d parser.parse(q).endoRewrite(sequence)\n         val semanticCheckResult \u003d originalAst.semanticCheck(SemanticState.clean)"
        },
        {
          "file_name": "community/cypher/frontend-3.2/src/main/scala/org/neo4j/cypher/internal/frontend/v3_2/InputPosition.scala",
          "patch": "@@ -51,5 +51,5 @@ object InputPosition {\n   implicit val byOffset \u003d\n     Ordering.by { (pos: InputPosition) \u003d\u003e pos.offset }\n \n-  val NONE \u003d null\n+  val NONE \u003d InputPosition(0, 0, 0)\n }"
        },
        {
          "file_name": "enterprise/cypher/acceptance-spec-suite/src/test/scala/org/neo4j/internal/cypher/acceptance/MatchAcceptanceTest.scala",
          "patch": "@@ -40,13 +40,27 @@ class MatchAcceptanceTest extends ExecutionEngineFunSuite with QueryStatisticsTe\n       \"\"\"\n         |MATCH p\u003d(source:Neo)-[rel *0..1]-\u003e(dest)\n         |WITH nodes(p) as d\n-        |RETURN DISTINCT d\n-      \"\"\".stripMargin\n-\n+        |RETURN DISTINCT d\"\"\".stripMargin\n     val result \u003d executeWithAllPlannersAndCompatibilityMode(query)\n \n     result.toSet should equal(Set(Map(\"d\" -\u003e ArrayBuffer(n1)), Map(\"d\" -\u003e ArrayBuffer(n1, n2))))\n \n+}\n+\n+  test(\"should allow for OPTONAL MATCH with horizon and aggregating function\") {\n+    //This is a test to ensure that a bug does not return\n+    val query \u003d\n+      \"\"\"\n+        |MATCH (a)-[:rel]-\u003e(b:label1)\n+        |WITH a, COLLECT( DISTINCT(b) ) as b\n+        |OPTIONAL MATCH (a)-[:rel2]-\u003e(c:label2)-[:rel3]-\u003e(:label3)\n+        |RETURN a, b, COLLECT( DISTINCT c) as c\n+      \"\"\".stripMargin\n+\n+    val result \u003d executeWithAllPlannersAndCompatibilityMode(query)\n+    result.size should be(0)\n+    result.hasNext should be(false)\n+\n   }\n \n   // Not TCK material -- only one integer type"
        }
      ]
    }
  },
  {
    "name": "Testing Center: Null pointer exception",
    "url": "https://github.com/byu-oit/android-byu-suite-v2/issues/175",
    "description": "How to recreate:\r\n1. open testing center, be on the view scores tab.\r\n2. leave the app (using the home button)\r\n3. open the app a day or two later (without killing the process in between 2 and 3) (or just turn on don\u0027t save activities in developer options)\r\n4. switch to the testing center lines tab\r\n\r\nthe fragment state doesn\u0027t get recreated correctly so things break.",
    "keywords": [
      "center",
      "testing"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/byu-oit/android-byu-suite-v2/commit/ca9bcbfa9961f0c981a71aa3e8a4f7024ce02734",
      "files": [
        {
          "file_name": "app/src/main/java/edu/byu/suite/features/testingcenter/controller/TestingCenterCameraFeedFragment.java",
          "patch": "@@ -2,8 +2,8 @@\n \n import android.os.Bundle;\n import android.view.View;\n-import edu.byu.support.fragment.ByuCameraFeedFragment;\n import edu.byu.support.client.cameraFeed.model.CameraFeed;\n+import edu.byu.support.fragment.ByuCameraFeedFragment;\n \n import static edu.byu.support.ByuConstants.CAMERA_BUNDLE_TAG;\n "
        },
        {
          "file_name": "app/src/main/java/edu/byu/suite/features/testingcenter/controller/TestingCenterMainActivity.java",
          "patch": "@@ -4,37 +4,32 @@\n import android.os.Bundle;\n import android.support.design.widget.TabLayout;\n import android.support.v4.view.ViewPager;\n-\n import edu.byu.suite.R;\n import edu.byu.support.activity.ByuActivity;\n import edu.byu.support.adapter.ByuFragmentPagerAdapter;\n import edu.byu.support.fragment.ByuFragment;\n \n public class TestingCenterMainActivity extends ByuActivity {\n-\n \t@Override\n \tprotected void onCreate(Bundle savedInstanceState) {\n \t\tsuper.onCreate(savedInstanceState);\n \t\tsetContentView(R.layout.activity_view_pager);\n \n-\t\tfinal TestingCenterCameraFeedFragment cameraFeedFragment \u003d TestingCenterCameraFeedFragment.newInstance();\n-\t\tfinal ByuFragmentPagerAdapter adapter \u003d new ByuFragmentPagerAdapter(getFragmentManager(), new ByuFragment[]{new ScoresFragment(), cameraFeedFragment, new ScheduleFragment()});\n \t\tViewPager viewPager \u003d (ViewPager) findViewById(R.id.viewPager);\n+\t\tByuFragmentPagerAdapter adapter \u003d new ByuFragmentPagerAdapter(getFragmentManager(), new ByuFragment[]{new ScoresFragment(), TestingCenterCameraFeedFragment.newInstance(), new ScheduleFragment()});\n \t\tviewPager.setAdapter(adapter);\n \t\tviewPager.setOffscreenPageLimit(2);\n \t\tviewPager.addOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {\n \t\t\t@Override\n \t\t\tpublic void onPageSelected(int position) {\n \t\t\t\tif (position \u003d\u003d 1) {\n \t\t\t\t\t// Refresh feed and start timer to refresh again in 15 seconds\n-\t\t\t\t\tcameraFeedFragment.startScheduledThreadPool();\n-\t\t\t\t} else if (cameraFeedFragment.isRunning()) {\n-\t\t\t\t\t// Stop the feed cus we just left the cameraFeedFragment\n-\t\t\t\t\tcameraFeedFragment.stopScheduledThreadPool();\n+\t\t\t\t\tadapter.executeCodeOnFragment(getFragmentManager(), 1, fragment -\u003e ((TestingCenterCameraFeedFragment) fragment).startScheduledThreadPool());\n+\t\t\t\t} else {\n+\t\t\t\t\tadapter.executeCodeOnFragment(getFragmentManager(), 1, fragment -\u003e ((TestingCenterCameraFeedFragment) fragment).stopScheduledThreadPool());\n \t\t\t\t}\n \t\t\t}\n \t\t});\n \t\t((TabLayout) findViewById(R.id.tabLayout)).setupWithViewPager(viewPager);\n \t}\n-\n }"
        },
        {
          "file_name": "app/src/main/java/edu/byu/suite/features/testingcenter/service/TestingCenterScoresClient.java",
          "patch": "@@ -32,8 +32,7 @@ public String getBaseUrl() {\n \n \t@Override\n \tpublic Converter.Factory getConverter() {\n-\t\treturn GsonConverterFactory.create(new GsonBuilder().registerTypeAdapter(Date.class, new JsonDateDeserializer(Collections.singletonList(DateUtil.DATE_TIME_TIMEZONE_FORMAT)))\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.create());\n+\t\treturn GsonConverterFactory.create(new GsonBuilder().registerTypeAdapter(Date.class, new JsonDateDeserializer(Collections.singletonList(DateUtil.DATE_TIME_TIMEZONE_FORMAT))).create());\n \t}\n \n \t@Override"
        },
        {
          "file_name": "support/src/main/java/edu/byu/support/adapter/ByuFragmentPagerAdapter.java",
          "patch": "@@ -3,31 +3,64 @@\n import android.app.Fragment;\n import android.app.FragmentManager;\n import android.support.v13.app.FragmentPagerAdapter;\n+import android.view.ViewGroup;\n import edu.byu.support.fragment.ByuFragment;\n \n /**\n  * Created by cwoodfie on 7/28/16\n  */\n public class ByuFragmentPagerAdapter extends FragmentPagerAdapter {\n-\tprivate final ByuFragment[] FRAGMENTS;\n+\tprivate final ByuFragment[] fragments;\n+\tprivate final String[] tags;\n+\tprivate final FragmentMessenger[] pendingCommands;\n \n \tpublic ByuFragmentPagerAdapter(FragmentManager fm, ByuFragment[] fragments) {\n \t\tsuper(fm);\n-\t\tFRAGMENTS \u003d fragments;\n+\t\tthis.fragments \u003d fragments;\n+\t\ttags \u003d new String[fragments.length];\n+\t\tpendingCommands \u003d new FragmentMessenger[fragments.length];\n \t}\n \n \t@Override\n \tpublic Fragment getItem(int position) {\n-\t\treturn FRAGMENTS[position];\n+\t\treturn fragments[position];\n+\t}\n+\n+\t@Override\n+\tpublic Object instantiateItem(ViewGroup container, int position) {\n+\t\tByuFragment fragment \u003d (ByuFragment) super.instantiateItem(container, position);\n+\t\ttags[position] \u003d fragment.getTag();\n+\t\tif (pendingCommands[position] !\u003d null) {\n+\t\t\tpendingCommands[position].run(fragment);\n+\t\t\tpendingCommands[position] \u003d null;\n+\t\t}\n+\t\treturn fragment;\n+\t}\n+\n+\tpublic ByuFragment getFragment(FragmentManager fragmentManager, int position) {\n+\t\treturn (ByuFragment) fragmentManager.findFragmentByTag(tags[position]);\n \t}\n \n \t@Override\n \tpublic int getCount() {\n-\t\treturn FRAGMENTS.length;\n+\t\treturn fragments.length;\n \t}\n \n \t@Override\n \tpublic CharSequence getPageTitle(int position) {\n-\t\treturn FRAGMENTS[position].getTitle();\n+\t\treturn fragments[position].getTitle();\n+\t}\n+\n+\tpublic void executeCodeOnFragment(FragmentManager fragmentManager, int position, FragmentMessenger messenger) {\n+\t\tByuFragment fragment \u003d getFragment(fragmentManager, position);\n+\t\tif (fragment !\u003d null) {\n+\t\t\tmessenger.run(fragment);\n+\t\t} else {\n+\t\t\tpendingCommands[position] \u003d messenger;\n+\t\t}\n+\t}\n+\n+\tpublic interface FragmentMessenger\u003cFragment extends ByuFragment\u003e {\n+\t\tvoid run(Fragment fragment);\n \t}\n }"
        },
        {
          "file_name": "support/src/main/java/edu/byu/support/fragment/ByuCameraFeedFragment.java",
          "patch": "@@ -3,6 +3,7 @@\n import android.graphics.Bitmap;\n import android.graphics.BitmapFactory;\n import android.os.Bundle;\n+import android.util.Log;\n import android.view.*;\n import android.widget.ImageView;\n import android.widget.TextView;\n@@ -27,12 +28,12 @@\n  * Created by cwoodfie on 7/29/16\n  */\n public class ByuCameraFeedFragment extends ByuFragment {\n+\tprivate final String TAG \u003d \"\" + this;\n \tprivate static final int MINIMUM_REFRESH_INTERVAL \u003d 15;\n \tprivate Call\u003cResponseBody\u003e cameraFeedRequest;\n \tprivate ImageView cameraFeedImageView;\n \tprivate TextView refreshText;\n \tprivate ScheduledExecutorService scheduledExecutorService;\n-\tprivate CameraFeed cameraFeed;\n \tprivate boolean running \u003d false;\n \tprivate final ByuCallback\u003cResponseBody\u003e callback \u003d new ByuCallback\u003cResponseBody\u003e(this) {\n \t\t@Override\n@@ -61,8 +62,7 @@ public static ByuCameraFeedFragment newInstance(CameraFeed cameraFeed) {\n \tpublic void onCreate(Bundle savedInstanceState) {\n \t\tsuper.onCreate(savedInstanceState);\n \t\tsetHasOptionsMenu(true);\n-\t\tcameraFeed \u003d getArguments().getParcelable(CAMERA_BUNDLE_TAG);\n-\t\tcameraFeedRequest \u003d ((ByuCameraFeedClient.Api) ByuApiGenerator.createApi(getActivity(), new ByuCameraFeedClient())).getCameraFeed(cameraFeed.getLocation());\n+\t\tcameraFeedRequest \u003d ((ByuCameraFeedClient.Api) ByuApiGenerator.createApi(getActivity(), new ByuCameraFeedClient())).getCameraFeed(getArguments().\u003cCameraFeed\u003egetParcelable(CAMERA_BUNDLE_TAG).getLocation());\n \t}\n \n \t@Override\n@@ -78,41 +78,37 @@ public void onViewCreated(View view, Bundle savedInstanceState) {\n \t\tstartScheduledThreadPool();\n \t}\n \n-\tpublic synchronized void startScheduledThreadPool() {\n+\tpublic void startScheduledThreadPool() {\n \t\t// restart the threads if the user hits refresh\n \t\tstopScheduledThreadPool();\n \t\tscheduledExecutorService \u003d Executors.newScheduledThreadPool(2);\n \t\t// Set image to refresh every refreshInterval\n-\t\tfinal ScheduledFuture\u003c?\u003e scheduledUpdateImage \u003d scheduledExecutorService.scheduleWithFixedDelay(new Runnable() {\n+\t\tfinal ScheduledFuture\u003c?\u003e scheduledUpdateImage \u003d scheduledExecutorService.scheduleWithFixedDelay(new LoggingRunnable(new Runnable() {\n \t\t\t@Override\n \t\t\tpublic void run() {\n \t\t\t\tloadImage();\n \t\t\t}\n-\t\t}, 0, Math.max(cameraFeed.getRefreshInterval(), MINIMUM_REFRESH_INTERVAL), TimeUnit.SECONDS);\n+\t\t}), 0, Math.max(getArguments().\u003cCameraFeed\u003egetParcelable(CAMERA_BUNDLE_TAG).getRefreshInterval(), MINIMUM_REFRESH_INTERVAL), TimeUnit.SECONDS);\n \t\t// Set countdown to update every second\n-\t\tscheduledExecutorService.scheduleAtFixedRate(new Runnable() {\n+\t\tscheduledExecutorService.scheduleAtFixedRate(new LoggingRunnable(new Runnable() {\n \t\t\t@Override\n \t\t\tpublic void run() {\n \t\t\t\tupdateText(scheduledUpdateImage.getDelay(TimeUnit.SECONDS));\n \t\t\t}\n-\t\t}, 0, 1, TimeUnit.SECONDS);\n+\t\t}), 0, 1, TimeUnit.SECONDS);\n \t\trunning \u003d true;\n \t}\n \n \t// Used by testing center to only refresh when the cameraFeedFragment is visible\n-\tpublic synchronized void stopScheduledThreadPool() {\n+\tpublic void stopScheduledThreadPool() {\n \t\tif (running) {\n \t\t\tscheduledExecutorService.shutdownNow();\n \t\t}\n \t\trunning \u003d false;\n \t}\n \n-\tpublic synchronized boolean isRunning() {\n-\t\treturn running;\n-\t}\n-\n \tprivate void updateText(final long delay) {\n-\t\tgetActivity().runOnUiThread(new Runnable() {\n+\t\trefreshText.post(new LoggingRunnable(new Runnable() {\n \t\t\t@Override\n \t\t\tpublic void run() {\n \t\t\t\tif (delay \u003c\u003d 0) {\n@@ -121,7 +117,7 @@ public void run() {\n \t\t\t\t\trefreshText.setText(getString(R.string.cameraRefreshTextFormat, delay));\n \t\t\t\t}\n \t\t\t}\n-\t\t});\n+\t\t}));\n \t}\n \n \t@Override\n@@ -147,8 +143,26 @@ protected void loadImage() {\n \t}\n \n \t@Override\n-\tpublic void onDestroy() {\n-\t\tsuper.onDestroy();\n+\tpublic void onStop() {\n+\t\tsuper.onStop();\n \t\tstopScheduledThreadPool();\n \t}\n+\n+\tprivate class LoggingRunnable implements Runnable {\n+\t\tprivate Runnable actualRunnable;\n+\n+\t\tprivate LoggingRunnable(Runnable actualRunnable) {\n+\t\t\tthis.actualRunnable \u003d actualRunnable;\n+\t\t}\n+\n+\t\t@Override\n+\t\tpublic void run() {\n+\t\t\ttry {\n+\t\t\t\tactualRunnable.run();\n+\t\t\t} catch (Exception e) {\n+\t\t\t\tLog.e(TAG, \"run: \", e);\n+\t\t\t\tthrow e;\n+\t\t\t}\n+\t\t}\n+\t}\n }"
        }
      ]
    }
  },
  {
    "name": "Performance schedule null pointer",
    "url": "https://github.com/jpschewe/fll-sw/issues/381",
    "description": "Clicking on the performance schedule link at the Minnesota state tournament caused a null pointer exception. I suspect it is a null organization.\n",
    "keywords": [
      "null"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/jpschewe/fll-sw/commit/e4f3e31a4ea17f0f8a8d1c592a0c247b5b4a317e",
      "files": [
        {
          "file_name": "scoring/Changes.txt",
          "patch": "@@ -1,3 +1,4 @@\n+* 381 - handle missing information in TeamScheduleInfo\n * 380 - generate correct tanking report when there are multiple tournaments in the same database\n * 377 - correctly identify Excel files by extension\n "
        },
        {
          "file_name": "scoring/src/fll/scheduler/TeamScheduleInfo.java",
          "patch": "@@ -123,10 +123,14 @@ public void setTeamName(final String teamName) {\n   }\n \n   /**\n-   * @return the teamName\n+   * @return the teamName, never null\n    */\n   public String getTeamName() {\n-    return teamName;\n+    if (null \u003d\u003d teamName) {\n+      return \"\";\n+    } else {\n+      return teamName;\n+    }\n   }\n \n   /**\n@@ -137,10 +141,14 @@ public void setOrganization(final String organization) {\n   }\n \n   /**\n-   * @return the organization\n+   * @return the organization, never null\n    */\n   public String getOrganization() {\n-    return organization;\n+    if (null \u003d\u003d organization) {\n+      return \"\";\n+    } else {\n+      return organization;\n+    }\n   }\n \n   /**\n@@ -151,10 +159,14 @@ public void setDivision(final String division) {\n   }\n \n   /**\n-   * @return the division\n+   * @return the division, never null\n    */\n   public String getDivision() {\n-    return division;\n+    if (null \u003d\u003d division) {\n+      return \"\";\n+    } else {\n+      return division;\n+    }\n   }\n \n   /**\n@@ -165,10 +177,14 @@ public void setJudgingStation(final String judge) {\n   }\n \n   /**\n-   * @return the judging station\n+   * @return the judging station, never null\n    */\n   public String getJudgingStation() {\n-    return judgingStation;\n+    if (null \u003d\u003d judgingStation) {\n+      return \"\";\n+    } else {\n+      return judgingStation;\n+    }\n   }\n \n   public int getNumberOfRounds() {"
        }
      ]
    }
  },
  {
    "name": "null pointer exception",
    "url": "https://github.com/asebak/embeddedlinux-jvmdebugger-intellij/issues/38",
    "description": "null pointer exception thrown on the first time creating a brand new run configuration\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/asebak/embeddedlinux-jvmdebugger-intellij/commit/ba030a8af7a04ba1a90281ce0f110dc2ce8fd72e",
      "files": [
        {
          "file_name": "META-INF/plugin.xml",
          "patch": "@@ -1,14 +1,20 @@\n \u003cidea-plugin version\u003d\"2\"\u003e\n   \u003cid\u003ecom.atsebak.raspberrypi\u003c/id\u003e\n     \u003cname\u003eEmbedded Linux JVM Debugger (Raspberry Pi, Intel x86, ARM processors)\u003c/name\u003e\n-    \u003cversion\u003e0.41\u003c/version\u003e\n+    \u003cversion\u003e0.42\u003c/version\u003e\n   \u003cvendor email\u003d\"ahmad@atsebak.com\" url\u003d\"http://www.atsebak.com\"\u003eAt Sebak\u003c/vendor\u003e\n \n   \u003cdescription\u003e\u003c![CDATA[\n     \u003cp\u003eJava Debugger for Embedded Systems that run on Embedded Linux or on the \u003ca href\u003d\"https://www.yoctoproject.org/\"\u003eYocto Project Kernel\u003c/a\u003e\u003c/p\u003e\n     ]]\u003e\u003c/description\u003e\n \n   \u003cchange-notes\u003e\u003c![CDATA[\n+        \u003cb\u003eVersion 0.42\u003c/b\u003e\n+        \u003cul\u003e\n+            \u003cli\u003e\n+                Fixed Null pointer exception on startup after adding run configuration.\n+            \u003c/li\u003e\n+        \u003c/ul\u003e\n         \u003cb\u003eVersion 0.41\u003c/b\u003e\n         \u003cul\u003e\n             \u003cli\u003e"
        },
        {
          "file_name": "src/com/atsebak/embeddedlinuxjvm/ui/RunConfigurationEditor.java",
          "patch": "@@ -117,7 +117,7 @@ protected void resetEditorFrom(EmbeddedLinuxJVMRunConfiguration configuration) {\n         runAsRootCheckBox.setSelected(parameters.isRunAsRoot());\n         debugPort.setText(parameters.getPort());\n         username.setText(parameters.getUsername());\n-        password.setText(new String(parameters.getPassword()));\n+        password.setText(parameters.getPassword());\n         sshStatus.setVisible(false);\n     }\n "
        }
      ]
    }
  },
  {
    "name": "Unset env-group in setings invokes null-pointer exception in gather",
    "url": "https://github.com/AdamSaleh/NitrateRPC/issues/41",
    "description": "",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/AdamSaleh/NitrateRPC/commit/4eadbd8b6153f35f062deb2a49bbdffe90f63ebe",
      "files": [
        {
          "file_name": "pom.xml",
          "patch": "@@ -11,19 +11,28 @@\n   \u003cversion\u003e1.0-SNAPSHOT\u003c/version\u003e\n   \u003cpackaging\u003ehpi\u003c/packaging\u003e\n \n-    \u003crepositories\u003e\n+    \u003c!-- get every artifact through maven.glassfish.org, which proxies all the artifacts that we need --\u003e\n+  \u003crepositories\u003e\n+    \u003crepository\u003e\n+      \u003cid\u003em.g.o-public\u003c/id\u003e\n+      \u003curl\u003ehttp://maven.glassfish.org/content/groups/public/\u003c/url\u003e\n+    \u003c/repository\u003e\n         \u003crepository\u003e\n           \u003cid\u003erepo.jenkins-ci.org\u003c/id\u003e\n           \u003curl\u003ehttp://repo.jenkins-ci.org/public/\u003c/url\u003e\n         \u003c/repository\u003e\n-    \u003c/repositories\u003e\n+  \u003c/repositories\u003e\n \n-    \u003cpluginRepositories\u003e\n-        \u003cpluginRepository\u003e\n+  \u003cpluginRepositories\u003e\n+    \u003cpluginRepository\u003e\n+      \u003cid\u003em.g.o-public\u003c/id\u003e\n+      \u003curl\u003ehttp://maven.glassfish.org/content/groups/public/\u003c/url\u003e\n+    \u003c/pluginRepository\u003e\n+\u003cpluginRepository\u003e\n           \u003cid\u003erepo.jenkins-ci.org\u003c/id\u003e\n           \u003curl\u003ehttp://repo.jenkins-ci.org/public/\u003c/url\u003e\n         \u003c/pluginRepository\u003e\n-    \u003c/pluginRepositories\u003e\n+  \u003c/pluginRepositories\u003e\n \n     \u003cdependencies\u003e\n         \u003cdependency\u003e\n@@ -36,5 +45,11 @@\n             \u003cartifactId\u003eTestParser\u003c/artifactId\u003e\n             \u003cversion\u003e1.0-SNAPSHOT\u003c/version\u003e\n         \u003c/dependency\u003e\n+        \u003cdependency\u003e\n+            \u003cgroupId\u003eorg.kohsuke.redstone\u003c/groupId\u003e\n+            \u003cartifactId\u003eredstone\u003c/artifactId\u003e\n+            \u003cversion\u003e1.1.1\u003c/version\u003e\n+            \u003ctype\u003ejar\u003c/type\u003e\n+        \u003c/dependency\u003e\n     \u003c/dependencies\u003e\n \u003c/project\u003e"
        },
        {
          "file_name": "src/main/java/NitrateIntegration/TcmsEnvironment.java",
          "patch": "@@ -127,4 +127,13 @@ public boolean containsValue(String property, String value) {\n         }\n         return values.get(property).containsKey(value);\n     }\n+    \n+    \n+    /*\n+     * Returns true if environment is not initialized with any value\n+     */\n+    public boolean isEmpty(){\n+        if(env !\u003d null) return env.isEmpty();\n+        return true;\n+    }\n }"
        },
        {
          "file_name": "src/main/java/NitrateIntegration/TcmsGatherer.java",
          "patch": "@@ -106,6 +106,11 @@ public void setProperties(TcmsProperties properties) {\n     }\n     \n     private static TestRun.link_env_value tcmsLinkValue(TcmsEnvironment env,String property,String value) {\n+        /**\n+         * If environment is not set, return null, because we cannot link to it\n+         */\n+        if (env.isEmpty()) return null;\n+        \n         TestRun.link_env_value c \u003d new TestRun.link_env_value();\n         c.run_id \u003d -1;\n         Hashtable\u003cString,Value\u003e prop \u003d env.getValues().get(property);"
        },
        {
          "file_name": "src/main/java/NitrateIntegration/TcmsReviewAction.java",
          "patch": "@@ -401,7 +401,6 @@ public void doCheckSubmit(StaplerRequest req, StaplerResponse rsp) throws Servle\n                 String val \u003d prop.getValue();\n \n                 String result \u003d \"UNKNOWN\";\n-\n                 if (environment.containsProperty(name)) {\n                     if (environment.containsValue(name, val)) {\n                         result \u003d \"CHECKED\";\n@@ -413,6 +412,7 @@ public void doCheckSubmit(StaplerRequest req, StaplerResponse rsp) throws Servle\n                     result \u003d \"PROPERTY\";\n                     wrongProperty \u003d true;\n                 }\n+                \n \n                 if (env_status.containsKey(name) \u003d\u003d false) {\n                     env_status.put(name, new Hashtable\u003cString, String\u003e());"
        },
        {
          "file_name": "src/main/resources/NitrateIntegration/TcmsReviewAction/envCheck.jelly",
          "patch": "@@ -2,111 +2,123 @@\n \u003cj:jelly xmlns:j\u003d\"jelly:core\" xmlns:st\u003d\"jelly:stapler\" xmlns:d\u003d\"jelly:define\" xmlns:l\u003d\"/lib/layout\"\n          xmlns:t\u003d\"/lib/hudson\" xmlns:f\u003d\"/lib/form\"\u003e\n        \n-    \u003ctable \u003e                       \n+       \n+    \u003cj:choose\u003e\n+        \u003cj:when test\u003d\"${!it.environment.isEmpty()}\"\u003e\n+            \u003ctable \u003e                       \n                         \n-        \u003cj:forEach var\u003d\"env\" items\u003d\"${it.env_status.entrySet()}\"\u003e\n-            \u003ctr\u003e\n-                \u003ctd colspan\u003d\"2\"\u003e\n-                    \u003cstrong\u003e${env.getKey()}\u003c/strong\u003e\n-                \u003c/td\u003e\n-                \u003ctd\u003e\n-                    \u003cj:choose\u003e\n-                        \u003cj:when test\u003d\"${env.getValue().values().iterator().next()\u003d\u003d\u0027PROPERTY\u0027}\"\u003e\n-                            \u003cf:textbox name\u003d\"property-${env.getKey()}\" clazz\u003d\"required\" style\u003d\"width: 100px\" value\u003d\"${env.getKey()}\" /\u003e \n-                        \u003c/j:when\u003e\n-                        \u003cj:when test\u003d\"${it.change_axis}\"\u003e\n-                            \u003cf:textbox name\u003d\"property-${env.getKey()}\" clazz\u003d\"required\" style\u003d\"width: 100px\" value\u003d\"${env.getKey()}\" /\u003e \n-                        \u003c/j:when\u003e\n-                        \u003cj:otherwise\u003e\n-                        \u003c/j:otherwise\u003e\n-                    \u003c/j:choose\u003e\n-                \u003c/td\u003e\n+                \u003cj:forEach var\u003d\"env\" items\u003d\"${it.env_status.entrySet()}\"\u003e\n+                    \u003ctr\u003e\n+                        \u003ctd colspan\u003d\"2\"\u003e\n+                            \u003cstrong\u003e${env.getKey()}\u003c/strong\u003e\n+                        \u003c/td\u003e\n+                        \u003ctd\u003e\n+                            \u003cj:choose\u003e\n+                                \u003cj:when test\u003d\"${env.getValue().values().iterator().next()\u003d\u003d\u0027PROPERTY\u0027}\"\u003e\n+                                    \u003cf:textbox name\u003d\"property-${env.getKey()}\" clazz\u003d\"required\" style\u003d\"width: 100px\" value\u003d\"${env.getKey()}\" /\u003e \n+                                \u003c/j:when\u003e\n+                                \u003cj:when test\u003d\"${it.change_axis}\"\u003e\n+                                    \u003cf:textbox name\u003d\"property-${env.getKey()}\" clazz\u003d\"required\" style\u003d\"width: 100px\" value\u003d\"${env.getKey()}\" /\u003e \n+                                \u003c/j:when\u003e\n+                                \u003cj:otherwise\u003e\n+                                \u003c/j:otherwise\u003e\n+                            \u003c/j:choose\u003e\n+                        \u003c/td\u003e\n                 \n-                \u003ctd\u003e\n-                    \u003cj:if test\u003d\"${env.getValue().containsValue(\u0027PROPERTY\u0027)}\"\u003e\n-                        Property is not linked to \n-                        \u003cstrong\u003e${it.environment.env}\u003c/strong\u003e. \n-                    \u003c/j:if\u003e\n-                \u003c/td\u003e\n-            \u003c/tr\u003e\n+                        \u003ctd\u003e\n+                            \u003cj:choose\u003e\n+                                \u003cj:when test\u003d\"${env.getValue().containsValue(\u0027PROPERTY\u0027)}\"\u003e\n+                                    Property is not linked to \n+                                    \u003cstrong\u003e${it.environment.env}\u003c/strong\u003e. \n+                                \u003c/j:when\u003e\n+                            \u003c/j:choose\u003e\n+                    \n+                        \u003c/td\u003e\n+                    \u003c/tr\u003e\n                     \n                     \n                     \n-            \u003cj:forEach var\u003d\"val\" items\u003d\"${env.getValue().entrySet()}\"\u003e\n-                \u003ctr\u003e    \n-                    \u003ctd class\u003d\"tdSmall\"\u003e\u003c/td\u003e\n-                    \u003ctd\u003e\n-                        ${val.getKey()}\n-                    \u003c/td\u003e\n-                    \u003ctd\u003e\n-                        \u003cj:choose\u003e\n-                            \u003cj:when test\u003d\"${val.getValue()\u003d\u003d\u0027CHECKED\u0027}\"\u003e\n-                                \u003cimg src\u003d\"${rootURL}/plugin/NitrateIntegration/images/completed.png\"\n-                                         alt\u003d\"${%Property checked}\" tooltip\u003d\"${%Property checked}\"\n-                                         style\u003d\"visibility: visible\" width\u003d\"16\" height\u003d\"16\" align\u003d\"center\" /\u003e\n+                    \u003cj:forEach var\u003d\"val\" items\u003d\"${env.getValue().entrySet()}\"\u003e\n+                        \u003ctr\u003e    \n+                            \u003ctd class\u003d\"tdSmall\"\u003e\u003c/td\u003e\n+                            \u003ctd\u003e\n+                                ${val.getKey()}\n+                            \u003c/td\u003e\n+                            \u003ctd\u003e\n                                 \u003cj:choose\u003e\n-                                    \u003cj:when test\u003d\"${it.change_axis}\"\u003e\n+                                    \u003cj:when test\u003d\"${val.getValue()\u003d\u003d\u0027CHECKED\u0027}\"\u003e\n+                                        \u003cimg src\u003d\"${rootURL}/plugin/NitrateIntegration/images/completed.png\"\n+                                     alt\u003d\"${%Property checked}\" tooltip\u003d\"${%Property checked}\"\n+                                     style\u003d\"visibility: visible\" width\u003d\"16\" height\u003d\"16\" align\u003d\"center\" /\u003e\n+                                        \u003cj:choose\u003e\n+                                            \u003cj:when test\u003d\"${it.change_axis}\"\u003e\n+                                                \u003cf:textbox name\u003d\"value-${env.getKey()}\u003d\u003e${val.getKey()}\" clazz\u003d\"required\" style\u003d\"width: 100px\" value\u003d\"${val.getKey()}\" /\u003e \n+                                            \u003c/j:when\u003e\n+                                        \u003c/j:choose\u003e\n+                                    \u003c/j:when\u003e\n+                                    \u003cj:when test\u003d\"${val.getValue()\u003d\u003d\u0027VALUE\u0027}\"\u003e\n                                         \u003cf:textbox name\u003d\"value-${env.getKey()}\u003d\u003e${val.getKey()}\" clazz\u003d\"required\" style\u003d\"width: 100px\" value\u003d\"${val.getKey()}\" /\u003e \n                                     \u003c/j:when\u003e\n+                                    \u003cj:when test\u003d\"${val.getValue()\u003d\u003d\u0027PROPERTY\u0027}\"\u003e\n+                                        \u003cf:textbox name\u003d\"value-${env.getKey()}\u003d\u003e${val.getKey()}\" clazz\u003d\"required\" style\u003d\"width: 100px\" value\u003d\"${val.getKey()}\" /\u003e                                 \n+                                    \u003c/j:when\u003e\n+                                    \u003cj:otherwise\u003e\n+                                        ${val.getValue()}\n+                                    \u003c/j:otherwise\u003e\n                                 \u003c/j:choose\u003e\n-                            \u003c/j:when\u003e\n-                            \u003cj:when test\u003d\"${val.getValue()\u003d\u003d\u0027VALUE\u0027}\"\u003e\n-                                \u003cf:textbox name\u003d\"value-${env.getKey()}\u003d\u003e${val.getKey()}\" clazz\u003d\"required\" style\u003d\"width: 100px\" value\u003d\"${val.getKey()}\" /\u003e \n-                            \u003c/j:when\u003e\n-                            \u003cj:when test\u003d\"${val.getValue()\u003d\u003d\u0027PROPERTY\u0027}\"\u003e\n-                                \u003cf:textbox name\u003d\"value-${env.getKey()}\u003d\u003e${val.getKey()}\" clazz\u003d\"required\" style\u003d\"width: 100px\" value\u003d\"${val.getKey()}\" /\u003e                                 \n-                            \u003c/j:when\u003e\n-                            \u003cj:otherwise\u003e\n-                                ${val.getValue()}\n-                            \u003c/j:otherwise\u003e\n-                        \u003c/j:choose\u003e\n \n-                    \u003c/td\u003e\n-                    \u003ctd\u003e\n-                        \u003cj:if test\u003d\"${val.getValue()\u003d\u003d\u0027VALUE\u0027}\"\u003e\n-                            Value is not linked with \n-                                \u003cstrong\u003e ${env.getKey()}\u003c/strong\u003e.\n-                        \u003c/j:if\u003e\n-                    \u003c/td\u003e\n-                \u003c/tr\u003e\n-            \u003c/j:forEach\u003e\n-            \u003ctr\u003e\n-                \u003ctd\u003e\n+                            \u003c/td\u003e\n+                            \u003ctd\u003e\n+                                \u003cj:if test\u003d\"${val.getValue()\u003d\u003d\u0027VALUE\u0027}\"\u003e\n+                                    Value is not linked with \n+                                    \u003cstrong\u003e ${env.getKey()}\u003c/strong\u003e.\n+                                \u003c/j:if\u003e\n+                            \u003c/td\u003e\n+                        \u003c/tr\u003e\n+                    \u003c/j:forEach\u003e\n+                    \u003ctr\u003e\n+                        \u003ctd\u003e\n+                            \u003cst:nbsp/\u003e\n+                        \u003c/td\u003e\n+                    \u003c/tr\u003e\n+                \u003c/j:forEach\u003e\n+            \u003c/table\u003e \n+            \u003cbr /\u003e\n+            \u003cj:choose\u003e\n+                \u003cj:when test\u003d\"${it.existsWrongProperty()}\"\u003e\n+                    Available properties for group \n+                    \u003cstrong\u003e${it.environment.env}\u003c/strong\u003e: \n+                    \u003cbr/\u003e                      \n+                    \u003cj:forEach var\u003d\"posible_val\" items\u003d\"${it.environment.values.keySet()}\"\u003e\n+                        ${posible_val},\n+                        \u003cst:nbsp/\u003e \n+                    \u003c/j:forEach\u003e\n+                    \u003cbr /\u003e\n+                \u003c/j:when\u003e\n+            \u003c/j:choose\u003e\n+\n+    \n+            \u003cj:forEach var\u003d\"prop\" items\u003d\"${it.getPropertyWWrongValue()}\"\u003e\n+                \u003cbr/\u003e\n+                Available values for property \n+                \u003cstrong\u003e${prop}:\u003c/strong\u003e \n+                \u003cbr/\u003e\n+                \u003cj:forEach var\u003d\"posible_val\" items\u003d\"${it.environment.values.get(prop).keySet()}\"\u003e\n+                    ${posible_val},\n                     \u003cst:nbsp/\u003e\n-                \u003c/td\u003e\n-            \u003c/tr\u003e\n-        \u003c/j:forEach\u003e\n-    \u003c/table\u003e \n-    \u003cbr /\u003e\n-    \u003cj:choose\u003e\n-        \u003cj:when test\u003d\"${it.existsWrongProperty()}\"\u003e\n-            Available properties for group \n-            \u003cstrong\u003e${it.environment.env}\u003c/strong\u003e: \n-            \u003cbr/\u003e                      \n-            \u003cj:forEach var\u003d\"posible_val\" items\u003d\"${it.environment.values.keySet()}\"\u003e\n-                ${posible_val},\n-                \u003cst:nbsp/\u003e \n+                \u003c/j:forEach\u003e\n+                \u003cbr /\u003e\n             \u003c/j:forEach\u003e\n-            \u003cbr /\u003e\n+            \u003cul\u003e\n+                \u003cj:forEach var\u003d\"val\" items\u003d\"${it.env_check_problems}\"\u003e\n+                    \u003cli\u003e ${val}\u003c/li\u003e\n+                \u003c/j:forEach\u003e             \n+            \u003c/ul\u003e\n         \u003c/j:when\u003e\n-    \u003c/j:choose\u003e\n-\n+        \u003cj:otherwise\u003e\n+            Environment group is not set in project configuration. \u003cbr/\u003e\u003cbr/\u003e\n+        \u003c/j:otherwise\u003e\n+    \u003c/j:choose\u003e   \n     \n-    \u003cj:forEach var\u003d\"prop\" items\u003d\"${it.getPropertyWWrongValue()}\"\u003e\n-        \u003cbr/\u003e\n-        Available values for property \n-        \u003cstrong\u003e${prop}:\u003c/strong\u003e \n-        \u003cbr/\u003e\n-        \u003cj:forEach var\u003d\"posible_val\" items\u003d\"${it.environment.values.get(prop).keySet()}\"\u003e\n-            ${posible_val},\n-            \u003cst:nbsp/\u003e\n-        \u003c/j:forEach\u003e\n-        \u003cbr /\u003e\n-    \u003c/j:forEach\u003e\n-    \u003cul\u003e\n-        \u003cj:forEach var\u003d\"val\" items\u003d\"${it.env_check_problems}\"\u003e\n-            \u003cli\u003e ${val}\u003c/li\u003e\n-        \u003c/j:forEach\u003e             \n-    \u003c/ul\u003e\n              \n \u003c/j:jelly\u003e\n\\ No newline at end of file"
        }
      ]
    }
  },
  {
    "name": "[CalDAV] Avoid null pointer exceptions in the loadEvents() method",
    "url": "https://github.com/openhab/openhab1-addons/pull/5153",
    "description": "Eliminate null pointer exceptions caused by null event summaries.\r\n\r\nFixes #5008 ",
    "keywords": [
      "null"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/openhab/openhab1-addons/commit/e78af7621690f458911b1fdeb7ad1fcba0e745ef",
      "files": [
        {
          "file_name": "bundles/io/org.openhab.io.caldav/src/main/java/org/openhab/io/caldav/internal/job/EventReloaderJob.java",
          "patch": "@@ -63,6 +63,7 @@\n import net.fortuna.ical4j.model.PropertyList;\n import net.fortuna.ical4j.model.component.CalendarComponent;\n import net.fortuna.ical4j.model.component.VEvent;\n+import net.fortuna.ical4j.model.property.Summary;\n \n public class EventReloaderJob implements Job {\n     public static final String KEY_CONFIG \u003d \"config\";\n@@ -354,7 +355,8 @@ public void loadEvents(String filename, org.joda.time.DateTime lastResourceChang\n         org.joda.time.DateTime lastModifedVEventOverAll \u003d null;\n         for (CalendarComponent comp : vEventComponents) {\n             VEvent vEvent \u003d (VEvent) comp;\n-            log.trace(\"loading event: \" + vEvent.getUid().getValue() + \":\" + vEvent.getSummary().getValue());\n+            Summary vEventSummary \u003d vEvent.getSummary();\n+            log.trace(\"loading event: {}:{}\", vEvent.getUid().getValue(), vEventSummary \u003d\u003d null ? \"(none)\" : vEventSummary.getValue());\n             // fallback, because \u0027LastModified\u0027 in VEvent is optional\n             org.joda.time.DateTime lastModifedVEvent \u003d lastResourceChangeFS;\n             if (vEvent.getLastModified() !\u003d null) {\n@@ -375,13 +377,13 @@ public void loadEvents(String filename, org.joda.time.DateTime lastResourceChang\n                                     .isAfter(org.joda.time.DateTime.now().plusMinutes(config.getReloadMinutes()))) {\n                         // the event is calculated as long as the next reload\n                         // interval can handle this\n-                        log.trace(\"skipping resource processing {}, not changed\", filename);\n+                        log.trace(\"skipping resource processing. File {} has not changed.\", filename);\n                         continue;\n                     }\n \n                     if (eventContainer.isHistoricEvent()) {\n                         // no more upcoming events, do nothing\n-                        log.trace(\"skipping resource processing {}, not changed\", filename);\n+                        log.trace(\"skipping resource processing. File {} is historic.\", filename);\n                         continue;\n                     }\n                 }\n@@ -392,17 +394,21 @@ public void loadEvents(String filename, org.joda.time.DateTime lastResourceChang\n             periods \u003d periods.normalise();\n \n             String eventId \u003d vEvent.getUid().getValue();\n-            final String eventName \u003d vEvent.getSummary().getValue();\n+            final String eventName \u003d vEventSummary \u003d\u003d null ? \"(none)\" : vEventSummary.getValue();\n+            log.debug(\"Processing event \u0027{}\u0027\", eventName);\n \n             // no more upcoming events\n             if (periods.size() \u003e 0) {\n                 if (vEvent.getConsumedTime(new net.fortuna.ical4j.model.Date(),\n                         new net.fortuna.ical4j.model.Date(org.joda.time.DateTime.now().plusYears(10).getMillis()))\n                         .size() \u003d\u003d 0) {\n-                    log.trace(\"event will never be occur (historic): {}\", eventName);\n+                    log.trace(\"event will never occur (historic): {}\", eventName);\n                     eventContainer.setHistoricEvent(true);\n                 }\n             }\n+            else {\n+                log.debug(\"No periods exist for event \u0027{}\u0027\", eventName);\n+            }\n \n             // expecting this is for every vEvent inside a calendar equals\n             eventContainer.setEventId(eventId);\n@@ -413,6 +419,7 @@ public void loadEvents(String filename, org.joda.time.DateTime lastResourceChang\n                 org.joda.time.DateTime start \u003d getDateTime(\"start\", p.getStart(), p.getRangeStart());\n                 org.joda.time.DateTime end \u003d getDateTime(\"end\", p.getEnd(), p.getRangeEnd());\n \n+                log.trace(\"Processing period {} - {}\", start, end);\n                 CalDavEvent event \u003d new CalDavEvent(eventName, vEvent.getUid().getValue(), config.getKey(), start, end);\n                 event.setLastChanged(lastModifedVEvent);\n                 if (vEvent.getLocation() !\u003d null) {\n@@ -423,21 +430,18 @@ public void loadEvents(String filename, org.joda.time.DateTime lastResourceChang\n                 }\n                 event.getCategoryList().addAll(readCategory(vEvent));\n                 event.setFilename(filename);\n-                log.trace(\"adding event: \" + event.getShortName());\n+                log.trace(\"adding event: {}\", event.getShortName());\n                 eventContainer.getEventList().add(event);\n-\n             }\n         }\n         if (lastModifedVEventOverAll !\u003d null \u0026\u0026 !config.isLastModifiedFileTimeStampValid()) {\n             eventContainer.setLastChanged(lastModifedVEventOverAll);\n             log.debug(\"changing eventcontainer last modified to {}\", lastModifedVEventOverAll);\n         }\n-        // if (!eventContainer.getEventList().isEmpty()) {\n         CalDavLoaderImpl.instance.addEventToMap(eventContainer, true);\n         if (!readFromFile) {\n             Util.storeToDisk(config.getKey(), filename, calendar);\n         }\n-        // }\n     }\n \n     /**"
        }
      ]
    }
  },
  {
    "name": "Fixing null pointer for webcalendar application",
    "url": "https://github.com/servicecatalog/development/pull/29",
    "description": "\u003c!-- Reviewable:start --\u003e\n\nThis change is [\u003cimg src\u003d\"https://reviewable.io/review_button.svg\" height\u003d\"35\" align\u003d\"absmiddle\" alt\u003d\"Reviewable\"/\u003e](https://reviewable.io/reviews/servicecatalog/development/29)\n\n\u003c!-- Reviewable:end --\u003e\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/servicecatalog/development/commit/e08738c6dd29a55cab0e2ae14975a601337a35be",
      "files": [
        {
          "file_name": "oscm-apiversioning-client-handler/javasrc/org/oscm/apiversioning/handler/VersionHandler.java",
          "patch": "@@ -32,7 +32,7 @@\n  */\n public class VersionHandler implements SOAPHandler\u003cSOAPMessageContext\u003e {\n \n-    private static final String VERSION \u003d \"ctmg.service.version\";\n+    private static final String VERSION \u003d \"cm.service.version\";\n     private static final String PROPERTY_FILE_NAME \u003d \"webserviceclient.properties\";\n     private static final ApiVersionInfo apiVersionInfo \u003d new ApiVersionInfo(\n             PROPERTY_FILE_NAME);"
        },
        {
          "file_name": "oscm-apiversioning-soapmgmt-unittests/javasrc/org/oscm/apiversioning/soapmgmt/parser/SoapRequestParserTest.java",
          "patch": "@@ -68,7 +68,7 @@ public void parseApiVersion_1_8() throws Exception {\n         version.add(node);\n         Iterator\u003c?\u003e it \u003d version.iterator();\n         doReturn(it).when(soapHeader).extractHeaderElements(\n-                eq(\"ctmg.service.version\"));\n+                eq(\"cm.service.version\"));\n         doReturn(soapHeader).when(envelope).getHeader();\n         doReturn(envelope).when(part).getEnvelope();\n         doReturn(part).when(message).getSOAPPart();"
        },
        {
          "file_name": "oscm-apiversioning-soapmgmt/javasrc/org/oscm/apiversioning/soapmgmt/parser/SoapRequestParser.java",
          "patch": "@@ -27,7 +27,7 @@\n  */\n public class SoapRequestParser {\n \n-    private static final String VERSION \u003d \"ctmg.service.version\";\n+    private static final String VERSION \u003d \"cm.service.version\";\n \n     public static String parseApiVersion(SOAPMessageContext context)\n             throws SOAPException {"
        },
        {
          "file_name": "oscm-integrationhelper-unittests/javares/tokenhandlerNull.properties",
          "patch": "@@ -0,0 +1,2 @@\n+# Copyright FUJITSU LIMITED 2016\n+# FORWARD\u003d/Welcome.jsp\n\\ No newline at end of file"
        },
        {
          "file_name": "oscm-integrationhelper-unittests/javasrc/org/oscm/integrationhelper/WsProxyInfoTest.java",
          "patch": "@@ -153,4 +153,17 @@ private void verifyAllAttributesAreSetForInternal(WsProxyInfo result) {\n         assertNotNull(result.getWsInfo());\n         assertNotNull(result.getUserCredentials());\n     }\n+\n+    @Test\n+    public void getAndLogTokenHandlerPropertyTest() {\n+        // given\n+        String fileName \u003d \"test_basic.properties\";\n+        String serviceName \u003d \"SessionService\";\n+        WsProxyInfo result \u003d new WsProxyInfo(fileName, serviceName,\n+                \"tokenhandlerNull.properties\");\n+        assertNotNull(result.getServicePort());\n+        assertNull(result.getForward());\n+        assertNotNull(result.getWsInfo());\n+        assertNotNull(result.getUserCredentials());\n+    }\n }"
        },
        {
          "file_name": "oscm-integrationhelper/.classpath",
          "patch": "@@ -20,5 +20,6 @@\n   \u003cclasspathentry combineaccessrules\u003d\"false\" kind\u003d\"src\" path\u003d\"/oscm-webservices-proxy\" /\u003e\n   \u003cclasspathentry combineaccessrules\u003d\"false\" kind\u003d\"src\" path\u003d\"/oscm-apiversioning-client-handler\" /\u003e\n   \u003cclasspathentry combineaccessrules\u003d\"false\" kind\u003d\"src\" path\u003d\"/oscm-common\" /\u003e\n+  \u003cclasspathentry kind\u003d\"lib\" path\u003d\"/libraries/apache-commons-lang/javalib/commons-lang3-3.1.jar\"/\u003e\n   \u003cclasspathentry kind\u003d\"output\" path\u003d\"bin\" /\u003e\n \u003c/classpath\u003e"
        },
        {
          "file_name": "oscm-integrationhelper/javasrc/org/oscm/integrationhelper/WsProxyInfo.java",
          "patch": "@@ -10,6 +10,7 @@\n \n import java.util.Properties;\n \n+import org.apache.commons.lang3.StringUtils;\n import org.apache.commons.logging.Log;\n import org.apache.commons.logging.LogFactory;\n \n@@ -176,7 +177,7 @@ String getAndLogServiceClientProperty(String property) {\n      * @return\n      */\n     String getAndLogTokenHandlerProperty(String property) {\n-        String value \u003d tokenHandlerProp.getProperty(property).trim();\n+        String value \u003d StringUtils.trim(tokenHandlerProp.getProperty(property));\n         return value;\n     }\n "
        },
        {
          "file_name": "oscm-integrationtests-apiversioning-client/javares/webserviceclient.properties",
          "patch": "@@ -1,2 +1,2 @@\n # Copyright FUJITSU LIMITED 2016\n-ctmg.service.version\u003d1.9\n\\ No newline at end of file\n+cm.service.version\u003d1.9\n\\ No newline at end of file"
        },
        {
          "file_name": "oscm-integrationtests-apiversioning-test-client/javares/webserviceclient.properties",
          "patch": "@@ -1,2 +1,2 @@\n # Copyright FUJITSU LIMITED 2016\n-ctmg.service.version\u003d1.9\n\\ No newline at end of file\n+cm.service.version\u003d1.9\n\\ No newline at end of file"
        }
      ]
    }
  },
  {
    "name": "Intermittent Crash (Null Pointer)",
    "url": "https://github.com/turing-tech/MaterialScrollBar/issues/51",
    "description": "Unfortunately cannot pin down the steps to recreate but very occasionally I get a null pointer exception. Any ideas?\n\n**Crash:**\njava.lang.NullPointerException: Attempt to invoke virtual method \u0027int android.view.View.getTop()\u0027 on a null object reference\nat android.support.v7.widget.RecyclerView$LayoutManager.getDecoratedTop(RecyclerView.java:7675)\nat com.turingtechnologies.materialscrollbar.ScrollingUtilities.getCurScrollState(ScrollingUtilities.java:152)\nat com.turingtechnologies.materialscrollbar.ScrollingUtilities.scrollToPositionAtProgress(ScrollingUtilities.java:107)\nat com.turingtechnologies.materialscrollbar.MaterialScrollBar.onDown(MaterialScrollBar.java:634)\nat com.turingtechnologies.materialscrollbar.DragScrollBar$1.onTouch(DragScrollBar.java:74)\nat android.view.View.dispatchTouchEvent(View.java:9296)\nat android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2547)\nat android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2240)\n at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2553)\nat android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2254)\nat android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2553)\nat android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2254)\nat android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2553)\nat android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2254)\nat android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2553)\nat android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2254)\nat android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2553)\nat android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2254)\nat android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2553)\nat android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2254)\nat android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2553)\nat android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2254)\nat android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2553)\nat android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2254)\nat android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2553)\nat android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2254)\nat android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2553)\nat android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2254)\nat android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2553)\nat android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2254)\nat com.android.internal.policy.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:2403)\nat com.android.internal.policy.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1737)\nat android.app.Activity.dispatchTouchEvent(Activity.java:2771)\nat android.support.v7.view.WindowCallbackWrapper.dispatchTouchEvent(WindowCallbackWrapper.java:60)\nat android.support.v7.view.WindowCallbackWrapper.dispatchTouchEvent(WindowCallbackWrapper.java:60)\nat com.android.internal.policy.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:2364)\nat android.view.View.dispatchPointerEvent(View.java:9520)\nat android.view.ViewRootImpl$ViewPostImeInputStage.processPointerEvent(ViewRootImpl.java:4230)\nat android.view.ViewRootImpl$ViewPostImeInputStage.onProcess(ViewRootImpl.java:4096)\nat android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3642)\nat android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:3695)\nat android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:3661)\nat android.view.ViewRootImpl$AsyncInputStage.forward(ViewRootImpl.java:3787)\nat android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:3669)\nat android.view.ViewRootImpl$AsyncInputStage.apply(ViewRootImpl.java:3844)\nat android.view.ViewRootImpl$InputStage.deliver(ViewRootImpl.java:3642)\nat android.view.ViewRootImpl$InputStage.onDeliverToNext(ViewRootImpl.java:3695)\nat android.view.ViewRootImpl$InputStage.forward(ViewRootImpl.java:3661)\nat android.view.ViewRootImpl$InputStage.apply(ViewRootImpl.java:36\n",
    "keywords": [
      "com",
      "v7",
      "internal",
      "viewgroup java:2553",
      "view viewgroup",
      "android",
      "dispatchtransformedtouchevent",
      "view",
      "view viewrootimpl$inputstage",
      "viewrootimpl$inputstage",
      "turingtechnologies",
      "viewgroup",
      "materialscrollbar",
      "android view",
      "policy",
      "dispatchtouchevent",
      "java:2254",
      "apply",
      "forward",
      "viewgroup dispatchtransformedtouchevent",
      "scrollingutilities",
      "phonewindow",
      "java:2553",
      "windowcallbackwrapper",
      "null",
      "turingtechnologies materialscrollbar",
      "dispatchtouchevent viewgroup",
      "viewrootimpl",
      "support"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/turing-tech/MaterialScrollBar/commit/60f091d0d602ee81c98c0fcaae2f311702d8d510",
      "files": [
        {
          "file_name": "lib/build.gradle",
          "patch": "@@ -2,7 +2,7 @@ apply plugin: \u0027com.android.library\u0027\n apply plugin: \u0027com.github.dcendents.android-maven\u0027\n apply plugin: \u0027com.jfrog.bintray\u0027\n \n-def version \u003d \u002710.1.1\u0027\n+def version \u003d \u002710.1.3\u0027\n \n install {\n     repositories.mavenInstaller {"
        },
        {
          "file_name": "lib/src/main/java/com/turingtechnologies/materialscrollbar/ScrollingUtilities.java",
          "patch": "@@ -149,8 +149,13 @@ public void getCurScrollState() {\n         if (materialScrollBar.recyclerView.getLayoutManager() instanceof GridLayoutManager) {\n             scrollPosState.rowIndex \u003d scrollPosState.rowIndex / ((GridLayoutManager) materialScrollBar.recyclerView.getLayoutManager()).getSpanCount();\n         }\n-        scrollPosState.rowTopOffset \u003d materialScrollBar.recyclerView.getLayoutManager().getDecoratedTop(child);\n-        scrollPosState.rowHeight \u003d child.getHeight();\n+        if(child \u003d\u003d null){\n+            scrollPosState.rowTopOffset \u003d 0;\n+            scrollPosState.rowHeight \u003d 0;\n+        } else {\n+            scrollPosState.rowTopOffset \u003d materialScrollBar.recyclerView.getLayoutManager().getDecoratedTop(child);\n+            scrollPosState.rowHeight \u003d child.getHeight();\n+        }\n     }\n \n }"
        }
      ]
    }
  },
  {
    "name": "Handle null pointer conditions",
    "url": "https://github.com/victims/victims-client-java/pull/38",
    "description": "Fixes #37",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/victims/victims-client-java/commit/560613213e75f296c0856b1a79293b7b502c04e2",
      "files": [
        {
          "file_name": "src/main/java/com/redhat/victims/cli/commands/PomScannerCommand.java",
          "patch": "@@ -69,11 +69,11 @@ private void scanPomFile(File pomFile, CommandResult result){\n             VictimsDBInterface db \u003d Environment.getInstance().getDatabase();\n             Model model \u003d pomReader.read(new FileReader(pomFile));\n             List\u003cDependency\u003e dependencies \u003d model.getDependencies();\n+            if (dependencies \u003d\u003d null){\n+                dependencies \u003d new ArrayList\u003cDependency\u003e();\n+            }\n             DependencyManagement dependencyManagement \u003d model.getDependencyManagement();\n             if (dependencyManagement !\u003d null){\n-                if (dependencies \u003d\u003d null){\n-                    dependencies \u003d new ArrayList\u003cDependency\u003e();\n-                }\n                 dependencies.addAll(dependencyManagement.getDependencies());\n             }\n "
        }
      ]
    }
  },
  {
    "name": "Null Pointer Exception",
    "url": "https://github.com/abramowitzK/Networked-Chess/issues/82",
    "description": "![image](https://cloud.githubusercontent.com/assets/6969831/13377903/97d1a1c2-ddbd-11e5-867c-f2b7f0c837f5.png)\n\nOccurred when moving Black out of check. Very easy to reproduce if you get one of the clients into check and then move it out of check.\n\nException in thread \"Thread-5\" java.lang.NullPointerException\n    at Game.Board.lambda$IsInCheck$2(Board.java:205)\n    at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:174)\n    at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1374)\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\n    at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\n    at Game.Board.IsInCheck(Board.java:205)\n    at Game.Board.SetPiece(Board.java:86)\n    at Game.Board.ApplyMove(Board.java:58)\n    at Game.Game.ApplyMove(Game.java:30)\n    at Server.ServerThread.ApplyMove(ServerThread.java:87)\n    at Server.ServerThread.ProcessPacket(ServerThread.java:41)\n    at Server.ServerThread.run(ServerThread.java:69)\n",
    "keywords": [
      "server",
      "game",
      "java",
      "util stream",
      "util",
      "stream",
      "referencepipeline",
      "abstractpipeline",
      "serverthread",
      "check",
      "applymove",
      "board"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/abramowitzK/Networked-Chess/commit/8db19a68b0c7d72d88bf67728fda49a672310b5c",
      "files": [
        {
          "file_name": "ChessLogic/src/Game/Board.java",
          "patch": "@@ -55,8 +55,8 @@ public void ApplyMove(Move move){\n         Position start \u003d new Position(move.GetStartX(), move.GetStartY());\n         Position end \u003d new Position(move.GetEndX(), move.GetEndY());\n         Piece temp \u003d m_boardState[start.GetX()][start.GetY()];\n-        SetPiece(start.GetX(),start.GetY(), null);\n         SetPiece(end.GetX(), end.GetY(), temp);\n+        SetPiece(start.GetX(),start.GetY(), null);\n     }\n     private void CheckApplyMove(Move move){\n         //Used on for CheckUnApplyMove which is private"
        },
        {
          "file_name": "ChessUI/src/javafx/GameBoardController.java",
          "patch": "@@ -268,6 +268,8 @@ protected Void call() throws Exception {\n                             }\n                             try {\n                                 Packet p \u003d (Packet) in.readObject();\n+                                if(p \u003d\u003d null)\n+                                    continue;\n                                 processPacket(p);\n                             } catch (SocketTimeoutException ex) {\n                                 //This is okay. Makes it so we don\u0027t hang here forever"
        }
      ]
    }
  },
  {
    "name": "Null pointer exception on CL style cups.",
    "url": "https://github.com/NexxusDrako/leagion-scorinator/issues/1",
    "description": "When scorinationg a CL style cup, Leagion will crash with a null pointer exception. The line it picks out has something to do with the first leg of said cup.\n\nI have yet to fully test, but it is easily reproduceable with the menu, I haven\u0027t tested input files yet.\n\nConsole Output: http://pastebin.com/EiCRgSTX\n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/NexxusDrako/leagion-scorinator/commit/ff9b6cfef1c31e5a782a1fc0684145a155eecfcc",
      "files": [
        {
          "file_name": ".gitignore",
          "patch": "@@ -0,0 +1 @@\n+*.class\n\\ No newline at end of file"
        },
        {
          "file_name": "In.java",
          "patch": "@@ -357,9 +357,9 @@ public static boolean done() {\n \tstack \u003d new InputStream[8];\r\n \tsp \u003d 0;\r\n \tbuf \u003d empty;\r\n-        OS \u003d Windows;\r\n+//        OS \u003d Windows;\r\n //        OS \u003d MacOS;\r\n-//        OS \u003d Unix;\r\n+        OS \u003d Unix;\r\n \tif (OS \u003d\u003d Windows) eol \u003d (char)13; else eol \u003d (char)10;\r\n }\r\n \r"
        },
        {
          "file_name": "leagion.java",
          "patch": "@@ -795,7 +795,7 @@ TMatch scorinate_match(int first, int second, boolean ha )\n     ht\u003dlookup(first);\n     at\u003dlookup(second);\n     first_leg\u003dnull;\n-    if (eliminate\u0026\u0026(home_away||home_adv)\u0026\u0026first\u003csecond)\n+    if (eliminate\u0026\u0026(home_away||home_adv))\n     {\n       first_leg\u003dget_first_leg(second, first);\n       result.first_leg\u003dfirst_leg;\n@@ -840,13 +840,46 @@ TMatch scorinate_match(int first, int second, boolean ha )\n     result.h_regtime \u003d home;\n     result.a_regtime \u003d away;\n     require_ET\u003dfalse;\n-    if (first_leg!\u003dnull)\n+    if (first_leg!\u003dnull\u0026\u0026eliminate)\n     {\n-      if (result.a_regtime+first_leg.home\u003d\u003dresult.h_regtime+first_leg.away)\n+      if(first_leg.scorination_level\u003d\u003d0)\n       {\n-        if (result.a_regtime\u003d\u003dfirst_leg.away)\n+        Out.println(\"You should not scorinate in a DeLorean!\");\n+      } else\n+      {\n+        if(first_leg.scorination_level\u003d\u003d1)\n+        {          \n+          if((first_leg.a_regtime+result.h_regtime)\u003d\u003d(first_leg.h_regtime+result.a_regtime))\n+          {\n+            if(first_leg.a_regtime\u003d\u003dresult.a_regtime)\n+            {\n+              require_ET\u003dtrue;\n+            }\n+          }\n+        } else \n         {\n-          require_ET\u003dtrue;\n+          if(first_leg.scorination_level\u003d\u003d2) //to those who use nodraws and CL-style elimination matches: WAAAAAAAAAAAAAARGH!!!! Seriously, I implement this because it is a possibility, but: WHAT ARE YOU THINKING \n+          {\n+            if((first_leg.a_et+result.h_regtime)\u003d\u003d(first_leg.h_et+result.a_regtime))\n+            {\n+              if(first_leg.a_et\u003d\u003dresult.a_regtime)\n+              {\n+                require_ET\u003dtrue;\n+              }\n+            }\n+          }else\n+          {\n+            if(first_leg.scorination_level\u003d\u003d1)\n+            {\n+              if((first_leg.a_pk+result.h_regtime)\u003d\u003d(first_leg.h_pk+result.a_regtime))\n+              {\n+                if(first_leg.a_pk\u003d\u003dresult.a_regtime)\n+                {\n+                  require_ET\u003dtrue;\n+                }\n+              }\n+            }\n+          } \n         }\n       }\n     }"
        }
      ]
    }
  },
  {
    "name": "snapshot: null pointer exception - issue list",
    "url": "https://github.com/csonuryilmaz/heybot/issues/68",
    "description": "While issue sorting by due date, we get null pointer exception if issue\u0027s due date is empty.",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/csonuryilmaz/heybot/commit/d7ee0d4f45490b0281c88ea57238858f903963d8",
      "files": [
        {
          "file_name": "heybot/scripts/release.sh",
          "patch": "@@ -1,6 +1,6 @@\n #!/bin/bash\n \n-VERSION\u003d\"1.14.7.5\"\n+VERSION\u003d\"1.14.7.6\"\n \n RELEASE_PATH\u003d\"../../release/heybot_$VERSION\"\n "
        },
        {
          "file_name": "heybot/scripts/svg/version.svg",
          "patch": "@@ -14,7 +14,7 @@\n     \u003cg fill\u003d\"#fff\" text-anchor\u003d\"middle\" font-family\u003d\"DejaVu Sans,Verdana,Geneva,sans-serif\" font-size\u003d\"11\"\u003e\n \t\u003ctext x\u003d\"25.5\" y\u003d\"15\" fill\u003d\"#010101\" fill-opacity\u003d\".3\"\u003eversion\u003c/text\u003e\n \t\u003ctext x\u003d\"25.5\" y\u003d\"14\"\u003eversion\u003c/text\u003e\n-\t\u003ctext x\u003d\"80.5\" y\u003d\"15\" fill\u003d\"#010101\" fill-opacity\u003d\".3\"\u003e1.14.7.5\u003c/text\u003e\n-\t\u003ctext x\u003d\"80.5\" y\u003d\"14\"\u003e1.14.7.5\u003c/text\u003e\n+\t\u003ctext x\u003d\"80.5\" y\u003d\"15\" fill\u003d\"#010101\" fill-opacity\u003d\".3\"\u003e1.14.7.6\u003c/text\u003e\n+\t\u003ctext x\u003d\"80.5\" y\u003d\"14\"\u003e1.14.7.6\u003c/text\u003e\n     \u003c/g\u003e\n \u003c/svg\u003e\n\\ No newline at end of file"
        },
        {
          "file_name": "heybot/src/heybot/heybot.java",
          "patch": "@@ -24,7 +24,7 @@\n public class heybot\n {\n \n-    private final static String VERSION \u003d \"1.14.7.5\";\n+    private final static String VERSION \u003d \"1.14.7.6\";\n     private static final String NEWLINE \u003d System.getProperty(\"line.separator\");\n     private static final SimpleDateFormat DATE_FORMATTER \u003d new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n "
        },
        {
          "file_name": "heybot/src/operation/Snapshot.java",
          "patch": "@@ -14,6 +14,7 @@\n import com.taskadapter.redmineapi.bean.Tracker;\n import com.taskadapter.redmineapi.bean.User;\n import java.util.Collection;\n+import java.util.Comparator;\n import java.util.Date;\n import java.util.HashMap;\n import java.util.HashSet;\n@@ -89,7 +90,7 @@ public void execute(Properties prop) throws Exception\n \t    System.out.println();\n \t    groupIssuesBySecondaryAssignee(issues, getParameterString(prop, PARAMETER_SECONDARY_ASSIGNEE, false));\n \t    System.out.println();\n-\t    java.util.Arrays.sort(issues, (o1, o2) -\u003e o1.getDueDate().compareTo(o2.getDueDate()));\n+\t    java.util.Arrays.sort(issues, new IssueDueDateComparator());\n \t    listIssues(prop, issues);\n \t    printIssuesSummary(issues);\n \t    System.out.println();\n@@ -269,15 +270,22 @@ else if (rejectedTrunkMergeStatuses.contains(status))\n \n     private void printDueDate(Issue issue, Date today)\n     {\n-\tif (issue.getDueDate().compareTo(today) \u003c 0)\n+\tif (issue.getDueDate() !\u003d null)\n \t{\n-\t    coloredPrinter.print(format(dateTimeFormatOnlyDate.format(issue.getDueDate()), 12, true), Attribute.NONE, fColorDueDateExpired, bColorDueDateExpired);\n-\t    coloredPrinter.clear();\n-\t    totalDueDateExpired++;\n+\t    if (issue.getDueDate().compareTo(today) \u003c 0)\n+\t    {\n+\t\tcoloredPrinter.print(format(dateTimeFormatOnlyDate.format(issue.getDueDate()), 12, true), Attribute.NONE, fColorDueDateExpired, bColorDueDateExpired);\n+\t\tcoloredPrinter.clear();\n+\t\ttotalDueDateExpired++;\n+\t    }\n+\t    else\n+\t    {\n+\t\tSystem.out.print(format(dateTimeFormatOnlyDate.format(issue.getDueDate()), 12, true));\n+\t    }\n \t}\n \telse\n \t{\n-\t    System.out.print(format(dateTimeFormatOnlyDate.format(issue.getDueDate()), 12, true));\n+\t    System.out.print(format(\"\", 12, true));\n \t}\n     }\n \n@@ -379,4 +387,24 @@ private UserQueue getUserQueue(HashMap\u003cInteger, UserQueue\u003e userQueues, int userI\n \treturn userQueue;\n     }\n \n+    class IssueDueDateComparator implements Comparator\u003cIssue\u003e\n+    {\n+\n+\t@Override\n+\tpublic int compare(Issue i1, Issue i2)\n+\t{\n+\t    if (i1.getDueDate() \u003d\u003d null)\n+\t    {\n+\t\treturn 1;\n+\t    }\n+\n+\t    if (i2.getDueDate() \u003d\u003d null)\n+\t    {\n+\t\treturn -1;\n+\t    }\n+\n+\t    return i1.getDueDate().compareTo(i2.getDueDate());\n+\t}\n+    }\n+\n }"
        }
      ]
    }
  },
  {
    "name": "TeamSpeak: null pointer errors when plugin is turned off",
    "url": "https://github.com/SIMRacingApps/SIMRacingApps/issues/106",
    "description": "Fix so it doesn\u0027t try to call the plugin if it is turned off. Causing null pointer Java trackback errors.\r\n\r\nReported by Andrew Starcher",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/SIMRacingApps/SIMRacingApps/commit/5bf1a9af902f1ac0d33c615a5c130eba871560d6",
      "files": [
        {
          "file_name": "documentation/SIMRacingApps_BETA-ReleaseNotes.txt",
          "patch": "@@ -6,18 +6,14 @@ For a complete list of issues completed in this version goto\n and click on either open or closed. Be sure to look at the date closed\r\n and download the BETA released after that date.\r\n \r\n-Version: 1.4_Build_BETA-2017.06.23\r\n-    1. Fixed #103 (https://github.com/SIMRacingApps/SIMRacingApps/issues/103)\r\n-       Brake Bias .5 Increment on cars that show the actual percentage, not the delta.\r\n-       \r\n-    2. Fixed #104 (https://github.com/SIMRacingApps/SIMRacingApps/issues/104)\r\n-       Standings App not working when out of car\r\n+Version: 1.4_Build_BETA-2017.06.xx\r\n+    1. Fixed #106 (https://github.com/SIMRacingApps/SIMRacingApps/issues/106)\r\n+       TeamSpeak: null pointer errors when plugin is turned off\r\n \r\n-    3. Added a small delay in the Voice Attack Profile in the spotter loops\r\n-       to cut down on CPU usage.\r\n+    2. Fixed #107 (https://github.com/SIMRacingApps/SIMRacingApps/issues/107)\r\n+       iRacing: The CameraInfo.GroupName is not quoted and can contain invalid characters\r\n+       I added quotes before the YAML is parsed.\r\n        \r\n-    4. Implemented a better SOF (Strength of field) calculation posted on the iRacing forums.\r\n-\r\n     For notes on previous BETA builds, see below.\r\n     \r\n ------------------------------------------------------------------------------------------------------\r\n@@ -54,4 +50,16 @@ Version: 1.4_Build_BETA-2017.06.23\n \r\n ****************** Previous Versions *************************\r\n \r\n-For versions prior to 1.4, see the regular release notes.\n\\ No newline at end of file\n+For versions prior to 1.4, see the regular release notes.\r\n+\r\n+1.4_Build_BETA-2017.06.23\r\n+    1. Fixed #103 (https://github.com/SIMRacingApps/SIMRacingApps/issues/103)\r\n+       Brake Bias .5 Increment on cars that show the actual percentage, not the delta.\r\n+       \r\n+    2. Fixed #104 (https://github.com/SIMRacingApps/SIMRacingApps/issues/104)\r\n+       Standings App not working when out of car\r\n+\r\n+    3. Added a small delay in the Voice Attack Profile in the spotter loops\r\n+       to cut down on CPU usage.\r\n+       \r\n+    4. Implemented a better SOF (Strength of field) calculation posted on the iRacing forums.\r"
        },
        {
          "file_name": "documentation/SIMRacingApps_ReleaseNotes.txt",
          "patch": "@@ -16,6 +16,13 @@ Version: 1.4_Build_BETA-2017.06.23\n \r\n     4. Implemented a better SOF (Strength of field) calculation posted on the iRacing forums.\r\n \r\n+    5. Fixed #106 (https://github.com/SIMRacingApps/SIMRacingApps/issues/106)\r\n+       TeamSpeak: null pointer errors when plugin is turned off\r\n+\r\n+    6. Fixed #107 (https://github.com/SIMRacingApps/SIMRacingApps/issues/107)\r\n+       iRacing: The CameraInfo.GroupName is not quoted and can contain invalid characters\r\n+       I added quotes before the YAML is parsed.\r\n+\r\n     For notes on previous versions, see below.\r\n        \r\n ------------------------------------------------------------------------------------------------------\r"
        }
      ]
    }
  },
  {
    "name": "Null Pointer Console Spam",
    "url": "https://github.com/WildBamaBoy/radix-core/issues/12",
    "description": "I keep seeing this in the console over and over and I\u0027m not sure what\u0027s up. Radix Core 2.0.1, MCA 5.0.5_1, forge 1403.\n\n---\n\n[17:51:27] [Server thread/ERROR] [RadixCore]: Unexpected exception/(Error sending sync data to client.). null\n[17:51:30] [Server thread/WARN]: Fetching addPacket for removed entity\n[17:51:55] [Server thread/ERROR] [RadixCore]: catching\njava.lang.NullPointerException\n    at radixcore.packets.PacketDataSyncReq.onMessage(PacketDataSyncReq.java:42) [PacketDataSyncReq.class:?]\n    at radixcore.packets.PacketDataSyncReq.onMessage(PacketDataSyncReq.java:11) [PacketDataSyncReq.class:?]\n    at cpw.mods.fml.common.network.simpleimpl.SimpleChannelHandlerWrapper.channelRead0(SimpleChannelHandlerWrapper.java:37) [SimpleChannelHandlerWrapper.class:?]\n    at cpw.mods.fml.common.network.simpleimpl.SimpleChannelHandlerWrapper.channelRead0(SimpleChannelHandlerWrapper.java:17) [SimpleChannelHandlerWrapper.class:?]\n    at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:98) [SimpleChannelInboundHandler.class:?]\n    at io.netty.channel.DefaultChannelHandlerContext.invokeChannelRead(DefaultChannelHandlerContext.java:337) [DefaultChannelHandlerContext.class:?]\n    at io.netty.channel.DefaultChannelHandlerContext.fireChannelRead(DefaultChannelHandlerContext.java:323) [DefaultChannelHandlerContext.class:?]\n    at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103) [MessageToMessageDecoder.class:?]\n    at io.netty.handler.codec.MessageToMessageCodec.channelRead(MessageToMessageCodec.java:111) [MessageToMessageCodec.class:?]\n    at io.netty.channel.DefaultChannelHandlerContext.invokeChannelRead(DefaultChannelHandlerContext.java:337) [DefaultChannelHandlerContext.class:?]\n    at io.netty.channel.DefaultChannelHandlerContext.fireChannelRead(DefaultChannelHandlerContext.java:323) [DefaultChannelHandlerContext.class:?]\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:785) [DefaultChannelPipeline.class:?]\n    at io.netty.channel.embedded.EmbeddedChannel.writeInbound(EmbeddedChannel.java:169) [EmbeddedChannel.class:?]\n    at cpw.mods.fml.common.network.internal.FMLProxyPacket.func_148833_a(FMLProxyPacket.java:77) [FMLProxyPacket.class:?]\n    at net.minecraft.network.NetworkManager.func_74428_b(NetworkManager.java:212) [ej.class:?]\n    at net.minecraft.network.NetworkSystem.func_151269_c(NetworkSystem.java:165) [nc.class:?]\n    at net.minecraft.server.MinecraftServer.func_71190_q(MinecraftServer.java:659) [MinecraftServer.class:?]\n    at net.minecraft.server.dedicated.DedicatedServer.func_71190_q(DedicatedServer.java:334) [lt.class:?]\n    at net.minecraft.server.MinecraftServer.func_71217_p(MinecraftServer.java:547) [MinecraftServer.class:?]\n    at net.minecraft.server.MinecraftServer.run(MinecraftServer.java:427) [MinecraftServer.class:?]\n    at net.minecraft.server.MinecraftServer$2.run(MinecraftServer.java:685) [li.class:?]\n[17:51:55] [Server thread/ERROR] [RadixCore]: Unexpected exception/(Error sending sync data to client.). null\n",
    "keywords": [
      "minecraft",
      "server",
      "mods",
      "packetdatasyncreq",
      "fml",
      "[server",
      "channel",
      "net minecraft",
      "[radixcore]",
      "fml common",
      "network",
      "netty channel",
      "common",
      "firechannelread",
      "minecraftserver",
      "simplechannelhandlerwrapper",
      "minecraft server",
      "net",
      "class",
      "]",
      "netty",
      "thread/error]",
      "defaultchannelhandlercontext",
      "io",
      "[defaultchannelhandlercontext",
      "cpw",
      "io netty",
      "cpw mods",
      "null",
      "[minecraftserver",
      "class: ]",
      "channelread"
    ],
    "code": {
      "language": "Java",
      "url": "https://github.com/WildBamaBoy/radix-core/commit/a476bc4a72b52fdfb459eff70047958ee69d4184",
      "files": [
        {
          "file_name": "src/main/java/radixcore/packets/PacketDataSyncReq.java",
          "patch": "@@ -11,7 +11,7 @@\n public class PacketDataSyncReq extends AbstractPacket implements IMessage, IMessageHandler\u003cPacketDataSyncReq, IMessage\u003e\n {\n \tprivate int entityId;\n-\t\n+\n \tpublic PacketDataSyncReq()\n \t{\n \t}\n@@ -39,16 +39,19 @@ public IMessage onMessage(PacketDataSyncReq packet, MessageContext context)\n \t\ttry\n \t\t{\n \t\t\tIWatchable watchable \u003d (IWatchable) context.getServerHandler().playerEntity.worldObj.getEntityByID(packet.entityId);\n-\t\t\tDataWatcherEx dataWatcherEx \u003d watchable.getDataWatcherEx();\n-\t\t\t\n-\t\t\treturn new PacketDataSync(packet.entityId, dataWatcherEx);\n+\n+\t\t\tif (watchable !\u003d null) //Can be null, assuming it\u0027s a client-side sync issue. Doesn\u0027t seem to affect anything.\n+\t\t\t{\n+\t\t\t\tDataWatcherEx dataWatcherEx \u003d watchable.getDataWatcherEx();\n+\t\t\t\treturn new PacketDataSync(packet.entityId, dataWatcherEx);\n+\t\t\t}\n \t\t}\n-\t\t\n+\n \t\tcatch (Throwable e)\n \t\t{\n \t\t\tRadixExcept.logErrorCatch(e, \"Error sending sync data to client.\");\n \t\t}\n-\t\t\n+\n \t\treturn null;\n \t}\n }"
        }
      ]
    }
  },
  {
    "name": "Report page: Null pointer exception when inline lists are configured but there\u0027s no data",
    "url": "https://github.com/intermine/intermine/pull/1159",
    "description": "Prevent null objects from being added to the linline list collection. \n",
    "keywords": [],
    "code": {
      "language": "Java",
      "url": "https://github.com/intermine/intermine/commit/51552ad7c4c0615593290f6b734a819752a19ab7",
      "files": [
        {
          "file_name": "intermine/web/main/src/org/intermine/web/logic/results/InlineList.java",
          "patch": "@@ -51,23 +51,28 @@ public InlineList(\n         listOfObjects \u003d new HashSet\u003cInlineListObject\u003e();\n \n         for (Object listObject : listOfListObjects) {\n-            InterMineObject interMineListObject \u003d (InterMineObject) listObject;\n-\n-            Object value \u003d null;\n-            Object id \u003d null;\n-            try {\n-                // get field values from the object\n-                value \u003d interMineListObject.getFieldValue(columnToDisplayBy);\n-                id \u003d interMineListObject.getFieldValue(\"id\");\n-            } catch (IllegalAccessException e) {\n-                e.printStackTrace();\n+            if (listObject !\u003d null) {\n+                InterMineObject interMineListObject \u003d (InterMineObject) listObject;\n+\n+                Object value \u003d null;\n+                Object id \u003d null;\n+                try {\n+                    // get field values from the object\n+                    value \u003d interMineListObject.getFieldValue(columnToDisplayBy);\n+                    id \u003d interMineListObject.getFieldValue(\"id\");\n+                } catch (IllegalAccessException e) {\n+                    e.printStackTrace();\n+                }\n+\n+                // make our InlineListObject\n+                InlineListObject inlineListObject \u003d\n+                    new InlineListObject(interMineListObject, value, id);\n+\n+                listOfObjects.add(inlineListObject);\n+            } else {\n+                // do nothing\n             }\n \n-            // make our InlineListObject\n-            InlineListObject inlineListObject \u003d\n-                new InlineListObject(interMineListObject, value, id);\n-\n-            listOfObjects.add(inlineListObject);\n         }\n     }\n "
        }
      ]
    }
  }
]